var NN=function(e){function __webpack_require__(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,o){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(e,t,o){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function resetState(){var e={documentHeight:0,maxYScroll:0,startTime:(new Date).getTime(),appLoadHasBeenReported:!1,initialized:!1,page:{}};D=Object.assign({},e)}function getDictionaryData(e){var t={};return e&&"object"===n(w.dictionary)&&"object"===n(w.dictionary[e])?(t=Object.assign({},w.dictionary[e]),b.log("Retrived dictionary data",t)):b.log("Dictionary or data for given key is not found",e),t}function getPageUrl(){var e=window.location.href;return b.log("Page url updated",e),e}function getReferrer(){var e=document.referrer;return b.log("Page referrer updated",e),e}function getTimestamp(){var e=(new Date).getTime();return b.log("Timestamp updated",e),e}function getTechData(){var e=(0,y.default)();return b.log("Technical data collected",e),e}function getPerformanceData(){var e=(0,h.default)();return b.log("Performance data collected",e),e}function updateDocumentHeight(){if(w.trackScrollDepth){var e=(0,_.getDocumentHeight)();D.documentHeight=e,b.log("Document height updated",D.documentHeight),e<=window.innerHeight&&(D.maxYScroll=window.innerHeight,b.log("Document height <= window height, scroll depth set to window height"))}}function getScrollDepth(){if(!w.trackScrollDepth)return null;var e=D.documentHeight>0?D.maxYScroll/D.documentHeight:0;return b.log("Scroll depth updated",e),e}function getTimeOnPage(){if(!w.trackTimeOnPage)return null;var e=(new Date).getTime()-D.startTime;return b.log("Time spent on the page updated",e),e}function getGUID(){if(!w.guid)return null;if((0,_.canReadLocalStorage)()&&localStorage.getItem(u.GUID_KEY)){var e=localStorage.getItem(u.GUID_KEY);return b.log("Retrivd GUID from the local storage",e),e}var t=(0,g.default)();return b.log("New GUID is generated",t),(0,_.canWriteToLocalStorage)()&&(localStorage.setItem(u.GUID_KEY,t),b.log("GUID saved to local storage",t)),t}function getSplitTestCookieValue(){if(!w.splitTestsCookie)return null;var e=document.cookie.split(";"),t=e.filter(function(e){return e.includes(w.splitTestsCookie+"=")});if(t.length>0){var o=t[0].split("=")[1]||"";return b.log("Split tests cookie found",o),o}return null}function getData(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return b.log('"type" is not specified in getData function.'),null;var o={timestamp:!0,url:!0,referrer:!0,testCookie:!0,guid:!0,techData:!0,performance:!1,scrollDepth:!0,timeOnPage:!0};o=Object.assign(o,t);var n={type:e,clientTimestamp:null,url:null,referrer:null,guid:null,splitTest:null,scrollDepth:null,timeOnPage:null,tech:{},performance:{}};return o.timestamp&&(n.clientTimestamp=getTimestamp()),o.url&&(n.url=getPageUrl()),o.referrer&&(n.referrer=getReferrer()),o.testCookie&&(n.splitTest=getSplitTestCookieValue()),o.guid&&(n.guid=getGUID()),o.techData&&(n.tech=getTechData()),o.performance&&(n.performance=getPerformanceData()),o.scrollDepth&&(updateDocumentHeight(),n.scrollDepth=getScrollDepth()),o.timeOnPage&&(n.timeOnPage=getTimeOnPage()),b.log("Data prepared",n),n}function sendQueueData(){if(0!==S.length){var e=function(e){var t=e;return w.appId&&(t={src:w.appId,data:e}),t},t=function sendThroughHTTP(t){(0,f.default)(w.endpoint,t).then(function(){b.log("Data sent to server using http req",t),S.remove(),S.length>0&&sendThroughHTTP(e(S.peek(S.types.ALL)))})};w.batching?function sendThroughBeacon(o){navigator.sendBeacon(w.endpoint,JSON.stringify(o))?(b.log("Data sent to server using beacon",o),S.remove(),S.length>0&&sendThroughBeacon(e(S.peek(S.types.CHUNK)))):t(o)}(e(S.peek(S.types.CHUNK))):t(e(S.peek(S.types.ALL)))}}function saveData(e,t){if(w.urlValidator&&!w.urlValidator())return void b.log("urlValidator found. URL is disabled.");var o={};(function(e){return e===u.TYPES.systemPerformance||!!(100*Math.random()<=w.performanceDataThrottlingPercentage&&w.reportThrottledPerformanceDataTypes.includes(e))})(e)&&(o={performance:!0});var n=getData(e,o);if(!n)return void b.log("Unable to prepare data");Object.keys(D.page).length>0&&(n.page=Object.assign({},D.page),b.log("Page property has been added to data",n)),[u.TYPES.systemEvent,u.TYPES.appEvent].includes(e)&&(n.component=Object.assign({},t),b.log("Component property has been added to data",n)),S.add(Object.assign({},n)),b.log("Data added to the queue",Object.assign({},n)),w.batching||sendQueueData()}function addViewportChangeTracking(){w.trackViewportChanges&&(window.addEventListener("resize",function(){saveData(u.TYPES.systemEvent,{name:"Viewport changed",width:window.innerWidth,height:window.innerHeight}),b.log("Viewport changed")}),b.log("Viewport change tracking started"))}function addScrollDepthTracking(){w.trackScrollDepth&&1!==D.maxYScroll&&(window.addEventListener("scroll",function(){var e=window.scrollY+window.innerHeight;e>D.maxYScroll&&(D.maxYScroll=e,b.log("Maximun Y scroll distance updated",e))}),b.log("Scroll tracking started"))}function addErrorsTracking(){window.addEventListener("error",function(e,t,o,n,r){saveData(u.TYPES.systemEvent,{name:"Error",message:e,url:t,lineNo:o,columnNo:n,error:r}),b.log("Error registered")}),b.log("Errors tracking started")}function _init(){w.lateReporting&&sendQueueData(),resetState(),w.trackDomContentLoaded&&document.addEventListener("DOMContentLoaded",function(){saveData(u.TYPES.systemDomLoaded)}),w.trackLoad&&window.addEventListener("load",function(){saveData(u.TYPES.systemLoad)}),w.trackFocus&&window.addEventListener("focus",function(){saveData(u.TYPES.systemFocus)}),window.addEventListener("blur",function(){w.trackUnfocus&&saveData(u.TYPES.systemUnfocus),w.batching&&sendQueueData()}),window.addEventListener("unload",function(){w.trackUnload&&saveData(u.TYPES.systemUnload),w.batching&&sendQueueData()}),addErrorsTracking(),addScrollDepthTracking(),addViewportChangeTracking(),D.initialized=!0}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=o(1),a=_interopRequireDefault(r),i=o(2),l=_interopRequireDefault(i),u=o(3),c=o(4),s=_interopRequireDefault(c),d=o(5),f=_interopRequireDefault(d),p=o(6),g=_interopRequireDefault(p),v=o(7),y=_interopRequireDefault(v),m=o(8),h=_interopRequireDefault(m),_=o(9),w=void 0,b=new a.default(u.LOGGER_NAMESPACE),S=void 0,D={};t.default={init:function(e){if(w=(0,s.default)(e,u.DEFAULT_CONFIG,b)._getValues(),b.log("Configuration updated. Final config:",w),!w.endpoint)return void b.log("Endpoint is not configured. Initialization has been terminated.");S=new l.default(u.QUEUE_DATA_KEY,w.lateReporting),_init()},load:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(D.initialized)if(e&&"object"===(void 0===e?"undefined":n(e))){b.log("App load received",e,t),D.appLoadHasBeenReported&&(saveData(u.TYPES.appUnload),resetState());var o={};t&&(o=getDictionaryData(t)),D.appLoadHasBeenReported=!0,D.page=Object.assign(o,e),saveData(u.TYPES.appLoad)}else b.log("Page data should be an object",e)},action:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(D.initialized)if(e&&"object"===(void 0===e?"undefined":n(e))){b.log("App action received",e,t);var o={};t&&(o=getDictionaryData(t)),saveData(u.TYPES.appEvent,Object.assign(o,e))}else b.log("Action data should be an object",e)},performance:function(){D.initialized&&saveData(u.TYPES.systemPerformance)}}},function(e,t,o){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),a=function(){function _class(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DEFAULT";_classCallCheck(this,_class),this.namespace=e,this.shouldLog=!1}return r(_class,[{key:"checkLogStatus",value:function(){var e=new URL(window.location.href),t="object"===n(e.searchParams)&&"yup"===e.searchParams.get("showNeighborLogs");this.shouldLog=t}},{key:"log",value:function(){var e;this.checkLogStatus();for(var t=arguments.length,o=Array(t),n=0;n<t;n++)o[n]=arguments[n];this.shouldLog&&(e=console).log.apply(e,[this.namespace.toUpperCase()+": "].concat(o))}}]),_class}();t.default=a},function(e,t,o){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),r=function(){function Queue(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6e4;_classCallCheck(this,Queue),this._key=e,this._store=[],this._maxDataSize=o,this.types={CHUNK:"chunk",ALL:"all",ITEM:"item"},t&&this._readLocalStorage()}return n(Queue,[{key:"_readLocalStorage",value:function(){var e=localStorage.getItem(this._key);e&&(this._store=JSON.parse(e).data)}},{key:"_updateLocalStorage",value:function(){var e=JSON.stringify({data:this._store});try{localStorage.setItem(this._key,e)}catch(e){console.error("Local storage in not avaliable. Most likely Safari Private Mode.",e)}}},{key:"add",value:function(e){this._store.push(e),this._updateLocalStorage()}},{key:"remove",value:function(){this._store.shift(),this._updateLocalStorage()}},{key:"peek",value:function(e){switch(e){default:case this.types.ITEM:return this._store[0];case this.types.ALL:var t=this._store;return this._store=[],this._store.push(t),t;case this.types.CHUNK:for(var o=[],n=0;JSON.stringify(o).length<this._maxDataSize&&n<this._store.length;)o.push(this._store[n]),n++;JSON.stringify(o).length>this._maxDataSize&&(o.pop(),n--);for(var r=0;r<n;r++)this._store.shift();return this._store.unshift(o),o}}},{key:"length",get:function(){return this._store.length}}]),Queue}();t.default=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(t.GUID_KEY="nn-guid",t.QUEUE_DATA_KEY="nn-data",t.LOGGER_NAMESPACE="Neighbor",t.TYPES={systemDomLoaded:"system:dom-content-loaded",systemLoad:"system:load",systemUnfocus:"system:unfocus",systemFocus:"system:focus",systemUnload:"system:unload",systemEvent:"system:event",systemPerformance:"system:performance",appLoad:"app:load",appUnload:"app:unload",appEvent:"app:event"}),r=window.navigator&&window.navigator.sendBeacon&&"function"==typeof window.navigator.sendBeacon;t.DEFAULT_CONFIG={appId:{value:null,allowOverwrite:!0,type:"string"},guid:{value:!0,allowOverwrite:!0,type:"boolean"},batching:{value:r,allowOverwrite:!0,type:"boolean",modifier:function(e){return!(!e||!r)}},dictionary:{value:null,allowOverwrite:!0,type:"object"},splitTestsCookie:{value:null,allowOverwrite:!0,type:["string","number"]},trackDomContentLoaded:{value:!0,allowOverwrite:!0,type:"boolean"},trackLoad:{value:!0,allowOverwrite:!0,type:"boolean"},trackFocus:{value:!0,allowOverwrite:!0,type:"boolean"},trackUnfocus:{value:!0,allowOverwrite:!0,type:"boolean"},trackUnload:{value:!0,allowOverwrite:!0,type:"boolean"},trackViewportChanges:{value:!0,allowOverwrite:!0,type:"boolean"},trackScrollDepth:{value:!0,allowOverwrite:!0,type:"boolean"},trackTimeOnPage:{value:!0,allowOverwrite:!0,type:"boolean"},lateReporting:{value:!0,allowOverwrite:!0,type:"boolean"},endpoint:{value:null,allowOverwrite:!0,type:"string"},reportThrottledPerformanceDataTypes:{value:[n.systemLoad],allowOverwrite:!0,type:"array",modifier:function(e){var t=[];return e.forEach(function(e){Object.values(n).includes(e)&&!t.includes(e)&&t.push(e)}),t}},performanceDataThrottlingPercentage:{value:1,allowOverwrite:!0,type:"number",modifier:function(e){return e<0?0:e>100?100:e}},urlValidator:{value:null,allowOverwrite:!0,type:"function"},_getValues:function(){var e=this,t={};return Object.keys(this).filter(function(e){return"_getValues"!==e}).forEach(function(o){t[o]=e[o].value}),t}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e,t,o){var r=Object.assign({},t),a=function(e,t){var o=function(e,t){return"array"===t?Array.isArray(e):(void 0===e?"undefined":n(e))===t};return"string"==typeof t?o(e,t):!!Array.isArray(t)&&t.some(function(e){return o(e)})},i=function(e,t){return"object"===(void 0===e?"undefined":n(e))?JSON.stringify(e)===JSON.stringify(t):"function"!=typeof e&&e===t};return Object.keys(e).forEach(function(n){if(n.startsWith("_")||void 0===t[n])return void o.log(n+" is not a valid config prop.");if(!0!==t[n].allowOverwrite)return void o.log(n+" config prop is read-only.");if(!a(e[n],t[n].type))return void o.log(n+" config prop has invalid type. Allowed types: "+t[n].type+".");if("function"==typeof t[n].validator&&!t[n].validator(e[n]))return void o.log(n+" config prop has not passed custom property validation check. Validator: "+t[n].validator+".");if(i(e[n],t[n].value))return void o.log(n+" config prop value is the same as current config value.");if("function"==typeof t[n].modifier){var l=t[n].modifier(e[n]);o.log(n+" user config prop value has been modified by modifier. New value: "+l+". Old value: "+r[n]+"."),e[n]=l}o.log(n+" config prop value has been updated. New value: "+e[n]+". Old value: "+r[n]+"."),r[n]={value:e[n]}}),r}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return new Promise(function(o,n){var r=new XMLHttpRequest;r.open("POST",e,!0),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(t)),r.onload=function(){200===r.status?o(r.response):n(r.Error)}})}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=Math.random();"undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&(o=parseFloat(crypto.getRandomValues(new Uint32Array(2)).join(""))/1e20);var n=(e+16*o)%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{userAgent:navigator.userAgent,vendor:navigator.vendor,platform:navigator.platform,appCodeName:navigator.appCodeName,appName:navigator.appName,appVersion:navigator.appVersion,cookieEnabled:navigator.cookieEnabled,doNotTrack:navigator.doNotTrack,language:navigator.language,languages:navigator.languages,onLine:navigator.onLine,connection:navigator.connection||navigator.mozConnection||navigator.webkitConnection,screenWidth:window.innerWidth,screenHeight:window.innerHeight}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(){var e={};return window.performance?("object"===n(window.performance.timing)&&(e.page=window.performance.timing),"function"==typeof window.performance.getEntriesByType&&(e.resources=window.performance.getEntriesByType("resource"),e.paint=window.performance.getEntriesByType("paint")),e):e}},function(e,t,o){"use strict";function canReadLocalStorage(){return"undefined"!=typeof localStorage&&"function"==typeof localStorage.getItem}function canWriteToLocalStorage(){return"undefined"!=typeof localStorage&&"function"==typeof localStorage.setItem}function getDocumentHeight(){var e=document,t=e.body,o=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,o.clientHeight,o.scrollHeight,o.offsetHeight)}Object.defineProperty(t,"__esModule",{value:!0}),t.canReadLocalStorage=canReadLocalStorage,t.canWriteToLocalStorage=canWriteToLocalStorage,t.getDocumentHeight=getDocumentHeight}]);