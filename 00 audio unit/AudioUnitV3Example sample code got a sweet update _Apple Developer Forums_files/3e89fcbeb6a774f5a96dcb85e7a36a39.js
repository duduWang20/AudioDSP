goog.provide("jive.soy.spotlight.define");goog.require("soy");goog.require("soydata");goog.require("soy.StringBuilder");jive.soy.spotlight.define=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.spotlight.define");jive.soy.spotlight.define=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.noResults");jive.integration.tiles.viewstyle.noResults=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<p class="noContent">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3b04"),[])),"</p>");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.controls");
jive.integration.tiles.viewstyle.controls=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-carousel-controls"><a href="#" class="j-prev js-prev-slide" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k3ff5"),[])),'"><span class="jive-icon-med jive-icon-lb-prev inv"></span><span class="jive-icon-med jive-icon-lb-prev-dk init"></span></a><span class="j-carousel-counter"><em class="js-current-slide">1</em><em>/',soy.$$escapeHtml(opt_data.totalSlideNumber),
'</em></span><a href="#" class="j-next js-next-slide" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k3ff4"),[])),'"><span class="jive-icon-med jive-icon-lb-next inv"></span><span class="jive-icon-med jive-icon-lb-next-dk init"></span></a></div>');return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.slide");
jive.integration.tiles.viewstyle.slide=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-cSlide js-slide-body"><div class="j-slide-ratio-box"><img class="j-slide-blank" src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,"/9.0.2.8500fd4/","","/images/spacer/4by3.png"))),'" alt=""><span class="j-slideImgLink">',opt_data.slide.titleLink&&opt_data.slide.titleLink!=""?'<a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.slide.titleLink))+
'">':"",'<img class="j-slide-image" ',opt_data.slide.image?'src="'+soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,opt_data.slide.image))+'"':"",' alt="',soy.$$escapeHtmlAttribute(opt_data.slide.titleText),'" ',!opt_data.slide.image?' style="display: none"':""," />",opt_data.slide.titleLink&&opt_data.slide.titleLink!=""?"</a>":"",'</span></div><div class="j-slideInfo"><div class="j-carousel-slideinfo-bg"></div><h3>',opt_data.slide.titleLink&&opt_data.slide.titleLink!=""?'<a href="'+
soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.slide.titleLink))+'" class="j-slideTextLink">'+soy.$$escapeHtml(opt_data.slide.titleText)+"</a>":soy.$$escapeHtml(opt_data.slide.titleText),"</h3>",opt_data.slide.description&&opt_data.slide.description!=""?'<div class="j-slide-caption">'+soy.$$changeNewlineToBr(soy.$$escapeHtml(opt_data.slide.description))+"</div>":"","</div></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.slideList");
jive.integration.tiles.viewstyle.slideList=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<ul class="j-cSlides js-main-slide clearfix"><li class="j-slide-item clearfix">');jive.integration.tiles.viewstyle.slide({slide:opt_data.slides[0]},output);output.append('</li></ul><div class="j-cPreview" ',!opt_data.previewPane?'style="display:none"':"",'><a href="#" class="j-prev js-prev-slide" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k3ff5"),[])),
'"><span class="jive-icon-med jive-icon-lb-prev-dk"></span></a><ul class="j-cSlidePreview js-slides clearfix">');var slideList13=opt_data.slides;var slideListLen13=slideList13.length;for(var slideIndex13=0;slideIndex13<slideListLen13;slideIndex13++){var slideData13=slideList13[slideIndex13];output.append('<li class="j-slide-item js-slide',slideIndex13==0?" j-active":"",'" data-index="',soy.$$escapeHtmlAttribute(slideIndex13),'">');jive.integration.tiles.viewstyle.slide({slide:slideData13},output);
output.append("</li>")}output.append('</ul><a href="#" class="j-next js-next-slide" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k3ff4"),[])),'"><span class="jive-icon-med jive-icon-lb-next-dk"></span></a></div>');return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.carouselbody");jive.integration.tiles.viewstyle.carouselbody=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.slides.length>1)jive.integration.tiles.viewstyle.controls({totalSlideNumber:opt_data.slides.length},output);jive.integration.tiles.viewstyle.slideList(opt_data,output);return opt_sb?"":output.toString()};
;
/*
 * jQuery UI Effects Slide 1.9.2
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slide-effect/
 *
 * Depends:
 * @depends path=/resources/scripts/jquery/ui/jquery.ui.effect.js
 */
(function(a,b){a.effects.effect.slide=function(e,i){var f=a(this),k=["position","top","bottom","left","right","width","height"],j=a.effects.setMode(f,e.mode||"show"),m=j==="show",l=e.direction||"left",g=(l==="up"||l==="down")?"top":"left",d=(l==="up"||l==="left"),c,h={};a.effects.save(f,k);f.show();c=e.distance||f[g==="top"?"outerHeight":"outerWidth"](true);a.effects.createWrapper(f).css({overflow:"hidden"});if(m){f.css(g,d?(isNaN(c)?"-"+c:-c):c)}h[g]=(m?(d?"+=":"-="):(d?"-=":"+="))+c;f.animate(h,{queue:false,duration:e.duration,easing:e.easing,complete:function(){if(j==="hide"){f.hide()}a.effects.restore(f,k);a.effects.removeWrapper(f);i()}})}})(jQuery);
;
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports!=="undefined"){module.exports=a(require("jquery"))}else{a(jQuery)}}}(function(a){var b=window.Slick||{};b=(function(){var c=0;function d(g,i){var f=this,h,e;f.defaults={accessibility:true,adaptiveHeight:false,appendArrows:a(g),appendDots:a(g),arrows:true,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next">Next</button>',autoplay:false,autoplaySpeed:3000,centerMode:false,centerPadding:"50px",cssEase:"ease",customPaging:function(k,j){return'<button type="button" data-role="none">'+(j+1)+"</button>"},dots:false,dotsClass:"slick-dots",draggable:true,easing:"linear",fade:false,focusOnSelect:false,infinite:true,initialSlide:0,lazyLoad:"ondemand",onBeforeChange:null,onAfterChange:null,onInit:null,onReInit:null,onSetPosition:null,pauseOnHover:true,pauseOnDotsHover:false,respondTo:"window",responsive:null,rtl:false,slide:"div",slidesToShow:1,slidesToScroll:1,speed:500,swipe:true,swipeToSlide:false,touchMove:true,touchThreshold:5,useCSS:true,variableWidth:false,vertical:false,waitForAnimate:true};f.initials={animating:false,dragging:false,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:false,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:false};a.extend(f,f.initials);f.activeBreakpoint=null;f.animType=null;f.animProp=null;f.breakpoints=[];f.breakpointSettings=[];f.cssTransitions=false;f.paused=false;f.positionProp=null;f.respondTo=null;f.shouldClick=true;f.$slider=a(g);f.$slidesCache=null;f.transformType=null;f.transitionType=null;f.windowWidth=0;f.windowTimer=null;f.options=a.extend({},f.defaults,i);f.currentSlide=f.options.initialSlide;f.originalSettings=f.options;h=f.options.responsive||null;if(h&&h.length>-1){f.respondTo=f.options.respondTo||"window";for(e in h){if(h.hasOwnProperty(e)){f.breakpoints.push(h[e].breakpoint);f.breakpointSettings[h[e].breakpoint]=h[e].settings}}f.breakpoints.sort(function(k,j){return j-k})}f.autoPlay=a.proxy(f.autoPlay,f);f.autoPlayClear=a.proxy(f.autoPlayClear,f);f.changeSlide=a.proxy(f.changeSlide,f);f.clickHandler=a.proxy(f.clickHandler,f);f.selectHandler=a.proxy(f.selectHandler,f);f.setPosition=a.proxy(f.setPosition,f);f.swipeHandler=a.proxy(f.swipeHandler,f);f.dragHandler=a.proxy(f.dragHandler,f);f.keyHandler=a.proxy(f.keyHandler,f);f.autoPlayIterator=a.proxy(f.autoPlayIterator,f);f.instanceUid=c++;f.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/;f.init();f.checkResponsive()}return d}());b.prototype.addSlide=function(c,e,f){var d=this;if(typeof(e)==="boolean"){f=e;e=null}else{if(e<0||(e>=d.slideCount)){return false}}d.unload();if(typeof(e)==="number"){if(e===0&&d.$slides.length===0){a(c).appendTo(d.$slideTrack)}else{if(f){a(c).insertBefore(d.$slides.eq(e))}else{a(c).insertAfter(d.$slides.eq(e))}}}else{if(f===true){a(c).prependTo(d.$slideTrack)}else{a(c).appendTo(d.$slideTrack)}}d.$slides=d.$slideTrack.children(this.options.slide);d.$slideTrack.children(this.options.slide).detach();d.$slideTrack.append(d.$slides);d.$slides.each(function(g,h){a(h).attr("index",g)});d.$slidesCache=d.$slides;d.reinit()};b.prototype.animateSlide=function(g,f){var e={},d=this;if(d.options.slidesToShow===1&&d.options.adaptiveHeight===true&&d.options.vertical===false){var c=d.$slides.eq(d.currentSlide).outerHeight(true);d.$list.animate({height:c},d.options.speed)}if(d.options.rtl===true&&d.options.vertical===false){g=-g}if(d.transformsEnabled===false){if(d.options.vertical===false){d.$slideTrack.animate({left:g},d.options.speed,d.options.easing,f)}else{d.$slideTrack.animate({top:g},d.options.speed,d.options.easing,f)}}else{if(d.cssTransitions===false){a({animStart:d.currentLeft}).animate({animStart:g},{duration:d.options.speed,easing:d.options.easing,step:function(h){if(d.options.vertical===false){e[d.animType]="translate("+h+"px, 0px)";d.$slideTrack.css(e)}else{e[d.animType]="translate(0px,"+h+"px)";d.$slideTrack.css(e)}},complete:function(){if(f){f.call()}}})}else{d.applyTransition();if(d.options.vertical===false){e[d.animType]="translate3d("+g+"px, 0px, 0px)"}else{e[d.animType]="translate3d(0px,"+g+"px, 0px)"}d.$slideTrack.css(e);if(f){setTimeout(function(){d.disableTransition();f.call()},d.options.speed)}}}};b.prototype.asNavFor=function(e){var d=this,c=d.options.asNavFor!=null?a(d.options.asNavFor).getSlick():null;if(c!=null){c.slideHandler(e,true)}};b.prototype.applyTransition=function(c){var d=this,e={};if(d.options.fade===false){e[d.transitionType]=d.transformType+" "+d.options.speed+"ms "+d.options.cssEase}else{e[d.transitionType]="opacity "+d.options.speed+"ms "+d.options.cssEase}if(d.options.fade===false){d.$slideTrack.css(e)}else{d.$slides.eq(c).css(e)}};b.prototype.autoPlay=function(){var c=this;if(c.autoPlayTimer){clearInterval(c.autoPlayTimer)}if(c.slideCount>=c.options.slidesToShow&&c.paused!==true){c.autoPlayTimer=setInterval(c.autoPlayIterator,c.options.autoplaySpeed)}};b.prototype.autoPlayClear=function(){var c=this;if(c.autoPlayTimer){clearInterval(c.autoPlayTimer)}};b.prototype.autoPlayIterator=function(){var c=this;if(c.options.infinite===false){if(c.direction===1){if((c.currentSlide+1)===c.slideCount-1){c.direction=0}c.slideHandler(c.currentSlide+c.options.slidesToScroll)}else{if((c.currentSlide-1===0)){c.direction=1}c.slideHandler(c.currentSlide-c.options.slidesToScroll)}}else{c.slideHandler(c.currentSlide+c.options.slidesToScroll)}};b.prototype.buildArrows=function(){var c=this;if(c.options.arrows===true&&c.slideCount>c.options.slidesToShow){c.$prevArrow=a(c.options.prevArrow);c.$nextArrow=a(c.options.nextArrow);if(c.htmlExpr.test(c.options.prevArrow)){c.$prevArrow.appendTo(c.options.appendArrows)}if(c.htmlExpr.test(c.options.nextArrow)){c.$nextArrow.appendTo(c.options.appendArrows)}if(c.options.infinite!==true){c.$prevArrow.addClass("slick-disabled")}}};b.prototype.buildDots=function(){var d=this,e,c;if(d.options.dots===true&&d.slideCount>d.options.slidesToShow){c='<ul class="'+d.options.dotsClass+'">';for(e=0;e<=d.getDotCount();e+=1){c+="<li>"+d.options.customPaging.call(this,d,e)+"</li>"}c+="</ul>";d.$dots=a(c).appendTo(d.options.appendDots);d.$dots.find("li").first().addClass("slick-active")}};b.prototype.buildOut=function(){var c=this;c.$slides=c.$slider.children(c.options.slide+":not(.slick-cloned)").addClass("slick-slide");c.slideCount=c.$slides.length;c.$slides.each(function(d,e){a(e).attr("index",d)});c.$slidesCache=c.$slides;c.$slider.addClass("slick-slider");c.$slideTrack=(c.slideCount===0)?a('<div class="slick-track"/>').appendTo(c.$slider):c.$slides.wrapAll('<div class="slick-track"/>').parent();c.$list=c.$slideTrack.wrap('<div class="slick-list"/>').parent();c.$slideTrack.css("opacity",0);if(c.options.centerMode===true){c.options.slidesToScroll=1}a("img[data-lazy]",c.$slider).not("[src]").addClass("slick-loading");c.setupInfinite();c.buildArrows();c.buildDots();c.updateDots();if(c.options.accessibility===true){c.$list.prop("tabIndex",0)}c.setSlideClasses(typeof this.currentSlide==="number"?this.currentSlide:0);if(c.options.draggable===true){c.$list.addClass("draggable")}};b.prototype.checkResponsive=function(){var d=this,c,h,g;var f=d.$slider.width();var e=window.innerWidth||a(window).width();if(d.respondTo==="window"){g=e}else{if(d.respondTo==="slider"){g=f}else{if(d.respondTo==="min"){g=Math.min(e,f)}}}if(d.originalSettings.responsive&&d.originalSettings.responsive.length>-1&&d.originalSettings.responsive!==null){h=null;for(c in d.breakpoints){if(d.breakpoints.hasOwnProperty(c)){if(g<d.breakpoints[c]){h=d.breakpoints[c]}}}if(h!==null){if(d.activeBreakpoint!==null){if(h!==d.activeBreakpoint){d.activeBreakpoint=h;d.options=a.extend({},d.originalSettings,d.breakpointSettings[h]);d.refresh()}}else{d.activeBreakpoint=h;d.options=a.extend({},d.originalSettings,d.breakpointSettings[h]);d.refresh()}}else{if(d.activeBreakpoint!==null){d.activeBreakpoint=null;d.options=d.originalSettings;d.refresh()}}}};b.prototype.changeSlide=function(d,c){var m=this,g=a(d.target),j,e,i,l,f;g.is("a")&&d.preventDefault();i=(m.slideCount%m.options.slidesToScroll!==0);j=i?0:(m.slideCount-m.currentSlide)%m.options.slidesToScroll;switch(d.data.message){case"previous":e=j===0?m.options.slidesToScroll:m.options.slidesToShow-j;if(m.slideCount>=m.options.slidesToShow){m.slideHandler(m.currentSlide-e,false,c)}break;case"next":e=j===0?m.options.slidesToScroll:j;if(m.slideCount>=m.options.slidesToShow){m.slideHandler(m.currentSlide+e,false,c)}break;case"index":var k=d.data.index===0?0:d.data.index||a(d.target).parent().index()*m.options.slidesToScroll;l=m.getNavigableIndexes();f=0;if(l[k]&&l[k]===k){if(k>l[l.length-1]){k=l[l.length-1]}else{for(var h in l){if(k<l[h]){k=f;break}f=l[h]}}}m.slideHandler(k,false,c);default:return}};b.prototype.clickHandler=function(d){var c=this;if(c.shouldClick===false){d.stopImmediatePropagation();d.stopPropagation();d.preventDefault()}};b.prototype.destroy=function(){var c=this;c.autoPlayClear();c.touchObject={};a(".slick-cloned",c.$slider).remove();if(c.$dots){c.$dots.remove()}if(c.$prevArrow&&(typeof c.options.prevArrow!=="object")){c.$prevArrow.remove()}if(c.$nextArrow&&(typeof c.options.nextArrow!=="object")){c.$nextArrow.remove()}if(c.$slides.parent().hasClass("slick-track")){c.$slides.unwrap().unwrap()}c.$slides.removeClass("slick-slide slick-active slick-center slick-visible").removeAttr("index").css({position:"",left:"",top:"",zIndex:"",opacity:"",width:""});c.$slider.removeClass("slick-slider");c.$slider.removeClass("slick-initialized");c.$list.off(".slick");a(window).off(".slick-"+c.instanceUid);a(document).off(".slick-"+c.instanceUid)};b.prototype.disableTransition=function(c){var d=this,e={};e[d.transitionType]="";if(d.options.fade===false){d.$slideTrack.css(e)}else{d.$slides.eq(c).css(e)}};b.prototype.fadeSlide=function(d,e,f){var c=this;if(c.cssTransitions===false){c.$slides.eq(e).css({zIndex:1000});c.$slides.eq(e).animate({opacity:1},c.options.speed,c.options.easing,f);c.$slides.eq(d).animate({opacity:0},c.options.speed,c.options.easing)}else{c.applyTransition(e);c.applyTransition(d);c.$slides.eq(e).css({opacity:1,zIndex:1000});c.$slides.eq(d).css({opacity:0});if(f){setTimeout(function(){c.disableTransition(e);c.disableTransition(d);f.call()},c.options.speed)}}};b.prototype.filterSlides=function(d){var c=this;if(d!==null){c.unload();c.$slideTrack.children(this.options.slide).detach();c.$slidesCache.filter(d).appendTo(c.$slideTrack);c.reinit()}};b.prototype.getCurrent=function(){var c=this;return c.currentSlide};b.prototype.getDotCount=function(){var d=this;var f=0;var c=0;var e=0;if(d.options.infinite===true){e=Math.ceil(d.slideCount/d.options.slidesToScroll)}else{while(f<d.slideCount){++e;f=c+d.options.slidesToShow;c+=d.options.slidesToScroll<=d.options.slidesToShow?d.options.slidesToScroll:d.options.slidesToShow}}return e-1};b.prototype.getLeft=function(f){var d=this,i,e,c=0,h,g;d.slideOffset=0;e=d.$slides.first().outerHeight();if(d.options.infinite===true){if(d.slideCount>d.options.slidesToShow){d.slideOffset=(d.slideWidth*d.options.slidesToShow)*-1;c=(e*d.options.slidesToShow)*-1}if(d.slideCount%d.options.slidesToScroll!==0){if(f+d.options.slidesToScroll>d.slideCount&&d.slideCount>d.options.slidesToShow){if(f>d.slideCount){d.slideOffset=((d.options.slidesToShow-(f-d.slideCount))*d.slideWidth)*-1;c=((d.options.slidesToShow-(f-d.slideCount))*e)*-1}else{d.slideOffset=((d.slideCount%d.options.slidesToScroll)*d.slideWidth)*-1;c=((d.slideCount%d.options.slidesToScroll)*e)*-1}}}}else{if(f+d.options.slidesToShow>d.slideCount){d.slideOffset=((f+d.options.slidesToShow)-d.slideCount)*d.slideWidth;c=((f+d.options.slidesToShow)-d.slideCount)*e}}if(d.slideCount<=d.options.slidesToShow){d.slideOffset=0;c=0}if(d.options.centerMode===true&&d.options.infinite===true){d.slideOffset+=d.slideWidth*Math.floor(d.options.slidesToShow/2)-d.slideWidth}else{if(d.options.centerMode===true){d.slideOffset=0;d.slideOffset+=d.slideWidth*Math.floor(d.options.slidesToShow/2)}}if(d.options.vertical===false){i=((f*d.slideWidth)*-1)+d.slideOffset}else{i=((f*e)*-1)+c}if(d.options.variableWidth===true){if(d.slideCount<=d.options.slidesToShow||d.options.infinite===false){g=d.$slideTrack.children(".slick-slide").eq(f)}else{g=d.$slideTrack.children(".slick-slide").eq(f+d.options.slidesToShow)}i=g[0]?g[0].offsetLeft*-1:0;if(d.options.centerMode===true){if(d.options.infinite===false){g=d.$slideTrack.children(".slick-slide").eq(f)}else{g=d.$slideTrack.children(".slick-slide").eq(f+d.options.slidesToShow+1)}i=g[0]?g[0].offsetLeft*-1:0;i+=(d.$list.width()-g.outerWidth())/2}}return i};b.prototype.getNavigableIndexes=function(){var e=this;var f=0;var c=0;var d=[];while(f<e.slideCount){d.push(f);f=c+e.options.slidesToScroll;c+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow}return d};b.prototype.getSlideCount=function(){var d=this,c;if(d.options.swipeToSlide===true){var e=null;d.$slideTrack.find(".slick-slide").each(function(g,f){if(f.offsetLeft+(a(f).outerWidth()/2)>(d.swipeLeft*-1)){e=f;return false}});c=Math.abs(a(e).attr("index")-d.currentSlide);return c}else{return d.options.slidesToScroll}};b.prototype.init=function(){var c=this;if(!a(c.$slider).hasClass("slick-initialized")){a(c.$slider).addClass("slick-initialized");c.buildOut();c.setProps();c.startLoad();c.loadSlider();c.initializeEvents();c.updateArrows();c.updateDots()}if(c.options.onInit!==null){c.options.onInit.call(this,c)}};b.prototype.initArrowEvents=function(){var c=this;if(c.options.arrows===true&&c.slideCount>c.options.slidesToShow){c.$prevArrow.on("click.slick",{message:"previous"},c.changeSlide);c.$nextArrow.on("click.slick",{message:"next"},c.changeSlide)}};b.prototype.initDotEvents=function(){var c=this;if(c.options.dots===true&&c.slideCount>c.options.slidesToShow){a("li",c.$dots).on("click.slick",{message:"index"},c.changeSlide)}if(c.options.dots===true&&c.options.pauseOnDotsHover===true&&c.options.autoplay===true){a("li",c.$dots).on("mouseenter.slick",function(){c.paused=true;c.autoPlayClear()}).on("mouseleave.slick",function(){c.paused=false;c.autoPlay()})}};b.prototype.initializeEvents=function(){var c=this;c.initArrowEvents();c.initDotEvents();c.$list.on("touchstart.slick mousedown.slick",{action:"start"},c.swipeHandler);c.$list.on("touchmove.slick mousemove.slick",{action:"move"},c.swipeHandler);c.$list.on("touchend.slick mouseup.slick",{action:"end"},c.swipeHandler);c.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},c.swipeHandler);c.$list.on("click.slick",c.clickHandler);if(c.options.pauseOnHover===true&&c.options.autoplay===true){c.$list.on("mouseenter.slick",function(){c.paused=true;c.autoPlayClear()});c.$list.on("mouseleave.slick",function(){c.paused=false;c.autoPlay()})}if(c.options.accessibility===true){c.$list.on("keydown.slick",c.keyHandler)}if(c.options.focusOnSelect===true){a(c.options.slide,c.$slideTrack).on("click.slick",c.selectHandler)}a(window).on("orientationchange.slick.slick-"+c.instanceUid,function(){c.checkResponsive();c.setPosition()});a(window).on("resize.slick.slick-"+c.instanceUid,function(){if(a(window).width()!==c.windowWidth){clearTimeout(c.windowDelay);c.windowDelay=window.setTimeout(function(){c.windowWidth=a(window).width();c.checkResponsive();c.setPosition()},50)}});a("*[draggable!=true]",c.$slideTrack).on("dragstart",function(d){d.preventDefault()});a(window).on("load.slick.slick-"+c.instanceUid,c.setPosition);a(document).on("ready.slick.slick-"+c.instanceUid,c.setPosition)};b.prototype.initUI=function(){var c=this;if(c.options.arrows===true&&c.slideCount>c.options.slidesToShow){c.$prevArrow.show();c.$nextArrow.show()}if(c.options.dots===true&&c.slideCount>c.options.slidesToShow){c.$dots.show()}if(c.options.autoplay===true){c.autoPlay()}};b.prototype.keyHandler=function(d){var c=this;if(d.keyCode===37&&c.options.accessibility===true){c.changeSlide({data:{message:"previous"}})}else{if(d.keyCode===39&&c.options.accessibility===true){c.changeSlide({data:{message:"next"}})}}};b.prototype.lazyLoad=function(){var e=this,c,h,g,f;function d(i){a("img[data-lazy]",i).each(function(){var j=a(this),k=a(this).attr("data-lazy");j.load(function(){j.animate({opacity:1},200)}).css({opacity:0}).attr("src",k).removeAttr("data-lazy").removeClass("slick-loading")})}if(e.options.centerMode===true){if(e.options.infinite===true){g=e.currentSlide+(e.options.slidesToShow/2+1);f=g+e.options.slidesToShow+2}else{g=Math.max(0,e.currentSlide-(e.options.slidesToShow/2+1));f=2+(e.options.slidesToShow/2+1)+e.currentSlide}}else{g=e.options.infinite?e.options.slidesToShow+e.currentSlide:e.currentSlide;f=g+e.options.slidesToShow;if(e.options.fade===true){if(g>0){g--}if(f<=e.slideCount){f++}}}c=e.$slider.find(".slick-slide").slice(g,f);d(c);if(e.slideCount<=e.options.slidesToShow){h=e.$slider.find(".slick-slide");d(h)}else{if(e.currentSlide>=e.slideCount-e.options.slidesToShow){h=e.$slider.find(".slick-cloned").slice(0,e.options.slidesToShow);d(h)}else{if(e.currentSlide===0){h=e.$slider.find(".slick-cloned").slice(e.options.slidesToShow*-1);d(h)}}}};b.prototype.loadSlider=function(){var c=this;c.setPosition();c.$slideTrack.css({opacity:1});c.$slider.removeClass("slick-loading");c.initUI();if(c.options.lazyLoad==="progressive"){c.progressiveLazyLoad()}};b.prototype.postSlide=function(d){var c=this;if(c.options.onAfterChange!==null){c.options.onAfterChange.call(this,c,d)}c.animating=false;c.setPosition();c.swipeLeft=null;if(c.options.autoplay===true&&c.paused===false){c.autoPlay()}};b.prototype.progressiveLazyLoad=function(){var d=this,c,e;c=a("img[data-lazy]",d.$slider).length;if(c>0){e=a("img[data-lazy]",d.$slider).first();e.attr("src",e.attr("data-lazy")).removeClass("slick-loading").load(function(){e.removeAttr("data-lazy");d.progressiveLazyLoad()}).error(function(){e.removeAttr("data-lazy");d.progressiveLazyLoad()})}};b.prototype.refresh=function(){var c=this,d=c.currentSlide;c.destroy();a.extend(c,c.initials);c.init();c.changeSlide({data:{message:"index",index:d,}},true)};b.prototype.reinit=function(){var c=this;c.$slides=c.$slideTrack.children(c.options.slide).addClass("slick-slide");c.slideCount=c.$slides.length;if(c.currentSlide>=c.slideCount&&c.currentSlide!==0){c.currentSlide=c.currentSlide-c.options.slidesToScroll}if(c.slideCount<=c.options.slidesToShow){c.currentSlide=0}c.setProps();c.setupInfinite();c.buildArrows();c.updateArrows();c.initArrowEvents();c.buildDots();c.updateDots();c.initDotEvents();if(c.options.focusOnSelect===true){a(c.options.slide,c.$slideTrack).on("click.slick",c.selectHandler)}c.setSlideClasses(0);c.setPosition();if(c.options.onReInit!==null){c.options.onReInit.call(this,c)}};b.prototype.removeSlide=function(d,f,e){var c=this;if(typeof(d)==="boolean"){f=d;d=f===true?0:c.slideCount-1}else{d=f===true?--d:d}if(c.slideCount<1||d<0||d>c.slideCount-1){return false}c.unload();if(e===true){c.$slideTrack.children().remove()}else{c.$slideTrack.children(this.options.slide).eq(d).remove()}c.$slides=c.$slideTrack.children(this.options.slide);c.$slideTrack.children(this.options.slide).detach();c.$slideTrack.append(c.$slides);c.$slidesCache=c.$slides;c.reinit()};b.prototype.setCSS=function(d){var e=this,f={},c,g;if(e.options.rtl===true){d=-d}c=e.positionProp=="left"?d+"px":"0px";g=e.positionProp=="top"?d+"px":"0px";f[e.positionProp]=d;if(e.transformsEnabled===false){e.$slideTrack.css(f)}else{f={};if(e.cssTransitions===false){f[e.animType]="translate("+c+", "+g+")";e.$slideTrack.css(f)}else{f[e.animType]="translate3d("+c+", "+g+", 0px)";e.$slideTrack.css(f)}}};b.prototype.setDimensions=function(){var d=this;if(d.options.vertical===false){if(d.options.centerMode===true){d.$list.css({padding:("0px "+d.options.centerPadding)})}}else{d.$list.height(d.$slides.first().outerHeight(true)*d.options.slidesToShow);if(d.options.centerMode===true){d.$list.css({padding:(d.options.centerPadding+" 0px")})}}d.listWidth=d.$list.width();d.listHeight=d.$list.height();if(d.options.vertical===false&&d.options.variableWidth===false){d.slideWidth=Math.ceil(d.listWidth/d.options.slidesToShow);d.$slideTrack.width(Math.ceil((d.slideWidth*d.$slideTrack.children(".slick-slide").length))+d.slideWidth)}else{if(d.options.variableWidth===true){var c=0;d.slideWidth=Math.ceil(d.listWidth/d.options.slidesToShow);d.$slideTrack.children(".slick-slide").each(function(){c+=Math.ceil(a(this).outerWidth(true))});d.$slideTrack.width(Math.ceil(c)+1)}else{d.slideWidth=Math.ceil(d.listWidth);d.$slideTrack.height(Math.ceil((d.$slides.first().outerHeight(true)*d.$slideTrack.children(".slick-slide").length)))}}var e=d.$slides.first().outerWidth(true)-d.$slides.first().width();if(d.options.variableWidth===false){d.$slideTrack.children(".slick-slide").width(d.slideWidth-e)}};b.prototype.setFade=function(){var c=this,d;c.$slides.each(function(e,f){d=(c.slideWidth*e)*-1;if(c.options.rtl===true){a(f).css({position:"relative",right:d,top:0,zIndex:800,opacity:0})}else{a(f).css({position:"relative",left:d,top:0,zIndex:800,opacity:0})}});c.$slides.eq(c.currentSlide).css({zIndex:900,opacity:1})};b.prototype.setHeight=function(){var d=this;if(d.options.slidesToShow===1&&d.options.adaptiveHeight===true&&d.options.vertical===false){var c=d.$slides.eq(d.currentSlide).outerHeight(true);d.$list.css("height",c)}};b.prototype.setPosition=function(){var c=this;c.setDimensions();c.setHeight();if(c.options.fade===false){c.setCSS(c.getLeft(c.currentSlide))}else{c.setFade()}if(c.options.onSetPosition!==null){c.options.onSetPosition.call(this,c)}};b.prototype.setProps=function(){var d=this,c=document.body.style;d.positionProp=d.options.vertical===true?"top":"left";if(d.positionProp==="top"){d.$slider.addClass("slick-vertical")}else{d.$slider.removeClass("slick-vertical")}if(c.WebkitTransition!==undefined||c.MozTransition!==undefined||c.msTransition!==undefined){if(d.options.useCSS===true){d.cssTransitions=true}}if(c.OTransform!==undefined){d.animType="OTransform";d.transformType="-o-transform";d.transitionType="OTransition";if(c.perspectiveProperty===undefined&&c.webkitPerspective===undefined){d.animType=false}}if(c.MozTransform!==undefined){d.animType="MozTransform";d.transformType="-moz-transform";d.transitionType="MozTransition";if(c.perspectiveProperty===undefined&&c.MozPerspective===undefined){d.animType=false}}if(c.webkitTransform!==undefined){d.animType="webkitTransform";d.transformType="-webkit-transform";d.transitionType="webkitTransition";if(c.perspectiveProperty===undefined&&c.webkitPerspective===undefined){d.animType=false}}if(c.msTransform!==undefined){d.animType="msTransform";d.transformType="-ms-transform";d.transitionType="msTransition";if(c.msTransform===undefined){d.animType=false}}if(c.transform!==undefined&&d.animType!==false){d.animType="transform";d.transformType="transform";d.transitionType="transition"}d.transformsEnabled=(d.animType!==null&&d.animType!==false)};b.prototype.setSlideClasses=function(f){var e=this,c,d,h,g;e.$slider.find(".slick-slide").removeClass("slick-active").removeClass("slick-center");d=e.$slider.find(".slick-slide");if(e.options.centerMode===true){c=Math.floor(e.options.slidesToShow/2);if(e.options.infinite===true){if(f>=c&&f<=(e.slideCount-1)-c){e.$slides.slice(f-c,f+c+1).addClass("slick-active")}else{h=e.options.slidesToShow+f;d.slice(h-c+1,h+c+2).addClass("slick-active")}if(f===0){d.eq(d.length-1-e.options.slidesToShow).addClass("slick-center")}else{if(f===e.slideCount-1){d.eq(e.options.slidesToShow).addClass("slick-center")}}}e.$slides.eq(f).addClass("slick-center")}else{if(f>=0&&f<=(e.slideCount-e.options.slidesToShow)){e.$slides.slice(f,f+e.options.slidesToShow).addClass("slick-active")}else{if(d.length<=e.options.slidesToShow){d.addClass("slick-active")}else{g=e.slideCount%e.options.slidesToShow;h=e.options.infinite===true?e.options.slidesToShow+f:f;if(e.options.slidesToShow==e.options.slidesToScroll&&(e.slideCount-f)<e.options.slidesToShow){d.slice(h-(e.options.slidesToShow-g),h+g).addClass("slick-active")}else{d.slice(h,h+e.options.slidesToShow).addClass("slick-active")}}}}if(e.options.lazyLoad==="ondemand"){e.lazyLoad()}};b.prototype.setupInfinite=function(){var c=this,d,f,e;if(c.options.fade===true){c.options.centerMode=false}if(c.options.infinite===true&&c.options.fade===false){f=null;if(c.slideCount>c.options.slidesToShow){if(c.options.centerMode===true){e=c.options.slidesToShow+1}else{e=c.options.slidesToShow}for(d=c.slideCount;d>(c.slideCount-e);d-=1){f=d-1;a(c.$slides[f]).clone(true).attr("id","").attr("index",f-c.slideCount).prependTo(c.$slideTrack).addClass("slick-cloned")}for(d=0;d<e;d+=1){f=d;a(c.$slides[f]).clone(true).attr("id","").attr("index",f+c.slideCount).appendTo(c.$slideTrack).addClass("slick-cloned")}c.$slideTrack.find(".slick-cloned").find("[id]").each(function(){a(this).attr("id","")})}}};b.prototype.selectHandler=function(e){var d=this;var c=parseInt(a(e.target).parents(".slick-slide").attr("index"));if(!c){c=0}if(d.slideCount<=d.options.slidesToShow){d.$slider.find(".slick-slide").removeClass("slick-active");d.$slides.eq(c).addClass("slick-active");if(d.options.centerMode===true){d.$slider.find(".slick-slide").removeClass("slick-center");d.$slides.eq(c).addClass("slick-center")}d.asNavFor(c);return}d.slideHandler(c)};b.prototype.slideHandler=function(f,i,d){var c,l,h,j,e,g=null,k=this;i=i||false;if(k.animating===true&&k.options.waitForAnimate===true){return}if(k.options.fade===true&&k.currentSlide===f){return}if(k.slideCount<k.options.slidesToShow){return}if(i===false){k.asNavFor(f)}c=f;g=k.getLeft(c);j=k.getLeft(k.currentSlide);k.currentLeft=k.swipeLeft===null?j:k.swipeLeft;if(k.options.infinite===false&&k.options.centerMode===false&&(f<0||f>k.getDotCount()*k.options.slidesToScroll)){if(k.options.fade===false){c=k.currentSlide;if(d!==true){k.animateSlide(j,function(){k.postSlide(c)})}else{k.postSlide(c)}}return}else{if(k.options.infinite===false&&k.options.centerMode===true&&(f<0||f>(k.slideCount-k.options.slidesToScroll))){if(k.options.fade===false){c=k.currentSlide;if(d!==true){k.animateSlide(j,function(){k.postSlide(c)})}else{k.postSlide(c)}}return}}if(k.options.autoplay===true){clearInterval(k.autoPlayTimer)}if(c<0){if(k.slideCount%k.options.slidesToScroll!==0){l=k.slideCount-(k.slideCount%k.options.slidesToScroll)}else{l=k.slideCount+c}}else{if(c>=k.slideCount){if(k.slideCount%k.options.slidesToScroll!==0){l=0}else{l=c-k.slideCount}}else{l=c}}k.animating=true;if(k.options.onBeforeChange!==null&&f!==k.currentSlide){k.options.onBeforeChange.call(this,k,k.currentSlide,l)}h=k.currentSlide;k.currentSlide=l;k.setSlideClasses(k.currentSlide);k.updateDots();k.updateArrows();if(k.options.fade===true){if(d!==true){k.fadeSlide(h,l,function(){k.postSlide(l)})}else{k.postSlide(l)}return}if(d!==true){k.animateSlide(g,function(){k.postSlide(l)})}else{k.postSlide(l)}};b.prototype.startLoad=function(){var c=this;if(c.options.arrows===true&&c.slideCount>c.options.slidesToShow){c.$prevArrow.hide();c.$nextArrow.hide()}if(c.options.dots===true&&c.slideCount>c.options.slidesToShow){c.$dots.hide()}c.$slider.addClass("slick-loading")};b.prototype.swipeDirection=function(){var c,f,e,g,d=this;c=d.touchObject.startX-d.touchObject.curX;f=d.touchObject.startY-d.touchObject.curY;e=Math.atan2(f,c);g=Math.round(e*180/Math.PI);if(g<0){g=360-Math.abs(g)}if((g<=45)&&(g>=0)){return(d.options.rtl===false?"left":"right")}if((g<=360)&&(g>=315)){return(d.options.rtl===false?"left":"right")}if((g>=135)&&(g<=225)){return(d.options.rtl===false?"right":"left")}return"vertical"};b.prototype.swipeEnd=function(e){var d=this,c;d.dragging=false;d.shouldClick=(d.touchObject.swipeLength>10)?false:true;if(d.touchObject.curX===undefined){return false}if(d.touchObject.swipeLength>=d.touchObject.minSwipe){switch(d.swipeDirection()){case"left":d.slideHandler(d.currentSlide+d.getSlideCount());d.currentDirection=0;d.touchObject={};break;case"right":d.slideHandler(d.currentSlide-d.getSlideCount());d.currentDirection=1;d.touchObject={};break}}else{if(d.touchObject.startX!==d.touchObject.curX){d.slideHandler(d.currentSlide);d.touchObject={}}}};b.prototype.swipeHandler=function(d){var c=this;if((c.options.swipe===false)||("ontouchend" in document&&c.options.swipe===false)){return}else{if(c.options.draggable===false&&d.type.indexOf("mouse")!==-1){return}}c.touchObject.fingerCount=d.originalEvent&&d.originalEvent.touches!==undefined?d.originalEvent.touches.length:1;c.touchObject.minSwipe=c.listWidth/c.options.touchThreshold;switch(d.data.action){case"start":c.swipeStart(d);break;case"move":c.swipeMove(d);break;case"end":c.swipeEnd(d);break}};b.prototype.swipeMove=function(f){var e=this,g,d,c,h;h=f.originalEvent!==undefined?f.originalEvent.touches:null;if(!e.dragging||h&&h.length!==1){return false}g=e.getLeft(e.currentSlide);e.touchObject.curX=h!==undefined?h[0].pageX:f.clientX;e.touchObject.curY=h!==undefined?h[0].pageY:f.clientY;e.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(e.touchObject.curX-e.touchObject.startX,2)));d=e.swipeDirection();if(d==="vertical"){return}if(f.originalEvent!==undefined&&e.touchObject.swipeLength>4){f.preventDefault()}c=(e.options.rtl===false?1:-1)*(e.touchObject.curX>e.touchObject.startX?1:-1);if(e.options.vertical===false){e.swipeLeft=g+e.touchObject.swipeLength*c}else{e.swipeLeft=g+(e.touchObject.swipeLength*(e.$list.height()/e.listWidth))*c}if(e.options.fade===true||e.options.touchMove===false){return false}if(e.animating===true){e.swipeLeft=null;return false}e.setCSS(e.swipeLeft)};b.prototype.swipeStart=function(d){var c=this,e;if(c.touchObject.fingerCount!==1||c.slideCount<=c.options.slidesToShow){c.touchObject={};return false}if(d.originalEvent!==undefined&&d.originalEvent.touches!==undefined){e=d.originalEvent.touches[0]}c.touchObject.startX=c.touchObject.curX=e!==undefined?e.pageX:d.clientX;c.touchObject.startY=c.touchObject.curY=e!==undefined?e.pageY:d.clientY;c.dragging=true};b.prototype.unfilterSlides=function(){var c=this;if(c.$slidesCache!==null){c.unload();c.$slideTrack.children(this.options.slide).detach();c.$slidesCache.appendTo(c.$slideTrack);c.reinit()}};b.prototype.unload=function(){var c=this;a(".slick-cloned",c.$slider).remove();if(c.$dots){c.$dots.remove()}if(c.$prevArrow&&(typeof c.options.prevArrow!=="object")){c.$prevArrow.remove()}if(c.$nextArrow&&(typeof c.options.nextArrow!=="object")){c.$nextArrow.remove()}c.$slides.removeClass("slick-slide slick-active slick-visible").css("width","")};b.prototype.updateArrows=function(){var d=this,c;c=Math.floor(d.options.slidesToShow/2);if(d.options.arrows===true&&d.options.infinite!==true&&d.slideCount>d.options.slidesToShow){d.$prevArrow.removeClass("slick-disabled");d.$nextArrow.removeClass("slick-disabled");if(d.currentSlide===0){d.$prevArrow.addClass("slick-disabled");d.$nextArrow.removeClass("slick-disabled")}else{if(d.currentSlide>=d.slideCount-d.options.slidesToShow&&d.options.centerMode===false){d.$nextArrow.addClass("slick-disabled");d.$prevArrow.removeClass("slick-disabled")}else{if(d.currentSlide>d.slideCount-d.options.slidesToShow+c&&d.options.centerMode===true){d.$nextArrow.addClass("slick-disabled");d.$prevArrow.removeClass("slick-disabled")}}}}};b.prototype.updateDots=function(){var c=this;if(c.$dots!==null){c.$dots.find("li").removeClass("slick-active");c.$dots.find("li").eq(Math.floor(c.currentSlide/c.options.slidesToScroll)).addClass("slick-active")}};a.fn.slick=function(d){var c=this;return c.each(function(e,f){f.slick=new b(f,d)})};a.fn.slickAdd=function(c,f,e){var d=this;return d.each(function(g,h){h.slick.addSlide(c,f,e)})};a.fn.slickCurrentSlide=function(){var c=this;return c.get(0).slick.getCurrent()};a.fn.slickFilter=function(d){var c=this;return c.each(function(e,f){f.slick.filterSlides(d)})};a.fn.slickGoTo=function(c,e){var d=this;return d.each(function(f,g){g.slick.changeSlide({data:{message:"index",index:parseInt(c)}},e)})};a.fn.slickNext=function(){var c=this;return c.each(function(d,e){e.slick.changeSlide({data:{message:"next"}})})};a.fn.slickPause=function(){var c=this;return c.each(function(d,e){e.slick.autoPlayClear();e.slick.paused=true})};a.fn.slickPlay=function(){var c=this;return c.each(function(d,e){e.slick.paused=false;e.slick.autoPlay()})};a.fn.slickPrev=function(){var c=this;return c.each(function(d,e){e.slick.changeSlide({data:{message:"previous"}})})};a.fn.slickRemove=function(d,e){var c=this;return c.each(function(f,g){g.slick.removeSlide(d,e)})};a.fn.slickRemoveAll=function(){var c=this;return c.each(function(d,e){e.slick.removeSlide(null,null,true)})};a.fn.slickGetOption=function(d){var c=this;return c.get(0).slick.options[d]};a.fn.slickSetOption=function(e,f,d){var c=this;return c.each(function(g,h){h.slick.options[e]=f;if(d===true){h.slick.unload();h.slick.reinit()}})};a.fn.slickUnfilter=function(){var c=this;return c.each(function(d,e){e.slick.unfilterSlides()})};a.fn.unslick=function(){var c=this;return c.each(function(d,e){if(e.slick){e.slick.destroy()}})};a.fn.getSlick=function(){var d=null;var c=this;c.each(function(e,f){d=f.slick});return d}}));
;
define("apps/tile/responsive_tile",["jquery"],function(e){var a=600;var b=e(".j-place-column, .j-news-tile-column");var d=_.throttle(function(){b.each(function(f,g){var h=e(g);if(h.innerWidth()<a){h.addClass("j-column-responsive")}else{h.removeClass("j-column-responsive")}})},60);var c=function(){b=e(".j-place-column");d()};d();e(window).resize(function(){d()});return c});
;
goog.provide("jive.shared.soy.getCountTextByType");
jive.shared.soy.getCountTextByType=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;switch(opt_data.type){case "reply":output.append(opt_data.count==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14c0"),[opt_data.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14be"),[opt_data.count])));break;case "like":output.append(opt_data.count==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14b0"),[opt_data.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14af"),
[opt_data.count])));break;case "showlikescount":output.append(opt_data.count==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14cf"),[opt_data.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14ce"),[opt_data.count])));break;case "bookmark":output.append(opt_data.count==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1497"),[opt_data.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1496"),[opt_data.count])));break;case "showbookmarkscount":output.append(opt_data.count==
1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14c7"),[opt_data.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14c6"),[opt_data.count])));break;case "follow":output.append(opt_data.count==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k149d"),[opt_data.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k149c"),[opt_data.count])));break;case "showfollowcount":output.append(opt_data.count==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14c9"),
[opt_data.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14c8"),[opt_data.count])));break;case "membership":output.append(opt_data.count==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14b4"),[opt_data.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14b3"),[opt_data.count])));break;case "externalContributorsMembership":output.append(opt_data.count==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14b2"),[opt_data.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14b1"),
[opt_data.count])));break;case "showmembercount":output.append(opt_data.count==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14d1"),[opt_data.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14d0"),[opt_data.count])));break;case "connections":output.append(opt_data.bidirectionalGraph?opt_data.count==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14a4"),[opt_data.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14a3"),[opt_data.count])):opt_data.count==
1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14a2"),[opt_data.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14a1"),[opt_data.count])));break;case "showconnectioncount":output.append(opt_data.bidirectionalGraph?opt_data.count==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14cd"),[opt_data.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14cc"),[opt_data.count])):opt_data.count==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14cb"),[opt_data.count])):
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14ca"),[opt_data.count])));break;case "showsubspacecount":output.append(opt_data.count==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14d3"),[opt_data.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14d2"),[opt_data.count])));break;case "expertise":output.append(opt_data.count==1?"Endorsement":soy.$$escapeHtml(opt_data.count)+" Endorsements");break;case "commentcount":output.append(opt_data.count==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k201c"),
[opt_data.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2019"),[opt_data.count])));break;case "same_question":output.append(opt_data.count==0?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k31"),[opt_data.count])):opt_data.count==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k30"),[opt_data.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2f"),[opt_data.count])));break;case "items":output.append(opt_data.count==0?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20b2"),
[opt_data.count])):opt_data.count==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20b1"),[opt_data.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20b0"),[opt_data.count])));break;default:output.append(opt_data.count==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14a2"),[opt_data.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14a1"),[opt_data.count])))}return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.badgeRaw");
jive.outcomes.badge.badgeRaw=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<",soy.$$escapeHtml(opt_data.tagName),' class="js-outcome-badge j-outcome-badge js-outcome-type-',soy.$$escapeHtml(opt_data.outcomeType)," j-outcome-type-",soy.$$escapeHtml(opt_data.outcomeType)," ",opt_data.extraClasses?" "+soy.$$escapeHtml(opt_data.extraClasses):"",'"',opt_data.outcomeId?'data-outcome="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_absolute_url,"/api/core/v3/outcomes/"+
opt_data.outcomeId))+'"':"",opt_data.objectType&&opt_data.objectId?'data-ed=\'{"type":'+soy.$$escapeHtml(opt_data.objectType)+', "id": '+soy.$$escapeHtml(opt_data.objectId)+"}'":"",'data-outcome-type="',soy.$$escapeHtml(opt_data.outcomeType),'">',!opt_data.embedded?'<a href="#" aria-haspopup="true">':"",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.badge."+opt_data.outcomeType)),[])),!opt_data.embedded?"</a>":"","</",soy.$$escapeHtml(opt_data.tagName),">");return opt_sb?
"":output.toString()};
;
goog.provide("jive.shared.displayutil.commaItemList");jive.shared.displayutil.commaItemList=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var itemList3=opt_data.items;var itemListLen3=itemList3.length;for(var itemIndex3=0;itemIndex3<itemListLen3;itemIndex3++){var itemData3=itemList3[itemIndex3];output.append(itemIndex3==0?soy.$$escapeHtml(itemData3):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k232d"),[]))+" "+soy.$$escapeHtml(itemData3))}return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.displayutil.plainItemList");
jive.shared.displayutil.plainItemList=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(!opt_data.items||opt_data.items.length==0);else if(opt_data.items.length==1)output.append(soy.$$escapeHtml(opt_data.items[0]));else if(opt_data.items.length==2)output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k232a"),[opt_data.items[0],opt_data.items[1]])));else if(opt_data.items.length==3)output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k232b"),[opt_data.items[0],
opt_data.items[1],opt_data.items[2]])));else{jive.shared.displayutil.commaItemList({items:opt_data.items.slice(0,-3)},output);output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k232d"),[]))," ");jive.shared.displayutil.plainItemList({items:opt_data.items.slice(-3)},output)}return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.displayutil.itemList");
jive.shared.displayutil.itemList=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span class="j-item-list js-item-list',opt_data.classNames?" "+soy.$$escapeHtml(opt_data.classNames):"","\" data-items='",soy.$$escapeHtml(JSON.stringify(opt_data.items).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")),"'>");if(!opt_data.items||opt_data.items.length==0);else if(opt_data.items.length<4)jive.shared.displayutil.plainItemList(opt_data,
output);else if(opt_data.items.length==4)output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k232c"),[opt_data.items[0],opt_data.items[1],opt_data.items[2],opt_data.items[3]])));else{output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k232e"),[opt_data.items[0],opt_data.items[1],opt_data.items[2]]))," <",soy.$$escapeHtml(opt_data.tagName?opt_data.tagName:"a")," ");if(opt_data.useTitle){output.append('title="');jive.shared.displayutil.plainItemList({items:opt_data.items.slice(3)},
output);output.append('" ')}output.append('class="j-item-list-more js-item-list-more',opt_data.moreClassNames?" "+soy.$$escapeHtml(opt_data.moreClassNames):"",opt_data.expandable?" js-item-list-showMore":"",'"',!opt_data.tagName?' href="#"':"",">",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2332"),[opt_data.items.length-3])),"</",soy.$$escapeHtml(opt_data.tagName?opt_data.tagName:"a"),">")}output.append("</span>");return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.outcomesErrorMissing");jive.i18n.keys.outcomesErrorMissing=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2931"),[])));return opt_sb?"":output.toString()};
;
define("apps/shared/models/promise_cache",["jquery"],function(d){function a(l,k){this.cache={};this.keyNames=l;this.logEnabled=k&&console&&console.log}a.prototype._access=function i(m,p,o){var k=this.cache;for(var l=0;k!=null&&l<this.keyNames.length;++l){var n=m[this.keyNames[l]];if(k[n]==null){if(p){if(l<this.keyNames.length-1){k[n]={}}else{if(o!=null){k[n]=o}}}}else{if((l==this.keyNames.length-1)&&p&&o==null){delete k[n]}}k=k[n]}return k};a.prototype.get=function b(l,m){var k=this._access(l);if(k==null){if(this.logEnabled){console.log("Cache missed",l)}if(m){return this.put(l,m(l))}else{k=new d.Deferred();k.reject(this,l);return k.promise()}}else{if(this.logEnabled){console.log("Cache Hit",l)}return k}};a.prototype.getAll=function e(m,n){var l=[];var k=this;d.each(m,function(){l.push(k.get(this,n))});return d.when.apply(d,l).then(function(){return Array.prototype.slice.apply(arguments)})};a.prototype.getAllBulk=function c(o,n){var p=[],m=this;d.each(o,function(){if(!m.has(this)){p.push(this)}});if(p.length){var k=n(p);d.each(p,function(r,q){if(m.logEnabled){console.log("Bulk Cache missed",q)}m.put(q,k.then(function s(t){return t[r]}))})}function l(q,r){console.error("ERROR: bulk load failed",r);return this}return this.getAll(o,l)};a.prototype.put=function h(k,l){return this._access(k,true,l)};a.prototype.has=function j(k){var l=this._access(k);return l!=null};a.prototype.clear=function f(k){this._access(k,true,null)};a.prototype.clearAll=function g(){this.cache={}};return a});
;
define("apps/outcomes/outcomesModel",["jquery","apps/shared/models/core_deferred","apps/shared/models/promise_cache"],function(A,u,a){var b=false;var H=new a(["type","id"],b);var h=new a(["type","id"],b);function f(M,L,K){return{outcomeType:M,note:L,properties:K}}function B(O){var N={};function M(P){var Q=P.type,R=P.id;if(!N[Q]){N[Q]={}}if(!N[Q][R]){N[Q][R]=true;return false}else{return true}}var K=[];for(var L=0;L<O.length;++L){if(!M(O[L])){K.push(O[L])}else{}}return K}function k(K){if(!K){throw new Error("Null entity descriptor")}return H.get(K,function(L){return u.getObject(L.type,L.id)})}function d(L){return H.getAllBulk(L,function K(M){var N=[];A.each(M,function(){N.push(this.type);N.push(this.id)});return u.runQuery(function(O){return O.jive.corev3.contents.getByEntityDescriptor({entityDescriptor:N.join(",")})})})}function s(K){return K}function t(K){return u.runQuery(function(L){return L.jive.corev3.outcomes.get({uri:K})})}function z(L,N,K){var O=L.join(","),M={filters:"outcomeType("+O+")",count:N,hidden:!!K};return u.runQuery(function(P){return P.jive.corev3.outcomes.get(M)})}function w(K){return k(K).then(function(L){if(L.getOutcomeTypes){return u.runQuery(L.getOutcomeTypes())}else{return A.when([])}}).then(s)}function o(K){return k(K).then(x)}function x(K){return h.get(K,function(L){if(L.getOutcomes){return u.runQuery(L.getOutcomes())}else{return A.when([])}}).then(s)}function j(K){return k(K).then(function(L){return A.when(L,x(L))})}function g(K,M){if(!M){M="outcomes"}var L=h.getAllBulk(K,function(O){var N=[];A.each(O,function(){if(this.getOutcomes){N.push(this.getOutcomes())}});return u.runAll(N).then(u.squashBatchLists)});return L.then(function(N){for(var O=0;O<K.length;++O){K[O][M]=N[O]}A.each(K,function(){var P=this;A.each(P[M],function(R,S){var Q=S.outcomeType.name.toLowerCase();P[M][Q]=S})});return K})}function c(K){return u.runQuery(K.getHistory())}function p(K){var L=0,N;if(K.replyCount){L=K.replyCount}var M={hierarchical:false,filter:"likeCount("+L+")",fields:"@most_liked"};if(K.getReplies){N=K.getReplies(M)}else{if(K.getComments){N=K.getComments(M)}}return N}function m(L,K){var O=K.join(","),M={filter:"outcomeType("+O+")",hierarchical:false,fields:"@outcome_replies"},N;if(L.getReplies){N=L.getReplies(M)}else{if(L.getComments){N=L.getComments(M)}}return N}function v(K,M){var L=[];A.each(K,function(){L.push(this[M].get())});return u.runAll(L).then(function(O){for(var N=0;N<K.length;++N){K[N][M]=O[N]}return K})}function i(K){if(K.properties&&K.properties.approvers){var L=K.properties.approvers.map(function(M){return function(N){return N.jive.corev3.people.get({uri:M,fields:"@summary"})}});return u.runAll(L).then(function(M){K.properties.alertedUsers=M;return K})}return A.when(K)}function D(K){if(K.properties&&K.properties.share){return u.runQuery(function(L){return L.jive.corev3.shares.get({uri:K.properties.share})}).then(function(L){K.properties.outcomeShare=L;return K})}return A.when(K)}function n(K,N,M,L){return k(K).then(function(O){return u.runQuery(O.createOutcome(f(N,M,L))).done(function(){h.clear(O)})}).then(function(O){return v([O],"user")}).then(function(O){return O[0]})}function I(K,N,O,M,L){return u.runQuery(N.createOutcome(f(O,M,L))).done(function(){k(K).done(function(P){h.clear(P)})}).then(function(P){return v([P],"user")}).then(function(P){return P[0]})}function q(K,N,O,M,L){return j(K).then(function(P,R){var Q=null;A.each(R,function(){if(this.outcomeType.name==N.name){Q=this}});if(!Q){return l()}Q.properties=A.extend(Q.properties,L);return u.runQuery(Q.update()).then(function(S){h.clear(P);return S})})}function G(K,L){return j(K).then(function(N,O){h.clear(N);var M=null;A.each(O,function(){if(this.outcomeType.name.toLowerCase()==L.name.toLowerCase()){M=this;return false}return true});if(!M){return l()}return u.runQuery(M.destroy())})}function J(L,K){return k(L).then(function(M){if(M.getChildOutcomeTypes){return u.runQuery(M.getChildOutcomeTypes({isCreate:!!K})).then(s)}else{return[]}})}function r(K){return A.when(k(K),J(K)).then(function(L,N){var M=[];A.each(N,function(){var O=this.name.toLowerCase(),P=m(L,[O]);if(P){M.push(u.runQuery(P).then(u.slurp).then(function(R){var Q={};Q[O]=R.length;return Q}))}});M.push(x(L));return A.when.apply(A,M)}).then(function(){var M={};if(arguments.length>1){M=A.extend.apply(A,[{}].concat(Array.prototype.slice.call(arguments,0,arguments.length-1)))}var L=arguments[arguments.length-1];A.each(L,function(){var N=this.outcomeType.name.toLowerCase();if(M[N]!=null){M[N]+=1}});return M})}function F(K){return k(K).then(function(L){var M=p(L);if(M){return u.runQuery(M).then(u.slurp)}else{return{}}})}function E(L,K){var M=m(L,K);if(M){return u.runQuery(m(L,K)).then(u.slurp)}else{return{}}}function e(K){K=B(K);return d(K).then(function(L){var M=[];A.each(L,function(){if(this.getOutcomes){M.push(this.getOutcomes())}});return u.runAll(M)}).then(u.squashBatchLists).then(function(L){var M=[];A.each(L,function(N,O){M.push({ed:K[N],outcomes:O})});return M})}function y(){h.clearAll()}function C(){H.clearAll()}function l(){var L=A.Deferred();var M=jive.i18n.keys.outcomesErrorMissing();var K={error:{code:409,message:M}};L.reject(K);return L.promise()}return{getOutcome:t,getOutcomeHistory:c,getOutcomeTypes:w,getDescendantOutcomeTypes:J,getOutcomes:o,getOutcomesForObj:x,getAllOutcomes:g,getFullUsers:v,getApproverUsers:i,getShare:D,createOutcome:n,createSuccessorOutcome:I,destroyOutcome:G,updateOutcome:q,getOutcomeCounts:r,getObject:k,getRepliesByOutcomeTypes:E,getMostLikedReplies:F,getOutcomesForEntities:e,clearCache:y,getUserOutcomes:z,clearEntityCache:C}});
;
define("apps/outcomes/shareModel",["jquery","apps/shared/models/core_deferred","apps/shared/models/promise_cache"],function(e,a,c){function b(g,h,f){return{content:{text:h,type:"text/html"},shared:g,participants:f}}function d(g,i,f){var h=b(g,i,f);return a.runQuery(function(j){return j.jive.corev3.shares.create(h)})}return{createShare:d}});
;
define("apps/outcomes/shareMain",["jquery","apps/shared/controllers/localexchange","apps/outcomes/shareModel","apps/outcomes/outcomesModel"],function(e,b,f,a){function d(g,h){if(!h.properties||!h.properties.message||!h.properties.approvers||!h.properties.shared){return}if(h.properties.share){return}f.createShare(h.resources.self.ref,h.properties.message,h.properties.approvers).done(function(i){return c(g,h,i)})}function c(g,j,i){var h=j.properties;h.message="";h.share=i.resources.self.ref;return a.updateOutcome(g,j.outcomeType,null,null,h)}b.addListener("outcome.created",d);b.addListener("outcome.updated",d);return{createShare:d}});
;
define("apps/outcomes/outcomesMain",["jquery","underscore","apps/shared/controllers/localexchange","apps/shared/controllers/switchboard","apps/outcomes/outcomesModel","apps/outcomes/shareMain"],function(w,L,f,G,c){function i(O,U,N,M,Q,P,T){var S;var R;if(U.outcomeType){S=c.getOutcome(U.predecessor.url).then(function(V){return c.createSuccessorOutcome(O,V,U.outcomeType,Q,P).done(function(){var W=V.outcomeType;R=V;G.emit("outcome.deleted",O,W);f.emit("outcome.deleted",O,W)})})}else{S=c.createOutcome(O,U,Q,P)}S.done(function(V){var W=R&&V.outcomeType.id==R.outcomeType.id&&V.user.id!=R.user.id;G.emit("outcome.created",O,V,W);f.emit("outcome.created",O,V,W)}).fail(function(V){console.log("Failed to create",V);n(V);f.emit("outcome.refresh",[O])});if(T){T.proxy(S)}return S}function D(N,Q,S,P,O,R){var M=c.destroyOutcome(N,Q).done(function(){G.emit("outcome.deleted",N,Q);f.emit("outcome.deleted",N,Q)}).fail(function(T){console.log("Failed to delete",T);n(T);f.emit("outcome.removeBadge",N,Q);f.emit("outcome.refreshSummary")});if(R){R.proxy(M)}return M}function x(N,R,T,Q,P,O,S){var M=c.updateOutcome(N,R,T,Q,O).done(function(U){if(!O){O.shared=U.properties.shared}G.emit("outcome.updated",N,U,O.shared);f.emit("outcome.updated",N,U,O.shared)}).fail(function(U){console.log("Failed to update",U);n(U);f.emit("outcome.removeBadge",N,R);f.emit("outcome.refreshSummary")});if(S){S.proxy(M)}return M}function F(M){c.getObject(M).done(function(N){if(E(N)){c.getOutcomeCounts(M).done(function(O){c.getMostLikedReplies(M).done(function(P){f.emit("outcome.summary",M,O,P,N)})})}})}function l(M,N){N.proxy(c.getOutcomes(M))}function h(M,N){N.proxy(c.getOutcomeHistory(M))}function m(M,N){N.proxy(c.getObject(M))}function H(M,P,O){var N;c.getObject(M).then(function(Q){N=Q.subject;return w.when(c.getRepliesByOutcomeTypes(Q,[P]),c.getOutcomesForObj(Q),Q)}).then(function(T,Q,R){for(var S=0;S<Q.length;++S){if(Q[S].outcomeType.name.toLowerCase()==P){T.unshift(R)}}return c.getFullUsers(T,"author")}).then(function(Q){return c.getAllOutcomes(Q,"outcomes")}).done(function(Q){f.emit("outcome.rolledup",P,Q,O,N)})}function p(O,N,M){c.getFullUsers(O,"author").done(function(P){f.emit("mostLiked.rolledup",P,N,M)})}function K(M){f.emitP("outcome.clearBadges",M).then(function(){c.getOutcomesForEntities(M).done(function(N){w.each(N,function(){var O=this.ed;w.each(this.outcomes,function(){if(!e(this)){f.emit("outcome.display",O,this)}})})})})}function e(M){return M.outcomeType.alternativeGrouping=="true"}function C(M,N){N.proxy(c.getObject(M).then(function(O){var P=[];if(O.correctAnswer){P.push(new r(O,"correctAnswer",M))}return P}))}function B(M,N){N.proxy(c.getObject(M).then(function(O){var P=[];if(O.destroy){P.push(new r(O,"delete",M))}if(O.update){P.push(new r(O,"edit",M))}return P}))}function J(M,N){N.proxy(c.getDescendantOutcomeTypes(M))}function g(M,N){N.proxy(c.getDescendantOutcomeTypes(M,true))}function s(O,N){var M=[];w.each(O,function(){if("true"!==this.alternativeGrouping){M.push(new r(this,"post",N))}});return M}function v(M,N){N.proxy(w.when(c.getOutcomeTypes(M),c.getOutcomes(M)).then(function(P,Q){var O=s(P,M);w.each(Q,function(){if(this.destroy){O.push(new r(this.outcomeType,"delete",M))}else{O.push(new r(this.outcomeType,"get",M))}if(this.update){O.push(new r(this.outcomeType,"put",M))}});return O}))}function k(M,N){N.proxy(c.getOutcomeTypes(M).then(function(O){return s(O,M)}))}function b(N){var M=[];if(d(N)){M.push(new r(N.outcomeType,"delete",null))}if(N.createOutcome&&N.successorOutcomeTypes){w.each(N.successorOutcomeTypes,function(){M.push(new r(this,"post",N))})}return new w.Deferred().resolve(M)}function d(N){var M=N.outcomeType.name!="resolved"&&N.successorOutcomeTypes.length;var O=N.successorOutcomeTypes[0]==null;return N.destroy&&(M||O)}function o(M,N){return N.proxy(c.getOutcome(M).then(b))}function q(M){return c.getApproverUsers(M).then(function(N){return c.getShare(N)})}function A(M,N){N.proxy(c.getOutcome(M).then(function(O){return w.when(q(O),b(O))}))}function u(M,N){N.proxy(c.getOutcome(M).then(function(O){return c.getApproverUsers(O)}))}function z(M,N){N.proxy(c.getObject(M).then(function(O){return O.subject}))}function j(M){M.proxy(c.getUserOutcomes(["pending"],2,true))}function a(M){f.emit("outcome.refreshSummary")}function t(){c.clearCache()}function y(){c.clearEntityCache()}function I(M,N){f.emit("outcome.display",M,N);f.emit("outcome.refreshSummary")}G.addListener("outcome.created",I);G.addListener("outcome.updated",function(M,N){f.emit("outcome.removeBadge",M,N.outcomeType);f.emit("outcome.display",M,N)});G.addListener("outcome.deleted",function(M,N){f.emit("outcome.removeBadge",M,N);f.emit("outcome.refreshSummary")});G.addListener("acclaim.recorded.like",function(){f.emit("outcome.refreshSummary")});function n(N){if(N&&N.error&&N.error.message){var M=N.error.code&&N.error.code==404?jive.i18n.keys.outcomesErrorMissing():N.error.message;$j("<p>"+M+"</p>").message({style:"error"})}else{$j(jive.error.rest.soy.errorSaving({href:window.location})).message({showClose:true,style:"error"})}f.emit("outcome.resync")}function E(M){return !M.restrictReplies||!M.restrictComments}function r(N,O,M){this.subject=N;this.verb=O;this.context=M}f.addListener("outcome.post",i);f.addListener("outcome.delete",D);f.addListener("outcome.put",x);f.addListener("outcome.summarize",F);f.addListener("outcome.get",l);f.addListener("outcome.getHistory",h);f.addListener("outcome.getContentObject",m);f.addListener("outcome.refresh",K);f.addListener("outcome.rollup",H);f.addListener("outcome.rollupMostLiked",p);f.addListener("outcome.getOutcomeActions",v);f.addListener("outcome.getOutcomeCreateActions",k);f.addListener("outcome.prepareForBadgePopup",A);f.addListener("outcome.prepareOutcomeDetails",u);f.addListener("outcome.prepareForShareActionPopup",z);f.addListener("outcome.prepareActionTooltip",j);f.addListener("outcome.getOutcomeUrlActions",o);f.addListener("outcome.getContentObjectActions",B);f.addListener("outcome.getAdditionalContentObjectActions",C);f.addListener("outcome.getDescendantOutcomeTypes",J);f.addListener("outcome.getDescendantOutcomeTypesForCreate",g);f.addListener("commentDeleted",a);f.addListener("outcome.clearCache",t);f.addListener("outcome.clearEntityCache",y);return{create:i,summarize:F,history:history,refresh:K,rollup:H,rollupMostLiked:p}});
;
goog.provide("jive.outcomes.history.showLink");jive.outcomes.history.showLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href="#" class="font-color-meta j-outcome-modal-footer-link j-outcome-history-link js-outcome-history-link">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2934"),[])),"</a>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.history.item");
jive.outcomes.history.item=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-outcome-history-item">');if(opt_data.item.ownerChanged)output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2936"),[]))," ");else{jive.outcomes.badge.badgeRaw({outcomeType:opt_data.item.outcomeType.name,embedded:true,tagName:"span"},output);output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2935"),[]))," ")}output.append('<span class="j-outcome-reply-author">');
jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.item.user,{anonymous:false}),output);output.append('</span> <span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2932"),[(opt_data.item.creationDate?jive.model.DateUtil.parseISODateTime(opt_data.item.creationDate):"")?_jive_moment(parseFloat(opt_data.item.creationDate?jive.model.DateUtil.parseISODateTime(opt_data.item.creationDate):"")?parseFloat(opt_data.item.creationDate?jive.model.DateUtil.parseISODateTime(opt_data.item.creationDate):
""):opt_data.item.creationDate?jive.model.DateUtil.parseISODateTime(opt_data.item.creationDate):"").add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("lll"):""])),'</span><p class="j-outcome-history-note">',soy.$$escapeHtml(opt_data.item.note),"</p><br></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.history.showPopup");
jive.outcomes.history.showPopup=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-outcome-badge-popup j-outcome-popup j-pop-main" style="display: block;"><div class="j-outcome-history-items"><div class="j-outcome-history-title">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2937"),[]))," ",soy.$$escapeHtml(opt_data.subject),"</div>");if(opt_data.alertedNames){output.append('<div class="j-outcome-approvers font-color-meta"><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2916"),
[])),"</strong> ");jive.shared.displayutil.itemList({items:opt_data.alertedNames,expandable:true},output);output.append("</div>")}var itemList17=opt_data.items;var itemListLen17=itemList17.length;for(var itemIndex17=0;itemIndex17<itemListLen17;itemIndex17++){var itemData17=itemList17[itemIndex17];jive.outcomes.history.item({item:itemData17},output)}output.append('</div><footer class="j-outcome-modal-footer j-pop-row j-last"><a href="#" class="js-outcome-done-button j-outcome-modal-footer-link">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2933"),[])),"</a></footer></div>");return opt_sb?"":output.toString()};
;
(function(c){var a=0;var b="__generated_id_";c.fn.id=function(d){if(!this.length){return""}var e=this.first();if(d){e.attr("id",d);return this}else{var f=e.attr("id");if(f){return f}else{d=b+a;++a;e.attr("id",d);return d}}}})(jQuery);
;
goog.provide("jive.shared.displayutil.itemListMore");jive.shared.displayutil.itemListMore=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.shared.displayutil.plainItemList(opt_data,output);output.append(' <a href="#" class="j-item-list-showFewer js-item-list-showFewer">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2333"),[])),"</a>");return opt_sb?"":output.toString()};
;
define("apps/shared/views/itemList",["jquery","jive/accessibility"],function(f,b){function a(i){i.preventDefault();var j=f(this).closest(".js-item-list"),h=j.data("items"),g=template=jive.shared.displayutil.itemListMore({items:h});j.data("oldHtml",j.html()).html(g);b.focusIn(j)}function d(h){h.preventDefault();var i=f(this).closest(".js-item-list"),g=i.data("oldHtml");i.html(g);b.focusIn(i)}function e(g){g.on("click",".js-item-list-showMore",a).on("click",".js-item-list-showFewer",d)}function c(g){var h=f(jive.shared.displayutil.itemList({items:g,expandable:true}));e(h);return h}return{bindHandlers:e,makeList:c}});
;
define("apps/outcomes/historyView",["jquery","apps/shared/controllers/localexchange","apps/shared/views/itemList","apps/outcomes/outcomesMain"],function(e,d,b){function g(j){if(j){j.preventDefault()}var i=e(this);var h=i.data("originalContext");if(!h){h=i}if(i.data("outcome")){a(h,i.data("outcome"),i.data("alertedNames"),i.data("targetEd"))}else{console.log("History link is missing an entity descriptor: ",i)}}function a(h,j,k,i){d.emitP("outcome.getHistory",j).then(function(l){d.emitP("outcome.getContentObject",i).then(function(n){var u=[];var m={};var s;var t;var q;l.forEach(function(w){q=w.user;var v=$j.extend(true,{},w);if(t&&q.id!=t.id){u.push($j.extend(true,w,{ownerChanged:true}))}t=q;s=v.outcomeType;if(s.id!=m.id){u.push(v)}m=s});var o={items:u,alertedNames:k,subject:n.subject};o.items.forEach(function(v){v.note=e("<div>"+v.note+"</div>").text()});var r=jive.outcomes.history.showPopup(o);var p=e(r).popover({context:h,onClose:function(){h.removeAttr("aria-owns")},hoverSelection:false});p.find(".js-outcome-done-button").on("click",function(v){p.trigger("close")});h.attr("aria-owns",p.id());d.emit("outcome.history.popoverDisplayed",j);b.bindHandlers(p)})})}function c(k,l,m,j,h){if(k.predecessorOutcome){var i=e(jive.outcomes.history.showLink());i.data("outcome",k);i.data("alertedNames",l);i.data("originalContext",h);i.data("targetEd",j);m.append(i);d.emit("outcome.history.linkDisplayed",k)}}function f(h,i){i.find(".js-outcome-history-link").safeRemove()}d.addListener("outcome.history.displayLink",c);d.addListener("outcome.history.removeLink",f);return{display:c,remove:f,clickHandler:g}});
;
goog.provide("jive.tags.autocomplete.tagInput");
jive.tags.autocomplete.tagInput=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-tags"><ul><li class="j-tag-icon j-tag-input jive-icon-glyph icon-tag1 font-color-meta-light" role="presentation"></li><li class="js-tag-entry j-tag-entry"><input type="text" id="input_tags" data-is-not-create-field="',opt_data.isNotCreateField?soy.$$escapeHtml(opt_data.isNotCreateField):"false",'" data-hide-prepopulated-tags="',opt_data.hidePrepopulatedTags?
soy.$$escapeHtml(opt_data.hidePrepopulatedTags):"false",'" data-hide-suggestions-on-init="',opt_data.hideSuggestionsOnInit?soy.$$escapeHtml(opt_data.hideSuggestionsOnInit):"false",'" data-is-skill="',opt_data.isSkill?soy.$$escapeHtml(opt_data.isSkill):"false",'" data-focus-on-load="',opt_data.focusOnLoad?soy.$$escapeHtml(opt_data.focusOnLoad):"false",'" placeholder="',opt_data.placeholder?soy.$$escapeHtml(opt_data.placeholder):"",'" class=" js-tag-input',opt_data.identifier?" "+soy.$$escapeHtml(opt_data.identifier):
"",'" value="" autocomplete="off" role="combobox" aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3c30"),[])),'" aria-labelledby="input_tags" aria-expanded="false"/></li></ul></div><input type="hidden" class="js-hidden-tag-input" name="tags" value="',soy.$$filterNoAutoescape(opt_data.tags?opt_data.tags.replace(new RegExp('"',"g"),"&quot;"):""),'"/>');return opt_sb?"":output.toString()};
;
define("jive/fresh_action_queue",["jquery"],function(a){return function b(h){var d=[],i=[],c=[];if(typeof h==="undefined"){h=500}function f(o,n){var l=new a.Deferred();var m=g(d.length,n);d.push(o);i.push(new Date());c.push(n);function k(){if(e(o,n)){o.then(function(){l.resolve.apply(l,arguments)},function(){l.reject.apply(l,arguments)})}}o.then(k,k,function(){l.notify.apply(l,arguments)});if(h&&m){j(m.promise,m.time,m.group)}return l.promise()}function j(o,n,m){var l=new Date();var k=l-n;setTimeout(e.bind(null,o,m),Math.max(h-k,0))}function e(o,n){var p=d.lastIndexOf(o);var l=g(p,n);var k=d.length;var m;if(p>-1){if(l){d=d.slice(l.index+1);i=i.slice(l.index+1);c=c.slice(l.index+1)}m=k-d.length;d.splice(p-m,1);i.splice(p-m,1);c.splice(p-m,1);return o}}function g(m,l){for(var k=m-1;k>=0;k-=1){if(typeof l==="undefined"||c[k]!==l){return{index:k,promise:d[k],time:i[k],group:c[k]}}}}return{push:f}}});
;
(function(d){var f={typeAheadOptions:{keystrokeWait:400},popoverOptions:{focusPopover:false,onClose:d.noop,addClass:"j-autocomplete",setRole:"listbox"},processResults:h,parseSearchString:h,displayResults:l,displayEmptySearch:false,closeOnBlur:true,minChars:2,clearButton:d()};function h(m){return m}function l(n,m){d(n).popover(m);return m}function c(n,m){var o=this;n=d.extend(true,{},f,n);n.input=m;n.popoverOptions.context=m;var q=n.popoverOptions.onClose;n.popoverOptions.onClose=function(){m.trigger("closed");return q()};n.popoverOptions.returnPopover=true;if(!n.queryFunc){if(!n.querySource||!n.querySource.get){console.log("Error: missing querySource.get in options, and no queryFunc supplied",n)}n.queryFunc=function p(){return n.querySource.get.call(n.querySource,arguments)}}if(!n.template){console.log("Error: missing template in options",n)}this.options=n;m.prop("autocomplete","off").attr("aria-autocomplete","list").attr("aria-haspopup","true");if(!m.is("[role=combobox]")){m.attr("role","combobox")}this.lastSearchString=null;this.currentPopover=null;this.queue=new g();n.input.typeAhead(n.typeAheadOptions).on("keystroke.suggestBox",function(){o.showPopover();o.updateClearButton()}).on("focusWaitFinished.suggestBox",function(){o.showPopover()}).on("close.suggestBox",d.proxy(o.destroyPopover,o)).on("tabChanged.suggestBox",function(){o.currentPopover.reposition()}).on("otherClick.suggestBox",function(){jive.conc.nextTick(function(){o.currentPopover.reposition()})});if(n.closeOnBlur){n.input.on("blurWaitFinished.suggestBox",function(r){n.input.trigger("close")})}if(n.clearButton.length){d(n.clearButton).on("click.suggestBox",function(){n.input.val("");n.input.trigger("keystroke")});this.updateClearButton()}}c.prototype.updateClearButton=function k(){if(this.options.clearButton.length){if(this.options.input.val()){this.options.clearButton.show()}else{this.options.clearButton.hide()}}};c.prototype.displaySuggestions=function a(q){var n=d.extend({},this.options.popoverOptions);this.destroyPopover();if(!this.options.input.is(":visible")){return}n=this.options.displayResults(q,n,this.currentPopover);this.currentPopover=n;var p=this.currentPopover.popOver;if(!p.is("[role=listbox]")&&p.find("[role=listbox]").length===0){console.log("Warning: adding role 'listbox' to results container");p.attr("role","listbox")}var o=this.options.input.data("typeAhead");var m=o.getSelectable();if(m.length>0&&m.select("option, [role=option]").length===0&&m.parent("[role=option]").length===0){console.log("Warning: selectable elements are not options");m.attr("role","option")}o.setSuggestElement(p)};c.prototype.showPopover=function e(){var o=this,n=this.options;var m=n.parseSearchString(n.input.val());if(m==null||m.length<n.minChars){m="";if(!n.displayEmptySearch){return}}if(this.lastSearchString!=null&&this.lastSearchString==m){if(this.isPopoverShowing()){return}}this.lastSearchString=m;this.queue.push(n.queryFunc(m)).then(function(r){if(r&&r.trim){r=r.trim()}var s=n.processResults(r,n.input.data("typeAhead"),m);if(!s){o.destroyPopover()}else{var q=n.template(s);if(q&&q.length){o.displaySuggestions(q)}else{o.destroyPopover();console.log("suggestion html empty for results",r,s)}}},function p(){console.log("failed suggestBox query for '"+m+"'",arguments)})};c.prototype.destroyPopover=function j(m){if(this.currentPopover&&this.currentPopover.closeFunc){this.currentPopover.closeFunc()}this.currentPopover=null;if(m&&m.type==="close"){this.lastSearchString=null;m.stopPropagation()}};c.prototype.isPopoverShowing=function b(){return this.currentPopover!=null};c.prototype.teardown=function i(){var m=this.options.input;this.destroyPopover();m.data("typeAhead").teardown();m.off(".suggestBox");m.removeData("suggestBox");this.options.clearButton.off(".suggestBox")};d.fn.suggestBox=function(m){return this.each(function(){var n=d(this);if(!n.data("suggestBox")){n.data("suggestBox",new c(m,n))}})};var g;require(["jive/fresh_action_queue"],function(m){g=m})})(jQuery);
;
define("apps/shared/views/tab_view",function(){jive.TabView=function(e,m){jive.conc.observable(this);m=m||{};var j=m.activeClass||"jive-body-tabcurrent",a=m.tabSelector||".jive-body-tab",d=m.nameFromTab||function(n){return(n.attr("id")||"").replace(/-tab$/,"")},h=this;function l(){return $j(e).find(a)}function c(){return l().filter(function(){return $j(this).hasClass(j)})}function g(){return d(l().filter(function(){return $j(this).hasClass(j)}))}function f(n){l().each(function(){var p=$j(this),o=d(p);p.toggleClass(j,o==n)});l().each(function(){var q=$j(this),p=d(q),o=$j('[id="'+p+'"]');if(p==n){o.show()}else{o.hide()}})}function k(n){h.emit("tabSwitch",n,c())}function i(n){f(n);k(n)}function b(o,p){var n=l().filter(function(){return d($j(this))==o});n.toggle(!!p)}this.switchTo=i;this.setVisibility=b;this.activeTabName=g;this.activeTab=c;$j(document).ready(function(){$j(e).delegate(a,"click",function(p){var o=$j(this),n=d(o);i(n);p.preventDefault()});if(!l().hasClass(j)){l().first().trigger("click")}})};return jive.TabView});
;
jive.namespace("Tags");define("apps/tags/model/tag_input_model",["jquery","underscore"],function(c,b){var e=",";jive.Tags.TagInputModel=jive.oo.Class.extend(function(f){jive.conc.observable(this);f.init=function(g){this.element=g.element};this.deleteTag=function(g){var h=this.getTags();if(!b.contains(h,g)){return}a(this.element,b.without(h,g))};this.addTag=function(g){var h=this.getTags();if(b.contains(h,g)||g.length==0){this.emit("tags.duplicate",g);return false}h.push(g);a(this.element,h);return true};this.getTags=function(){return d(this.element.val().split(e))}});function a(g,f){g.val(d(f).join(e))}function d(f){return b.without(b.map(f,function(g){return g.trim()}),"")}return jive.Tags.TagInputModel});
;
jive.namespace("Tags");define("apps/tags/model/tag_service",["apps/shared/models/rest_service"],function(a){jive.Tags.TagService=a.extend(function(b,d){b.resourceType="tag";var c={};b.init=function(e){d.init.call(this,e);this.RESOURCE_ENDPOINT=jive.rest.url("/tags/cloud");this.defaultParams=e};this.findAll=function(k){k=jQuery.extend({},this.defaultParams,k||{});var f=k.max,e={},g=this.cacheKey(k),i=c[g],j=new jive.conc.Promise(),h=this;if(i){j.emitSuccess(i)}else{Object.keys(k).forEach(function(l){if(l!="max"){e[l]=k[l]}});this.get(f,e).addCallback(function(m){var l=m.contentTagCloudBean;c[g]=l;j.emitSuccess(l)}).addErrback(function(){j.emitError.apply(j,arguments)})}return j};b.cacheKey=function(e){return Object.keys(e).sort().map(function(f){return f+"="+JSON.stringify(e[f])}).join("&")}});return jive.Tags.TagService});
;
jive.namespace("Tags");define("apps/tags/model/tag_suggestions",["apps/shared/models/rest_service"],function(a){jive.Tags.TagSuggestions=a.extend(function(b,c){b.resourceType="tag";b.init=function(d){c.init.call(this,d);this.RESOURCE_ENDPOINT=jive.rest.url("/tags/search")};this.get=function(e,d){return this.commonAjaxRequest(new jive.conc.Promise(),"get",{data:$j.extend({query:encodeURIComponent(e)+"*"},d||{}),url:this.RESOURCE_ENDPOINT})}});return jive.Tags.TagSuggestions});
;
goog.provide("jive.tags.autocomplete.tagCloud");
jive.tags.autocomplete.tagCloud=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-modal j-modal jive-modal-medium"><header><h2>',opt_data.placeName?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3c5a"),[opt_data.maxCount,opt_data.placeName])):opt_data.skillList?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1450"),[opt_data.maxCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1451"),[opt_data.maxCount])),'</h2></header><label class="j-508-label" id="close-modal-508">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200f"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200f"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200e"),[])),' <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content j-modal-content-text clearfix">');if(opt_data.availableTags.length>0){output.append("<p>",opt_data.skillList?
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k144f"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1445"),[])),'</p><ul class="jive-tagcloud-list">');var tagList27=opt_data.availableTags;var tagListLen27=tagList27.length;for(var tagIndex27=0;tagIndex27<tagListLen27;tagIndex27++){var tagData27=tagList27[tagIndex27];output.append('<li class="js-tag jive-tagset-popularity',soy.$$escapeHtml(tagData27.bucket),opt_data.selectedTags.indexOf(tagData27.renderedTag)>-1?" js-selected":
"",'" data-value="',soy.$$escapeHtml(tagData27.renderedTag),'"><a href="#" title="',tagData27.count!=1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3c5d"),[tagData27.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3c5c"),[])),'">',soy.$$escapeHtml(tagData27.renderedTag),"</a></li> ")}output.append('</ul><button class="close j-btn-callout">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k204f"),[])),"</button>")}else output.append("<p>",opt_data.skillList?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k144a"),
[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1448"),[])),"</p>");output.append("</section></div>");return opt_sb?"":output.toString()};
;
jive.namespace("Tags");define("apps/tags/view/tag_cloud",["jquery","soy!jive.tags.autocomplete.tagCloud"],function(b,a){jive.Tags.TagCloud=jive.AbstractView.extend(function(c){c.init=function(f,g){var e=this;e.isPeopleTagCloud=g;var d=b(f).closest(".j-form");if(0===d.length){d=b(f).parent()}d.on("click",".js-open-tag-cloud",function(h){e.emit("cloud");jive.Accessibility.pushFocus(b(this));h.preventDefault()})};this.show=function(g,e,f){var h=new jive.conc.Promise(),d=this;this.showSpinner();g.addCallback(function(i){d.hideSpinner();d.render({availableTags:i,selectedTags:e,maxCount:f,skillList:d.isPeopleTagCloud});d.content.lightbox_me({destroyOnClose:true,onClose:function(){h.emitSuccess(d.getTags())}})});return h};this.render=function(d){this.content=b(a(d));this.content.find(".js-tag a").click(function(e){b(this).closest(".js-tag").toggleClass("js-selected");e.preventDefault()})};c.getTags=function(){return this.content.find(".js-selected").toArray().map(function(d){return b(d).data("value")})}});return jive.Tags.TagCloud});
;
goog.provide("jive.tags.autocomplete.tagBadge");jive.tags.autocomplete.tagBadge=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<li class='js-tag j-tag j-btn-global'><span class='js-tag-text j-tag-text' >",soy.$$filterNoAutoescape(opt_data.tag),'</span><span class=\'remove\' role="presentation" aria-hidden="true">X</span></li>');return opt_sb?"":output.toString()};
;
jive.namespace("Tags");define("apps/tags/view/tag_badges",["jquery","soy!jive.tags.autocomplete.tagBadge"],function(b,a){jive.Tags.TagBadges=jive.oo.Class.extend(function(c){jive.conc.observable(this);c.init=function(e){var d=this;d.element=b(e);b(window).resize(_.bind(d.resizeBadges,d))};this.addBadge=function(d,i,h){var f=this,j=this.element.find(".js-tag-entry"),g=d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),k=f.findExistingBadge(d),e;if(k){if(h){f.hilightBadge(k)}}else{if(!h||!_.contains(i,d)){e=b(a({tag:g}));j.before(e);this.resizeBadges()}}};this.removeBadge=function(d){d.remove()};this.blurBadge=function(){this.element.find(".js-tag.selected").removeClass("selected")};this.focusBadge=function(){this.element.find(".js-tag-entry").prev(".js-tag").addClass("selected")};this.findExistingBadge=function(d){var e=this.element.find(".j-tag"),f=d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return(_.reduce(e,function(g,h){if(g&&g.length){return g}if(b(h).find(".js-tag-text").html().toLowerCase()==f){return b(h)}return g},false))};this.getTagsFromBadges=function(){return _.map(this.element.find(".j-tag"),function(d){return b(d).find(".js-tag-text").text()})};this.clear=function(){this.element.find(".js-tag").remove()};c.hilightBadge=function(d){d.addClass("selected")};c.resizeBadges=function(){this.element.find(".js-tag-text").css("max-width",(this.element.width()-30)+"px")}});return jive.Tags.TagBadges});
;
goog.provide("jive.tags.autocomplete.tagListItem");
jive.tags.autocomplete.tagListItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="js-suggestion" role="option" aria-live="polite"><a href="#" data-value="',soy.$$escapeHtml(opt_data.tag),'" class="quick ',opt_data.create?"j-createTag":"",'">',opt_data.create?'<span class="font-color-normal">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2028"),[]))+" </span>":"",'<span class="jive-icon-tag jive-icon-med"></span><span class="lnk">',soy.$$escapeHtml(opt_data.tag),
"</span></a></li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.tags.autocomplete.tagList");
jive.tags.autocomplete.tagList=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<ul class="js-suggestions j-autocomplete-results" ',opt_data.id?'id="'+opt_data.id+'"':""," ",opt_data.hidden?'style="display:none"':"",' role="listbox">');if(opt_data.query)jive.tags.autocomplete.tagListItem({tag:opt_data.query,create:true},output);var tagList20=opt_data.tags;var tagListLen20=tagList20.length;if(tagListLen20>0)for(var tagIndex20=0;tagIndex20<tagListLen20;tagIndex20++){var tagData20=
tagList20[tagIndex20];jive.tags.autocomplete.tagListItem({tag:tagData20},output)}else output.append(!opt_data.query?'<li class="font-color-meta" role="alert"><p class="j-empty">'+(opt_data.skill?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3af6"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3c47"),[])))+"</p></li>":"");output.append("</ul>");return opt_sb?"":output.toString()};
;
goog.provide("jive.tags.autocomplete.completions");jive.tags.autocomplete.completions=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="js-tags-completions j-tags-suggestions j-menu j-quick-menu">');jive.tags.autocomplete.tagList(soy.$$augmentMap(opt_data,{id:"tag-completions"}),output);output.append("</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.tags.autocomplete.popularTags");
jive.tags.autocomplete.popularTags=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="js-tags-suggestions j-tags-suggestions j-menu j-quick-menu"><p class="j-autocomplete-prompt j-pop-desc">',opt_data.skill?soy.$$filterNoAutoescape(jive.i18n.i18nText(jive.i18n.getMsg("k1454"),[]))+' <span class="j-508-label"> '+soy.$$filterNoAutoescape(jive.i18n.i18nText(jive.i18n.getMsg("k1453"),[]))+" </span>":soy.$$filterNoAutoescape(jive.i18n.i18nText(jive.i18n.getMsg("k1452"),[]))+
' <span class="j-508-label"> '+soy.$$filterNoAutoescape(jive.i18n.i18nText(jive.i18n.getMsg("k1453"),[]))+" </span>",'</p><div class="j-autocomplete-nav clearfix"><nav class="j-tab-nav"><ul class="j-tabbar"><li id="popular-tags-tab" data-tab-id=\'popular-tags\' class="',!opt_data.active||opt_data.active=="popular-tags"?"j-active active":"",' js-tab"><button role="option" aria-live="polite" style="border:none;"class="j-ui-elem">',opt_data.skill?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k144c"),
[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k144d"),[])),"</button></li>",opt_data.yourTags&&opt_data.yourTags.length>0?'<li id="your-tags-tab" data-tab-id=\'your-tags\' class="'+(opt_data.active=="your-tags"?"active":"")+' js-tab"><button role="option" aria-live="polite" style="border:none;" class="j-ui-elem">'+(opt_data.skill?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1455"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1456"),[])))+"</button></li>":"","</ul></nav></div>");
jive.tags.autocomplete.tagList({tags:opt_data.popularTags,id:"popular-tags",hidden:opt_data.active&&opt_data.active!="popular-tags",skill:opt_data.skill},output);if(opt_data.yourTags&&opt_data.yourTags.length>0)jive.tags.autocomplete.tagList({tags:opt_data.yourTags,id:"your-tags",hidden:opt_data.active!="your-tags",skill:opt_data.skill},output);output.append("</div>");return opt_sb?"":output.toString()};
;
jive.namespace("Tags");define("apps/tags/tags_controller",["jquery","underscore","apps/shared/views/tab_view","apps/tags/model/tag_input_model","apps/tags/model/tag_service","apps/tags/model/tag_suggestions","apps/tags/view/tag_cloud","apps/tags/view/tag_badges","soy!jive.tags.autocomplete.completions","soy!jive.tags.autocomplete.popularTags"],function(h,m,n,f,c,i,b,k,g,d){var a=",",l=55,e=100,j=/[^,]+$/;jive.Tags.Controller=jive.oo.Class.extend(function(q){jive.conc.observable(this);q.init=function(w,v){v=h.extend({},v);var u=this,y={max:10,containerType:v.containerType||17,containerID:v.containerID||1};v=v||{};if(v.objectTypes&&v.objectTypes.length>0){y.taggableTypes=v.objectTypes}if(v.addClass&&v.addClass.length>0){u.element.addClass(v.addClass)}u.element=h(w);u.singleTagInput=v.singleTagInput;u.hiddenElement=u.element.closest(".j-form").find(".js-hidden-tag-input");u.initialTags=u.hiddenElement.val().split(a);u.isSkills=u.element.data("isSkill");u.badgeElement=u.element.closest(".j-form").find(".j-tags");u.isNotCreateField=u.element.data("isNotCreateField");u.hidePrepopulatedTags=u.element.data("hidePrepopulatedTags");u.hideSuggestionsOnInit=u.element.data("hideSuggestionsOnInit");u.focusOnLoad=u.element.data("focusOnLoad");u.suggestions=new i();u.tagService=new c(y);u.tagBadges=new k(u.badgeElement);u.tagModel=new f({element:u.hiddenElement});u.tagCloud=new b(w,(this.element.closest(".j-browse-people").length>0));u.tagService.suppressGenericErrorMessages();u.userID=_jive_current_user.ID||"-1";if(this.userID!="-1"){this.yourTagParams={filterUserID:u.userID}}function x(A){function B(E){if(E){return E.map(function(F){return F.renderedTag})}return[]}function C(E){return m.chain(E).filter(function(F){return F.found}).pluck("name").value()}function z(E,H){var F=m.find(E,function(I){return !I.found}),G=m.isUndefined(F)&&m.some(E,function(I){return I.name==H});u.currentQueryIsProfane=false;if(G){return undefined}else{if(!m.isUndefined(F)){u.currentQueryIsProfane=F;return F.name}else{return H}}}if(typeof A=="string"&&A.trim().length){return u.suggestions.get(A.trim()).then(function(E){if(m.isUndefined(E)||m.isUndefined(E.tagSearchResult)){return{tags:[],query:A}}else{return{tags:C(E.tagSearchResult),query:z(E.tagSearchResult,A)}}})}var D={popularTags:u.tagService.findAll()};if(u.yourTagParams){D.yourTags=u.tagService.findAll(u.yourTagParams)}if(A&&A.length){D.yourTags=u.tagService.findAll({tags:A})}return jive.conc.synchronize(D).then(function(E){return{popularTags:B(E.popularTags),yourTags:B(E.yourTags)}})}u.element.suggestBox({displayEmptySearch:true,queryFunc:x,template:this.templateSwitcher,processResults:function(A,z,B){if(A.tags){if(u.isNotCreateField){A.query=undefined}A.tags=A.tags.unique()}else{var C=z.getActiveTab();if(C.length>0){A.active=C.data("tabId")}}if(u.isSkills){A.skill=true}return A},displayResults:function(A,z){if(u.element.val()!=""&&(!u.hideSuggestionsOnInit||u.startedTyping)&&!(u.isNotCreateField&&h(A).find(".j-empty").length>0)){m.extend(z,{context:u.element,container:h("#j-expertise-modal"),addClass:"j-tag-autocomplete j-autocomplete",align:"left",arrowOffset:15});var B=h(A).popover(z);new n(B,{activeClass:"j-active active",tabSelector:".js-tab"});return z}}}).on("selectionChosen",this.onTagSelected.bind(u)).on("keydown",this.onKeydown.bind(u)).on("keyup",this.onKeyup.bind(u)).on("paste",function(){jive.conc.nextTick(o.bind(u,u.element));h(this).one("change",u.onChange.bind(u))}).focus(this.controllerHasFocus.bind(u,true,u)).on("blur blurWaitFinished",this.controllerHasFocus.bind(u,false,u)).on("tags.resizeInput",u.resizeInput.bind(u,u.element)).click(function(z){z.stopPropagation()});if(v.focusOnLoad){u.element.focus()}if(jive.onLoadEventComplete){this.createInitialTags()}else{h(window).on("load",this.createInitialTags.bind(u))}h(window).on("resize",u.resizeInput.bind(u,u.element));this.hiddenElement.on("change",this.createInitialTags.bind(u));this.element.parents(".j-tags").on("click",".remove",this.onClickRemoveBadge.bind(this)).on("click",function(){w.focus()});this.tagCloud.addListener("cloud",function(){var z=u.tagModel.getTags(),B={max:200},A=u.tagService.findAll(B);u.tagCloud.show(A,z,200).addCallback(function(C){if(z.join(a)!=C.join(a)){u.insertTags(C.join(a))}})});this.tagModel.addListener("tags.duplicate",function(z){var A=u.tagBadges.findExistingBadge(z);if(!A){u.emit("tags.duplicate",z)}});this.tagService.findAll();this.tagService.findAll(this.yourTagParams)};this.getElement=function(){return this.element};this.populate=function(){this.createInitialTags()};this.getTagsFromBadges=function(){return this.tagBadges.getTagsFromBadges()};this.getInputVal=function(){return this.element.val()};this.clear=function(){this.tagBadges.clear();this.clearInput(this.element)};this.insertTags=function(w,x){var u=this,v=m.isArray(w)?w:String(w).split(a);$j.each(v,function(A,y){var z=u.sanitizeTag(y);if(z.length==0){return}u.tagBadges.addBadge(z,u.tagModel.getTags(),x);if(u.tagModel.addTag(z)&&x){u.emitTagChange("add",z)}});this.resizeInput(this.element);if(u.singleTagInput){this.element.hide()}};this.teardown=function(){var u=this.element.data("suggestBox");this.element.off("selectionChosen").off("keydown").off("keyup").off("paste").off("focus").off("click").off("blur").off("blurWaitFinish");this.element.parents(".j-tags").off("click");this.tagModel.removeListener("tags.duplicate");this.hiddenElement.off("change");if(u){u.teardown()}};q.createInitialTags=function(){var u;if(this.hiddenElement.length!=0){this.resizeInput(this.element);if(!this.hidePrepopulatedTags){u=this.tagModel.getTags();if(!u||0==u.length){return}this.insertTags(u,false)}if(this.focusOnLoad&&h("#jive-tagform-search").length){this.element.focus()}}};q.controllerHasFocus=function(v,u){var w=h(".j-tags");u.focused=v;w.addClass(v?"focus":"blur");w.removeClass(v?"blur":"focus");if(!v){u.tagBadges.blurBadge()}};q.clearInput=function(u){u.val("");u.trigger("close.suggestBox")};q.resizeInput=function(z){var u=7,v=this.element.closest("form").find(".j-tags").width(),y=m.reduce(this.element.closest("form").find(".j-tags li"),function(B,A){var E=h(A),C=h(A).outerWidth(true);if(E.hasClass("js-tag-entry")){return B}else{var D=B+C;if(D+e+u>=v){return 0}else{return B+C}}},0),x=Math.floor((v-y)-u),w=x<e?e:x;z.hide();z.width(w);z.show()};q.sanitizeTag=function(u){if(this.currentQueryIsProfane){u=this.currentQueryIsProfane.name}return u.trim().replace(/\s+/g," ").toLowerCase()};q.removeTagByBadge=function(v){var u=v.find(".js-tag-text").text();this.tagBadges.removeBadge(v);this.tagModel.deleteTag(u);this.emitTagChange("remove",u);if(this.singleTagInput){this.element.show();this.element.focus()}};q.emitTagChange=function(v,u){this.emit("tags.change",this.tagModel.getTags());this.emit("tags."+v,u)};q.onKeyup=function(v){var u=this.element.val();if(u.length>1&&u[u.length-1]===","){this.clearInput(this.element);this.insertTags(u,true)}};q.onKeydown=function(w){var u=this.element.val(),v=this;v.startedTyping=true;if(w.which&&s(w)&&u.length>0){this.clearInput(this.element);this.insertTags(u,true);if(!h.keyIs("tab",w.which)){w.preventDefault();jive.conc.nextTick(function(){v.element.focus()})}}else{if(w.which&&r(w,u)){var x=h(".js-tag.selected");if(x.length!=0){this.removeTagByBadge(x);this.element.focus()}else{this.tagBadges.focusBadge()}w.preventDefault();this.clearInput(this.element)}else{if(w.which&&t(w,u)){w.preventDefault()}else{if(p(w)){w.preventDefault()}else{this.tagBadges.blurBadge()}}}}};q.onChange=function(){var u=this.element.val();this.insertTags(u,true)};q.onClickRemoveBadge=function(v){var u=h(v.target).parent();this.removeTagByBadge(u)};q.onTagSelected=function(x,v,w){var u=w.find("a").data("value");this.insertTags(u,true);this.clearInput(this.element)};q.templateSwitcher=function(u){if(u.tags){return g(u)}return d(u)};function t(v,u){return(u.length>=l&&!(h.keyIs("backspace",v.which)||v.metaKey))}function s(u){return(h.keyIs("enter",u.which)||h.keyIs("tab",u.which))}function r(v,u){return(h.keyIs("backspace",v.which)&&u=="")}function p(u){return h.keyIs("forward_slash",u.which)}function o(v){var u=v.val().replace(/\//g,"");if(u.length>=l){v.val(u.substring(0,l))}}});return jive.Tags.Controller});
;
goog.provide("jive.shared.file.fileTypeIconClass");
jive.shared.file.fileTypeIconClass=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("jive-icon-",soy.$$escapeHtml(opt_data.size?opt_data.size:"big")," ");switch(String(opt_data.extension).toLowerCase()){case "doc":case "docx":case "odt":case "fodt":case "ott":case "sxw":case "stw":case "sdw":case "sgl":case "rtf":case "wpd":case "wps":output.append(" jive-icon-doctype-document");break;case "pdf":output.append(" jive-icon-doctype-acrobat");break;case "zip":case "tar":case "tgz":case "gz":case "bz2":case "rar":case "dmg":case "7z":case "ace":output.append(" jive-icon-doctype-compressed");
break;case "jpg":case "jpeg":case "png":case "gif":case "bmp":case "svg":case "exif":case "ico":case "psd":case "pdd":case "psb":case "tiff":case "tif":case "raw":case "xcf":output.append(" jive-icon-doctype-image");break;case "pps":case "ppt":case "pptx":case "pptm":case "potx":case "potm":case "pot":case "ppsx":case "ppsm":case "ppam":case "ppa":case "pptx":case "odp":case "key":output.append(" jive-icon-doctype-presentation");break;case "xls":case "xlk":case "xlsb":case "xlsm":case "xlsx":case "xlt":case "xltm":case "xlw":case "ods":case "ots":case "sdc":case "stc":case "sxc":case "csv":output.append(" jive-icon-doctype-spreadsheet");
break;case "txt":output.append(" jive-icon-doctype-text");break;case "avi":case "mov":case "3gp":case "asf":case "flv":case "mpg":case "mpeg":case "mpe":case "mp4":case "m1v":case "m2v":case "fla":case "m4v":case "mkv":case "swf":case "wmv":case "ogv":case "ogx":output.append(" jive-icon-doctype-video");break;default:output.append(" ",opt_data.defaultIcon?soy.$$escapeHtml(opt_data.defaultIcon):"jive-icon-doctype-generic")}return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.displayutil.icon");
jive.shared.displayutil.icon=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.type=="url")output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2067"),[])),'" role=img class="jive-icon-',soy.$$escapeHtml(opt_data.size),' jive-icon-external-site"></span>');else if(opt_data.type=="favorite")output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1ff8"),[])),'" role="img" class="jive-icon-',soy.$$escapeHtml(opt_data.size),
' jive-icon-bookmark"></span>');else if(opt_data.type=="post")output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1ff1"),[])),'" role="img" class="jive-icon-',soy.$$escapeHtml(opt_data.size),' jive-icon-blog"></span>');else if(opt_data.type=="update")output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k215c"),[])),'" role="img" class="jive-icon-',soy.$$escapeHtml(opt_data.size),' jive-icon-status"></span>');else if(opt_data.type==
"dm")output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20d5"),[])),'" role="img" class="jive-icon-',soy.$$escapeHtml(opt_data.size),' jive-icon-direct-message"></span>');else if(opt_data.type=="comment")output.append(opt_data.rootType?opt_data.rootType=="post"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-blog-comment"></span>':opt_data.rootType==
"update"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-status-comment"></span>':opt_data.rootType=="entry"||opt_data.rootType=="file"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-comment"></span>':opt_data.rootType=="dm"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),
[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-direct-message"></span>':opt_data.rootType!="comment"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+" jive-icon-"+soy.$$escapeHtml(opt_data.rootType)+'-comment"></span>':"":opt_data.parentContent&&opt_data.parentContent.type?opt_data.parentContent.type=="post"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),
[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-blog-comment"></span>':opt_data.parentContent.type=="update"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-status-comment"></span>':opt_data.parentContent.type=="entry"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+
' jive-icon-comment"></span>':opt_data.parentContent.type=="dm"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-direct-message"></span>':opt_data.parentContent.type!="comment"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+" jive-icon-"+soy.$$escapeHtml(opt_data.parentContent.type)+
'-comment"></span>':"":'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-comment"></span>');else if(opt_data.type=="discussion"||opt_data.type=="message")output.append(opt_data.answer?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2047"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-discussion-correct"></span>':opt_data.helpful?
'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2047"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-discussion-helpful"></span>':opt_data.question?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2047"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-discussion-question"></span>':'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2047"),[]))+'" role="img" class="jive-icon-'+
soy.$$escapeHtml(opt_data.size)+' jive-icon-discussion"></span>');else if(opt_data.type=="file"){output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2190"),[])),'" class="');if(opt_data.iconCss)output.append("jive-icon-",soy.$$escapeHtml(opt_data.size)," ",soy.$$escapeHtml(opt_data.iconCss));else jive.shared.file.fileTypeIconClass({extension:opt_data.extension,size:opt_data.size,defaultIcon:"jive-icon-document-upload"},output);output.append('"></span>')}else if(opt_data.type==
"person"&&opt_data.jive)if(opt_data.size=="sml")jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data,{username:opt_data.jive.username,size:12,enabled:true,visible:true}),output);else if(opt_data.size=="med")jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data,{username:opt_data.jive.username,size:16,enabled:true,visible:true}),output);else if(opt_data.size=="big")jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data,{username:opt_data.jive.username,size:25,enabled:true,visible:true}),output);
else jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data,{username:opt_data.jive.username,size:opt_data.size,enabled:true,visible:true}),output);else if(opt_data.type=="userregistration")output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2129"),[])),'" role="img" class="jive-icon-med jive-icon-profile"></span>');else if(opt_data.type=="extStreamActivity")output.append('<img aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k43c1"),[])),
'" role="img" class="jive-icon-',soy.$$escapeHtml(opt_data.size),'" alt="" src="',soy.$$escapeHtml(opt_data.productIcon),'"></img>');else if(opt_data.type=="interaction"||opt_data.type=="collaboration")output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[])),'" role="img" class="jive-icon-',soy.$$escapeHtml(opt_data.size),' jive-icon-direct-message"></span>');else if(opt_data.type=="profileimage")output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2990"),
[])),'" role="img" class="jive-icon-',soy.$$escapeHtml(opt_data.size),' jive-icon-photo"></span>');else if(opt_data.type)output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("global.access.content.type."+opt_data.type)),[])),'" role="img" class="jive-icon-',soy.$$escapeHtml(opt_data.size)," jive-icon-",soy.$$escapeHtml(opt_data.type),'"></span>');return opt_sb?"":output.toString()};
;
goog.provide("jive.people.profile.followingAssociatedStreamCount");
jive.people.profile.followingAssociatedStreamCount=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span class="j-js-streams-assoc-count j-instream-count">');if(opt_data.count>0){output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2078"),[])),'<\!-- <span class="jive-icon-med jive-icon-activity-pulse-active j-instreamicon"></span> --\><\!-- modification to accomodate a single custom activity stream.');jive.shared.soy.i18nHelper({i18nKey:opt_data.renderLocation==
"content-page"?opt_data.count>1?soy.$$escapeHtml("k2df9"):soy.$$escapeHtml("k2dfa"):soy.$$escapeHtml("k2df8"),arg0:'<span class="jive-icon-med jive-icon-activity-pulse-active j-instreamicon"></span> '+soy.$$escapeHtml(opt_data.count),noAutoEscape:true},output);output.append(" --\>")}else output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2078"),[])),' <\!-- <span class="jive-icon-med jive-icon-activity-pulse-active j-instreamicon"></span> --\>');output.append("</span>");return opt_sb?
"":output.toString()};
;
goog.provide("jive.people.profile.friendListChooser");
jive.people.profile.friendListChooser=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span class="j-friend-list-chooser-container j-js-friend-list-chooser-container"',opt_data.hideFriendListChooser||opt_data.friendLists&&opt_data.friendLists.length==0?' style="display: none;"':"",">",!opt_data.darkButton?'<a href="#" class="js-connection-label-btn j-connection-label-btn " '+(opt_data.hidden?'style="display:none"':"")+' title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k2de2"),
[]))+'"></a>':'<a href="#" class="js-connection-label-btn j-connection-label-btn j-social-action" '+(opt_data.hidden?'style="display:none"':"")+' title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k2de2"),[]))+'"><span class="jive-icon-med jive-icon-friend-applylabels"></span></a>','<div class="j-menu j-connection-labels-menu js-connection-labels-menu" style="display: none;" data-userid="',soy.$$escapeHtmlAttribute(opt_data.targetUserID),'"><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2de2"),
[])),'</p><form class="j-js-friend-list-chooser"><ul>');if(opt_data.friendLists){var listList32=opt_data.friendLists;var listListLen32=listList32.length;for(var listIndex32=0;listIndex32<listListLen32;listIndex32++){var listData32=listList32[listIndex32];jive.people.profile.friendListChooserLabel(soy.$$augmentMap(listData32,{selected:listData32.targetUserAMember,userID:opt_data.targetUserID}),output)}}output.append("</ul></form></div></span>");return opt_sb?"":output.toString()};
;
goog.provide("jive.people.profile.followCounts");
jive.people.profile.followCounts=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<ul class="font-color-meta">',!opt_data.bidirectional?"<li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2df2"),[]))+' <span class="js-following-count">'+soy.$$escapeHtml(opt_data.followingCount)+"</span></li><li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2df1"),[]))+' <span class="js-follower-count">'+soy.$$escapeHtml(opt_data.followerCount)+"</span></li>":"<li>"+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2dfc"),[]))+' <span class="js-follower-count">'+soy.$$escapeHtml(opt_data.followerCount)+"</span></li>","</ul>");return opt_sb?"":output.toString()};
;
goog.provide("jive.people.profile.followLink");
jive.people.profile.followLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(!opt_data.targetUserDisabled){output.append('<div class="js-follow-user-link j-follow-user-link clearfix" data-userid="',soy.$$escapeHtmlAttribute(opt_data.targetUserID),'" data-streamsassoc="',soy.$$escapeHtmlAttribute(opt_data.streamsAssociatedCount),'" data-location="',soy.$$escapeHtmlAttribute(opt_data.renderLocation),'" data-bidirectional="',soy.$$escapeHtmlAttribute(opt_data.bidirectional),'" data-follower-count="',
soy.$$escapeHtmlAttribute(opt_data.followerCount),'" data-displayname="',soy.$$escapeHtmlAttribute(opt_data.targetUserDisplayName),'" data-approvals-enabled="',soy.$$escapeHtmlAttribute(opt_data.approvalsEnabled),'" aria-live="polite" aria-atomic="true" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k2df6"),[])),'"><a href="#" class="js-follow ',!opt_data.darkButton?"j-social-button j-ui-elem":"j-social-action",'" ',opt_data.targetUserACurrentFriend||opt_data.targetUserAPendingFriend?
'style="display:none"':"","><span",!opt_data.darkButton?' class="j-ui-elem"':"",">",!opt_data.bidirectional?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2e27"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2de5"),[])),' <\!-- <span class="jive-icon-med jive-icon-activity-pulse-active j-instreamicon"></span> --\></span></a><a href="#" class="j-following js-following ',!opt_data.hideFriendListChooser&&opt_data.friendLists&&opt_data.friendLists.length>0?"j-split-button notlast":
""," ",!opt_data.darkButton?"j-social-button j-ui-elem":"j-social-action",'" ',!opt_data.targetUserACurrentFriend?'style="display:none"':"","><span",!opt_data.darkButton?' class="j-ui-elem"':"",">");jive.people.profile.followingAssociatedStreamCount({count:opt_data.streamsAssociatedCount,renderLocation:opt_data.renderLocation},output);output.append('</a><span class="js-pending j-disabled ',!opt_data.darkButton?"j-social-button j-ui-elem":"j-social-action",'" ',!opt_data.targetUserAPendingFriend?'style="display:none"':
"","><span",!opt_data.darkButton?' class="j-ui-elem"':"",">",!opt_data.bidirectional?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2dd5"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2ddf"),[])),"</span>");jive.people.profile.friendListChooser(soy.$$augmentMap(opt_data,{hidden:!opt_data.targetUserACurrentFriend}),output);if(!opt_data.hideFollowingCount)jive.people.profile.followCounts(opt_data,output);output.append("</div>")}return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.acclaim.displayUserRow");
jive.soy.acclaim.displayUserRow=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(!opt_data.onlyFriends||opt_data.onlyFriends&&opt_data.currentUserID!=opt_data.user.id&&opt_data.user.prop.connections.targetUserACurrentFriend)if(opt_data.onlyNotes&&opt_data.user.prop.hasBookmarknotes||!opt_data.onlyNotes){output.append('<tr data-user-id="',soy.$$escapeHtml(opt_data.user.id),'">');if(!opt_data.onlyNotes){output.append('<td class="j-td-avatar ',opt_data.user.prop.hasBookmarknotes?
"j-td-topalign":"",'">');if(opt_data.activityType=="expertise")jive.shared.displayutil.icon(soy.$$augmentMap(opt_data.user,{size:35}),output);else jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.user,{size:35,currentUserPartner:opt_data.currentUserPartner,extraParams:opt_data.extraParams}),output);output.append("</td>")}output.append('<td class="j-td-name">');if(opt_data.currentUserID==opt_data.user.id)jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.user,{displayNameOverride:jive.i18n.i18nText(jive.i18n.getMsg("k21b2"),
[]),extraParams:opt_data.extraParams}),output);else jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.user,{extraParams:opt_data.extraParams}),output);output.append(!opt_data.onlyNotes?"<\!-- TODO: show truncated version of the notes --\>"+(opt_data.activityType=="bookmark"&&opt_data.user.prop.hasBookmarknotes&&opt_data.user.prop.bookmarknotes?'<p class="j-user-bookmark-notes">'+soy.$$filterNoAutoescape(opt_data.user.prop.bookmarknotes)+"</p>":""):"<\!-- TODO: show full, non-plain text / non-escaped version of the full notes --\>"+
(opt_data.activityType=="bookmark"&&opt_data.user.prop.hasBookmarknotes&&opt_data.user.prop.bookmarknotes?'<p class="j-user-bookmark-notes">'+soy.$$filterNoAutoescape(opt_data.user.prop.bookmarknotes)+"</p>":""),"</td>");if(opt_data.activityType!="bookmark"&&!opt_data.hideFollow)if(!opt_data.onlyNotes){output.append('<td class="j-td-follow">');if(opt_data.user.prop.connections&&opt_data.user.prop.connections.followLinkShown)if(opt_data.user.id!=opt_data.currentUserID&&opt_data.user.visible)jive.people.profile.followLink(soy.$$augmentMap(opt_data.user.prop.connections,
{targetUserID:opt_data.user.id,targetUserDisplayName:opt_data.user.displayName,hideFollowingCount:true,renderLocation:"bookmarked-user-list",streamsAssociatedCount:opt_data.user.prop.connections.streamsAssociatedBean?opt_data.user.prop.connections.streamsAssociatedBean.streamIDs.length:0}),output);output.append("</td>")}output.append("</tr>")}return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.acclaim.renderEmptyListText");
jive.soy.acclaim.renderEmptyListText=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.activityType=="bookmark"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28"),[])):opt_data.activityType=="like"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2b"),[])):opt_data.activityType=="follow"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2a"),[])):opt_data.activityType=="connections"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k29"),[])):
opt_data.activityType=="membership"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2c"),[])):opt_data.activityType=="same_question"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2d"),[])):"");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.acclaim.renderUserList");
jive.soy.acclaim.renderUserList=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<table",opt_data.id?' id="'+soy.$$escapeHtml(opt_data.id)+'"':"",opt_data.classNames?' class="'+soy.$$escapeHtml(opt_data.classNames)+'"':"",!opt_data.show?' style="display: none;"':"","><tbody>");var userList18=opt_data.users;var userListLen18=userList18.length;if(userListLen18>0)for(var userIndex18=0;userIndex18<userListLen18;userIndex18++){var userData18=userList18[userIndex18];jive.soy.acclaim.displayUserRow({activityType:opt_data.activityType,
user:userData18,currentUserID:opt_data.currentUserID,currentUserPartner:opt_data.currentUserPartner,onlyFriends:opt_data.onlyFriends,onlyNotes:opt_data.onlyNotes,hideFollow:opt_data.hideFollow,extraParams:opt_data.extraParams},output)}else{output.append('<tr><td><p class="j-empty font-color-meta-light">');if(opt_data.emptyContent)output.append(soy.$$filterNoAutoescape(opt_data.emptyContent));else jive.soy.acclaim.renderEmptyListText(opt_data,output);output.append("</p></td></tr>")}output.append("</tbody></table>");
return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.acclaim.renderUserNotesList");
jive.soy.acclaim.renderUserNotesList=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<table id="',soy.$$escapeHtml(opt_data.id),'" class="',soy.$$escapeHtml(opt_data.classNames),'"',!opt_data.show?' style="display: none;"':"","><tbody>");var userList12=opt_data.users;var userListLen12=userList12.length;if(userListLen12>0)for(var userIndex12=0;userIndex12<userListLen12;userIndex12++){var userData12=userList12[userIndex12];if(userData12.prop.bookmarknotes)jive.soy.acclaim.displayUserRow({activityType:opt_data.activityType,
user:userData12,currentUserID:opt_data.currentUserID,currentUserPartner:opt_data.currentUserPartner,onlyFriends:opt_data.onlyFriends,onlyNotes:opt_data.onlyNotes},output)}else output.append('<tr><td><p class="j-empty font-color-meta-light">There are no bookmark notes on this item</p></td></tr>');output.append("</tbody></table>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.acclaim.renderAcclaimModal");
jive.soy.acclaim.renderAcclaimModal=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-modal j-modal j-acclaim-mini-modal j-people-list-modal" data-you-id="',soy.$$escapeHtml(opt_data.youID),'" role="dialog" tabindex="-1" aria-labelledby="acclaim-header"><header role="header" id="acclaim-header"><h2 ',opt_data.activityType=="bookmark"?'class="j-modal-bookmark-header"':"",'><p class="modal-initially-focused" tabindex="0">');jive.shared.soy.getCountTextByType({count:opt_data.totalCount,
type:opt_data.activityType,bidirectionalGraph:opt_data.bidirectionalGraph},output);output.append('</p></h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200f"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200f"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200e"),[])),' <span class="jive-icon-glyph icon-close-med" role="img"></span></a><section  class="jive-modal-content clearfix">',
!opt_data.guest?'<nav id="jive-view-picker" class="j-modal-filter"><input type="checkbox" value="1" id="js-friends" name="user-filter"/><label for="js-friends">'+(opt_data.bidirectionalGraph?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2def"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2d8f"),[])))+"</label>"+(opt_data.activityType=="bookmark"?'<br/><input type="checkbox" value="2" id="js-only-notes" name="user-filter"/><label for="js-only-notes">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k12a2"),
[]))+"</label>":"")+"</nav>":"");jive.soy.acclaim.renderUserList({activityType:opt_data.activityType,users:opt_data.users,currentUserID:opt_data.youID,currentUserPartner:opt_data.youPartner,onlyFriends:false,id:"modal-liked-everyone",classNames:"liked-everyone-list js-everyone-list",show:true},output);jive.soy.acclaim.renderUserList({activityType:opt_data.activityType,users:opt_data.users,currentUserID:opt_data.youID,currentUserPartner:opt_data.youPartner,onlyFriends:true,id:"modal-liked-friends",
classNames:"liked-friends-list js-friends-list",show:false},output);if(opt_data.activityType=="bookmark"){jive.soy.acclaim.renderUserNotesList({activityType:opt_data.activityType,users:opt_data.users,currentUserID:opt_data.youID,currentUserPartner:opt_data.youPartner,onlyFriends:false,onlyNotes:true,id:"modal-bookmark-notes",classNames:"j-user-bookmark-notes-list j-js-user-bookmark-notes-list",show:false},output);jive.soy.acclaim.renderUserNotesList({activityType:opt_data.activityType,users:opt_data.users,
currentUserID:opt_data.youID,currentUserPartner:opt_data.youPartner,onlyFriends:true,onlyNotes:true,id:"modal-bookmark-friends-notes",classNames:"j-user-bookmark-notes-list j-js-user-bookmark-friends-notes-list",show:false},output)}output.append("</section></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.acclaim.privateBookmarkNotification");jive.soy.acclaim.privateBookmarkNotification=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<tr class="j-private-bookmark-notification j-js-private-bookmark-notification"><td colspan="3">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2e"),[])),"</td></tr>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.acclaim.guestsWithSameQuestionNotShownNotification");jive.soy.acclaim.guestsWithSameQuestionNotShownNotification=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<tr class="j-private-bookmark-notification j-js-private-bookmark-notification"><td colspan="3">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k32"),[])),"</td></tr>");return opt_sb?"":output.toString()};
;
jive.namespace("Activity.Info");jive.Activity.Info.ActivityInfoView=jive.AbstractView.extend(function(a){var d=jQuery;function b(e){return e==="bookmark"}function c(e){return e==="same_question"}this.init=function(f){var e=this;this.$modal=null;this.pageSize=f.pageSize;this.soyParams={};this.renderModal=function(g){return $j(jive.soy.acclaim.renderAcclaimModal(g))};this.handleFollow=function(i){if(this.$modal){var h=this.$modal.find("table.js-everyone-list, table.js-friends-list"),g="tr[data-user-id="+i.id+"]";if(!h.eq(1).find(g).length){h.eq(0).find(g).clone().prependTo(h.eq(1).find("tbody"))}}};jive.switchboard.addListener("follow.user.complete",this.handleFollow.bind(this))};this.showUsers=function(e,j){var f=this,h={centered:true,destroyOnClose:true,closeFocusSelector:j.context,initialFocusSelector:".modal-initially-focused",onClose:function(){$j(".js-pop").remove()}};this.soyParams=a.buildSoyParams(e,j);this.$modal&&this.$modal.remove();var g=this.renderModal(this.soyParams);if(b(e.activityType)){var i=jive.soy.acclaim.privateBookmarkNotification();g.find("table.js-everyone-list tbody").each(function(){$j(this).append(i)})}else{if(c(e.activityType)){var i=jive.soy.acclaim.guestsWithSameQuestionNotShownNotification();g.find("table.js-everyone-list tbody").each(function(){$j(this).append(i)})}}this.$modal=g.lightbox_me(h);this.$modal.find("#jive-view-picker input:checkbox").click(function(){var k=$j("#jive-view-picker input:checked");var l=0;if(k.length==1){l=k.val()}else{if(k.length==2){l=3}}f.$modal.find("table").hide();f.$modal.find("table").eq(l).show()});this.$modal.find(".jive-modal-content").endlessScroll({fireDelay:false,callback:function(k){if(f.soyParams.moreResults){f.emitP("loadUsersFromIndex",j,f.pageSize*k).addCallback(function(l){f.soyParams.moreResults=l.moreResults;f.appendUsers(l)})}}})};this.appendUsers=function(f){var k=f&&f.items?f.items:[];if(k.length>0){this.$modal.find(".j-js-private-bookmark-notification").remove();var e=this.$modal.find(".jive-modal-content tbody:visible");var h=e.parent().attr("id");var i=this.renderModal($j.extend({},this.soyParams,{users:k}));var g=i.find("table#"+h+" tr");e.append(g.clone());if(b(this.soyParams.activityType)){var j=jive.soy.acclaim.privateBookmarkNotification();e.append(j)}else{if(c(this.soyParams.activityType)){var j=jive.soy.acclaim.guestsWithSameQuestionNotShownNotification();e.append(j)}}}};a.buildSoyParams=function(e,f){return{activityType:f.activityType,bidirectionalGraph:e.bidirectionalGraph,currentUserID:e.currentUserID,currentUserPartner:e.currentUserPartner,moreResults:e.moreResults,objectID:f.objectID,objectType:f.objectType,totalCount:e.totalCount,users:e.items,youID:f.youID||e.currentUserID,youPartner:f.youPartner||e.currentUserPartner}}});define("apps/browse/activity/info/views/activity_info_view",function(){return jive.Activity.Info.ActivityInfoView});
;
jive.namespace("Activity");define("apps/browse/activity/model/activity_source",["apps/shared/models/rest_service"],function(a){jive.Activity.ItemSource=a.extend(function(b){b.resourceType="activity";b.pluralizedResourceType=b.resourceType;this.getContentActivityUsers=function(e,f,d){var c={cache:false,data:{count:d,start:f},url:[this.RESOURCE_ENDPOINT,"users",e.activityType,e.objectType,e.objectID].join("/")};return this.commonAjaxRequest(new jive.conc.Promise(),"GET",c)}});return jive.Activity.ItemSource});
;
jive.namespace("Activity.Info");jive.Activity.Info.Main=jive.oo.Class.extend(function(a){this.init=function(){this.pageSize=20;this.source=new jive.Activity.ItemSource();this.view=new jive.Activity.Info.ActivityInfoView({pageSize:this.pageSize});var b=this;this.view.addListener("loadUsersFromIndex",function(e,d,c){b.source.getContentActivityUsers(e,d,b.pageSize).addCallback(function(f){c.emitSuccess(f)})})};this.showUsers=function(e,d){var b=this.view,c=new jive.conc.Promise();this.source.getContentActivityUsers(e,d,this.pageSize).addCallback(function(f){b.showUsers(f,e);c.emitSuccess($j.extend({totalCount:f.totalCount},e))}).addErrback(function(){c.emitError()});return c}});define("apps/browse/activity/info/main",function(){return jive.Activity.Info.Main});
;
if(!jive.acclaim){jive.acclaim=(function(d){var c=jive.conc.observable({}),b=new jive.Activity.Info.Main(),e={showBookmarks:"bookmark",showChildren:"children",showConnections:"connections",showFollowers:"follow",showAcclaim:"credit",showMembers:"membership",showExternalContributorMembers:"externalContributorsMembership"};require(["jive/dispatcher"],function(f){f.listen(Object.keys(e),function(h,g){h=d.extend({activityType:a(g,h)},h);delete h.count;delete h.command;var i=d.extend({objectID:h.objectId,context:this},h);delete i.objectId;c.emit("beforeFetch",h);b.showUsers(i,0).addCallback(function(j){c.emit("afterFetch",d.extend({totalCount:j.totalCount},h))}).addErrback(function(){c.emit("afterFetch",h)})})});function a(f,g){if(f=="showAcclaim"){return g.acclaimType}return e[f]}return c})(jQuery)};
;
goog.provide("jive.eae.acclaim.count");
jive.eae.acclaim.count=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var countSlug__soy3=opt_data.count==null?0:opt_data.count;output.append("<a ",opt_data.id?'id="'+soy.$$escapeHtmlAttribute(opt_data.id)+'"':""," ",opt_data.classes?'class="'+soy.$$escapeHtmlAttribute(opt_data.classes)+'"':"",' data-command="',soy.$$escapeHtmlAttribute(opt_data.command),'"',opt_data.acclaimType?'data-acclaim-type="'+soy.$$escapeHtmlAttribute(opt_data.acclaimType)+'"':"",'data-object-id="',soy.$$escapeHtmlAttribute(opt_data.objectId),
'" data-object-type="',soy.$$escapeHtmlAttribute(opt_data.objectType),'" data-count="',soy.$$escapeHtmlAttribute(countSlug__soy3),'" href="#" role="button"',opt_data.accessibilityLinkLabel?'aria-label="'+soy.$$escapeHtmlAttribute(opt_data.accessibilityLinkLabel)+'" title="'+soy.$$escapeHtmlAttribute(opt_data.accessibilityLinkLabel)+'"':"",">",opt_data.text?soy.$$escapeHtml(opt_data.text):soy.$$escapeHtml(countSlug__soy3),"</a> ");return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.soy.render");jive.shared.soy.render=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$filterNoAutoescape(jive.soy.func.eval(opt_data.templateName,opt_data.failGracefully,false,opt_data.data,output)));return opt_sb?"":output.toString()};
;
define("url",["jquery","underscore","application/config"],function(f,e,d){function c(h,i){if(h&&typeof h!=="string"){throw new TypeError("Expected String, got object")}var g=f.isPlainObject(i)&&!f.isEmptyObject(i)?"?"+f.param(i):"";return(h||"").replace(/^\/?/,"")+g}var b={absoluteBaseUrl:function(h,i){var g=d.absoluteBaseUrl;g=g.lastIndexOf("/")==g.length-1?g:g+"/";return g+c(h,i)},appsUrl:function(h,g,i){g=g||"v1";return b.v2Url()+["apps",g,c(h,i)].join("/")},adminUrl:function(g,h){return b.baseUrl("admin/"+c(g,h))},baseUrl:function(g,h){return a(d.baseUrl)+c(g,h)},resourceUrl:function(g,h){return d.resourceUrl+c(g,h)},cssUrl:function(g,h){if(g&&document.querySelector('[dir="rtl"]')){g=g.replace(".css",".rtl.css")}return d.cssUrl+c(g,h)},secureUrl:function(g,h){return"https"+b.absoluteBaseUrl(g,h).replace(/^[^:]+/,"")},themeUrl:function(g,h){return d.themeUrl+c(g,h)},v2Url:function(g,h){return b.baseUrl("__services/v2/rest/")+c(g,h)},v3Url:function(g,h){return b.baseUrl("api/core/v3/")+c(g,h)}};function a(g){return g&&g.replace(/\/?$/,"/")}return b});
;
define("apps/video/models/video_render_model",["jquery","lib/jiverscripts/src/oo/class","url"],function(c,a,b){return a.extend(function(){this.getVideoData=function(e,d,f){return c.get(b.v2Url("/videos")+"/"+e+"?objectType="+d+"&objectID="+f)}})});
;
define("apps/content/videos/view/config",function(){return{maxWidth:1280,maxHeight:720,originalAspectRatio:1.77,offsetPercentage:76,offsetParentPercentage:90,fixedPlayerSize:false,defaultWidth:1280,defaultHeight:720,enableAutoResize:false,container:{color:"#3d3d3d",height:560}}});
;
define("apps/content/videos/view/view_utils",["jquery","lib/jiverscripts/src/oo/class","apps/content/videos/view/config"],function(c,a,b){return a.extend(function(d){this.init=function(e,f){this.$parentVideoContainer=e;this.videoContainer=f;this.$videoContainer=null};this.centerElement=function(e){var j=e.parent(),i=e.children()[0],h=0;e.siblings().each(function(){if(!(c(this).css("display")=="none")){h+=isNaN(c(this).height())?0:c(this).height()}});if(i&&i.tagName.toUpperCase()==="IFRAME"){e.height(c(i).height());e.width(c(i).width())}else{e.height("100%");e.width("100%")}var f=parseInt((j.height()-e.height()-h)/2);var g=parseInt((j.width()-e.width())/2);e.css("margin-top",f+"px");e.css("margin-left",g+"px")};this.centerVideo=function(){this.centerElement(this.getVideoContainer())};this.detectResize=function(){var e=this;c(window).resize(function(){if(b.enableAutoResize){e.resizePlayer()}})};this.resizePlayer=function(){var f=this,j=f.getVideoContainer(),g=j.parent(),i=0;if(!b.fixedPlayerSize){j.siblings().each(function(){if(!(c(this).css("display")=="none")){i+=isNaN(c(this).height())?0:c(this).height()}});g=g.height()>0?g:c("#jive-body-main");var e=parseInt((g.height()-i)*b.offsetParentPercentage/100);e=e<b.maxHeight?e:b.maxHeight;var h=parseInt(e*b.originalAspectRatio);if(h>=g.width()*b.offsetParentPercentage/100){h=parseInt((g.width()-i)*b.offsetParentPercentage/100);e=parseInt(h/b.originalAspectRatio)}f.setPlayerSizes(h,e)}f.centerElement(j);return{width:h,height:e}};this.setFixedPlayerSizes=function(g,e){var f=this;b.fixedPlayerSize=true;f.setPlayerSizes(g,e);f.resizePlayer()};this.setPlayerSizes=function(g,f){var e=this,i=e.getVideoContainer(),h=i.children();i.width(g).height(f);if(h.length){if(h.attr("src")&&h.attr("src").indexOf("standalone-video-player")>=0){e.centerElement(h)}else{h.css("width",g);h.css("height",f);h.attr("width",g);h.attr("height",f)}}};d.getVideoContainer=function(){var e=this;if(!e.$videoContainer){e.$videoContainer=e.$parentVideoContainer.find(e.videoContainer)}return e.$videoContainer}})});
;
goog.provide("jive.videos.common.encodingWarning");
jive.videos.common.encodingWarning=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<link rel="stylesheet" href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,"/styles/jive-content.css")),'" type="text/css" media="all" /><div class="jive-video-encode-box"><div class="jive-video-message-large"> ',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4518"),[])),' </div><div class="jive-video-encode-icon"></div></div>');return opt_sb?"":output.toString()};
;
jive.action=(function(){var a=_jive_base_url+"/";return{url:function(b,c){var d="";Object.keys(c).forEach(function(e){d+=e+"="+c[e]+"&"});if(d.length>0){d="?"+d.slice(0,d.length-1)}return a+b+".jspa"+d}}})();
;
define("apps/shared/models/meta_source",["apps/shared/models/rest_service"],function(a){jive.MetaSource=a.extend(function(b){jive.conc.observable(this);b.resourceType="meta";b.pluralizedResourceType=b.resourceType;this.createLink=function(e){var f=new jive.conc.Promise(),c=this,d={url:jive.rest.url("/linkMarkUp/link-meta?url="+encodeURIComponent(e)),dataType:"html",success:function(g){f.emitSuccess(g)},error:function(g){console.log("jive.MetaSource.createLink ERROR "+g);c.errorCallback(f,this.errorSaving)}};$j.ajax(d);return f};this.createLinkMeta=function(e){var f=new jive.conc.Promise(),c=this,d={type:"POST",url:this.RESOURCE_ENDPOINT+"/link",dataType:"json",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",success:function(h,g){f.emitSuccess(h)},error:function(g,i,h){c.errorCallback(f,this.errorSaving)}};$j.ajax(d);return f};this.setLinkThumbnail=function(e,d){if(!d){d=0}var c=this.RESOURCE_ENDPOINT+"/link/"+e+"/"+d+"/thumbnail";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c})};this.fetchEmbedly=function(e){var f=new jive.conc.Promise(),c=this,d={type:"GET",url:this.RESOURCE_ENDPOINT+"/embedly?linkURL="+encodeURIComponent(e),dataType:"json",success:function(g){f.emitSuccess(g)},error:function(g){console.log("jive.MetaSource.fetchEmbedly ERROR "+g);f.emitError(g)}};$j.ajax(d);return f};this.createVideo=function(e,h){var g=new jive.conc.Promise(),c=this,f={contentObjectType:e.objectType,object:e.objectId,videoURL:encodeURIComponent(h)},d={url:jive.action.url("video-link-meta",f),dataType:"json",success:function(i){g.emitSuccess(i)},error:function(i){console.log("jive.MetaSource.createVideo ERROR "+i);c.errorCallback(g,this.errorSaving)}};$j.ajax(d);return g};this.normalizeData=function(f){if(typeof f.meta!="undefined"){var c=[];if((typeof f.meta!="undefined")&&(typeof f.meta.properties!="undefined")&&(f.meta.properties.entry.length>0)){c=f.meta.properties.entry}else{if((typeof f.meta!="undefined")&&f.meta.length>0){c=f.meta}}var e={};for(var d=0;d<c.length;d++){e[c[d].key]=c[d].value}f.meta.properties=e}return f};this.createImage=function(g,e,c,l){var i=this,d=this.RESOURCE_ENDPOINT+"/imageJackson/"+g.objectType+"/"+g.objectId+"/attachment",h="",k=new jive.conc.Promise();if(c){h=encodeURIComponent(e);d=this.RESOURCE_ENDPOINT+"/imageJackson/"+g.objectType+"/"+g.objectId}var j={url:d,dataType:"xml",data:{imageURL:h},contentType:"text/xml; charset=utf-8",complete:function(n,m){if($j(n.responseXML).find("meta id").length>0){i.fetch($j(n.responseXML).find("meta id").text()).addCallback(function(q){k.emitSuccess(q)}).addErrback(function(r,q){i.errorCallback(k,this.errorSaving)})}else{var p=$j(n.responseXML).find("code").text();var o=$j(n.responseXML).find("message").text();k.emitError(o,p)}},error:function(o,q,p){console.log("Error jive.Wall.ImageMetaSource create"+o+", "+q+", "+p);var n=$j(o.responseXML).find("code").text();var m=$j(o.responseXML).find("message").text();i.errorCallback(k,this.errorSaving)}};if(c){var f=l.find("input[name=image]");if(f.length>0){f.val("")}}else{l.find("input[name=imageURL]").val("")}l.ajaxSubmit(j);return k};this.fetch=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c})};this.remove=function(d){var c=this.RESOURCE_ENDPOINT+"/remove/"+d;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c})}});return jive.MetaSource});
;
define("apps/video/views/video_render_view",["jquery","lib/jiverscripts/src/oo/class","apps/content/videos/view/view_utils","apps/content/videos/view/config","url","soy!jive.videos.common.encodingWarning"],function(f,c,b,e,d,a){return c.extend(function(g){var i,h;this.init=function(j,l){var k=this;k.$videoContainer=f(j);k.isTiny=l.isTiny===undefined?false:l.isTiny;k.video=l.video;k.utils=new b(f(j).parent(),j);if(l&&l.detectResize!==false){k.utils.detectResize()}};this.loadPerceptiveVideo=function(){var j=this;j.renderVideo();j.showVideoPlayerElements();if(!j.isTiny){j.utils.centerVideo()}};this.loadEmbeddedVideo=function(){var l=this,o=l.video,k=o.setSizes,j=o.height,n=o.width;if(o.videoSource.match(/data-showshare-player/)){if(o.setSizes&&o.width==440){n=i="440";j=h="299"}else{n=i="747";j=h="470.1875"}e.fixedPlayerSize=true;o.setSizes=false}if(l.isTiny){j=l.$videoContainer.find("img").height();n=l.$videoContainer.find("img").width()}var m='<iframe src="embedded-video-player.jspa?autoplay='+o.autoplay+"&mediaID="+o.videoID+"&fixedPlayerSize="+e.fixedPlayerSize+"&setSizes="+k+"&width="+n+'" frameborder="0" height="'+j+'" width="'+n+'" id="mediaFrame" name="mediaFrame" allowTransparency="true" tabIndex="0" allowfullscreen> </iframe>';l.insertVideoElement(m,o.setSizes,n,j)};this.processVideoForThumbnails=function(){var r=this,k=r.video,m=f(k.videoSource),j=m.attr("src");if(j===undefined){var p=m.children();for(var q=0;q<p.length;q++){var o=p[q];var l=o.tagName.toLowerCase();if(l=="iframe"){j=f(o).attr("src");break}if(l=="object"){j=f(o).attr("data");break}if(l=="param"){var n=f(o).attr("movie");if(n){j=f(o).attr("value");break}}if(l=="embed"){j=f(o).attr("src");break}}}require(["apps/shared/models/meta_source"],function(v){var u=new v();if(!u){return}if(j.match(/https?\:(?=\/\/)/)==null){j=j.replace("//","https://")}var t=j.indexOf("url=");if(t!==-1){j=j.substring(t+4);var s=j.indexOf("&");j=j.substring(0,s)}j=decodeURIComponent(j);u.fetchEmbedly(j).addCallback(function(w){if(w){k.data=w;if(w.images&&w.images[0]&&w.images[0].url){r.loadThumb(w.images[0].url)}}})})};this.loadThumb=function(k){var j=this;k=k?k:j.video.videoThumbnail;j.$videoContainer.find("img").attr("src",j.matchProtocols(k))};this.getVideo=function(){return this.video};g.renderVideo=function(){var k=this,m=k.video;if(!m.transcoded){if(m.embedded){k.$videoContainer.html(a())}else{k.$videoContainer.replaceWith(a())}return}var l;if(k.isTiny){l={height:k.$videoContainer.find("img").height(),width:k.$videoContainer.find("img").width()}}else{l=k.utils.resizePlayer()}var j=k.makeVideoIframe(m,l);k.$videoContainer.find("img").replaceWith(j);if(j[0].contentWindow==null){k.$videoContainer.append(j)}};g.makeVideoIframe=function(l,k){var m=l.externalID?""+l.externalID:"";var j={videoID:m,width:k.width-16,height:k.height-16,authtoken:l.authtoken,embedded:l.embedded};return f('<iframe width="'+(k.width)+'" height="'+(k.height)+'" id="iframe_'+m+'" style="background-color:black" allowfullscreen="true" src='+d.absoluteBaseUrl("/standalone-video-player.jspa",j)+'">')};g.showVideoPlayerElements=function(){f(".jive-video-poster").hide();this.$videoContainer.show();f(".jive-video-message").hide()};g.insertVideoElement=function(l,o,n,k){var j=this,m=j.$videoContainer;m.empty().append(l).show();if(e.fixedPlayerSize){j.utils.setFixedPlayerSizes(i,h)}else{if(o){j.applyElementSizing(l,n,k)}}j.showVideoPlayerElements();if(!j.isTiny&&!o){j.utils.resizePlayer()}};g.applyElementSizing=function(o,p,j){var q=f(o);q.attr("width",p+"px");q.attr("height",j+"px");var k=q.children();for(var n=0;n<k.length;n++){var l=k[n];var m=l.tagName.toLowerCase();if(m=="iframe"||m=="object"||m=="embed"){f(l).attr("width",p+"px");f(l).attr("height",j+"px")}}};g.matchProtocols=function(j){return j.replace("http://","//")}})});
;
define("apps/video/video_render_main",["jquery","lib/jiverscripts/src/oo/class","apps/video/models/video_render_model","apps/video/views/video_render_view"],function(b,a,d,c){return a.extend(function(e){this.init=function(g){var f=this;f.model=new d();f.options=g;f.VIDEO_EMBEDDED_TYPE="video_embeded_type";f.VIDEO_PERCEPTIVE_TYPE="video_perceptive_type";f.videos={};f.views={}};this.getVideoDataAndRender=function(f){this.genericGetDataAndRender("videoResultHandler",f)};this.getVideoThumbnailAndRender=function(f){this.genericGetDataAndRender("thumbnailResultHandler",f)};e.genericGetDataAndRender=function(i,h){var f=this,g=f.model,j=h;if(f.videos&&f.videos[j.videoID]!=null){j.video=f.videos[j.videoID];f.views[j.divID]=new c("#"+j.divID,j);f[i](f.views[j.divID]);return}g.getVideoData(j.videoID,j.objectType,j.objectID).success(function(k){if(k.authtoken){k.videoID=j.videoID;if(j.width&&k){k.width=j.width;k.setSizes=true}if(j.height&&k){k.height=j.height;k.setSizes=true}if(j.autoplay&&k){k.autoplay=j.autoplay}f.videos[k.videoID]=k;j.video=k;f.views[j.divID]=new c("#"+j.divID,j);f[i](f.views[j.divID])}})};e.videoResultHandler=function(g){var f=this,h=g.getVideo();if(!h.hasOwnProperty("videoType")||h.videoType===f.VIDEO_PERCEPTIVE_TYPE){g.loadPerceptiveVideo()}else{if(h.videoType===f.VIDEO_EMBEDDED_TYPE){g.loadEmbeddedVideo()}}};e.thumbnailResultHandler=function(g){var f=this,h=g.getVideo();if(h.videoType===f.VIDEO_EMBEDDED_TYPE){if(h.videoThumbnail!==undefined){g.loadThumb()}else{g.processVideoForThumbnails()}}}})});
;
jive.namespace("MicroBlogging");define("apps/microblogging/views/attachment_view",["jquery","apps/shared/views/abstract_view"],function(b,a){jive.MicroBlogging.AttachmentView=a.extend(function(c,d){this.init=function(e){d.init.call(this,e);this.$imageContainer=null;this.isCreateForm=e.isCreateForm||true;this.resizeHandlerRegistered=false};c.getSoyTemplate=function(e){return jive.statusinput.attachments.renderAttachment(e)};c.getSoyTemplateAttachments=function(e){return jive.statusinput.attachments.renderAttachments(e)};c.renderAttachments=function(f,g){var e=this.getContent();e.append(this.getSoyTemplateAttachments($j.extend({removable:this.isCreateForm},f)));if(this.isCreateForm){e.show();if($j.isFunction(g)){g()}}else{e.css("opacity","1").show()}e=null};c.renderAttachment=function(f){var e=this.getContent().find("li.j-attached-loading");e.before(this.getSoyTemplate($j.extend({removable:this.isCreateForm},f)));e=null};c.registerResizeHandler=function(){if(!this.resizeHandlerRegistered){var e=this;$j(window).resize((function(){var f;return function(){var g=$j(window).width();if(f&&g!==f){e.resize()}f=g}})());this.resizeHandlerRegistered=true}};this.postRender=function(){d.postRender.call(this);var g=this.getContent();this.registerResizeHandler();var f=g.find("ul.j-attached-items"),e=this;g.find("a.j-attachment-arrow").unbind();g.find("a.j-attachment-arrow").mousedown(function(){try{e.scrollHandler($j(this),f)}catch(h){console.log(h)}}).mouseup(function(){f.stop();return false}).click(function(){return false})};this.add=function(g,h){var e=this,i=h.meta,f=this.getContent(),l=this.getAttachmentContainer(),k=Array.isArray(i)?i[0]:i;k.properties=_.object(k.properties.entry.map(function(m){return[m.key,m.value]}));$j.extend(k,{originalURL:g});if(l.length>0){this.renderAttachment({attachment:k});e.postRender()}else{this.renderAttachments({attachments:i})}f.find("ul.j-attached-items li:not(.j-attached-loading):last .j-remove-attachment:not(.j-close)").click(function(){e.removeImage(k.id);return false});var j=l.find(".js-attached-link .j-details .j-title").attr("href");if(f.find("ul.j-attached-items li:not(.j-attached-loading):last .j-remove-attachment").length==0||j){l.find(".j-remove-attachment").on("click",function(){e.emitP("removeImage",k.id).addCallback(function(){e.removeAttachment(k.id)}).addErrback(function(){console.log("error removing attachment with id "+k.id)});return false})}f.find("li.js-attached-link .j-thumbnails .no-thumb").click(function(){e.emitP("removeThumbnail",k.id).addCallback(function(){e.getContent().find(".j-thumbnails").remove()}).addErrback(function(){console.log("error removing thumbnail with id "+k.id)});return false});f.find("li.js-attached-link .j-thumbnails .left").click(function(){e.previewLeft();return false});f.find("li.js-attached-link .j-thumbnails .right").click(function(){e.previewRight();return false});e.hideLoadingNotification();this.resize();this.scrollHandler(f.find("a.j-attachment-arrow-right"),f.find("ul.j-attached-items"));i=null;f=null;l=null};this.getAttachmentContainer=function(){return this.getContent().find("ul.j-attached-items")};this.getAttachmentCount=function(){return this.getAttachmentContainer().children("li:visible:not('.j-attached-loading')").size()};this.getAttachmentIDs=function(){var e=this.getAttachmentContainer();return e.children("li:visible:not('.j-attached-loading')").map(function(){return parseInt(this.id)})};this.removeImage=function(f){var e=this,g=this.getContent().parent().find(".jive-js-statusinput");e.emitP("removeImage",f).addCallback(function(){g.off("change.checkLinks keyup.checkLinks blur.checkLinks");e.removeAttachment(f)}).addErrback(function(){console.log("error removing attachment with id "+f)})};this.showLoadingNotification=function(f){var i=new b.Deferred();var e=this,f=f||{},g=f.spinnerSize?f.spinnerSize:"small",h=this.getContent().find("li.j-attached-loading");if(h.length==0){this.renderAttachments({entry:{meta:[]}},function(){h=e.getContent().find("li.j-attached-loading");h.addClass(f.listItemClass).show();e.showSpinner({size:g,showLabel:false,context:h});i.resolve()})}else{h.addClass(f.listItemClass);h.show();this.showSpinner({size:g,showLabel:false,context:h});i.resolve()}h=null;return i};this.hideLoadingNotification=function(){var e=this.getContent().find("li.j-attached-loading");e.attr("class","j-attached-loading");this.hideSpinner();e.hide();if(e.length&&e.siblings("li:not(.j-attached-loading)").size()==0){this.reset()}e=null};this.reset=function(){this.getContent().html("").hide().find("li.j-attached-loading").hide();this.metaData=[]};this.removeAttachment=function(f){var e=$j("#"+f);if(e.size()>0&&e.siblings("li:not(.j-attached-loading)").size()==0){this.reset()}e.remove();if(this.metaData){this.metaData=this.metaData.filter(function(g){return f!==g.id})}e=null};this.removeAllAttachments=function(){var f=this;var e=this.getAttachmentIDs();for(var h=0,g=e.length;h<g;h++){f.removeImage(e[h])}e=null};this.hide=function(){this.hideAllMenus();this.getContent().hide()};this.resize=function(){var f=0,e=this.getContent();e.find("li.j-attached-image, li.j-attached-video").each(function(){f+=$j(this).outerWidth()});var g=this.getAttachmentScrollDim();if(g.containerWidth<g.attachmentsWidth){this.showArrows()}else{this.hideArrows()}if(e.find("li.js-attached-link").length==0){e.find("ul.j-attached-items").css("width",g.attachmentsWidth+"px")}};this.scrollHandler=function(g,f){var h,k=g.outerWidth()*2,j=this.getAttachmentScrollDim(),i=j.attachmentsWidth-j.containerWidth,e=parseInt(f.css("left"));if(isNaN(e)){e=0}if(g.hasClass("j-attachment-arrow-right")&&i>0){h=e+(i+k);f.stop().animate({left:(-i-k)},h*5,"linear")}else{if(i>0){h=e*-1;f.stop().animate({left:0},h*5,"linear")}}};c.getAttachmentScrollDim=function(){var e=this.getContent();var f={containerWidth:e.width(),attachmentsWidth:0};e.find("li.j-attached-image, li.j-attached-video").each(function(){f.attachmentsWidth+=$j(this).outerWidth()});e=null;return f};c.showArrows=function(){var e=this.getContent();e.find("a.j-attachment-arrow").css("display","block");e.find("ul.j-attached-items").css("margin-left","20px");e=null};c.hideArrows=function(){var e=this.getContent();e.find("a.j-attachment-arrow").hide();e.find("li.j-attached-image, li.j-attached-video").first().css("margin-left","0px");e=null};c.previewLeft=function(){var f=this.getContent(),g=f.find("ul.j-thumbnails-viewport"),e=g.find("li.selected");e.next().addClass("selected");e.removeClass("selected").appendTo(g)};c.previewRight=function(){var e=this.getContent(),f=e.find("ul.j-thumbnails-viewport");f.find("li.selected").removeClass("selected");f.find("li.j-thumbnail:last").addClass("selected").prependTo(f)}});jive.MicroBlogging.AttachmentView.views={};return jive.MicroBlogging.AttachmentView});
;
goog.provide("jive.soy.spotlight.init");jive.soy.spotlight.init=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<script>$j(document).ready(function() {require(['ui-modules/spotlight/scripts/main'], function(main){main.init();});});<\/script>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.spotlight.navbar");
jive.soy.spotlight.navbar=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;var fieldId__soy3="j-nav-search";var spotlightSearchDefaultEnabled__soy4=opt_data.user.prop.search.defaultEnabled;var bookmarksVisible__soy5=opt_data.bookmarksLink.visible;var historyVisible__soy6=opt_data.historyLink.visible;output.append(opt_data.showSearch&&opt_data.spotlightSearchEnabled&&opt_data.spotlightV2Enabled?'<li id="j-nav-search-li" class="j-nav-open-visor j-globalNav-li js-nav-open-visor-container j-nav-create" aria-haspopup="true"><a href="#" id="'+soy.$$escapeHtml(fieldId__soy3)+
'" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2144"),[]))+'" aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2144"),[]))+'" class="j-globalNavLink j-ui-elem" role="menuitem" data-hideviews="'+(!bookmarksVisible__soy5||!spotlightSearchDefaultEnabled__soy4?"bookmarks":"")+" "+(!historyVisible__soy6||!spotlightSearchDefaultEnabled__soy4?"default history":"")+'" data-hidetypes="'+(opt_data.excludePlaces?" place":"")+(opt_data.excludePeople?" person":"")+'" ><span class="nav-link j-ui-elem"><i class="icon-search"></i></span></a></li>':
"");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.spotlight.parserFilters");jive.soy.spotlight.parserFilters=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var filterList3=opt_data.filters;var filterListLen3=filterList3.length;for(var filterIndex3=0;filterIndex3<filterListLen3;filterIndex3++){var filterData3=filterList3[filterIndex3];output.append(filterData3?'<li><i class="'+soy.$$escapeHtml(opt_data.icon)+'"></i><span>'+soy.$$escapeHtml(opt_data.filterString)+"</span></li>":"")}return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.spotlight.resultMessage");jive.soy.spotlight.resultMessage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="j-visor-result-message ',soy.$$escapeHtml(opt_data.cls),'">',opt_data.icon?'<i class="icon-'+soy.$$escapeHtml(opt_data.icon)+'" role="presentation"></i>':"",soy.$$escapeHtml(opt_data.message),"</li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.spotlight.search.placeholder");
jive.soy.spotlight.search.placeholder=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<\!--[if gt IE 8]><\!--\><li class="j-search-placeholder j-search-placeholder-main shimmer" data-result-id="',soy.$$escapeHtml(opt_data.uid),'" aria-hidden="true"><div class="border"></div><div class="a"></div><div class="b"></div><div class="c"></div><div class="d"></div><div class="e"></div><div class="f"></div><div class="g"></div><div class="h"></div><div class="i"></div><div class="j"></div><div class="k"></div></li><\!--<![endif]--\>');return opt_sb?
"":output.toString()};
;
goog.provide("jive.soy.spotlight.search.placeholderSmall");
jive.soy.spotlight.search.placeholderSmall=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<\!--[if gt IE 8]><\!--\><li class="j-search-placeholder j-search-placeholder-small shimmer" data-result-id="',soy.$$escapeHtml(opt_data.uid),'" aria-hidden="true"><div class="border"></div><div class="a"></div><div class="b"></div><div class="c"></div><div class="d"></div><div class="e"></div><div class="f"></div><div class="g"></div></li><\!--<![endif]--\>');return opt_sb?
"":output.toString()};
;
goog.provide("jive.soy.spotlight.search.resultContent");
jive.soy.spotlight.search.resultContent=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="j-visor-result j-visor-search-result-',soy.$$escapeHtmlAttribute(opt_data.type)," j-visor-search-result-",soy.$$escapeHtmlAttribute(opt_data.type),"-",soy.$$escapeHtmlAttribute(opt_data.subType)," ",opt_data.hidden?"j-visor-result-hidden":""," ",opt_data.promotedResult?"j-visor-result-promoted":"",'" role="option" data-type="',soy.$$escapeHtmlAttribute(opt_data.type),
'" data-subType="',soy.$$escapeHtmlAttribute(opt_data.subType),'" data-url="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.url)),'" data-id="',soy.$$escapeHtmlAttribute(opt_data.id),'" ><div class="j-visor-content-icon-wrapper"><a class="j-visor-result-link" href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.url)),"?sr=search&searchId=",soy.$$escapeUri(opt_data.uuid),"&searchIndex=",soy.$$escapeUri(opt_data.index),'" aria-label="',soy.$$escapeHtmlAttribute(String(opt_data.type).replace(/\w\S*/g,
function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})),'"><i title="',soy.$$escapeHtmlAttribute(String(opt_data.type).replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})),'" role="img" class="jive-icon-big ',soy.$$escapeHtmlAttribute(opt_data.icon),'"></i></a>',opt_data.bookmarked?'<i class="icon-bookmark" role="img"></i>':"",'</div><section class="j-search-title"><a class="j-visor-result-link" href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.url)),
"?sr=search&searchId=",soy.$$escapeUri(opt_data.uuid),"&searchIndex=",soy.$$escapeUri(opt_data.index),'"><h4>',soy.$$escapeHtml(opt_data.value),'</h4></a></section><section class="j-search-time-wrapper">');if(opt_data.publishedAgo&&opt_data.updatedAgo)jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k3442"),arg0:'<time class="j-search-created-timeago" title="'+soy.$$escapeHtmlAttribute(opt_data.published?_jive_moment(parseFloat(opt_data.published)?parseFloat(opt_data.published):opt_data.published).add(_jive_timezoneoffset*
60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("LLL"):"")+'">'+soy.$$escapeHtml(opt_data.publishedAgo)+"</time>",arg1:'<time class="j-search-modified-timeago" title="'+soy.$$escapeHtmlAttribute(opt_data.updated?_jive_moment(parseFloat(opt_data.updated)?parseFloat(opt_data.updated):opt_data.updated).add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("LLL"):"")+'">'+soy.$$escapeHtml(opt_data.updatedAgo)+"</time>",noAutoEscape:"true"},output);
else if(opt_data.publishedAgo)jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k343e"),arg0:'<time class="j-search-created-timeago" title="'+soy.$$escapeHtmlAttribute(opt_data.published?_jive_moment(parseFloat(opt_data.published)?parseFloat(opt_data.published):opt_data.published).add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("LLL"):"")+'">'+soy.$$escapeHtml(opt_data.publishedAgo)+"</time>",noAutoEscape:"true"},output);output.append(opt_data.author?
' <span class="j-bull">&bull;</span> <a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.author.url))+'" aria-hidden="true">'+soy.$$escapeHtml(opt_data.author.name)+"</a>":"",opt_data.place?' <span class="j-bull">&bull;</span> <a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.place.url))+'" aria-hidden="true">'+soy.$$escapeHtml(opt_data.place.name)+"</a>":"",'<span class="j-508-label"> &bull; ');if(opt_data.author&&opt_data.place)jive.shared.soy.i18nHelper({i18nKey:"k2002",
arg0:opt_data.author.name,arg1:opt_data.place.name},output);else if(opt_data.author)jive.shared.soy.i18nHelper({i18nKey:"k2000",arg0:opt_data.author.name},output);output.append("</span>",opt_data.displayExternalAccess?' <span class="j-bull">&bull;</span> <span class="j-browse-external-access">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2968"),[]))+"</span>":"",'</section><section class="j-search-description"><p>',opt_data.snippet?soy.$$filterNoAutoescape(opt_data.snippet):"","</p></section>");
if(opt_data.outcomes&&opt_data.outcomes.length||opt_data.promotedResult){output.append('<section class="j-search-badges"><ul>',opt_data.promotedResult?'<li><span class="j-outcome-badge j-promoted-result-badge">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3438"),[]))+"</span></li>":"");var outcomeList126=opt_data.outcomes;var outcomeListLen126=outcomeList126.length;for(var outcomeIndex126=0;outcomeIndex126<outcomeListLen126;outcomeIndex126++){var outcomeData126=outcomeList126[outcomeIndex126];
output.append('<li><span class="j-outcome-badge">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.badge."+outcomeData126.key)),[])),"</span></li>")}output.append("</ul></section>")}output.append("</li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.spotlight.search.resultPerson");
jive.soy.spotlight.search.resultPerson=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="j-visor-result j-visor-search-result-',soy.$$escapeHtml(opt_data.type)," j-visor-search-result-",soy.$$escapeHtml(opt_data.type),"-",soy.$$escapeHtml(opt_data.subType)," ",opt_data.hidden?"j-visor-result-hidden":"",'" role="option" data-type="',soy.$$escapeHtml(opt_data.type),'"',opt_data.subType?'data-subType="'+soy.$$escapeHtml(opt_data.subType)+'"':"",'data-value="',
soy.$$escapeHtml(opt_data.value),'" data-url="',soy.$$escapeHtml(opt_data.url),'" data-id="',soy.$$escapeHtml(opt_data.id),'" ><a href="',soy.$$escapeHtml(opt_data.url),'" class="j-visor-result-link jiveTT-hover-user" data-userid="',soy.$$escapeHtml(opt_data.id),'"><img class="jive-avatar" src="',soy.$$escapeHtml(opt_data.image),'" border="0" height="25" data-height="25" width="25" alt="',soy.$$escapeHtml(opt_data.value),'">',soy.$$escapeHtml(opt_data.value),"</a><small>",opt_data.profile.title?soy.$$escapeHtml(opt_data.profile.title):
"","</small></li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.spotlight.search.resultPlace");
jive.soy.spotlight.search.resultPlace=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="j-visor-result j-visor-search-result-',soy.$$escapeHtml(opt_data.type)," j-visor-search-result-",soy.$$escapeHtml(opt_data.type),"-",soy.$$escapeHtml(opt_data.subType)," ",opt_data.hidden?"j-visor-result-hidden":"",'" role="option" data-type="',soy.$$escapeHtml(opt_data.type),'" data-subType="',soy.$$escapeHtml(opt_data.subType),'" data-value="',soy.$$escapeHtml(opt_data.value),
'" data-url="',soy.$$escapeHtml(opt_data.url),'" data-id="',soy.$$escapeHtml(opt_data.id),'" ><a class="j-visor-result-link" href="',soy.$$escapeHtml(opt_data.url),'"><i class="jive-icon-big ',soy.$$escapeHtml(opt_data.icon),'" role="img"></i>',opt_data.displayExternalAccess?'<i class="icon-eye j-externally-accessible" role="img"></i>':"","<span>",soy.$$escapeHtml(opt_data.value),"</span></a></li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.spotlight.search.topResultPerson");
jive.soy.spotlight.search.topResultPerson=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class=" j-visor-result j-visor-search-result-',soy.$$escapeHtml(opt_data.type)," j-visor-search-result-",soy.$$escapeHtml(opt_data.type),"-",soy.$$escapeHtml(opt_data.subType)," j-visor-result-top-result",opt_data.hidden?" j-visor-result-hidden":"",'" role="option" data-type="',soy.$$escapeHtml(opt_data.type),'"',opt_data.subType?'data-subType="'+soy.$$escapeHtml(opt_data.subType)+
'"':"",'data-url="',soy.$$escapeHtml(opt_data.url),'" data-id="',soy.$$escapeHtml(opt_data.id),'" ><img class="jive-avatar" src="',soy.$$escapeHtml(opt_data.image),'" border="0" height="75" data-height="75" width="75" alt="',soy.$$escapeHtml(opt_data.value),'"><section class="j-search-title"><a href="',soy.$$escapeHtml(opt_data.url),'" class="j-visor-result-link jiveTT-hover-user" data-userid="',soy.$$escapeHtml(opt_data.id),'"><h4>',soy.$$escapeHtml(opt_data.value),'</h4></a></section><section class="j-search-job-title">',
opt_data.profile&&opt_data.profile.title?soy.$$escapeHtml(opt_data.profile.title):"",'</section><section class="j-search-actions"><a class="j-js-send-direct-message" href="#" data-userid="',soy.$$escapeHtml(opt_data.id),'" aria-haspopup="true"><i class="icon-envelope" role="presentation"></i>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2042"),[])),"</a>",opt_data.profile&&opt_data.profile.phone_number?'<a href="tel:'+soy.$$escapeHtml(opt_data.profile.phone_number)+'"><i class="icon-address-book" role="presentation"></i>'+
soy.$$escapeHtml(opt_data.profile.phone_number)+"</a>":"",'</section><\!--[if gt IE 8]><\!--\><div class="j-search-top-result-ribbon" role="presentation">&nbsp;</div><\!--<![endif]--\></li>');return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.spotlight.search.topResultPlace");
jive.soy.spotlight.search.topResultPlace=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class=" j-visor-result j-visor-search-result-',soy.$$escapeHtml(opt_data.type)," j-visor-search-result-",soy.$$escapeHtml(opt_data.type),"-",soy.$$escapeHtml(opt_data.subType)," j-visor-result-top-result",opt_data.hidden?" j-visor-result-hidden":"",'" role="option" data-type="',soy.$$escapeHtml(opt_data.type),'" data-subType="',soy.$$escapeHtml(opt_data.subType),'" data-url="',
soy.$$escapeHtml(opt_data.url),'" data-id="',soy.$$escapeHtml(opt_data.id),'" >',opt_data.image?'<div class="j-search-place-image" style="background-image: url(\''+soy.$$escapeHtml(opt_data.image)+'\')" role="img"></div>':'<i class="j-search-place-icon jive-icon-huge '+soy.$$escapeHtml(opt_data.icon)+'" role="img"></i>','<section class="j-search-title"><a class="j-visor-result-link" href="',soy.$$escapeHtml(opt_data.url),'"><h4>',soy.$$escapeHtml(opt_data.value),'</h4></a></section><section class="j-search-place-type">',
soy.$$escapeHtml(opt_data.displayType),"</section>",!opt_data.isBlog?'<section class="j-search-actions"><a href="'+soy.$$escapeHtml(opt_data.url)+'/content"><i class="icon-stack" role="presentation"></i>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2025"),[]))+'</a><a href="'+soy.$$escapeHtml(opt_data.url)+'/people"><i class="icon-users" role="presentation"></i>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k210e"),[]))+"</a></section>":"",'<\!--[if gt IE 8]><\!--\><div class="j-search-top-result-ribbon j-search-ribbon-',
soy.$$escapeHtml(opt_data.subType),'" role="presentation">&nbsp;</div><\!--<![endif]--\></li>');return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.spotlight.suggestion.content");
jive.soy.spotlight.suggestion.content=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="j-visor-result j-visor-suggestion j-visor-suggestion-',soy.$$escapeHtml(opt_data.type),"-",soy.$$escapeHtml(opt_data.subType),'" role="option" data-type="',soy.$$escapeHtml(opt_data.type),'" data-subType="',soy.$$escapeHtml(opt_data.subType),'" data-url="',soy.$$escapeHtml(opt_data.url),'" >',opt_data.icon?'<i class="jive-icon-big '+soy.$$escapeHtml(opt_data.icon)+'" role="img"></i>':
"",'<div class="j-visor-suggestion-text"><span class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("global.access.content.type."+opt_data.subType)),[])),'</span><a href="',soy.$$escapeHtml(opt_data.url),'" class="j-visor-content-result">',soy.$$escapeHtml(opt_data.value),"</a><small>");if(opt_data.author&&opt_data.place)jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k2002"),arg0:'<a href="'+soy.$$escapeHtml(opt_data.author.url)+'">'+soy.$$escapeHtml(opt_data.author.name)+
"</a>",arg1:'<a href="'+soy.$$escapeHtml(opt_data.place.url)+'">'+soy.$$escapeHtml(opt_data.place.name)+"</a>",noAutoEscape:"true"},output);else if(opt_data.author)jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k2000"),arg0:'<a href="'+soy.$$escapeHtml(opt_data.author.url)+'">'+soy.$$escapeHtml(opt_data.author.name)+"</a>",noAutoEscape:"true"},output);else if(opt_data.place)jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("global.in_container"),arg0:'<a href="'+soy.$$escapeHtml(opt_data.place.url)+
'">'+soy.$$escapeHtml(opt_data.place.name)+"</a>",noAutoEscape:"true"},output);else output.append("&nbsp;");output.append("</small></div></li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.spotlight.suggestion.person");
jive.soy.spotlight.suggestion.person=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="j-visor-result j-visor-suggestion j-visor-suggestion-',soy.$$escapeHtml(opt_data.type),"-",soy.$$escapeHtml(opt_data.subType),'" role="option" data-type="',soy.$$escapeHtml(opt_data.type),'"',opt_data.subType?'data-subType="'+soy.$$escapeHtml(opt_data.subType)+'"':"",'data-url="',soy.$$escapeHtml(opt_data.url),'" >',opt_data.image?'<img class="jive-avatar" src="'+soy.$$escapeHtml(opt_data.image)+
'" width="25" role="img"  alt=""/>':"",'<div class="j-visor-suggestion-text"><a href="',soy.$$escapeHtml(opt_data.url),'" class="jiveTT-hover-user j-visor-content-result" data-userid="',soy.$$escapeHtml(opt_data.id),'">',soy.$$escapeHtml(opt_data.value),"</a><small>",opt_data.profile&&opt_data.profile.title?soy.$$escapeHtml(opt_data.profile.title):"","</small></div></li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.spotlight.suggestion.place");
jive.soy.spotlight.suggestion.place=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="j-visor-result j-visor-suggestion j-visor-suggestion-',soy.$$escapeHtml(opt_data.type),"-",soy.$$escapeHtml(opt_data.subType),'" role="option" data-type="',soy.$$escapeHtml(opt_data.type),'" data-subType="',soy.$$escapeHtml(opt_data.subType),'" data-url="',soy.$$escapeHtml(opt_data.url),'" >',opt_data.icon?'<i class="jive-icon-big '+soy.$$escapeHtml(opt_data.icon)+'"></i>':
"",'<div class="j-visor-suggestion-text"><a href="',soy.$$escapeHtml(opt_data.url),'" class="j-visor-content-result">',soy.$$escapeHtml(opt_data.value),"</a>",opt_data.description?'<small class="tooltip" title="'+soy.$$escapeHtml(opt_data.description)+'">'+soy.$$escapeHtml(opt_data.description)+"&nbsp;</small>":opt_data.displayType?"<small>"+soy.$$escapeHtml(opt_data.displayType)+"&nbsp;</small>":"","</div></li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.spotlight.views.bookmarks");
jive.soy.spotlight.views.bookmarks=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<label for="j-visor-bookmarks-content" class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1ffb"),[])),'</label><ul id="j-visor-bookmarks-content" class="j-visor-suggestions j-visor-suggestions-content j-visor-bookmarks-content" role="listbox"></ul><a href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,"/bookmarks")),'" class="j-visor-show-all">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k34b6"),[])),"</a>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.spotlight.views.defaultView");
jive.soy.spotlight.views.defaultView=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<label for="j-visor-suggestions-content" class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2025"),[])),'</label><ul id="j-visor-suggestions-content" class="j-visor-suggestions j-visor-suggestions-content" role="listbox">');if(opt_data.contentSuggestions){var suggestionList8=opt_data.contentSuggestions;var suggestionListLen8=suggestionList8.length;for(var suggestionIndex8=
0;suggestionIndex8<suggestionListLen8;suggestionIndex8++){var suggestionData8=suggestionList8[suggestionIndex8];jive.soy.spotlight.suggestion.content(suggestionData8,output)}}output.append('</ul><label for="j-visor-suggestions-content" class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2113"),[])),'</label><ul id="j-visor-suggestions-place" class="j-visor-suggestions j-visor-suggestions-place" role="listbox">');if(opt_data.placeSuggestions){var suggestionList16=opt_data.placeSuggestions;
var suggestionListLen16=suggestionList16.length;for(var suggestionIndex16=0;suggestionIndex16<suggestionListLen16;suggestionIndex16++){var suggestionData16=suggestionList16[suggestionIndex16];jive.soy.spotlight.suggestion.place(suggestionData16,output)}}output.append('</ul><label for="j-visor-suggestions-content" class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k210e"),[])),'</label><ul id="j-visor-suggestions-person" class="j-visor-suggestions j-visor-suggestions-person" role="listbox">');
if(opt_data.personSuggestions){var suggestionList24=opt_data.personSuggestions;var suggestionListLen24=suggestionList24.length;for(var suggestionIndex24=0;suggestionIndex24<suggestionListLen24;suggestionIndex24++){var suggestionData24=suggestionList24[suggestionIndex24];jive.soy.spotlight.suggestion.person(suggestionData24,output)}}output.append("</ul>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.spotlight.views.exception");jive.soy.spotlight.views.exception=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-visor-exception ',soy.$$escapeHtml(opt_data.cls),'">',opt_data.icon?'<i class="icon-'+soy.$$escapeHtml(opt_data.icon)+'" role="presentation"></i>':"",soy.$$escapeHtml(opt_data.message),"</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.spotlight.views.history");
jive.soy.spotlight.views.history=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<label for="j-visor-suggestions-content" class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2025"),[])),'</label><ul id="j-visor-suggestions-content" class="j-visor-suggestions j-visor-suggestions-content" role="listbox"></ul><label for="j-visor-suggestions-content" class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2113"),[])),'</label><ul id="j-visor-suggestions-place" class="j-visor-suggestions j-visor-suggestions-place" role="listbox"></ul><label for="j-visor-suggestions-content" class="j-508-label">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k210e"),[])),'</label><ul id="j-visor-suggestions-person" class="j-visor-suggestions j-visor-suggestions-person" role="listbox"></ul><a href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,"/content",{"filterID":"historyarchetype[content]"})),'" class="j-visor-show-all">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k34bb"),[])),"</a>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.spotlight.views.search");
jive.soy.spotlight.views.search=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-visor-search-results-wrapper"><label for="j-visor-search-results-top" class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k34a9"),[])),'</label><ul id="j-visor-search-results-top" class="j-visor-search-results-inner j-visor-search-results-top" role="listbox"></ul><div class="j-visor-search-results-header"><h2 id="j-visor-search-results-header-content" class="j-visor-search-main-header">',soy.$$escapeHtml(String(jive.i18n.i18nText(jive.i18n.getMsg("k2025"),
[])).toUpperCase()),'</h2><nav class="j-visor-filters font-color-meta"><a class="j-visor-search-filter j-visor-search-filter-container" aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k34bd"),[])),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k34bd"),[])),'" href="#"></a><a class="j-visor-search-filter-clear" href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k34bd"),[])),'</a></nav></div><ul id="j-visor-search-results-content" class="j-visor-search-results-inner j-visor-search-results-main" data-type="content" role="listbox" aria-labelledby="j-visor-search-results-header-content"></ul><aside class="j-visor-search-results-aside"><h2 id="j-visor-search-results-header-person">',
soy.$$escapeHtml(String(jive.i18n.i18nText(jive.i18n.getMsg("k210e"),[])).toUpperCase()),'<a href="#" class="j-get-more-link font-color-meta" data-type="person" aria-hidden="true">',soy.$$escapeHtml(String(jive.i18n.i18nText(jive.i18n.getMsg("k34bf"),[])).substr(0,1).toUpperCase()+String(jive.i18n.i18nText(jive.i18n.getMsg("k34bf"),[])).substr(1)),'</a></h2><ul id="j-visor-search-results-people" class="j-visor-search-results-people" data-type="person" role="listbox" aria-labelledby="j-visor-search-results-header-person"></ul><h2 id="j-visor-search-results-header-place">',
soy.$$escapeHtml(String(jive.i18n.i18nText(jive.i18n.getMsg("k2113"),[])).toUpperCase()),'<a href="#" class="j-get-more-link font-color-meta" data-type="place" aria-hidden="true">',soy.$$escapeHtml(String(jive.i18n.i18nText(jive.i18n.getMsg("k34bf"),[])).substr(0,1).toUpperCase()+String(jive.i18n.i18nText(jive.i18n.getMsg("k34bf"),[])).substr(1)),'</a></h2><ul id="j-visor-search-results-places" class="j-visor-search-results-places" data-type="place" role="listbox" aria-labelledby="j-visor-search-results-header-place"></ul></aside></div>');
return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.spotlight.visor");
jive.soy.spotlight.visor=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div id="j-search-visor" role="combobox" aria-expanded="false" aria-autocomplete="list" aria-owns="j-visor-search-input" aria-hidden="true" aria-busy="true"><div class="j-search-visor-inner"><div class="j-visor-searchbar-wrapper"><label for="j-visor-search-input" class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2144"),[])),'</label><span class="j-search-n-spinner-wrapper"><i class="j-searchbar-icon icon-search"></i><i class="j-searchbar-thinker icon-spinner spin" aria-hidden="true"></i></span><input id="j-visor-search-input" type="text" class="j-search-input" value="" required="required"/><a class="j-searchbar-close" aria-label="',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200e"),[])),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200e"),[])),'" href="#"><i class="icon-close-thin"></i></a></div>',opt_data.enableQueryFilters?'<ul class="j-visor-parserfilters list-unstyled list-inline"></ul>':"",'<nav class="j-visor-tabs"><a class="j-visor-menu-item j-visor-menu-item-default j-active" data-view="default" role="menuitem" href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k34b9"),[])),
'</a><a class="j-visor-menu-item j-visor-menu-item-history" data-view="history" role="menuitem" href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k34bc"),[])),'</a><a class="j-visor-menu-item j-visor-menu-item-bookmarks" data-view="bookmarks" role="menuitem" href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k34b7"),[])),'</a></nav><div class="j-visor-views"><div class="j-visor-view-blank"></div></div></div></div>');return opt_sb?"":output.toString()};
;
(function(b,d,c){if(typeof c.module!=="undefined"&&c.module["exports"]){c.module["exports"]=d.apply(c)}else{if(typeof c.define!=="undefined"&&c.define==="function"&&c.define["amd"]){define(b,[],d)}else{c[b]=d()}}})("ydn",function(){var b0,bY=this;function bW(m){return void 0!==m}function c3(q){var m=typeof q;if("object"==m){if(q){if(q instanceof Array){return"array"}if(q instanceof Object){return m}var r=Object.prototype.toString.call(q);if("[object Window]"==r){return"object"}if("[object Array]"==r||"number"==typeof q.length&&"undefined"!=typeof q.splice&&"undefined"!=typeof q.propertyIsEnumerable&&!q.propertyIsEnumerable("splice")){return"array"}if("[object Function]"==r||"undefined"!=typeof q.call&&"undefined"!=typeof q.propertyIsEnumerable&&!q.propertyIsEnumerable("call")){return"function"}}else{return"null"}}else{if("function"==m&&"undefined"==typeof q.call){return"object"}}return m}function bU(m){return"array"==c3(m)}function bT(q){var m=c3(q);return"array"==m||"object"==m&&"number"==typeof q.length}function bR(m){return"string"==typeof m}function cD(m){return"boolean"==typeof m}function cK(m){return"number"==typeof m}function cJ(m){return"function"==c3(m)}function cH(q){var m=typeof q;return"object"==m&&null!=q||"function"==m}function b4(q,m,r){return q.call.apply(q.bind,arguments)}function bx(q,m,t){if(!q){throw Error()}if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(x,r);return q.apply(m,x)}}return function(){return q.apply(m,arguments)}}function bj(q,m,r){bj=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b4:bx;return bj.apply(null,arguments)}var aY=Date.now||function(){return +new Date};function aj(q,m){var x=q.split("."),t=bY;x[0] in t||!t.execScript||t.execScript("var "+x[0]);for(var r;x.length&&(r=x.shift());){!x.length&&bW(m)?t[r]=m:t[r]?t=t[r]:t=t[r]={}}}function cG(q,m){function r(){}r.prototype=m.prototype;q.u=m.prototype;q.prototype=new r;q.prototype.constructor=q;q.fb=function(t,z,x){return m.prototype[z].apply(t,Array.prototype.slice.call(arguments,2))}}function s(m){m.prototype.then=m.prototype.then;m.prototype.$goog_Thenable=!0}function c(q){if(!q){return !1}try{return !!q.$goog_Thenable}catch(m){return !1}}function cF(q){if(Error.captureStackTrace){Error.captureStackTrace(this,cF)}else{var m=Error().stack;m&&(this.stack=m)}q&&(this.message=String(q))}cG(cF,Error);cF.prototype.name="CustomError";function da(q){for(var m=0;1>m;m++){if('"'==q.charAt(0)&&'"'==q.charAt(q.length-1)){return q.substring(1,q.length-1)}}return q}var cT={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},cf={"'":"\\'"};function bS(q){q=String(q);if(q.quote){return q.quote()}for(var m=['"'],A=0;A<q.length;A++){var z=q.charAt(A),x=z.charCodeAt(0),t=A+1,r;if(!(r=cT[z])){if(!(31<x&&127>x)){if(z in cf){z=cf[z]}else{if(z in cT){z=cf[z]=cT[z]}else{x=z;r=z.charCodeAt(0);if(31<r&&127>r){x=z}else{if(256>r){if(x="\\x",16>r||256<r){x+="0"}}else{x="\\u",4096>r&&(x+="0")}x+=r.toString(16).toUpperCase()}z=cf[z]=x}}}r=z}m[t]=r}m.push('"');return m.join("")}var bE=Array.prototype,bq=bE.indexOf?function(q,m,r){return bE.indexOf.call(q,m,r)}:function(q,m,r){r=null==r?0:0>r?Math.max(0,q.length+r):r;if(bR(q)){return bR(m)&&1==m.length?q.indexOf(m,r):-1}for(;r<q.length;r++){if(r in q&&q[r]===m){return r}}return -1},a5=bE.map?function(q,m,r){return bE.map.call(q,m,r)}:function(q,m,A){for(var z=q.length,x=Array(z),t=bR(q)?q.split(""):q,r=0;r<z;r++){r in t&&(x[r]=m.call(A,t[r],r,q))}return x},aR=bE.some?function(q,m,r){return bE.some.call(q,m,r)}:function(q,m,z){for(var x=q.length,t=bR(q)?q.split(""):q,r=0;r<x;r++){if(r in t&&m.call(z,t[r],r,q)){return !0}}return !1};function aE(q,m){var r=aq(q,m,void 0);return 0>r?null:bR(q)?q.charAt(r):q[r]}function aq(q,m,z){for(var x=q.length,t=bR(q)?q.split(""):q,r=0;r<x;r++){if(r in t&&m.call(z,t[r],r,q)){return r}}return -1}function M(q){var m=q.length;if(0<m){for(var t=Array(m),r=0;r<m;r++){t[r]=q[r]}return t}return[]}function i(q,m){if(!bT(q)||!bT(m)||q.length!=m.length){return !1}for(var x=q.length,t=dj,r=0;r<x;r++){if(!t(q[r],m[r])){return !1}}return !0}function dj(q,m){return q===m}var cE;a:{var cZ=bY.navigator;if(cZ){var bg=cZ.userAgent;if(bg){cE=bg;break a}}cE=""}function aV(q,m){for(var t=bT(m),r=t?m:arguments,t=t?0:1;t<r.length&&(q=q[r[t]],bW(q));t++){}return q}function aJ(m){bY.setTimeout(function(){throw m},0)}var av;function ag(){var q=bY.MessageChannel;"undefined"===typeof q&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&(q=function(){var z=document.createElement("iframe");z.style.display="none";z.src="";document.documentElement.appendChild(z);var x=z.contentWindow,z=x.document;z.open();z.write("");z.close();var B="callImmediate"+Math.random(),A="file:"==x.location.protocol?"*":x.location.protocol+"//"+x.location.host,z=bj(function(C){if(("*"==A||C.origin==A)&&C.data==B){this.port1.onmessage()}},this);x.addEventListener("message",z,!1);this.port1={};this.port2={postMessage:function(){x.postMessage(B,A)}}});if("undefined"!==typeof q&&-1==cE.indexOf("Trident")&&-1==cE.indexOf("MSIE")){var m=new q,t={},r=t;m.port1.onmessage=function(){if(bW(t.next)){t=t.next;var x=t.na;t.na=null;x()}};return function(x){r.next={na:x};r=r.next;m.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange" in document.createElement("script")?function(z){var x=document.createElement("script");x.onreadystatechange=function(){x.onreadystatechange=null;x.parentNode.removeChild(x);x=null;z();z=null};document.documentElement.appendChild(x)}:function(x){bY.setTimeout(x,0)}}function n(q,m){dn||c7();cQ||(dn(),cQ=!0);b8.push(new bO(q,m))}var dn;function c7(){if(bY.Promise&&bY.Promise.resolve){var m=bY.Promise.resolve();dn=function(){m.then(bB)}}else{dn=function(){var q=bB;!cJ(bY.setImmediate)||bY.Window&&bY.Window.prototype.setImmediate==bY.setImmediate?(av||(av=ag()),av(q)):bY.setImmediate(q)}}}var cQ=!1,b8=[];function bB(){for(;b8.length;){var q=b8;b8=[];for(var m=0;m<q.length;m++){var t=q[m];try{t.a.call(t.b)}catch(r){aJ(r)}}}cQ=!1}function bO(q,m){this.a=q;this.b=m}function bn(q,m){this.b=a2;this.f=void 0;this.a=this.c=null;this.d=this.e=!1;try{var t=this;q.call(m,function(x){aO(t,aB,x)},function(x){aO(t,an,x)})}catch(r){aO(this,an,r)}}var a2=0,aB=2,an=3;bn.prototype.then=function(q,m,r){return cq(this,cJ(q)?q:null,cJ(m)?m:null,r)};s(bn);function bZ(m){m.b==a2&&n(function(){var q=new bH(void 0);bt(this,q)},m)}function bt(q,m){if(q.b==a2){if(q.c){var A=q.c;if(A.a){for(var z=0,x=-1,t=0,r;r=A.a[t];t++){if(r=r.L){if(z++,r==q&&(x=t),0<=x&&1<z){break}}}0<=x&&(A.b==a2&&1==z?bt(A,m):(z=A.a.splice(x,1)[0],a8(A,z,an,m)))}}else{aO(q,an,m)}}}function cN(q,m){q.a&&q.a.length||q.b!=aB&&q.b!=an||c2(q);q.a||(q.a=[]);q.a.push(m)}function cq(q,m,x,t){var r={L:null,wa:null,xa:null};r.L=new bn(function(z,A){r.wa=m?function(D){try{var C=m.call(t,D);z(C)}catch(B){A(B)}}:z;r.xa=x?function(B){try{var D=x.call(t,B);!bW(D)&&B instanceof bH?A(B):z(D)}catch(C){A(C)}}:A});r.L.c=q;cN(q,r);return r.L}bn.prototype.g=function(m){this.b=a2;aO(this,aB,m)};bn.prototype.i=function(m){this.b=a2;aO(this,an,m)};function aO(q,m,x){if(q.b==a2){if(q==x){m=an,x=new TypeError("Promise cannot resolve to itself")}else{if(c(x)){q.b=1;x.then(q.g,q.i,q);return}if(cH(x)){try{var t=x.then;if(cJ(t)){cC(q,x,t);return}}catch(r){m=an,x=r}}}q.f=x;q.b=m;c2(q);m!=an||x instanceof bH||b3(q,x)}}function cC(q,m,A){function z(B){t||(t=!0,q.i(B))}function x(B){t||(t=!0,q.g(B))}q.b=1;var t=!1;try{A.call(m,x,z)}catch(r){z(r)}}function c2(m){m.e||(m.e=!0,n(m.l,m))}bn.prototype.l=function(){for(;this.a&&this.a.length;){var q=this.a;this.a=[];for(var m=0;m<q.length;m++){a8(this,q[m],this.b,this.f)}}this.e=!1};function a8(q,m,t,r){if(t==aB){m.wa(r)}else{if(m.L){for(;q&&q.d;q=q.c){q.d=!1}}m.xa(r)}}function b3(q,m){q.d=!0;n(function(){q.d&&bK.call(null,m)})}var bK=aJ;function bH(m){cF.call(this,m)}cG(bH,cF);bH.prototype.name="cancel";function cB(q,m){this.i=[];this.ta=m||null;this.b=this.c=!1;this.d=void 0;this.za=this.B=this.l=!1;this.f=0;this.g=null;this.N=0}b0=cB.prototype;b0.Q=function(q,m){this.l=!1;bw(this,q,m)};function bw(q,m,r){q.c=!0;q.d=r;q.b=!m;q.ea()}function bi(m){if(m.c){if(!m.za){throw new aX}m.za=!1}}b0.callback=function(m){bi(this);bw(this,!0,m)};b0.h=function(m){bi(this);bw(this,!1,m)};b0.t=function(q,m){return cz(this,q,null,m)};b0.ma=function(q,m){return cz(this,null,q,m)};b0.la=function(q,m){return cz(this,q,q,m)};function cz(q,m,t,r){q.i.push([m,t,r]);q.c&&q.ea();return q}b0.then=function(q,m,z){var x,t,r=new bn(function(B,A){x=B;t=A});cz(this,x,function(A){t(A)});return r.then(q,m,z)};s(cB);function aK(m){return aR(m.i,function(q){return cJ(q[1])})}cB.prototype.ea=function(){this.f&&this.c&&aK(this)&&(ax(this.f),this.f=0);this.g&&(this.g.N--,delete this.g);for(var q=this.d,m=!1,B=!1;this.i.length&&!this.l;){var A=this.i.shift(),z=A[0],x=A[1],A=A[2];if(z=this.b?x:z){try{var t=z.call(A||this.ta,q);bW(t)&&(this.b=this.b&&(t==q||t instanceof Error),this.d=q=t);c(q)&&(this.l=B=!0)}catch(r){q=r,this.b=!0,aK(this)||(m=!0)}}}this.d=q;B&&(B=bj(this.Q,this,!0),t=bj(this.Q,this,!1),q instanceof cB?(cz(q,B,t),q.B=!0):q.then(B,t));m&&(q=new ai(q),p[q.S]=q,this.f=q.S)};function aX(){cF.call(this)}cG(aX,cF);aX.prototype.message="Deferred has already fired";aX.prototype.name="AlreadyCalledError";function ai(m){this.S=bY.setTimeout(bj(this.b,this),0);this.a=m}ai.prototype.b=function(){delete p[this.S];throw this.a};var p={};function ax(q){var m=p[q];m&&(bY.clearTimeout(m.S),delete p[q])}function cy(m){cF.call(this,m);this.name="ydn.error.ArgumentException"}cG(cy,cF);function b(m){cF.call(this,m);this.name="ydn.error.NotSupportedException"}cG(b,cF);function c9(m){cF.call(this,m);this.name="ydn.error.NotImplementedException"}cG(c9,cF);function cS(m){cF.call(this,m);this.name="ydn.error.InvalidOperationException"}cG(cS,cF);function ce(m){Error.captureStackTrace?Error.captureStackTrace(this,ce):this.stack=Error().stack||"";m&&(this.message=String(m));this.name="ydn.error.InternalError"}cG(ce,Error);ce.prototype.name="ydn.error.InternalError";var bQ=-1!=cE.indexOf("Opera")||-1!=cE.indexOf("OPR"),bD=-1!=cE.indexOf("Trident")||-1!=cE.indexOf("MSIE"),bp=-1!=cE.indexOf("Gecko")&&-1==cE.toLowerCase().indexOf("webkit")&&!(-1!=cE.indexOf("Trident")||-1!=cE.indexOf("MSIE")),a4=-1!=cE.toLowerCase().indexOf("webkit");(function(){var q="",m;if(bQ&&bY.opera){return q=bY.opera.version,cJ(q)?q():q}bp?m=/rv\:([^\);]+)(\)|;)/:bD?m=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:a4&&(m=/WebKit\/(\S+)/);m&&(q=(q=m.exec(cE))?q[1]:"");return bD&&(m=(m=bY.document)?m.documentMode:void 0,m>parseFloat(q))?String(m):q})();function aQ(){}function cw(q,m){cB.call(this,0,m);this.e=[]}cG(cw,cB);cw.prototype.Ta=function(q,m){this.e.push([q,m]);return this};cw.prototype.callback=function(m){this.e.length=0;cw.u.callback.call(this,m)};cw.prototype.h=function(m){this.e.length=0;cw.u.h.call(this,m)};cw.prototype.Va=function(){return this};cB.prototype.done=cB.prototype.t;cB.prototype.fail=cB.prototype.ma;cB.prototype.always=cB.prototype.la;cw.prototype.then=cw.prototype.then;function aD(q,m){var t,r;2==arguments.length&&bR(arguments[1])?(t=!0,r=arguments[1].split(".")):r=(t=bT(m))?m:arguments;for(t=t?0:1;t<r.length&&(q=q[r[t]],bW(q));t++){}return q}var ap={};function G(q){var m=[q];q=new h;for(var z=0,x,t;void 0!==(t=m.pop());){0===z%4&&12<z+4&&(q.write(z),z=0);x=typeof t;if(t instanceof Array){if(z+=4,0<t.length){m.push(ap);for(x=t.length;x--;){m.push(t[x])}continue}else{q.write(z)}}else{if("number"===x){z+=1,q.write(z),di(q,t)}else{if(t instanceof Date){z+=2,q.write(z),di(q,t.valueOf())}else{if("string"===x){z+=3;q.write(z);z=q;for(x=0;x<t.length;x++){var r=t.charCodeAt(x);126>=r?z.write(r+1):16510>=r?(r-=127,z.write(128|r>>8,r&255)):z.write(192|r>>10,r>>2|255,(r|3)<<6)}z.write(0)}else{if(t===ap){q.write(0)}else{return""}}}}}z=0}for(m=q.a.length;"00"===q.a[--m];){}q.a.length=++m;return q.toString()}function di(q,m){var z,x,t;z=m;var r=t=x=0;if(0!==z){if(isFinite(z)){0>z&&(x=1,z=-z);r=0;if(2.2250738585072014e-308<=z){for(t=z;1>t;){r--,t*=2}for(;2<=t;){r++,t/=2}t=r+1023}r=t?Math.floor(4503599627370496*(z/Math.pow(2,r)-1)):Math.floor(z/5e-324)}else{t=2047,isNaN(z)?r=2251799813685248:-Infinity===z&&(x=1)}}z=x;x=t;t=r;z&&(t=4503599627370495-t,x=2047-x);q.write((z?0:128)|x>>4);q.write((x&15)<<4|0|t/281474976710656);t%=281474976710656;z=0|t/4294967296;q.write(z>>8,z&255);t%=4294967296;z=0|t/65536;q.write(z>>8,z&255);z=t%65536;q.write(z>>8,z&255)}function cY(q){var m=bf(q)|0,z=m>>7?!1:!0,x=z?-1:1,t=(m&127)<<4,m=bf(q)|0,t=t+(m>>4);z&&(t=2047-t);for(var m=[z?15-(m&15):m&15],r=6;r--;){m.push(z?255-(bf(q)|0):bf(q)|0)}q=0;for(r=7;r--;){q=q/256+m[r]}q/=16;return 0===q&&0===t?0:(q+1)*Math.pow(2,t-1023)*x}function aU(q){for(var m=[],A=0,z=0,x=0,t,r;;){t=bf(q);if(0===t||null==t){break}0===A?(r=t>>6,2>r&&!isNaN(t)?m.push(String.fromCharCode(t-1)):(A=r,z=t<<10,x++)):2===A?(m.push(String.fromCharCode(z+t+127)),A=z=x=0):2===x?(z+=t<<2,x++):(m.push(String.fromCharCode(z|t>>6)),A=z=x=0)}return m.join("")}function aH(m){this.a=null;this.b=m;this.c=this.b.length-1;this.index=-1}function bf(m){return m.a=m.index<m.c?parseInt(m.b.charAt(++m.index)+m.b.charAt(++m.index),16):null}function h(){this.a=[];this.b=void 0}h.prototype.write=function(q){for(var m=0;m<arguments.length;m++){this.b=arguments[m].toString(16),this.a.push(2===this.b.length?this.b:this.b="0"+this.b)}};h.prototype.toString=function(){return this.a.length?this.a.join(""):""};function au(q,m){var t=G(q),r=G(m);return t>r?1:t==r?0:-1}var af={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},l=af.READ_ONLY,cv=af.READ_WRITE,dm=af.VERSION_CHANGE,cu=bY.indexedDB||bY.mozIndexedDB||bY.webkitIndexedDB||bY.moz_indexedDB||bY.msIndexedDB;function ct(q,m,r){cw.call(this,0,r);this.r=q;this.e=[];this.n=[];this.Ca=[];this.a=null;this.J="";this.W=0}cG(ct,cw);b0=ct.prototype;b0.J="";b0.logger=null;function c6(q,m,r){q.a=m;q.J=r;if(m){for(r=0;r<q.n.length;r++){q.n[r][0].call(q.n[r][1],m)}q.n.length=0}}function cP(q){var m=new ct(q.r);q.W++;c6(m,q.a,q.J+"C"+q.W);return m}b0.Ma=function(){return !!this.a};b0.abort=function(){if(this.a){if(cJ(this.a.abort)){this.a.abort()}else{if(cJ(this.a.executeSql)){this.a.executeSql("ABORT",[],function(){},function(){return !0})}else{throw new b}}}else{throw new b7("")}};function cs(q,m,t){var r=q.Ca.shift();t=!!t;r?r[0].call(r[1],m,t,function(x,z){cs(q,x,z)}):t?q.h(m):q.callback(m)}function bN(q,m,r){q.Ca.push([m,r])}function cr(q,m,r){q.a?m.call(r,q.a):q.n.push([m,r])}b0.callback=function(m){ct.u.callback.call(this,m)};b0.h=function(m){ct.u.h.call(this,m)};function bA(q){var m="";q.J&&(m=q.a?"*":"",m="["+q.J+m+"]");return q.r+m}function bm(q,m){var r=new ct(q);cs(r,m);return r}b0.toString=function(){return"Request:"+bA(this)};b0.ea=function(){this.f&&this.c&&aK(this)&&(ax(this.f),this.f=0);this.g&&(this.g.N--,delete this.g);for(var q=this.d,m=!1;this.i.length&&!this.l;){var x=this.i.shift(),t=x[0],r=x[1],x=x[2];if(t=this.b?r:t){t=t.call(x||this.ta,q),bW(t)&&(this.b=this.b&&(t==q||t instanceof Error),this.d=q=t),c(q)&&(this.l=m=!0)}}this.d=q;m&&(m=bj(this.Q,this,!0),t=bj(this.Q,this,!1),q instanceof cB?(cz(q,m,t),q.B=!0):q.then(m,t))};b0.toJSON=function(){var m=(this.J||"").match(/B(\d+)T(\d+)(?:Q(\d+?))?(?:R(\d+))?/)||[];return{method:this.r?this.r.split(":"):[],branchNo:parseFloat(m[1]),transactionNo:parseFloat(m[2]),queueNo:parseFloat(m[3]),requestNo:parseFloat(m[4])}};var a1=cu&&cu.cmp?bj(cu.cmp,cu):au,aN=[];function aA(q,m){this.type=q;this.target=m}aA.prototype.preventDefault=function(){};function am(q,m){aA.call(this,q,m)}cG(am,aA);am.prototype.a=function(){return this.b};function w(q,m,x,t,r){aA.call(this,q,m);this.version=x;this.Ja=t;this.ua=r}cG(w,am);b0=w.prototype;b0.name="ReadyEvent";b0.version=NaN;b0.Ja=NaN;b0.ua=null;b0.cb=function(){return this.version};b0.Qa=function(){return this.Ja};b0.Pa=function(){return this.ua};function f(q,m,r){aA.call(this,r||"error",q);this.error=m}cG(f,am);f.prototype.toString=function(){return this.name+":"+(this.error?this.error:"")};f.prototype.name="ErrorEvent";f.prototype.error=null;f.prototype.c=function(){return this.error};function dg(q,m){f.call(this,q,m,"fail")}cG(dg,f);dg.prototype.name="FailEvent";function cW(q,m,t){var r;if(cH(q)){r=q.store,m=q.id,null!=q.parent&&(t=new cW(q.parent))}else{if(bW(m)){r=q}else{if(r=q.lastIndexOf("^|"),m=q,0<r&&(m=q.substr(r),t=new cW(q.substring(0,r))),m=m.split("^:"),r=m[0],m=m[1],!bW(m)){throw Error("Invalid key value: "+q)}}}this.b=r;this.a=m;this.c=t||null}b0=cW.prototype;b0.toJSON=function(){var m={store:this.b,id:this.a};this.c&&(m.parent=this.c.toJSON());return m};b0.valueOf=function(){return(this.c?this.c.valueOf()+"^|":"")+this.b+"^:"+this.a};b0.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};b0.ab=function(){return this.b};b0.Oa=function(){return this.a};function cp(m){return bU(m.a)?m.a.join("^|"):m.a instanceof Date?+m.a:m.a}b0.$a=function(){return this.c};function bX(q){if(bT(q)){for(var m=[],t=0,r=q.length;t<r;t++){m[t]=q[t]}return m}return q}function co(q,m,t,r){q>m&&(m=q=void 0);null===q&&(q=void 0);null===m&&(m=void 0);this.lower=q;this.upper=m;this.lowerOpen=!!t;this.upperOpen=!!r}co.prototype.lower=void 0;co.prototype.upper=void 0;co.prototype.toJSON=function(){var m;m=this||{};return{lower:m.lower,upper:m.upper,lowerOpen:m.lowerOpen,upperOpen:m.upperOpen}};function bG(m){return bs(m)}co.only=function(m){return new co(m,m,!1,!1)};co.bound=function(q,m,t,r){return new co(q,m,t,r)};co.upperBound=function(q,m){return new co(void 0,q,void 0,!!m)};co.lowerBound=function(q,m){return new co(q,void 0,!!m,void 0)};function bs(m){return null!=m?null!=m.upper&&null!=m.lower?a7.bound(m.lower,m.upper,!!m.lowerOpen,!!m.upperOpen):null!=m.upper?a7.upperBound(m.upper,m.upperOpen):null!=m.lower?a7.lowerBound(m.lower,m.lowerOpen):null:null}function cL(q,m,z,x,t){if(z){if(z.lowerOpen||z.upperOpen||null==z.lower||null==z.upper||0!==a1(z.lower,z.upper)){if(null!=z.lower){var r=z.lowerOpen?" > ":" >= ";x.push(q+r+"?");t.push(c1(z.lower,m))}null!=z.upper&&(r=z.upperOpen?" < ":" <= ",x.push(q+r+"?"),t.push(c1(z.upper,m)))}else{x.push(q+" = ?"),t.push(c1(z.lower,m))}}}var a7=bY.IDBKeyRange||bY.webkitIDBKeyRange||co;function cA(q,m,z,x,t,r){bW(t)||(t=bU(q)?q.join(", "):q);if(null!=q&&!bR(q)&&!bT(q)){throw new cy("index keyPath for "+t+" must be a string or array, but "+q+" is "+typeof q)}!bW(q)&&bW(t)&&(q=t);this.keyPath=q;this.f=bT(this.keyPath);this.a=t;this.type=b2(m);if(bW(m)){if(!bW(this.type)){throw new cy("type invalid in index: "+this.a)}if(bU(this.keyPath)){throw new cy('composite key for store "'+this.a+'" must not specified type')}}this.unique=!!z;this.multiEntry=!!x;this.g=bR(this.type)?this.type:bJ;this.d=bR(t)?t:bU(q)?this.keyPath.join(","):q;this.c=bS(this.d);this.b=this.f?null:this.keyPath.split(".");this.e=r||null}var bJ="TEXT";function c1(q,m){if("DATE"==m){if(q instanceof Date){return +q}}else{return null!=m?q:G(q)}}function bv(D,C){var B;if("DATE"==C){B=new Date(D)}else{if(bW(C)){B=D}else{for(var A=B=[],z,x=[],t,r,q=new aH(D);null!=bf(q);){if(0===q.a){A=x.pop()}else{if(null===q.a){break}do{t=q.a/4|0;z=q.a%4;for(var m=0;m<t;m++){r=[],A.push(r),x.push(A),A=r}if(0===z&&12<q.a+4){bf(q)}else{break}}while(1);1===z?A.push(cY(q)):2===z?A.push(new Date(cY(q))):3===z?A.push(aU(q)):0===z&&(A=x.pop())}}B=B[0]}}return B}var bh=["BLOB","DATE","INTEGER","NUMERIC",bJ];function b2(m){if(bR(m)){return m=bq(bh,m),bh[m]}}cA.prototype.getName=function(){return this.a};cA.prototype.toJSON=function(){return{name:this.a,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}};cA.prototype.clone=function(){var m=bU(this.keyPath)?M(this.keyPath):this.keyPath;return new cA(m,this.type,this.unique,this.multiEntry,this.a,this.e)};function aW(q,m){return null!=q||null!=m?null!=q?null!=m?bT(q)&&bT(m)?i(q,m)?null:"expect: "+q+", but: "+m:aI(q,m)?null:"expect: "+q+", but: "+m:"keyPath: "+q+" no longer defined":"newly define "+m:null}cA.prototype.hint=function(q){if(!q){return this}var m=bU(this.keyPath)?M(this.keyPath):this.keyPath,r=this.type;bW(q.type)||"TEXT"!=r||(r=void 0);return new cA(m,r,this.unique,this.multiEntry,q.a)};function aw(C,B,A,z,x,t,r,q){if(!bR(C)){throw new cy("store name must be a string")}this.d=C;this.keyPath=bW(B)?B:null;this.g=bT(this.keyPath);if(null!==this.keyPath&&!bR(this.keyPath)&&!this.g){throw new cy("keyPath must be a string or array")}this.b=!!A;var m;if(null!=z){m=b2(z);if(!bW(m)){throw new cy('type "'+z+'" for primary key in store "'+this.d+'" is invalid.')}if(this.g){throw new cy('composite key for store "'+this.d+'" must not specified type')}}this.type=null!=m?m:this.b?"INTEGER":void 0;this.e=bR(this.keyPath)?this.keyPath.split("."):[];this.a=x||[];this.w=!!t;this.G=!!r;this.n=bR(this.type)?this.type:bJ;this.f=bU(this.keyPath)?this.keyPath.join(","):bR(this.keyPath)?this.keyPath:"_ROWID_";this.c=bS(this.f);this.l=!!q;this.i=[]}b0=aw.prototype;b0.w=!1;b0.G=!1;b0.toJSON=function(){for(var q=[],m=0;m<this.a.length;m++){q.push(this.a[m].toJSON())}return{name:this.d,keyPath:this.keyPath,autoIncrement:this.b,type:this.type,indexes:q}};function ah(q){var m=[],x=q.indexes||[];if(bU(x)){for(var t=0;t<x.length;t++){var r;r=x[t];r=new cA(r.keyPath,r.type,r.unique,r.multiEntry,r.name,r.generator);bW(r.keyPath)&&r.keyPath===q.keyPath||m.push(r)}}return new aw(q.name,q.keyPath,q.autoIncrement,"undefined"===q.type||"null"===q.type?void 0:q.type,m,q.dispatchEvents,q.fixed,q.encrypted)}function o(q,m,A,z,x,t,r){q=dp(q,m,A,z,x,t,r);m="";0!=A&&(m+="SELECT "+q.select);m+=" FROM "+q.M;q.k&&(m+=" WHERE "+q.k);q.group&&(m+=" GROUP BY "+q.group);q.C&&(m+=" ORDER BY "+q.C);return m}function dp(H,F,D,C,B,A,z){var x={select:"",M:"",k:"",group:"",C:""},t=H.f,r=H.c,q=null;C!==t&&bR(C)&&(q=c8(H,C));var m=!!q,J=C||t,K=bS(J),E=m?q.type:H.type,I=m&&q.multiEntry;x.M=cR(H);6===D?x.select="COUNT("+r+")":3===D||1===D||2===D?(x.select=r,null!=C&&C!=t&&(x.select+=", "+K)):x.select="*";C=z?"DISTINCT ":"";t=[];I?(I=bS("ydn.db.me:"+H.getName()+":"+q.getName()),x.select=6===D?"COUNT("+C+I+"."+K+")":3===D||1===D||2===D?"DISTINCT "+cR(H)+"."+r+", "+I+"."+K+" AS "+J:"DISTINCT "+cR(H)+".*, "+I+"."+K+" AS "+J,x.M=I+" INNER JOIN "+cR(H)+" USING ("+r+")",null!=B&&(cL(I+"."+K,E,B,t,F),0<t.length&&(x.k=x.k?x.k+(" AND "+t.join(" AND ")):t.join(" AND ")))):null!=B&&(cL(K,E,B,t,F),0<t.length&&(x.k=x.k?x.k+(" AND "+t.join(" AND ")):t.join(" AND ")));m&&!q.unique&&z&&(x.group=K);H=A?"DESC":"ASC";x.C=K+" "+H;m&&(x.C+=", "+r+" "+H);return x}function b9(F,E,D,C,B,A,z,x){var t,r,q,m;null!=B?(t=B.lower,r=B.upper,q=B.lowerOpen,m=B.upperOpen,A?null!=r?(B=a1(x,r),-1==B?(r=x,m=!0):0==B&&(m=!0)):(r=x,m=!0):null!=t?(B=a1(x,t),1==B?(t=x,q=!0):0==B&&(q=!0)):(t=x,q=!0)):A?(r=x,m=!0):(t=x,q=!0);B=new co(t,r,!!q,!!m);C=C?c8(F,C):null;E=dp(F,D,E,C?C.d:F.f,B,A,z);E="SELECT "+E.select+" FROM "+E.M+(E.k?" WHERE "+E.k:"")+(E.group?" GROUP BY "+E.group:"")+" ORDER BY "+E.C;C&&(E+=", "+F.c+(A?"DESC":"ASC"));return E}function bP(F,E,D,C,B,A,z,x,t){var r=c8(F,C),q=r.d;C=r.c;var m=F.c,H;H=(x?" <":" >")+" ";r=c1(A,r.type);z=c1(z,F.type);var I="";B?(F=dp(F,D,E,q,B,x,t),F.k+=" AND ",I=C+H+"?",D.push(r)):(B=x?co.upperBound(A,!0):co.lowerBound(A,!0),F=dp(F,D,E,q,B,x,t),I=F.k,F.k="");F.k+="("+I+" OR ("+C+" = ? AND "+m+H+"?))";D.push(r);D.push(z);return"SELECT "+F.select+" FROM "+F.M+" WHERE "+F.k+(F.group?" GROUP BY "+F.group:"")+" ORDER BY "+F.C}b0.clone=function(){return ah(this.toJSON())};b0.index=function(m){return this.a[m]||null};function c8(q,m){return aE(q.a,function(r){return r.getName()==m})}function bC(q,m){return m===q.keyPath?!0:aR(q.a,function(r){return r.getName()==m})}function cR(m){return bS(m.d)}function bo(D,C){if(!C){return D}var B=D.b,A=bU(D.keyPath)?M(D.keyPath):D.keyPath,z=D.type,x=a5(D.a,function(E){return E.clone()});bW(C.type)||"TEXT"!=z||(z=void 0);bU(C.keyPath)&&bR(A)&&A==C.keyPath.join(",")&&(A=M(C.keyPath));for(var t=0,r=C.a.length;t<r;t++){if(C.a[t].f){for(var q=C.a[t].getName(),m=x.length-1;0<=m;m--){if(0<=q.indexOf(x[m].getName())){x[m]=C.a[t].clone();break}}}}for(t=0;t<x.length;t++){(r=c8(C,x[t].getName()))&&(x[t]=x[t].hint(r))}return new aw(C.d,A,B,z,x)}b0.getName=function(){return this.d};function a3(m){return !!m.keyPath}function aP(q,m,t){if(m){if(!q.keyPath&&null!=t){return t}if(q.g){t=[];for(var r=0;r<q.keyPath.length;r++){t.push(aD(m,q.keyPath[r]))}return t}if(q.keyPath){return aV(m,q.e)}}}function aC(q,m,x){for(var t=0;t<q.e.length;t++){var r=q.e[t];if(t==q.e.length-1){m[r]=x;break}bW(m[r])||(m[r]={});m=m[r]}}function ao(F,E,D){var C=[],B=[];D=bW(D)?D:aP(F,E);bW(D)&&(B.push(F.c),C.push(c1(D,F.type)));for(var A=0;A<F.a.length;A++){var z=F.a[A];if(!z.multiEntry&&z.getName()!==F.keyPath&&"_default_"!=z.getName()){var x;x=z;var t=E;if(null!=t){if(bT(x.keyPath)){for(var r=[],q=0,m=x.keyPath.length;q<m;q++){var H=aD(t,x.keyPath[q]);r[q]=H}x=r}else{x=aD(t,x.keyPath)}}else{x=void 0}null!=x&&(C.push(c1(x,z.type)),B.push(z.c))}}F.G?F.G&&!F.keyPath&&0==F.a.length&&(bR(E)&&-1==E.indexOf(";base64,")?C.push(E):C.push(cn(E)),B.push("_default_")):(C.push(cn(E)),B.push("_default_"));F=[];for(A=C.length-1;0<=A;A--){F[A]="?"}return{Na:B,Xa:F,F:C,key:D}}function y(q,m){if(!m){return"missing store: "+q.d}if(q.d!=m.d){return"store name, expect: "+q.d+", but: "+m.d}var z=aW(q.keyPath,m.keyPath);if(z){return"keyPath, "+z}if(bW(q.b)&&bW(m.b)&&q.b!=m.b){return"autoIncrement, expect:  "+q.b+", but: "+m.b}if(q.a.length!=m.a.length){return"indexes length, expect:  "+q.a.length+", but: "+m.a.length}if(bW(q.type)&&bW(m.type)&&(bT(q.type)?!i(q.type,m.type):q.type!=m.type)){return"data type, expect:  "+q.type+", but: "+m.type}for(z=0;z<q.a.length;z++){var x=c8(m,q.a[z].getName()),t;t=q.a[z];if(x){if(t.a!=x.a){t="name, expect: "+t.a+", but: "+x.a}else{var r=aW(t.keyPath,x.keyPath);t=r?"keyPath, "+r:null!=t.unique&&null!=x.unique&&t.unique!=x.unique?"unique, expect: "+t.unique+", but: "+x.unique:null!=t.multiEntry&&null!=x.multiEntry&&t.multiEntry!=x.multiEntry?"multiEntry, expect: "+t.multiEntry+", but: "+x.multiEntry:bW(t.type)&&bW(x.type)&&(bT(t.type)?!i(t.type,x.type):t.type!=x.type)?"data type, expect: "+t.type+", but: "+x.type:""}}else{t="no index for "+t.a}if(0<t.length){return'index "'+q.a[z].getName()+'" '+t}}return""}function g(q,m){if(m){for(var A=0;A<q.a.length;A++){var z=q.a[A],x=m;if(z.e){var t=z.e(x),r=typeof t;if("string"==r||"number"==r||t instanceof Date||bU(t)){for(r=0;r<z.b.length-1;r++){cH(x[z.b[r]])||(x[z.b[r]]={})}x[z.b[z.b.length-1]]=t}}}}}function cl(q,m,z,x,t){for(var r=0;r<q.i.length;r++){x!==r&&q.i[r].call(t,m,z)}}function dh(m){return !bR(m)||/^[\s\xa0]*$/.test(m)?{}:JSON.parse(m)}function cX(q){var m;try{m=cn(q)}catch(r){m=""}return m?m.substr(0,70)+(70<m.length?"...":""):""}function cn(m){return JSON.stringify(m,void 0,void 0)}function a9(m){this.a=m}function aS(q,m){this.name=q;this.a=m}aS.prototype.getName=function(){return this.name};aS.prototype.count=function(){return this.a.length};aS.prototype.index=function(m){return this.a[m]};function aF(q){if(!bU(q.sources)){throw new cy("indexes require for full text search index "+q.name+", but "+q.sources+" of type "+typeof q.sources+" found.")}var m=q.sources.map(function(r){return new a9(r.storeName)});return new aS(q.name,m)}function ar(q,m){var B,A,z=m;if(cH(q)){A=q;B=A.version;for(var z=[],x=A.stores||[],t=0;t<x.length;t++){var r=ah(x[t]);z.push(r)}}else{bR(q)?B=0==q.length?void 0:parseFloat(q):cK(q)&&(B=q)}if(bW(B)){if(!cK(B)||0>B){throw new cy("Invalid version: "+B+" ("+q+")")}isNaN(B)&&(B=void 0)}if(bW(m)&&(!bU(m)||0<m.length&&!(m[0] instanceof aw))){throw new cy("stores")}this.version=B;this.U=!bW(this.version);this.a=z||[];B=[];if(A&&A.fullTextCatalogs){for(t=0;t<A.fullTextCatalogs.length;t++){z=aF(A.fullTextCatalogs[t]),B[t]=z,ck(this,z.getName())||(x=[new cA("k",bJ),new cA("v",bJ)],z=new aw(z.getName(),"id",!1,void 0,x,!1,!1,!1),this.a.push(z))}}this.b=B}b0=ar.prototype;b0.toJSON=function(){var q=a5(this.a,function(r){return r.toJSON()}),m={};m.stores=q;bW(this.version)&&(m.version=this.version);return m};b0.U=!1;b0.q=function(){return !1};function R(m){return a5(m.a,function(q){return q.getName()})}b0.I=function(m){return this.a[m]||null};b0.count=function(){return this.a.length};function ck(q,m){return aE(q.a,function(r){return r.getName()==m})}function j(q,m){return aR(q.a,function(r){return r.getName()==m})}function dk(D,C,B,A){if(!C||D.a.length!=C.a.length){return"Number of store: "+D.a.length+" vs "+C.a.length}for(var z=0;z<D.a.length;z++){var x=ck(C,D.a[z].getName());if(x){B&&(x=bo(x,D.a[z]));if(A){for(var t=x,r=D.a[z],q=0;q<r.a.length;q++){var m=r.a[q];bC(t,m.getName())||"BLOB"!=m.type||(m=new cA(m.keyPath,m.type,m.unique,m.multiEntry,m.getName()),t.a.push(m))}}x=y(D.a[z],x);if(0<x.length){return'store: "'+D.a[z].getName()+'" '+x}}else{return'missing object store "'+D.a[z].getName()+'"'}}return""}function c4(q,m){ar.call(this,q,m)}cG(c4,ar);c4.prototype.q=function(){return !0};function cM(q,m){q.a.push(m)}function b5(m){Error.captureStackTrace?Error.captureStackTrace(this,b5):this.stack=Error().stack||"";m&&(this.message=String(m));this.name="ydn.error.InternalError"}cG(b5,Error);b5.prototype.name="ydn.InternalError";function bL(m){Error.captureStackTrace?Error.captureStackTrace(this,bL):this.stack=Error().stack||"";m&&(this.message=String(m));this.name="ydn.error.ConstraintError"}cG(bL,Error);bL.prototype.name="ydn.error.ConstraintError";function aI(q,m){var z;z=z||{};if(null!=q&&null!=m){if(bT(q)&&bT(m)){if(q.length!=m.length){return !1}for(var x=0;x<q.length;x++){if(-1==aE(m,function(A){return aI(A,q[x])})){return !1}}return !0}if(bT(q)){return 1==q.length&&aI(q[0],m)}if(bT(m)){return 1==m.length&&aI(m[0],q)}if(cH(q)&&cH(q)){for(var t in q){if(q.hasOwnProperty(t)&&!z[t]){var r=aI(q[t],m[t]);if(!r){return !1}}}for(t in m){if(m.hasOwnProperty(t)&&!z[t]&&(r=aI(q[t],m[t]),!r)){return !1}}return !0}return q===m}return !1}function cj(q,m,x){x=x||{};this.n=x.mechanisms||by;this.l=x.size;this.r=bW(x.connectionTimeout)?x.connectionTimeout:60000;this.a=null;this.e=[];this.T=!1;var t;if(m instanceof ar){t=m}else{if(cH(m)){x.autoSchema||!bW(m.stores)?t=new c4(m):t=new ar(m);var r=m.stores?m.stores.length:0;for(x=0;x<r;x++){ck(t,m.stores[x].name)}}else{t=new c4}}this.b=t;for(x=0;x<this.b.count();x++){this.b.I(x).l&&this.b.I(x)}bW(q)&&this.i(q);this.d=new cB}cj.prototype.logger=null;cj.prototype.B=function(q){if(bW(q)){var m=function(t){q(t.toJSON());q=void 0};if(this.a){this.a.v(m)}else{var r=this;this.transaction(function(t){r.a.v(m,t)},null,l)}}return this.b?this.b.toJSON():null};function bk(q,m){var t=m instanceof aw?m:ah(m),r=ck(q.b,m.name);if(0==y(t,r).length){(new cB).callback(!1)}else{if(q.b instanceof c4){cM(q.b,t),q.a?(q.a.close(),q.a=null,aZ(q)):(new cB).callback(!1)}else{throw new bL("")}}}cj.prototype.i=function(m){if(this.a){throw new cS("Already connected with "+this.f)}this.f=m;aZ(this)};cj.prototype.getName=function(){return this.f};var by="indexeddb sqlite websql localstorage sessionstorage userdata memory".split(" ");b0=cj.prototype;b0.ca=function(){return null};function aZ(q){function m(B,C){B?(q.qa=NaN,z.va=function(){},z.ga=function(){q.a=null},z.ya=function(){},setTimeout(function(){aL(q,C);ay(q)},10),A.callback(C)):(setTimeout(function(){aL(q,new dg(q,C));if(q.e){for(var D;D=q.e.shift();){D.o&&D.o("error",C)}}},10),A.h(C))}for(var A=new cB,z=null,x=q.n,t=0;t<x.length;t++){var r=x[t].toLowerCase();if(z=q.ca(r)){z=q.ca(r);break}}null===z?(x=new bL("No storage mechanism found."),m(!1,new dg(q,x))):cz(z.ia(q.f,q.b),function(B){this.a=z;m(!0,new w("ready",this,parseFloat(z.Ia()),parseFloat(B),null))},function(B){m(!1,B)},q)}b0.ka=function(){if(this.a){return this.a.Ha()}};b0.Y=function(q,m){this.d.la(q,m)};function aL(q,m){setTimeout(function(){q.b.U&&q.d.c||(m instanceof f?q.d.h(m.error):q.d.callback())},4)}function ak(m){return !!m.a&&m.a.ja()}b0.close=function(){this.a&&(this.a.close(),this.a=null)};b0.bb=function(){return this.a?this.a.Ga():null};b0.qa=NaN;function ay(q){var m=q.e.shift();m&&q.transaction(m.R,m.Wa,m.mode,m.o);q.qa=aY()}b0.T=!1;b0.transaction=function(q,m,A,z){var x=m;bR(m)?x=[m]:null!=m||(x=null);if(this.a&&this.a.ja()&&!this.T){var t=this,r=bW(A)?A:l;r==dm&&(this.T=!0);this.a.da(function(B){q(B);q=null},x,r,function(C,B){cJ(z)&&(z(C,B),z=void 0);r==dm&&(t.T=!1);ay(t)})}else{this.e.push({R:q,Wa:x,mode:A,o:z})}};cj.prototype.close=cj.prototype.close;cj.prototype.getType=cj.prototype.ka;cj.prototype.getName=cj.prototype.getName;cj.prototype.getSchema=cj.prototype.B;cj.prototype.onReady=cj.prototype.Y;cj.prototype.setName=cj.prototype.i;cj.prototype.transaction=cj.prototype.transaction;cj.prototype.db=cj.prototype.bb;aj("ydn.db.version","1.1.2");aj("ydn.db.cmp",a1);aj("ydn.db.deleteDatabase",function(q,m){for(var x,t=0;t<aN.length;t++){var r=aN[t](q,m);r&&(x=r)}return x||bm("vc",null)});w.prototype.name=w.prototype.name;w.prototype.getVersion=w.prototype.cb;w.prototype.getOldVersion=w.prototype.Qa;w.prototype.getOldSchema=w.prototype.Pa;f.prototype.getError=f.prototype.c;ct.prototype.abort=ct.prototype.abort;ct.prototype.canAbort=ct.prototype.Ma;cw.prototype.progress=cw.prototype.Ta;cw.prototype.promise=cw.prototype.Va;function u(m){Error.captureStackTrace?Error.captureStackTrace(this,u):this.stack=Error().stack||"";m&&(this.message=String(m));this.name="ConstraintError"}cG(u,Error);u.prototype.name="ConstraintError";function b7(m){Error.captureStackTrace?Error.captureStackTrace(this,b7):this.stack=Error().stack||"";m&&(this.message=String(m));this.name="InvalidStateError"}cG(b7,Error);function d(m){Error.captureStackTrace?Error.captureStackTrace(this,d):this.stack=Error().stack||"";m&&(this.message=String(m));this.name="NotFoundError"}cG(d,Error);d.prototype.name="NotFoundError";function de(q,m){Error.captureStackTrace?Error.captureStackTrace(this,de):this.stack=Error().stack||"";m&&(this.message=String(m));this.message+=" :"+q.message+" ["+q.code+"]";this.name="SQLError"}cG(de,Error);function cU(q,m){Error.captureStackTrace?Error.captureStackTrace(this,cU):this.stack=Error().stack||"";m&&(this.message=String(m));this.message+=" :"+q.message;this.name="SecurityError"}cG(cU,Error);function cm(m){Error.captureStackTrace?Error.captureStackTrace(this,cm):this.stack=Error().stack||"";m&&(this.message=String(m));this.name="ydn.db.TimeoutError"}cG(cm,Error);function bV(q,m){this.a=m}bV.prototype.logger=null;function bF(m){this.d=m;this.a=null;this.b=0}bF.prototype.logger=null;bF.prototype.p=null;function br(m){return !!m.a&&!m.c}bF.prototype.o=null;function a6(q,m,z,x,t,r){this.i=q;this.W=m;this.a=this.d=0;this.N=x;this.B=t;this.f=z||cI;this.l=r||0}a6.prototype.logger=null;a6.prototype.type=function(){return this.i.ka()};a6.prototype.s=function(){return"B"+this.W+"T"+this.d};var cI="single";function c0(m){if(m){if(cJ(m.abort)){m.abort()}else{if(cJ(m.executeSql)){m.executeSql("ABORT",[],null,function(){return !0})}else{throw new b}}}else{throw new b7("No active transaction")}}function cx(q,m,z,x,t,r){a6.call(this,q,m,z,x,t,r);this.c=[];this.e=[];this.g=null;this.b=new bF(m);this.n=r||0;this.r=!1}cG(cx,a6);b0=cx.prototype;b0.logger=null;function b1(q,m,r){if("multi"==q.f){q:if(q=q.b,!q.p||!q.mode||r!=q.mode&&(q.mode!=cv||r!=l)||m.length>q.p.length){m=!1}else{for(r=0;r<m.length;r++){if(-1==q.p.indexOf(m[r])){m=!1;break q}}m=!0}}else{if("repeat"==q.f){q:if(q=q.b,q.p&&q.mode&&r==q.mode&&q.p.length==m.length){for(r=0;r<m.length;r++){if(-1==q.p.indexOf(m[r])){m=!1;break q}}m=!0}else{m=!1}}else{m="all"==q.f?!0:!1}}return m}function bI(q){var m=0<q.c.length?q.c[0].p:null,r=0<q.c.length?q.c[0].mode:null;return null!=m&&null!=r?b1(q,m,r):!1}b0.abort=function(){c0(this.g)};b0.D=function(q,m,A,z){var x=bR(m)?[m]:m,t=bW(A)?A:l,r=this;if(this.b.a||!ak(this.i)&&this.r){this.c.push({R:q,p:m,mode:t,o:z})}else{z&&this.e.push(z);if(this.n&&this.d>=this.n){throw new cS("Exceed maximum number of transactions of "+this.n)}this.r=!0;this.i.transaction(function(C){var B=r.b;B.a=C;B.c=!1;B.p=m;B.mode=t;B.b++;B.o=null;cn(m);q(r);for(q=null;bI(r);){C=r.c.shift(),C.o&&r.e.push(C.o),C.R()}},x,t,function(C,B){var D=r.b;D.a&&(D.a=null,D.p=null,D.mode=null,cJ(D.o)&&D.o(C,B),D.o=null);for(D=0;D<r.e.length;D++){(0,r.e[D])(C,B)}r.e.length=0;(D=r.c.shift())&&r.D(D.R,D.p,D.mode,D.o);r.a=0})}};b0.s=function(){var m=this.b;return"B"+m.d+"T"+m.b};b0.request=function(q,m,A,z){function x(C,B){t.a=null;z&&z(C,B)}var t=new ct(q);q=A||l;var r=this;br(this.b)&&b1(this,m,q)?(m=this.b.a,this.a++,c6(t,m,this.s()+"R"+this.a),this.e.push(x)):r.D(function(){var B=r.b.a;r.a++;c6(t,B,r.s()+"R"+r.a)},m,q,x);return t};b0.K=function(q,m,B,A,z){A=A||l;var x=this,t;if(br(x.b)&&b1(this,B,A)){var r=x.b.a;x.a++;t=x.s()+"R"+x.a;m(r,t,function(C,D){x.g=r;D?q.h(C):q.callback(C);x.g=null});m=null}else{x.D(function(){var C=x.b.a;x.a++;t=x.s()+"R"+x.a;m(C,t,function(D,E){x.g=C;E?q.h(D):q.callback(D);x.g=null});m=null},B,A,z)}};b0.getName=function(){return this.i.getName()};function bu(q,m){cx.call(this,q,m)}cG(bu,cx);bu.prototype.logger=null;bu.prototype.request=function(q,m,A){var z,x,t,r=bu.u.request.call(this,q,m,A,function(C,B){r.a=null;if(z){"complete"!=C&&(t=!0,x=B),z(x,t)}else{var D=new cm;cs(r,D,!0)}});bN(r,function(C,B,D){t=B;x=C;z=D});return r};bu.prototype.K=function(q,m,B,A,z){var x,t,r=new cB;cz(r,function(C){t=!1;x=C},function(C){t=!0;x=C});bu.u.K.call(this,r,m,B,A,function(C,E){if("complete"!=C){q.h(E)}else{if(!0===t){q.h(x)}else{if(!1===t){q.callback(x)}else{var D=new cm;q.h(D)}}}z&&(z(C,E),z=void 0)})};function be(q,m,r){this.c=q;this.b=m;this.a=r;this.d=null}be.prototype.logger=null;be.prototype.e=function(){return this.a.d};be.prototype.abort=function(){this.a.abort()};function ci(q){if(!q.d){var m;m=q.c;var r=m.ka();if("indexeddb"==r){m=new aT(0,m.b)}else{if("websql"==r||"sqlite"==r){m=new aG(0,m.b)}else{throw new ce("No executor for "+r)}}q.d=m}return q.d}function ch(q,m,r){be.call(this,q,m,r)}cG(ch,be);b0=ch.prototype;b0.logger=null;b0.count=function(C,B,A,z){var x,t,r,q;if(null!=C){if(bU(C)){if(bW(A)||bW(B)){throw new cy("too many arguments.")}t=C;for(var m=0;m<t.length;m++){if(!j(this.b,t[m])){throw new cy('store name "'+t[m]+'" at '+m+" not found.")}}aQ("countStores: "+cn(t));x=this.a.request("d",t);cr(x,function(){ci(this).ba(x,t)},this)}else{if(bR(C)){m=ck(this.b,C);if(!m){throw new cy('store name "'+C+'" not found.')}t=[C];if(bR(B)){r=B,cH(A)?q=bs(A):q=null}else{if(cH(B)||null==B){if(cH(B)){q=bs(B)}else{if(null!=B){throw new cy("key range must be  an object but found "+cX(B)+" of type "+typeof B)}q=null}}else{throw new cy('invalid second argument for count "'+cX(A)+'" of type '+typeof B)}}aQ("countKeyRange: "+C+" "+(r?r:"")+cn(q));x=this.a.request("d",t);cl(m,x,arguments);cr(x,function(){ci(this).pa(x,t[0],q,r,!!z)},this)}else{throw new cy("Invalid store name or store names.")}}}else{m=R(this.b),x=this.a.request("d",m),bN(x,function(E,D,H){if(D){H(E,!0)}else{for(var F=D=0;F<E.length;F++){D+=E[F]}H(D,!1)}},this),cr(x,function(){ci(this).ba(x,t)},this)}return x};b0.get=function(D,C){var B=this,A;if(D instanceof cW){var z=D,x=z.b,t=ck(this.b,x);if(!t){if(this.b.q()){if(ak(this.c)){return bm("e",void 0)}A=new ct("e");this.c.Y(function(){cz(B.get(D,C),function(E){A.callback(E)},function(E){A.h(E)})});return A}throw new cy("Store: "+x+" not found.")}var r=z.a;A=this.a.request("ek",[x]);cl(t,A,arguments,void 0,this);cr(A,function(){ci(this).fa(A,x,r)},this)}else{if(bR(D)&&bW(C)){var q=D,t=ck(this.b,q);if(!t){if(this.b.q()){if(ak(this.c)){return bm("e",void 0)}A=new ct("e");this.c.Y(function(){cz(B.get(D,C),function(E){A.callback(E)},function(E){A.h(E)})});return A}throw new cy('Store name "'+q+'" not found.')}var m=C;A=this.a.request("e",[q]);cl(t,A,arguments,void 0,this);cr(A,function(){ci(this).fa(A,q,m)},this)}else{throw new cy("get require valid input arguments.")}}return A};b0.Sa=function(E,D,C,B,A){var z=ck(this.b,E),x,t,r,q=null;cH(D)&&(q=bs(D));if(bW(C)){if(cK(C)){x=C}else{throw new cy("limit must be a number, but "+C+" is "+typeof C)}}else{x=100}if(bW(B)){if(cK(B)){t=B}else{throw new cy("offset must be a number, but "+B+" is "+typeof B)}}else{t=0}if(bW(A)){if(cD(A)){r=A}else{throw new cy("reverse must be a boolean, but "+A+" is "+typeof A)}}var m=this.a.request("g",[E]);cl(z,m,arguments);cr(m,function(){ci(this).P(m,2,E,null,q,x,t,r,!1)},this);return m};b0.Ra=function(F,E,D,C,B,A,z){var x,t,r,q,m,H=ck(this.b,F);x=bs(D);if(cK(C)){t=C}else{if(bW(C)){throw new cy("limit must be a number")}t=100}if(cK(B)){r=B}else{if(bW(B)){throw new cy("offset must be a number")}r=0}if(bW(A)){if(cD(A)){q=A}else{throw new cy("reverse must be a boolean")}}if(bW(z)){if(cD(z)){m=z}else{throw new cy("unique must be a boolean")}}var I=this.a.request("i",[F]);cl(H,I,arguments);cr(I,function(){ci(this).P(I,2,F,E,x,t,r,q,m)},this);return I};b0.Z=function(q,m,B,A,z,x,t){var r=ck(this.b,q);return this.b.q()&&!r?bm("g",[]):bR(m)?this.Ra(q,m,B,A,z,x,t):this.Sa(q,m,B,A,z)};b0.F=function(H,F,D,C,B,A,z){var x=this,t;if(bR(H)){var r=H,q=ck(this.b,r);if(!q){if(this.b.q()){if(ak(this.c)){return bm("s",[])}t=new ct("s");this.c.Y(function(){cz(x.F(H,F,D,C,B,A),function(K){t.callback(K)},function(K){t.h(K)})});return t}throw new d(r)}if(bU(F)){var m=F;t=this.a.request("v",[r]);cl(q,t,arguments,void 0,this);cr(t,function(){ci(this).ra(t,r,m)},this)}else{t=bR(F)?this.Ya(r,F,D,C,B,A,z):this.Za(r,F,D,C,B)}}else{if(bU(H)){if(H[0] instanceof cW){for(var q=[],I=H,J=0;J<I.length;J++){var E=I[J].b;if(!j(this.b,E)){if(this.b.q()){return q=[],q[I.length-1]=void 0,bm("e",q)}throw new cy("Store: "+E+" not found.")}0<=bq(q,E)||q.push(E)}aQ("listByKeys: "+cn(q)+" "+I.length+" keys");t=this.a.request("w",q);cr(t,function(){ci(this).sa(t,I)},this)}else{throw new cy("first argumentmust be array of ydn.db.Key, but "+H[0]+" of "+typeof H[0]+" found.")}}else{throw new cy("first argument "+H+" is invalid.")}}return t};b0.Za=function(E,D,C,B,A){var z=ck(this.b,E),x,t,r,q=null;cH(D)&&(q=bs(D));if(bW(C)){if(cK(C)){x=C}else{throw new cy("limit must be a number, but "+C+" is "+typeof C)}}else{x=100}if(bW(B)){if(cK(B)){t=B}else{throw new cy("offset must be a number, but "+B+" is "+typeof B)}}else{t=0}if(bW(A)){if(cD(A)){r=A}else{throw new cy("reverse must be a boolean, but "+A+" is "+typeof A)}}var m=this.a.request("s",[E]);cl(z,m,arguments);cr(m,function(){ci(this).P(m,4,E,null,q,x,t,r,!1)},this);return m};b0.Ya=function(F,E,D,C,B,A,z){var x=ck(this.b,F),t,r,q,m,H=bs(D);if(bW(C)){if(cK(C)){t=C}else{throw new cy("limit must be a number.")}}else{t=100}if(bW(B)){if(cK(B)){r=B}else{throw new cy("offset must be a number.")}}else{r=0}if(cD(A)){q=A}else{if(bW(A)){throw new cy("reverse must be a boolean, but "+A)}}if(bW(z)){if(cD(z)){m=z}else{throw new cy("unique must be a boolean")}}var I=this.a.request("u",[F]);cl(x,I,arguments);cr(I,function(){ci(this).P(I,4,F,E,H,t,r,q,m)},this);return I};b0.add=function(q,m,z){var x=bR(q)?q:cH(q)?q.name:void 0;if(!bR(x)){throw new cy("store name "+x+" must be a string, but "+typeof x)}var t=ck(this.b,x);if(!t){if(!this.b.q()){throw new cy('store name "'+x+'" not found.')}t=ah(cH(q)?q:{name:x});bk(this.c,t)}else{if(this.b.q()&&cH(q)&&(q=ah(q),q=y(t,q))){throw new b(q)}}var r;if(!t){throw new cy('store name "'+x+'" not found.')}if(bR(t.keyPath)&&bW(z)){throw new cy("key must not be provided while the store uses in-line key.")}if(!t.keyPath&&!t.b&&!bW(z)){throw new cy("out-of-line key must be provided.")}if(bU(m)){for(q=0;q<m.length;q++){g(t,m[q])}r=this.a.request("b",[x],cv);cr(r,function(){ci(this).A(r,!1,!1,x,m,z)},this);t.w&&r.t(function(){},this)}else{if(cH(m)){aP(t,m,z),g(t,m),r=this.a.request("a",[x],cv),cr(r,function(){ci(this).A(r,!1,!0,x,[m],[z])},this),t.w&&r.t(function(){},this)}else{throw new cy("record must be an object or array list of objects, but "+m+" of type "+typeof m+" found.")}}return r};function at(q,m){var x=bR(m)?m:cH(m)?m.name:void 0;if(!bR(x)){throw new cy("store name must be a string")}var t=ck(q.b,x);if(!t){if(!q.b.q()){throw new d(x)}t=ah(cH(m)?m:{name:x});bk(q.c,t)}else{if(q.b.q()&&cH(m)){var r=ah(m);if(r=y(t,r)){throw new b(r)}}}if(!t){throw new d(x)}return t}b0.load=function(q,m,z){var x=z||",",t=at(this,q).getName();q=this.a.request("i3",[t]);var r=this;this.a.K(q,function(A,C,B){ci(r).Ba(A,C,B,t,m,x)},[t],cv);return q};b0.put=function(N,L,K){var J,I=this;if(N instanceof cW){var H=N,F=H.b,E=ck(this.b,F);if(!E){throw new cy('store "'+F+'" not found.')}if(E.keyPath){var D=aP(E,L);if(null!=D){if(0!=a1(D,H.a)){throw new cy("Inline key must be "+H+" but "+D+" found.")}}else{aC(E,L,H.a)}return this.put(F,L)}return this.put(F,L,H.a)}if(bU(N)){for(var C=N,B=L,H=[],F=0,E=C.length;F<E;F++){D=C[F].b;-1==bq(H,D)&&H.push(D);var A=ck(this.b,D);if(!A){throw new cy('store "'+D+'" not found.')}A.keyPath&&aC(A,B[F],C[F].a)}aQ("putByKeys: to "+cn(H)+" "+B.length+" objects");for(F=0;F<B.length;F++){g(A,B[F])}J=this.a.request("l",H,cv);cl(A,J,arguments);cr(J,function(){ci(I).Aa(J,B,C)},this)}else{if(bR(N)||cH(N)){var A=at(this,N),x=A.getName();if(A.keyPath&&bW(K)){throw new cy("key must not be provided while the store uses in-line key.")}if(!A.keyPath&&!A.b&&!bW(K)){throw new cy("out-of-line key must be provided.")}if(bU(L)){for(var z=L,q=K,F=0;F<z.length;F++){g(A,z[F])}J=this.a.request("k",[x],cv);cl(A,J,arguments);cr(J,function(){ci(this).A(J,!0,!1,x,z,q)},this);A.w&&J.t(function(){},this)}else{if(cH(L)){var r=L,t=K;if(bW(bY.Blob)&&r instanceof Blob&&A.G&&!A.keyPath&&0==A.a.length&&a4){J=new ct("j"),H=new FileReader,H.onload=function(P){var O=P.target.result,Q=I.a.request("j",[x],cv);cl(A,Q,[x,r,t]);cr(Q,function(){ci(I).A(Q,!0,!0,x,[O],[t])},this);cz(Q,function(S){J.callback(S)},function(S){J.h(S)})},H.onerror=function(O){J.h(O)},H.onabort=function(O){J.h(O)},H.readAsDataURL(r)}else{g(A,r);J=this.a.request("j",[x],cv);var m=[x,r,t];cl(A,J,m);cr(J,function(){var O=bW(t)?[m[2]]:void 0;ci(I).A(J,!0,!0,x,[m[1]],O)},this)}A.w&&J.t(function(){},this)}else{throw new cy("put record value must be Object or array of Objects")}}}else{throw new cy("the first argument of put must be store name, store schema or array of keys.")}}return J};b0.clear=function(q,m){var z;if(bR(q)){var x=ck(this.b,q);if(!x){throw new cy('store name "'+q+'" not found.')}if(cH(m)){var t=bs(m);if(null===t){throw new cy("clear method requires a valid non-null KeyRange object.")}aQ("clearByKeyRange: "+q+":"+cn(t));z=this.a.request("c",[q],cv);cl(x,z,[q,t]);cr(z,function(){ci(this).oa(z,q,t)},this)}else{if(bW(m)){throw new cy("clear method requires a valid KeyRange object as second argument, but found "+m+" of type "+typeof m)}z=this.a.request("c",[q],cv);cr(z,function(){ci(this).aa(z,[q])},this)}}else{if(!bW(q)||bU(q)&&bR(q[0])){var r=q||R(this.b);aQ("clearByStores: "+cn(r));z=this.a.request("c",r,cv);cr(z,function(){ci(this).aa(z,r)},this)}else{throw new cy('first argument "'+q+'" is invalid.')}}return z};b0.$=function(E,D,C){var B;if(bR(E)){var A=ck(this.b,E);if(!A){throw new cy('store name "'+E+'" not found.')}if(bW(C)){if(bR(D)){var z=c8(A,D);if(!z){throw new cy("index: "+D+" not found in "+E)}if(cH(C)||null===C){var x=bs(C);B=this.a.request("p",[E],cv);cr(B,function(){ci(this).Da(B,E,z.getName(),x)},this)}else{throw new cy("key range "+C+' is invalid type "'+typeof C+'".')}}else{throw new cy('index name "'+D+'" must be a string, but '+typeof D+" found.")}}else{if(bR(D)||cK(D)||bT(D)||D instanceof Date){B=this.a.request("m",[E],cv);var t=[E,D];cl(A,B,t);cr(B,function(){ci(this).ha(B,E,t[1])},this);A.w&&B.t(function(){},this)}else{if(cH(D)){x=bs(D),aQ("removeByKeyRange: "+E+":"+cn(x)),B=this.a.request("n",[E],cv),cl(A,B,[E,x]),cr(B,function(){ci(this).Ea(B,E,x)},this),A.w&&B.t(function(){},this)}else{throw new cy('Invalid key or key range "'+D+'" of type '+typeof D)}}}}else{if(E instanceof cW){var r=E.b,A=ck(this.b,r);B=this.a.request("m",[r],cv);var q=[r,E.a];cl(A,B,q);cr(B,function(){ci(this).ha(B,r,q[1])},this)}else{if(bU(E)){D=[];C=0;for(A=E.length;C<A;C++){var m=E[C].b;-1==bq(D,m)&&D.push(m)}if(1>D.length){throw new cy('at least one valid key required in key list "'+cX(E)+'"')}B=this.a.request("o",D,cv);cr(B,function(){ci(this).Fa(B,E)},this)}else{throw new cy('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+cX(E)+'" ('+c3(E)+") found.")}}}return B};function ae(q,m,t,r){this.d=q;this.a=M(t);this.b=r;this.c=[]}ae.prototype.d=null;function k(q,m,r){if(q.d){r&&q.c.push(r),m(q.d)}else{throw new ce("tx committed on ParallelTxExecutor")}}function dl(q,m,z,x,t,r){a6.call(this,q,m,z,x,t,r);this.c=this.b=null}cG(dl,a6);b0=dl.prototype;b0.logger=null;b0.abort=function(){c0(this.c)};b0.Ka=function(q,m){var t;if("multi"==this.f){q:if(t=this.b,!t.a||!t.b||m!=t.b&&(t.b!=cv||m!=l)||q.length>t.a.length){t=!1}else{for(var r=0;r<q.length;r++){if(-1==t.a.indexOf(q[r])){t=!1;break q}}t=!0}}else{if("repeat"==this.f){q:if(t=this.b,t.a&&t.b&&m==t.b&&t.a.length==q.length){for(r=0;r<q.length;r++){if(-1==t.a.indexOf(q[r])){t=!1;break q}}t=!0}else{t=!1}}else{t="all"==this.f?!0:!1}}return t};b0.D=function(C,B,A,z){function x(D){q.d++;m=new ae(D,0,B,r);cn(B);q.b=m;k(q.b,C,z)}function t(E,D){if(m){for(var H=m,F=0;F<H.c.length;F++){H.c[F](E,D)}H.c.length=0;H.d=null;H.a=null;H.c=null}q.a=0}this.N&&(B=this.N);this.B&&(A=this.B);var r=bW(A)?A:l,q=this,m;if(this.b&&this.b.d&&this.Ka(B,r)){k(this.b,C,z)}else{if(this.l&&this.d>=this.l){throw new cS("Exceed maximum number of transactions of "+this.l)}this.i.transaction(x,B,r,t)}};b0.request=function(q,m,z,x){var t=new ct(q),r=this;this.D(function(A){r.a++;c6(t,A,r.s()+"R"+r.a)},m,z||l,function(B,A){t.a=null;x&&x(B,A)});return t};b0.K=function(q,m,A,z,x){var t=this,r;this.D(function(B){t.a++;r=t.s()+"R"+t.a;m(B,r,function(C,D){t.c=B;r=t.s()+"R"+t.a;D?q.h(C):q.callback(C);t.c=null});m=null},A,z,x)};function c5(q,m){dl.call(this,q,m,cI)}cG(c5,dl);c5.prototype.logger=null;c5.prototype.Ka=function(){return !1};c5.prototype.request=function(q,m,A){var z,x,t,r=c5.u.request.call(this,q,m,A,function(C,B){r.a=null;if(z){"complete"!=C&&(t=!0,x=B),z(x,t)}else{var D=new cm;cs(r,D,!0)}});bN(r,function(C,B,D){t=B;x=C;z=D});return r};c5.prototype.K=function(q,m,B,A,z){var x,t,r=new cB;cz(r,function(C){t=!1;x=C},function(C){t=!0;x=C});c5.u.K.call(this,r,m,B,A,function(C,E){if("complete"!=C){q.h(E)}else{if(!0===t){q.h(x)}else{if(!1===t){q.callback(x)}else{var D=new cm;q.h(D)}}}z&&(z(C,E),z=void 0)})};function cO(q,m,r){cj.call(this,q,m,r);this.H=0;q=!0;m=cI;r&&(bW(r.isSerial)&&(q=!!r.isSerial),r.policy&&(m=r.policy));r=b6(this,m,q);this.g=b6(this,"atomic",!1);this.c=this.X(r,this.g)}cG(cO,cj);b0=cO.prototype;b0.H=0;b0.La=function(q,m,A,z,x,t){q=q||cI;var r;"readonly"==z?r=l:"readwrite"==z&&(r=cv);q=b6(this,q,m,A,r,x);return this.X(q,t?null:this.g)};b0.X=function(m){return new be(this,this.b,m)};function b6(q,m,z,x,t,r){if(z){if("multi"==m||"repeat"==m||"all"==m||m==cI){return new cx(q,q.H++,m,x,t,r)}if("atomic"==m){return new bu(q,q.H++)}throw new cy('Invalid requestType "'+m+'"')}if("multi"==m||"repeat"==m||"all"==m||m==cI){return new dl(q,q.H++,m,x,t,r)}if("atomic"==m){return new c5(q,q.H++)}throw new cy('Invalid requestType "'+m+'"')}b0.Ua=function(q,m,A){this.H++;m=m||R(this.b);var z=l;if(A){if("readwrite"==A){z=cv}else{if("readonly"!=A){throw new cy('Invalid transaction mode "'+A+'"')}}}var x=b6(this,"all",!1,m,z,1),t=this.X(x,this.g),r=new ct("q");x.D(function(B){c6(r,B,x.s()+"R0");q(t)},m,z,function(B){r.a=null;cs(r,x.d,"complete"!==B)});return r};b0.eb=function(){return this.c?this.c.a.d:NaN};function cg(q,m,x){cO.call(this,q,m,x);q=this.b;for(m=0;m<q.b.length;m++){x=q.b[m];var t=ck(q,x.getName());if(t){if(!bC(t,"k")){throw new cy('full text index store "'+t.getName()+'" must have "keyword" index')}if(!bC(t,"v")){throw new cy('full text index store "'+t.getName()+'" must have "keyword" index')}if("id"!=t.keyPath){throw new cy('full text index store "'+t.getName()+'" must use "id" as key path.')}}else{throw new cy('full text index store "'+x.getName()+'" required.')}for(t=0;t<x.count();t++){var r=x.index(t);if(!ck(q,r.a)){throw new cy('full text source store "'+r.a+'" does not exist for full text index "'+x.getName()+'"')}}}}cG(cg,cO);b0=cg.prototype;b0.X=function(m){return new ch(this,this.b,m)};b0.add=function(q,m,r){return this.c.add(q,m,r)};b0.count=function(q,m,t,r){return this.c.count(q,m,t,r)};b0.get=function(q,m){return this.c.get(q,m)};b0.Z=function(q,m,A,z,x,t,r){return this.c.Z(q,m,A,z,x,t,r)};b0.F=function(q,m,z,x,t,r){return this.c.F(q,m,z,x,t,r)};b0.load=function(q,m,r){return this.c.load(q,m,r)};b0.put=function(q,m,r){return this.c.put(q,m,r)};b0.clear=function(q,m,r){return this.c.clear(q,m,r)};b0.$=function(q,m,r){return this.c.$(q,m,r)};var bM;bM=!1;var bz=cE;bz&&(-1!=bz.indexOf("Firefox")||-1!=bz.indexOf("Camino")||-1!=bz.indexOf("iPad")||-1!=bz.indexOf("iPhone")||-1!=bz.indexOf("iPod")||-1!=bz.indexOf("Chrome")||-1!=bz.indexOf("Android")||-1!=bz.indexOf("Safari")&&(bM=!0));var bl=bM;function a0(q,m){this.j=null;this.O=m||NaN}b0=a0.prototype;b0.ia=function(C,B){function A(D,I){for(var H=0;H<B.a.length;H++){aM(D,I,B.a[H])}for(var F=D.objectStoreNames,E=F.length,H=0;H<E;H++){j(B,F[H])||D.deleteObjectStore(F[H])}}function z(E,D){t.c||(bW(D)?(x.j=null,t.h(D)):(x.j=E,x.j.onabort=function(){},x.j.onerror=function(){},x.j.onversionchange=function(H){if(x.j&&(x.j.onabort=null,x.j.onblocked=null,x.j.onerror=null,x.j.onversionchange=null,!H.defaultPrevented)){x.j.close();x.j=null;var F=Error();F.name=H.type;x.ga(F)}},t.callback(parseFloat(r))))}var x=this,t=new cB,r=void 0,q=B.version,m;m=bW(q)?cu.open(C,q):cu.open(C);m.onsuccess=function(F){var E=F.target.result;bW(r)||(r=E.version);if(B.U){x.v(function(L){if(B instanceof c4){for(var K=0;K<L.a.length;K++){j(B,L.a[K].getName())||cM(B,L.a[K].clone())}}if(0<dk(B,L,!1,!0).length){if(L=cK(E.version)?E.version+1:1,"IDBOpenDBRequest" in bY){E.close();var J=cu.open(C,L);J.onupgradeneeded=function(N){A(N.target.result,J.transaction)};J.onsuccess=function(N){z(N.target.result)};J.onerror=function(){z(null)}}else{var I=E.setVersion(L+"");I.a=function(N){z(null,N)};I.onsuccess=function(){I.transaction.oncomplete=H;A(E,I.transaction)};var H=function(){var N=cu.open(C);N.onsuccess=function(O){z(O.target.result)};N.onerror=function(){z(null)}};null!=I.transaction&&(I.transaction.oncomplete=H)}}else{z(E)}},void 0,E)}else{if(B.version>E.version){var D=E.setVersion(B.version);D.a=function(H){z(null,H)};D.onsuccess=function(){A(E,D.transaction)}}else{x.v(function(H){H=dk(B,H,!1,!0);0<H.length?z(null,new bL("different schema: "+H)):z(E)},void 0,E)}}};m.onupgradeneeded=function(D){D=D.target.result;r=NaN;A(D,m.transaction)};m.onerror=function(D){z(null,D)};m.onblocked=function(D){z(null,D)};cK(this.O)&&!isNaN(this.O)&&setTimeout(function(){"done"!=m.readyState&&z(null,new cm("connection timeout after "+x.O))},this.O);return t};b0.O=180000;b0.ga=function(){};b0.va=function(){};b0.ya=function(){};b0.Ha=function(){return"indexeddb"};b0.Ga=function(){return this.j||null};b0.ja=function(){return !!this.j};b0.logger=null;b0.j=null;b0.Ia=function(){return this.j?parseFloat(this.j.version):void 0};b0.v=function(F,E,D){D=D||this.j;if(bW(E)){if(null===E){if(0==D.objectStoreNames.length){F(new ar(D.version));return}throw new b5}D=E.db}else{E=[];for(var C=D.objectStoreNames.length-1;0<=C;C--){E[C]=D.objectStoreNames[C]}if(0==E.length){F(new ar(D.version));return}E=D.transaction(E,l)}for(var B=D.objectStoreNames,A=[],z=B.length,C=0;C<z;C++){for(var x=E.objectStore(B[C]),t=[],r=0,q=x.indexNames.length;r<q;r++){var m=x.index(x.indexNames[r]);t[r]=new cA(m.keyPath,void 0,m.unique,m.multiEntry,m.name)}A[C]=new aw(x.name,x.keyPath,x.autoIncrement,void 0,t)}E=new ar(D.version,A);F(E)};function aM(F,E,D){function C(){var J={autoIncrement:!!D.b};null!=D.keyPath&&(J.keyPath=D.keyPath);return F.createObjectStore(D.getName(),J)}if(F.objectStoreNames.contains(D.getName())){E=E.objectStore(D.getName());aW(D.keyPath||"",E.keyPath||"")?(F.deleteObjectStore(D.getName()),E=C()):cD(E.autoIncrement)&&cD(D.b)&&E.autoIncrement!=D.b&&(F.deleteObjectStore(D.getName()),E=C());for(var B=E.indexNames,A=0;A<D.a.length;A++){var z=D.index(A);!B.contains(z.getName())&&z.e&&E.clear()}for(var x=0,t=0,r=0,A=0;A<D.a.length;A++){var z=D.index(A),q=!1;if(B.contains(z.getName())){var m=E.index(z.getName()),H=null!=m.unique&&null!=z.unique&&m.unique!=z.unique,I=null!=m.multiEntry&&null!=z.multiEntry&&m.multiEntry!=z.multiEntry,m=null!=m.keyPath&&null!=z.keyPath&&!!aW(m.keyPath,z.keyPath);if(H||I||m){E.deleteIndex(z.getName()),q=!0,x--,r++}}else{"BLOB"!=z.type&&(q=!0)}q&&(z.unique||z.multiEntry?(q={unique:z.unique,multiEntry:z.multiEntry},E.createIndex(z.getName(),z.keyPath,q)):E.createIndex(z.getName(),z.keyPath),x++)}for(A=0;A<B.length;A++){bC(D,B[A])||(E.deleteIndex(B[A]),t++)}}else{for(E=C(),A=0;A<D.a.length;A++){z=D.index(A),"BLOB"!=z.type&&(z.unique||z.multiEntry?(q={unique:z.unique,multiEntry:z.multiEntry},E.createIndex(z.getName(),z.keyPath,q)):E.createIndex(z.getName(),z.keyPath))}}}b0.da=function(q,m,z,x){var t=this.j;if(!m){m=[];for(var r=t.objectStoreNames.length-1;0<=r;r--){m[r]=t.objectStoreNames[r]}}0==m.length?q(null):(m=t.transaction(m,z),m.oncomplete=function(A){x("complete",A)},m.onabort=function(A){x("abort",A)},q(m),q=null)};b0.close=function(){this.j.close()};aN.push(function(q,m){if(!cu||m&&"indexeddb"!=m){return null}var t=cu.deleteDatabase(q),r=new ct("vc");t.onblocked=function(z){for(var x=0;x<r.e.length;x++){r.e[x][0].call(r.e[x][1],z)}};t.onerror=function(x){r.h(x)};t.onsuccess=function(x){r.callback(x)};return r});function az(q,m){this.a=bW(q)?q:4194304;this.b=m||"websql"}b0=az.prototype;b0.ia=function(C,B){function A(E,D){var I=E.version?parseInt(E.version,10):0,H=!1,F=0;E.changeVersion(E.version,(D.U?isNaN(I)?1:I+1:D.version)+"",function(J){x.v(function(K){H=!0;for(var N=0;N<D.count();N++){var L=ck(K,D.I(N).getName()),L=L?bo(L,D.I(N)):null;al(J,D.I(N),function(O){O&&F++},L)}for(N=0;N<K.count();N++){L=K.I(N),j(D,L.getName())||(D instanceof c4?cM(D,L):(L="DROP TABLE "+cR(L),J.executeSql(L,[],function(){},function(P,O){throw O})))}},J,E)},function(J){throw J},function(){H&&z(E)})}function z(E,D){bW(D)?(x.m=null,r.h(D)):(x.m=E,r.callback(parseFloat(t)))}var x=this,t=NaN,r=new cB,q=null;try{"sqlite"==this.b?bY.sqlitePlugin?(q=bY.sqlitePlugin.openDatabase(C,"",C,this.a),q.readTransaction||(q.readTransaction=q.transaction),q.changeVersion=function(E,D,I,H,F){q.transaction(I,H,F)}):(q=null,this.V=Error("sqlitePlugin not found.")):q=bY.openDatabase(C,"",C,this.a)}catch(m){if("SECURITY_ERR"==m.name){q=null,this.V=new cU(m)}else{throw m}}q?(t=q.version||"",null!=B.version&&B.version==q.version?z(q):this.v(function(D){dk(B,D,!0,!1)?A(q,B):z(q)},null,q)):z(null,this.V);return r};b0.Ha=function(){return this.b};b0.V=null;b0.m=null;b0.Ga=function(){return this.m||null};b0.logger=null;b0.ga=function(){};b0.va=function(){};function v(E){var D=E.n,C="CREATE TABLE IF NOT EXISTS "+cR(E)+" (",B=E.c,C=C+(B+" "+D+" PRIMARY KEY ");E.b&&(C+=" AUTOINCREMENT ");if(!E.G||!E.keyPath&&0==E.a.length){C+=" ,_default_ BLOB"}for(var A=[],z=[B],x=0,t=E.a.length;x<t;x++){var r=E.index(x),q="";if(r.multiEntry){q=r.unique?" UNIQUE ":"",r="CREATE TABLE IF NOT EXISTS "+bS("ydn.db.me:"+E.getName()+":"+r.getName())+" ("+B+" "+D+", "+r.c+" "+r.g+q+")",A.push(r)}else{r.unique&&(q=" UNIQUE ");var m=r.c;-1==z.indexOf(m)&&(C+=", "+m+" "+r.g+q,z.push(m))}}A.unshift(C+")");return A}b0.Ia=function(){return this.m?parseFloat(this.m.version):void 0};b0.v=function(q,m,B){function A(D,C){throw C}function z(V,U){if(U&&U.rows){for(var T=0;T<U.rows.length;T++){var P=U.rows.item(T);if("__WebKitDatabaseInfoTable__"!=P.name&&"sqlite_sequence"!=P.name&&"table"==P.type){var O="sql" in P?P.sql:void 0,K=O.substr(O.indexOf("("),O.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),H=void 0,I,O=[],J=!1,F=!1,D=0;for(;D<K.length;D++){var N=K[D].match(/\w+|"[^"]+"/g),W=a5(N,function(X){return X.toUpperCase()}),E=da(N[0]),N=b2(W[1]);if(-1!=W.indexOf("PRIMARY")&&-1!=W.indexOf("KEY")){I=N;if(bR(E)&&!/^[\s\xa0]*$/.test(E)&&"_ROWID_"!=E){var Q=E.split(","),H=E;1<Q.length&&(H=Q,I=void 0)}-1!=W.indexOf("AUTOINCREMENT")&&(J=!0)}else{if("_ROWID_"!=E){if("_default_"==E){F=!0}else{var C="UNIQUE"==W[2];0==E.lastIndexOf(P.tbl_name+"-",0)&&(E=E.substr(P.tbl_name.length+1));W=new cA(E,N,C);O.push(W)}}}}if(0==P.name.lastIndexOf("ydn.db.me:",0)){var L=P.name.split(":");if(3<=L.length){var S=L[1],H=new cA(L[2],N,C,!0),K=aq(O,function(X){return X.getName()==L[2]});0<=K?O[K]=H:O.push(H);K=aq(r,function(X){return X.getName()===S});0<=K?(H=r[K],r[K]=new aw(H.getName(),H.keyPath,J,I,O,void 0,!F)):r.push(new aw(S,void 0,!1,void 0,[H]))}}else{D=aq(r,function(X){return X.getName()===P.name}),0<=D?(K=r[D].index(0),O.push(K),r[D]=new aw(P.name,H,J,I,O,void 0,!F)):(O=new aw(P.name,H,J,I,O,void 0,!F),r.push(O))}}}T=new ar(t,r);q(T)}}var x=this,t=(B=B||this.m)&&B.version?parseFloat(B.version):void 0,t=isNaN(t)?void 0:t,r=[];m?m.executeSql("SELECT * FROM sqlite_master",[],z,A):B.readTransaction(function(C){x.v(q,C,B)},function(C){throw C},z)};function al(q,m,A,z){function x(B){q.executeSql(B,[],function(){t++;t==r.length&&(A(!0),A=null)},function(D,C){t++;t==r.length&&(A(!1),A=null);throw new de(C,'"')})}var t=0,r=v(m);if(z){if(0==y(m,z).length){A(!0);A=null;return}r.unshift("DROP TABLE IF EXISTS "+bS(m.getName()))}for(m=0;m<r.length;m++){x(r[m])}}b0.ja=function(){return !!this.m};b0.close=function(){this.m=null};b0.da=function(q,m,A,z){function x(B){z("abort",B)}function t(){z("complete",{type:"complete"})}function r(B){q(B)}null===this.m&&(q(null),z("abort",this.V));A==l?this.m.readTransaction(r,x,t):A==dm?this.m.changeVersion(this.m.version,this.m.version+1+"",r,x,t):this.m.transaction(r,x,t)};aN.push(function(q,m){if(cJ(bY.openDatabase)&&(!m||"websql"==m)){var x=new az,t=new c4,t=x.ia(q,t),r=function(){};t.t(function(){x.da(function(z){z.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(A,F){if(F&&F.rows){for(var D=F.rows.length,C=0,E=0;E<D;E++){var B=F.rows.item(E);"__WebKitDatabaseInfoTable__"!=B.name&&"sqlite_sequence"!=B.name&&(C++,z.executeSql("DROP TABLE "+B.name))}}},function(B,A){throw A})},[],cv,r)});t.ma(function(){})}});az.prototype.ya=function(){};cO.prototype.ca=function(m){return"indexeddb"==m&&(!cu||bl?0:cu)?new a0(0,this.r):"sqlite"==m&&bY.sqlitePlugin?new az(this.l,"sqlite"):"websql"==m&&cJ(bY.openDatabase)?new az(this.l):null};function aT(q,m){this.a=m}cG(aT,bV);b0=aT.prototype;b0.logger=null;b0.ba=function(q,m){function t(z){var x=q.a.objectStore(m[z]).count();x.onsuccess=function(A){r[z]=A.target.result;z++;z==m.length?cs(q,r):t(z)};x.onerror=function(A){A.preventDefault();cs(q,x.error,!0)}}var r=[];0==m.length?cs(q,[]):t(0)};b0.A=function(E,D,C,B,A,z){function x(I){if(null==A[I]){if(r++,r==A.length){cs(E,t,q)}else{var F=I+10;F<A.length&&x(F)}}var H,F=A[I];H=z&&null!=z[I]?D?m.put(F,z[I]):m.add(F,z[I]):D?m.put(F):m.add(F);H.onsuccess=function(J){r++;t[I]=J.target.result;r==A.length?cs(E,C?t[0]:t,q):(J=I+10,J<A.length&&x(J))};H.onerror=function(J){r++;var K=H.error;cX(A[I]);t[I]=K;q=!0;J.preventDefault();r==A.length?cs(E,C?t[0]:t,q):(J=I+10,J<A.length&&x(J))}}var t=[],r=0,q=!1,m=E.a.objectStore(B);if(0<A.length){for(B=0;10>B&&B<A.length;B++){x(B)}}else{cs(E,[])}};b0.Aa=function(q,m,B){function A(D){var C=B[D],F=q.a.objectStore(C.b),E;E=null===F.keyPath?F.put(m[D],C.a):F.put(m[D]);E.onsuccess=function(H){x++;z[D]=H.target.result;x==m.length?cs(q,z,t):(H=D+10,H<m.length&&A(H))};E.onerror=function(H){x++;z[D]=E.error;t=!0;H.preventDefault();x==m.length?cs(q,z,t):(H=D+10,H<m.length&&A(H))}}var z=[],x=0,t=!1;if(0<m.length){for(var r=0;10>r&&r<m.length;r++){A(r)}}else{cs(q,z,t)}};b0.Ba=function(F,E,D,C,B,A){function z(){var J={},H=B.indexOf("\n",r),L=!1,I;-1==H?(L=!0,I=B.substring(r)):(I=B.substring(r,H),r=H+1);H=I.split(A);for(I=0;I<q.length;I++){var K=H[I];m[I]&&(m[I]==bJ?K=da(K):"INTEGER"==m[I]?K=parseInt(K,10):"NUMERIC"==m[I]&&(K=parseFloat(K)));J[q[I]]=K}var N=x.put(J);N.onsuccess=function(O){t.push(O.target.result);L?D(t):z()};N.onerror=function(O){O.preventDefault();D(N.error,!0)}}E=ck(this.a,C);var x=F.objectStore(C),t=[],r=B.indexOf("\n"),q=B.substr(0,r).split(A),m=[];for(F=0;F<q.length;F++){(C=c8(E,q[F]))?m[F]=C.type:q[F]==E.keyPath&&(m[F]=E.type)}r++;z()};b0.ha=function(q,m,t){var r=q.a.objectStore(m).openCursor(a7.only(t));r.onsuccess=function(x){if(x=x.target.result){var z=x["delete"]();z.onsuccess=function(){cs(q,1)};z.onerror=function(){cs(q,z.error,!0)}}else{cs(q,0)}};r.onerror=function(x){x.preventDefault();cs(q,r.error,!0)}};b0.Fa=function(q,m){function A(C){C++;if(C>=m.length){0<r.length?cs(q,r,!0):cs(q,z)}else{m[C].b!=x&&(x=m[C].b,t=q.a.objectStore(x));var B=t["delete"](m[C].a);B.onsuccess=function(){z++;A(C)};B.onerror=function(D){D.preventDefault();r[C]=B.error;A(C)}}}var z=0,x,t,r=[];A(-1)};b0.Ea=function(q,m,x){var t=q.a.objectStore(m),r=t.count(x);r.onsuccess=function(z){var B=z.target.result,A=t["delete"](x);A.onsuccess=function(){cs(q,B)};A.onerror=function(){cs(q,A.error,!0)}};r.onerror=function(z){z.preventDefault();cs(q,r.error,!0)}};b0.oa=function(q,m,t){var r=q.a.objectStore(m)["delete"](t);r.onsuccess=function(){cs(q,void 0)};r.onerror=function(x){x.preventDefault();cs(q,r.error,!0)}};b0.Da=function(q,m,A,z){var x=[],t=q.a.objectStore(m).index(A).openCursor(z),r=0;t.onsuccess=function(B){var D=B.target.result;if(D){var C=D["delete"]();C.onsuccess=function(){r++;D["continue"]()};C.onerror=function(E){x.push(C.error);E.preventDefault();D["continue"]()}}else{0<x.length?cs(q,x,!0):cs(q,r)}};t.onerror=function(B){B.preventDefault();cs(q,t.error,!0)}};b0.aa=function(q,m){for(var z=m.length,x=0,t=0;t<z;t++){var r=q.a.objectStore(m[t]).clear();r.onsuccess=function(){x++;x==z&&cs(q,x)};r.onerror=function(A){x++;A.preventDefault();x==z&&cs(q,r.error,!0)}}};b0.fa=function(q,m,x){var t=q.a.objectStore(m),r=t.get(x);r.onsuccess=function(z){var D=z.target.result;if(!t.keyPath&&0==t.indexNames.length&&a4&&bR(D)&&0<=D.indexOf(";base64,")){'"'==D.charAt(0)&&'"'==D.charAt(D.length-1)&&(D=D.substr(1,D.length-2));D=D.split(";base64,");z=D[0].split(":")[1];for(var D=window.atob(D[1]),C=D.length,B=new Uint8Array(C),A=0;A<C;++A){B[A]=D.charCodeAt(A)}cs(q,new Blob([B.buffer],{type:z}))}else{cs(q,z.target.result)}};r.onerror=function(z){z.preventDefault();cs(q,r.error,!0)}};b0.ra=function(q,m,B){function A(C){if(null==B[C]){if(x++,z[C]=void 0,x==r){cs(q,z)}else{var D=C+10;D<r&&A(D)}}var E;E=t.get(B[C]);E.onsuccess=function(F){x++;z[C]=F.target.result;x==r?cs(q,z):(F=C+10,F<r&&A(F))};E.onerror=function(F){x++;F.preventDefault();cs(q,E.error,!0)}}var z=[];z.length=B.length;var x=0,t=q.a.objectStore(m),r=B.length;if(0<r){for(m=0;10>m&&m<r;m++){A(m)}}else{cs(q,[])}};b0.sa=function(q,m){function z(C){var B=m[C],A=q.a.objectStore(B.b).get(B.a);A.onsuccess=function(D){t++;x[C]=D.target.result;t==m.length?cs(q,x):(D=C+10,D<m.length&&z(D))};A.onerror=function(D){t++;D.preventDefault();cs(q,A.error,!0)}}var x=[];x.length=m.length;var t=0;if(0<m.length){for(var r=0;10>r&&r<m.length;r++){z(r)}}else{cs(q,[])}};b0.pa=function(q,m,x,t){m=q.a.objectStore(m);x&&cn(x);var r;null!=t?(t=m.index(t),r=null!=x?t.count(x):t.count()):r=null!=x?m.count(x):m.count();r.onsuccess=function(z){cs(q,z.target.result)};r.onerror=function(z){z.preventDefault();cs(q,r.error,!0)}};b0.P=function(O,N,L,K,J,I,H,F,E,D){var C=[],B=O.a.objectStore(L),z=F?E?"prevunique":"prev":E?"nextunique":"next";L=bA(O)+" "+N+" "+L+(K?":"+K:"")+(J?cn(J):"");F&&(L+=" reverse");E&&(L+=" unique");if(D&&bW(D[0])){E=K?!bW(D[1]):!0;var A=D[0],r=J?J.lower:void 0,t=J?J.upper:void 0,x=J?!!J.lowerOpen:!1;J=J?!!J.upperOpen:!1;J=bG(F?new co(r,A,x,E):new co(A,t,E,J));L+=" starting from "+cn(D[0]);bW(D[1])&&(L+=", "+cn(D[1]))}var q;q=1==N||2==N||3==N?K?B.index(K).openKeyCursor(J,z):B.openCursor(J,z):K?B.index(K).openCursor(J,z):B.openCursor(J,z);var m=!1;q.onsuccess=function(S){if(S=S.target.result){if(!m){if(0<H){m=!0;S.advance(H);return}if(D&&K&&bW(D[0])){if(bW(D[1])){var Q=cu.cmp(S.key,D[0]),P=F?-1:1;if(0==Q){Q=cu.cmp(S.primaryKey,D[1]);if(0==Q){m=!0;S["continue"]();return}if(Q==P){m=!0}else{S["continue"]();return}}else{m=!0}}else{m=!0}}else{m=!0}}1==N?C.push(S.key):2==N?C.push(S.primaryKey):3==N?(P={},K&&(P[K]=S.key),B.keyPath?P[B.keyPath]=S.primaryKey:P._ROWID_=S.primaryKey,C.push(P)):4==N?C.push(S.value):C.push([S.key,S.primaryKey,S.value]);if(C.length<I){S["continue"]()}else{D&&(D[0]=bX(S.key),D[1]=bX(S.primaryKey)),cs(O,C)}}else{D&&(D[0]=void 0,D[1]=void 0),cs(O,C)}};q.onerror=function(P){P.preventDefault();cs(O,q.error,!0)}};function aG(q,m){this.a=m}cG(aG,bV);b0=aG.prototype;b0.logger=null;function e(q,m){if(m.G&&!m.keyPath&&0==m.a.length&&q._default_){var B=q._default_;if(-1==B.indexOf(";base64,")){return dh(B)}'"'==B.charAt(0)&&'"'==B.charAt(B.length-1)&&(B=B.substr(1,B.length-2));for(var A=B.split(";base64,"),B=A[0].split(":")[1],A=window.atob(A[1]),z=A.length,x=new Uint8Array(z),t=0;t<z;++t){x[t]=A.charCodeAt(t)}return new Blob([x.buffer],{type:B})}B=q._default_?dh(q._default_):{};null!=m.keyPath&&(A=bv(q[m.keyPath],m.type),null!=A&&aC(m,B,A));for(A=0;A<m.a.length;A++){if(z=m.index(A),x=z.d,"_default_"!=x&&!z.f&&!z.multiEntry&&("DATE"==z.type||m.G)&&(t=bv(q[x],z.type),bW(t))){for(var x=B,r=0;r<z.b.length;r++){r==z.b.length-1?x[z.b[r]]=t:cH(x[z.b[r]])||(x[z.b[r]]={})}}}return B}b0.Ba=function(){throw new c9("putData")};b0.A=function(F,E,D,C,B,A){function z(H,J){if(null==B[H]){if(q++,q==B.length){cs(F,r,m)}else{var K=H+2;K<B.length&&z(K,J)}}var I;I=bW(A)?ao(x,B[H],A[H]):ao(x,B[H]);K=t+cR(x)+" ("+I.Na.join(", ")+") VALUES ("+I.Xa.join(", ")+");";J.executeSql(K,I.F,function(S,U){function P(Y,X){var aa=t+bS("ydn.db.me:"+x.getName()+":"+Y.getName())+" ("+x.c+", "+Y.c+") VALUES (?, ?)",Z=[c1(N,x.type),c1(X,Y.type)];J.executeSql(aa,Z,function(){},function(){return !1})}q++;var N=bW(I.key)?I.key:U.insertId;1>U.rowsAffected&&(m=!0,N=new u(N+" no-op"));for(var W=0,T=x.a.length;W<T;W++){var O=x.index(W);if(O.multiEntry){for(var V=aD(B[H],O.keyPath),Q=(V?V.length:0)||0,L=0;L<Q;L++){P(O,V[L])}}}D?cs(F,N):(r[H]=N,q==B.length?cs(F,r,m):(W=H+2,W<B.length&&z(W,S)))},function(O,N){q++;m=!0;6==N.code&&(N.name="ConstraintError");if(D){cs(F,N,!0)}else{if(r[H]=N,q==B.length){cs(F,r,m)}else{var L=H+2;L<B.length&&z(L,O)}}return !1})}E=!E;var x=ck(this.a,C),t=E?"INSERT INTO ":"INSERT OR REPLACE INTO ";C=F.a;var r=[],q=0,m=!1;if(0<B.length){for(E=0;2>E&&E<B.length;E++){z(E,C)}}else{cs(F,[])}};b0.Aa=function(F,E,D){if(0==D.length){cs(F,[])}else{for(var C=[],B=0,A=0,z=this,x=function(N,K){for(var J=[],P=a3(ck(z.a,N)),O=P?void 0:[],L=0;L<K.length;L++){J.push(E[K[L]]),P||O.push(D[K[L]].a)}P=cP(F);cz(P,function(Q){for(var S=0;S<K.length;S++){C[K[S]]=Q[S]}B++;B==A&&cs(F,C)},function(){B++;B==A&&cs(F,C,!0)});z.A(P,!1,!1,N,J,O)},t="",r=[],q=[],m=0;m<D.length;m++){var H=D[m].b,I=D[m].a;H!=t?(A++,0<r.length&&x(t,r),r=[m],q=[I],t=H):(r.push(m),q.push(I))}0<r.length&&x(t,r)}};b0.fa=function(q,m,x){var t=q.a,r=ck(this.a,m);m=r.c;x=[c1(x,r.type)];m="SELECT * FROM "+cR(r)+" WHERE "+m+" = ?";t.executeSql(m,x,function(z,B){if(0<B.rows.length){var A=B.rows.item(0);null!=A?(A=e(A,r),cs(q,A)):cs(q,void 0)}else{cs(q,void 0)}},function(z,A){cs(q,A,!0);return !1})};b0.ra=function(q,m,B){function A(C,E){var F=r.c,D=[c1(B[C],r.type)],F="SELECT * FROM "+cR(r)+" WHERE "+F+" = ?";E.executeSql(F,D,function(I,H){t++;if(0<H.rows.length){var J=H.rows.item(0);null!=J&&(x[C]=e(J,r))}else{x[C]=void 0}t==B.length?cs(q,x):(J=C+10,J<B.length&&A(J,I))},function(I){t++;if(t==B.length){cs(q,x)}else{var H=C+10;H<B.length&&A(H,I)}return !1})}var z=q.a,x=[],t=0,r=ck(this.a,m);if(0<B.length){for(m=0;10>m&&m<B.length;m++){A(m,z)}}else{cs(q,[])}};b0.sa=function(q,m){function B(F,D){var H=m[F],E=ck(z.a,H.b),C=cp(H),H=E.c,C=[c1(C,E.type)],H="SELECT * FROM "+cR(E)+" WHERE "+H+" = ?";D.executeSql(H,C,function(K,J){t++;if(0<J.rows.length){var I=J.rows.item(0);null!=I&&(x[F]=e(I,E))}else{x[F]=void 0}t==m.length?cs(q,x):(I=F+10,I<m.length&&B(I,K))},function(I,J){cs(q,J,!0);return !1})}var A=q.a,z=this,x=[],t=0;if(0<m.length){for(var r=0;10>r&&r<m.length;r++){B(r,A)}}else{cs(q,[])}};b0.aa=function(q,m){function x(E,C){function B(H){H="DELETE FROM  "+bS("ydn.db.me:"+A.getName()+":"+H.getName());C.executeSql(H,[])}var A=ck(r.a,m[E]),z="DELETE FROM  "+cR(A);C.executeSql(z,[],function(H){E==m.length-1?cs(q,m.length):x(E+1,H)},function(H,I){cs(q,I,!0);return !1});for(var z=0,F=A.a.length;z<F;z++){var D=A.index(z);D.multiEntry&&B(D)}}var t=q.a,r=this;0<m.length?x(0,t):cs(q,0)};b0.Fa=function(q,m){function A(F){if(F>=m.length){cs(q,t,r)}else{var D=ck(x.a,m[F].b),B=c1(m[F].a,D.type),J=" WHERE "+D.c+" = ?",H="DELETE FROM "+cR(D)+J;z.executeSql(H,[B],function(){t++;A(F)},function(){r=!0;A(F);return !1});F++;for(var H=function(K){K="DELETE FROM  "+bS("ydn.db.me:"+D.getName()+":"+K.getName())+J;z.executeSql(K,[B])},C=0,E=D.a.length;C<E;C++){var I=D.index(C);I.multiEntry&&H(I)}}}var z=q.a,x=this,t=0,r=!1;A(0)};b0.ha=function(C,B,A){function z(D){D="DELETE FROM  "+bS("ydn.db.me:"+t.getName()+":"+D.getName())+q;x.executeSql(D,[r])}var x=C.a,t=ck(this.a,B),r=c1(A,t.type),q=" WHERE "+t.c+" = ?";B="DELETE FROM "+cR(t)+q;x.executeSql(B,[r],function(D,E){cs(C,E.rowsAffected)},function(D,E){cs(C,E,!0);return !1});B=0;for(A=t.a.length;B<A;B++){var m=t.index(B);m.multiEntry&&z(m)}};b0.oa=function(q,m,r){df(this,q,m,void 0,r)};b0.Ea=function(q,m,r){df(this,q,m,void 0,r)};b0.Da=function(q,m,t,r){df(this,q,m,t,r)};function df(D,C,B,A,z){function x(E){E="DELETE FROM  "+bS("ydn.db.me:"+r.getName()+":"+E.getName())+m;t.executeSql(E,q)}var t=C.a,r=ck(D.a,B);D="DELETE FROM "+cR(r);B=[];var q=[],m="";null!=z&&(bW(A)?(A=c8(r,A),cL(A.c,A.type,z,q,B)):cL(r.c,r.type,z,q,B),m=" WHERE "+q.join(" AND "));t.executeSql(D+m,B,function(E,F){cs(C,F.rowsAffected)},function(E,F){cs(C,F,!0);return !1});z=0;for(A=r.a.length;z<A;z++){D=r.index(z),D.multiEntry&&x(D)}}b0.ba=function(q,m){function x(A){var z="SELECT COUNT(*) FROM "+bS(m[A]);t.executeSql(z,[],function(D,C){var B=C.rows.item(0);r[A]=parseInt(B["COUNT(*)"],10);A++;A==m.length?cs(q,r):x(A)},function(B,C){cs(q,C,!0);return !1})}var t=q.a,r=[];0==m.length?cs(q,0):x(0)};b0.pa=function(q,m,z,x,t){var r=[];m=o(ck(this.a,m),r,6,x,z,!1,t);q.a.executeSql(m,r,function(A,D){var C;q:{if(C=D.rows.item(0)){for(var B in C){if(C.hasOwnProperty(B)){C=C[B];break q}}}C=void 0}cs(q,C)},function(A,B){cs(q,B,!0);return !1})};b0.P=function(N,L,K,J,I,H,F,E,D,C){var B=[],A=ck(this.a,K),x=A.f,z=A.type,q=z,r=null!=J&&J!==x?c8(A,J):null,t=J||x;r&&(q=r.type);K=[];if(C&&bW(C[0])){var m=C[0];J=r&&bW(C[1])?bP(A,L,K,r.getName(),I,m,C[1],E,D):b9(A,L,K,J,I,E,D,m)}else{J=o(A,K,L,t,I,E,D)}cK(H)&&(J+=" LIMIT "+H);cK(F)&&(J+=" OFFSET "+F);cn(K);N.a.executeSql(J,K,function(T,S){for(var Q=S.rows.length,P,O=0;O<Q;O++){P=S.rows.item(O),2==L?B[O]=bv(P[x],z):1==L?B[O]=bv(P[t],q):3==L?B[O]=[bv(P[t],q),bv(P[x],z)]:null!=P&&(B[O]=e(P,A))}C&&P&&(C[0]=bv(P[t],q),C[1]=bv(P[x],z));cs(N,B)},function(O,P){cs(N,P,!0);return !1})};cO.prototype.branch=cO.prototype.La;cO.prototype.getTxNo=cO.prototype.eb;be.prototype.getTxNo=be.prototype.e;cO.prototype.run=cO.prototype.Ua;cg.prototype.branch=cg.prototype.La;cg.prototype.add=cg.prototype.add;cg.prototype.get=cg.prototype.get;cg.prototype.keys=cg.prototype.Z;cg.prototype.values=cg.prototype.F;cg.prototype.put=cg.prototype.put;cg.prototype.clear=cg.prototype.clear;cg.prototype.remove=cg.prototype.$;cg.prototype.count=cg.prototype.count;ch.prototype.add=ch.prototype.add;ch.prototype.get=ch.prototype.get;ch.prototype.keys=ch.prototype.Z;ch.prototype.values=ch.prototype.F;ch.prototype.put=ch.prototype.put;ch.prototype.clear=ch.prototype.clear;ch.prototype.remove=ch.prototype.$;ch.prototype.count=ch.prototype.count;aj("ydn.db.Key",cW);cW.prototype.id=cW.prototype.Oa;cW.prototype.parent=cW.prototype.$a;cW.prototype.storeName=cW.prototype.ab;aj("ydn.db.KeyRange",co);co.upperBound=co.upperBound;co.lowerBound=co.lowerBound;co.bound=co.bound;co.only=co.only;co.starts=function(q){var m;if(bU(q)){m=M(q),m.push("\uffff")}else{if(bR(q)){m=q+"\uffff"}else{if(cK(q)){m=q+2.220460492503131e-16,q-=2.220460492503131e-16}else{return co.only(q)}}}return co.bound(q,m,!1,!0)};am.prototype.store_name=am.prototype.b;am.prototype.getStoreName=am.prototype.a;function cV(q,m,r){cg.call(this,q,m,r)}cG(cV,cg);aj("ydn.db.Storage",cV);return ydn},(this||{}));
;
/*
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
(function(){var e={};var q,l;q=this;if(q!=null){l=q.async}e.noConflict=function(){q.async=l;return e};function s(x){var y=false;return function(){if(y){throw new Error("Callback was already called.")}y=true;x.apply(q,arguments)}}var w=Object.prototype.toString;var h=Array.isArray||function(x){return w.call(x)==="[object Array]"};var t=function(x,z){if(x.forEach){return x.forEach(z)}for(var y=0;y<x.length;y+=1){z(x[y],y,x)}};var a=function(x,z){if(x.map){return x.map(z)}var y=[];t(x,function(A,C,B){y.push(z(A,C,B))});return y};var v=function(x,z,y){if(x.reduce){return x.reduce(z,y)}t(x,function(A,C,B){y=z(y,A,C,B)});return y};var c=function(z){if(Object.keys){return Object.keys(z)}var y=[];for(var x in z){if(z.hasOwnProperty(x)){y.push(x)}}return y};if(typeof process==="undefined"||!(process.nextTick)){if(typeof setImmediate==="function"){e.nextTick=function(x){setImmediate(x)};e.setImmediate=e.nextTick}else{e.nextTick=function(x){setTimeout(x,0)};e.setImmediate=e.nextTick}}else{e.nextTick=process.nextTick;if(typeof setImmediate!=="undefined"){e.setImmediate=function(x){setImmediate(x)}}else{e.setImmediate=e.nextTick}}e.each=function(x,A,B){B=B||function(){};if(!x.length){return B()}var z=0;t(x,function(C){A(C,s(y))});function y(C){if(C){B(C);B=function(){}}else{z+=1;if(z>=x.length){B()}}}};e.forEach=e.each;e.eachSeries=function(x,A,B){B=B||function(){};if(!x.length){return B()}var z=0;var y=function(){A(x[z],function(C){if(C){B(C);B=function(){}}else{z+=1;if(z>=x.length){B()}else{y()}}})};y()};e.forEachSeries=e.eachSeries;e.eachLimit=function(x,y,A,B){var z=g(y);z.apply(null,[x,A,B])};e.forEachLimit=e.eachLimit;var g=function(x){return function(y,C,E){E=E||function(){};if(!y.length||x<=0){return E()}var B=0;var z=0;var A=0;(function D(){if(B>=y.length){return E()}while(A<x&&z<y.length){z+=1;A+=1;C(y[z-1],function(F){if(F){E(F);E=function(){}}else{B+=1;A-=1;if(B>=y.length){E()}else{D()}}})}})()}};var r=function(x){return function(){var y=Array.prototype.slice.call(arguments);return x.apply(null,[e.each].concat(y))}};var p=function(x,y){return function(){var z=Array.prototype.slice.call(arguments);return y.apply(null,[g(x)].concat(z))}};var n=function(x){return function(){var y=Array.prototype.slice.call(arguments);return x.apply(null,[e.eachSeries].concat(y))}};var i=function(A,x,z,B){x=a(x,function(C,D){return{index:D,value:C}});if(!B){A(x,function(C,D){z(C.value,function(E){D(E)})})}else{var y=[];A(x,function(C,D){z(C.value,function(F,E){y[C.index]=E;D(F)})},function(C){B(C,y)})}};e.map=r(i);e.mapSeries=n(i);e.mapLimit=function(x,y,z,A){return d(y)(x,z,A)};var d=function(x){return p(x,i)};e.reduce=function(x,y,z,A){e.eachSeries(x,function(B,C){z(y,B,function(E,D){y=D;C(E)})},function(B){A(B,y)})};e.inject=e.reduce;e.foldl=e.reduce;e.reduceRight=function(x,y,z,B){var A=a(x,function(C){return C}).reverse();e.reduce(A,y,z,B)};e.foldr=e.reduceRight;var u=function(A,x,z,B){var y=[];x=a(x,function(C,D){return{index:D,value:C}});A(x,function(C,D){z(C.value,function(E){if(E){y.push(C)}D()})},function(C){B(a(y.sort(function(E,D){return E.index-D.index}),function(D){return D.value}))})};e.filter=r(u);e.filterSeries=n(u);e.select=e.filter;e.selectSeries=e.filterSeries;var m=function(A,x,z,B){var y=[];x=a(x,function(C,D){return{index:D,value:C}});A(x,function(C,D){z(C.value,function(E){if(!E){y.push(C)}D()})},function(C){B(a(y.sort(function(E,D){return E.index-D.index}),function(D){return D.value}))})};e.reject=r(m);e.rejectSeries=n(m);var f=function(z,x,y,A){z(x,function(B,C){y(B,function(D){if(D){A(B);A=function(){}}else{C()}})},function(B){A()})};e.detect=r(f);e.detectSeries=n(f);e.some=function(x,y,z){e.each(x,function(A,B){y(A,function(C){if(C){z(true);z=function(){}}B()})},function(A){z(false)})};e.any=e.some;e.every=function(x,y,z){e.each(x,function(A,B){y(A,function(C){if(!C){z(false);z=function(){}}B()})},function(A){z(true)})};e.all=e.every;e.sortBy=function(x,y,z){e.map(x,function(A,B){y(A,function(C,D){if(C){B(C)}else{B(null,{value:A,criteria:D})}})},function(C,A){if(C){return z(C)}else{var B=function(G,F){var E=G.criteria,D=F.criteria;return E<D?-1:E>D?1:0};z(null,a(A.sort(B),function(D){return D.value}))}})};e.auto=function(z,E){E=E||function(){};var F=c(z);var y=F.length;if(!y){return E()}var B={};var D=[];var x=function(G){D.unshift(G)};var A=function(H){for(var G=0;G<D.length;G+=1){if(D[G]===H){D.splice(G,1);return}}};var C=function(){y--;t(D.slice(0),function(G){G()})};x(function(){if(!y){var G=E;E=function(){};G(null,B)}});t(F,function(H){var G=h(z[H])?z[H]:[z[H]];var L=function(O){var M=Array.prototype.slice.call(arguments,1);if(M.length<=1){M=M[0]}if(O){var N={};t(c(B),function(P){N[P]=B[P]});N[H]=M;E(O,N);E=function(){}}else{B[H]=M;e.setImmediate(C)}};var J=G.slice(0,Math.abs(G.length-1))||[];var I=function(){return v(J,function(N,M){return(N&&B.hasOwnProperty(M))},true)&&!B.hasOwnProperty(H)};if(I()){G[G.length-1](L,B)}else{var K=function(){if(I()){A(K);G[G.length-1](L,B)}};x(K)}})};e.retry=function(B,x,C){var z=5;var y=[];if(typeof B==="function"){C=x;x=B;B=z}B=parseInt(B,10)||z;var A=function(F,D){var E=function(G,H){return function(I){G(function(K,J){I(!K||H,{err:K,result:J})},D)}};while(B){y.push(E(x,!(B-=1)))}e.series(y,function(G,H){H=H[H.length-1];(F||C)(H.err,H.result)})};return C?A():A};e.waterfall=function(A,z){z=z||function(){};if(!h(A)){var x=new Error("First argument to waterfall must be an array of functions");return z(x)}if(!A.length){return z()}var y=function(B){return function(E){if(E){z.apply(null,arguments);z=function(){}}else{var C=Array.prototype.slice.call(arguments,1);var D=B.next();if(D){C.push(y(D))}else{C.push(z)}e.setImmediate(function(){B.apply(null,C)})}}};y(e.iterator(A))()};var b=function(y,A,z){z=z||function(){};if(h(A)){y.map(A,function(B,C){if(B){B(function(E){var D=Array.prototype.slice.call(arguments,1);if(D.length<=1){D=D[0]}C.call(null,E,D)})}},z)}else{var x={};y.each(c(A),function(B,C){A[B](function(E){var D=Array.prototype.slice.call(arguments,1);if(D.length<=1){D=D[0]}x[B]=D;C(E)})},function(B){z(B,x)})}};e.parallel=function(y,x){b({map:e.map,each:e.each},y,x)};e.parallelLimit=function(z,x,y){b({map:d(x),each:g(x)},z,y)};e.series=function(z,y){y=y||function(){};if(h(z)){e.mapSeries(z,function(A,B){if(A){A(function(D){var C=Array.prototype.slice.call(arguments,1);if(C.length<=1){C=C[0]}B.call(null,D,C)})}},y)}else{var x={};e.eachSeries(c(z),function(A,B){z[A](function(D){var C=Array.prototype.slice.call(arguments,1);if(C.length<=1){C=C[0]}x[A]=C;B(D)})},function(A){y(A,x)})}};e.iterator=function(y){var x=function(z){var A=function(){if(y.length){y[z].apply(null,arguments)}return A.next()};A.next=function(){return(z<y.length-1)?x(z+1):null};return A};return x(0)};e.apply=function(y){var x=Array.prototype.slice.call(arguments,1);return function(){return y.apply(null,x.concat(Array.prototype.slice.call(arguments)))}};var o=function(A,x,y,B){var z=[];A(x,function(D,C){y(D,function(E,F){z=z.concat(F||[]);C(E)})},function(C){B(C,z)})};e.concat=r(o);e.concatSeries=n(o);e.whilst=function(z,x,y){if(z()){x(function(A){if(A){return y(A)}e.whilst(z,x,y)})}else{y()}};e.doWhilst=function(x,z,y){x(function(B){if(B){return y(B)}var A=Array.prototype.slice.call(arguments,1);if(z.apply(null,A)){e.doWhilst(x,z,y)}else{y()}})};e.until=function(z,x,y){if(!z()){x(function(A){if(A){return y(A)}e.until(z,x,y)})}else{y()}};e.doUntil=function(x,z,y){x(function(B){if(B){return y(B)}var A=Array.prototype.slice.call(arguments,1);if(!z.apply(null,A)){e.doUntil(x,z,y)}else{y()}})};e.queue=function(B,z){if(z===undefined){z=1}function x(D,C,F,E){if(!D.started){D.started=true}if(!h(C)){C=[C]}if(C.length==0){return e.setImmediate(function(){if(D.drain){D.drain()}})}t(C,function(G){var H={data:G,callback:typeof E==="function"?E:null};if(F){D.tasks.unshift(H)}else{D.tasks.push(H)}if(D.saturated&&D.tasks.length===D.concurrency){D.saturated()}e.setImmediate(D.process)})}var y=0;var A={tasks:[],concurrency:z,saturated:null,empty:null,drain:null,started:false,paused:false,push:function(C,D){x(A,C,false,D)},kill:function(){A.drain=null;A.tasks=[]},unshift:function(C,D){x(A,C,true,D)},process:function(){if(!A.paused&&y<A.concurrency&&A.tasks.length){var D=A.tasks.shift();if(A.empty&&A.tasks.length===0){A.empty()}y+=1;var E=function(){y-=1;if(D.callback){D.callback.apply(D,arguments)}if(A.drain&&A.tasks.length+y===0){A.drain()}A.process()};var C=s(E);B(D.data,C)}},length:function(){return A.tasks.length},running:function(){return y},idle:function(){return A.tasks.length+y===0},pause:function(){if(A.paused===true){return}A.paused=true;A.process()},resume:function(){if(A.paused===false){return}A.paused=false;A.process()}};return A};e.priorityQueue=function(C,A){function z(E,D){return E.priority-D.priority}function y(I,G,H){var F=-1,D=I.length-1;while(F<D){var E=F+((D-F+1)>>>1);if(H(G,I[E])>=0){F=E}else{D=E-1}}return F}function x(F,E,D,G){if(!F.started){F.started=true}if(!h(E)){E=[E]}if(E.length==0){return e.setImmediate(function(){if(F.drain){F.drain()}})}t(E,function(H){var I={data:H,priority:D,callback:typeof G==="function"?G:null};F.tasks.splice(y(F.tasks,I,z)+1,0,I);if(F.saturated&&F.tasks.length===F.concurrency){F.saturated()}e.setImmediate(F.process)})}var B=e.queue(C,A);B.push=function(E,D,F){x(B,E,D,F)};delete B.unshift;return B};e.cargo=function(B,A){var x=false,C=[];var y={tasks:C,payload:A,saturated:null,empty:null,drain:null,drained:true,push:function(D,E){if(!h(D)){D=[D]}t(D,function(F){C.push({data:F,callback:typeof E==="function"?E:null});y.drained=false;if(y.saturated&&C.length===A){y.saturated()}});e.setImmediate(y.process)},process:function z(){if(x){return}if(C.length===0){if(y.drain&&!y.drained){y.drain()}y.drained=true;return}var D=typeof A==="number"?C.splice(0,A):C.splice(0,C.length);var E=a(D,function(F){return F.data});if(y.empty){y.empty()}x=true;B(E,function(){x=false;var F=arguments;t(D,function(G){if(G.callback){G.callback.apply(null,F)}});z()})},length:function(){return C.length},running:function(){return x}};return y};var j=function(x){return function(z){var y=Array.prototype.slice.call(arguments,1);z.apply(null,y.concat([function(B){var A=Array.prototype.slice.call(arguments,1);if(typeof console!=="undefined"){if(B){if(console.error){console.error(B)}}else{if(console[x]){t(A,function(C){console[x](C)})}}}}]))}};e.log=j("log");e.dir=j("dir");e.memoize=function(B,z){var y={};var A={};z=z||function(C){return C};var x=function(){var C=Array.prototype.slice.call(arguments);var E=C.pop();var D=z.apply(null,C);if(D in y){e.nextTick(function(){E.apply(null,y[D])})}else{if(D in A){A[D].push(E)}else{A[D]=[E];B.apply(null,C.concat([function(){y[D]=arguments;var H=A[D];delete A[D];for(var G=0,F=H.length;G<F;G++){H[G].apply(null,arguments)}}]))}}};x.memo=y;x.unmemoized=B;return x};e.unmemoize=function(x){return function(){return(x.unmemoized||x).apply(null,arguments)}};e.times=function(A,z,B){var x=[];for(var y=0;y<A;y++){x.push(y)}return e.map(x,z,B)};e.timesSeries=function(A,z,B){var x=[];for(var y=0;y<A;y++){x.push(y)}return e.mapSeries(x,z,B)};e.seq=function(){var x=arguments;return function(){var z=this;var y=Array.prototype.slice.call(arguments);var A=y.pop();e.reduce(x,y,function(C,D,B){D.apply(z,C.concat([function(){var F=arguments[0];var E=Array.prototype.slice.call(arguments,1);B(F,E)}]))},function(C,B){A.apply(z,[C].concat(B))})}};e.compose=function(){return e.seq.apply(null,Array.prototype.reverse.call(arguments))};var k=function(A,y){var z=function(){var C=this;var B=Array.prototype.slice.call(arguments);var D=B.pop();return A(y,function(F,E){F.apply(C,B.concat([E]))},D)};if(arguments.length>2){var x=Array.prototype.slice.call(arguments,2);return z.apply(this,x)}else{return z}};e.applyEach=r(k);e.applyEachSeries=n(k);e.forever=function(y,z){function x(A){if(A){if(z){return z(A)}throw A}y(x)}x()};q.async=e;if(typeof define!=="undefined"&&define.amd){define("vendor/async/lib/async",[],function(){return e})}}());
;
(function(b){b.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},textAcceptingInputTypes:["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"],options:{filterTextInputs:true}};function a(d){if(typeof d.data==="string"){d.data={keys:d.data}}if(!d.data||!d.data.keys||typeof d.data.keys!=="string"){return}var c=d.handler,e=d.data.keys.toLowerCase().split(" ");d.handler=function(m){if(this!==m.target&&(/textarea|select/i.test(m.target.nodeName)||(b.hotkeys.options.filterTextInputs&&b.inArray(m.target.type,b.hotkeys.textAcceptingInputTypes)>-1))){return}var h=m.type!=="keypress"&&b.hotkeys.specialKeys[m.which],n=String.fromCharCode(m.which).toLowerCase(),k="",g={};b.each(["alt","ctrl","shift"],function(i,l){if(m[l+"Key"]&&h!==l){k+=l+"+"}});if(m.metaKey&&!m.ctrlKey&&h!=="meta"){k+="meta+"}if(m.metaKey&&h!=="meta"&&k.indexOf("alt+ctrl+shift+")>-1){k=k.replace("alt+ctrl+shift+","hyper+")}if(h){g[k+h]=true}else{g[k+n]=true;g[k+b.hotkeys.shiftNums[n]]=true;if(k==="shift+"){g[b.hotkeys.shiftNums[n]]=true}}for(var j=0,f=e.length;j<f;j++){if(g[e[j]]){return c.apply(this,arguments)}}}}b.each(["keydown","keyup","keypress"],function(){b.event.special[this]={add:a}})})(jQuery||this.jQuery||window.jQuery);
;
(function(f,g,d){f.map("click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup".split(" "),function(a){e(a)});e("focusin","focus"+d);e("focusout","blur"+d);f.addOutsideEvent=e;function e(b,i){i=i||b+d;var j=f(),a=b+"."+i+"-special-event";f.event.special[i]={setup:function(){j=j.add(this);if(j.length===1){f(g).bind(a,c)}},teardown:function(){j=j.not(this);if(j.length===0){f(g).unbind(a)}},add:function(k){var h=k.handler;k.handler=function(m,n){m.target=n;h.apply(this,arguments)}}};function c(h){f(j).each(function(){var k=f(this);if(this!==h.target&&!k.has(h.target).length){k.triggerHandler(i,[h.target])}})}}})(jQuery,document,"outside");
;
(function(b){var a=0;b.fn.scrolled=function(d,e){if(typeof d==="function"){e=d;d=500}var c="scrollTimer"+a++;this.scroll(function(){var f=b(this);var g=f.data(c);if(g){clearTimeout(g)}g=setTimeout(function(){f.removeData(c);e.call(f[0])},d);f.data(c,g)})}})(jQuery);
;
/*
 * Lightweight URL manipulation with JavaScript
 * This library is independent of any other libraries and has pretty simple interface
 * and lightweight code-base.
 * Some ideas of query string parsing had been taken from Jan Wolter
 * @see http://unixpapa.com/js/querystring.html
 * 
 * @license MIT
 * @author Mykhailo Stadnyk <mikhus@gmail.com>
 */
var Url=(function(){var d={protocol:"protocol",host:"hostname",port:"port",path:"pathname",query:"search",hash:"hash"},b={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},e=function(p,f){var k=document,n=k.createElement("a"),f=f||k.location.href,h=f.match(/\/\/(.*?)(?::(.*?))?@/)||[];n.href=f;for(var j in d){p[j]=n[d[j]]||""}p.protocol=p.protocol.replace(/:$/,"");p.query=p.query.replace(/^\?/,"");p.hash=p.hash.replace(/^#/,"");p.user=h[1]||"";p.pass=h[2]||"";p.port=(b[p.protocol]==p.port||p.port==0)?"":p.port;if(!p.protocol&&!/^([a-z]+:)?\/\//.test(f)){var g=new Url(k.location.href.match(/(.*\/)/)[0]),o=g.path.split("/"),m=p.path.split("/");o.pop();for(var j=0,l=["protocol","user","pass","host","port"],q=l.length;j<q;j++){p[l[j]]=g[l[j]]}while(m[0]==".."){o.pop();m.shift()}p.path=(f.substring(0,1)!="/"?o.join("/"):"")+"/"+m.join("/")}else{p.path=p.path.replace(/^\/?/,"/")}a(p)},c=function(f){f=f.replace(/\+/g," ");f=f.replace(/%([ef][0-9a-f])%([89ab][0-9a-f])%([89ab][0-9a-f])/gi,function(m,i,h,g){var l=parseInt(i,16)-224,k=parseInt(h,16)-128;if(l==0&&k<32){return m}var j=parseInt(g,16)-128,o=(l<<12)+(k<<6)+j;if(o>65535){return m}return String.fromCharCode(o)});f=f.replace(/%([cd][0-9a-f])%([89ab][0-9a-f])/gi,function(k,h,g){var j=parseInt(h,16)-192;if(j<2){return k}var i=parseInt(g,16)-128;return String.fromCharCode((j<<6)+i)});f=f.replace(/%([0-7][0-9a-f])/gi,function(h,g){return String.fromCharCode(parseInt(g,16))});return f},a=function(g){var f=g.query;g.query=new (function(h){var k=/([^=&]+)(=([^&]*))?/g,i;while((i=k.exec(h))){var j=decodeURIComponent(i[1].replace(/\+/g," ")),l=i[3]?c(i[3]):"";if(this[j]!=null){if(!(this[j] instanceof Array)){this[j]=[this[j]]}this[j].push(l)}else{this[j]=l}}this.clear=function(){for(j in this){if(!(this[j] instanceof Function)){delete this[j]}}};this.toString=function(){var p="",q=encodeURIComponent;for(var n in this){if(this[n] instanceof Function){continue}if(this[n] instanceof Array){var m=this[n].length;if(m){for(var o=0;o<m;o++){p+=p?"&":"";p+=q(n)+"="+q(this[n][o])}}else{p+=(p?"&":"")+q(n)+"="}}else{p+=p?"&":"";p+=q(n)+"="+q(this[n])}}return p}})(f)};return function(f){this.toString=function(){return((this.protocol&&(this.protocol+"://"))+(this.user&&(this.user+(this.pass&&(":"+this.pass))+"@"))+(this.host&&this.host)+(this.port&&(":"+this.port))+(this.path&&this.path)+(this.query.toString()&&("?"+this.query))+(this.hash&&("#"+this.hash)))};e(this,f)}}());
;
"use strict";(function(){var f=(function(){function i(j,k){return Object.prototype.hasOwnProperty.call(j,k)}return function(p,z,y,A){z=z||"&";y=y||"=";var m={};if(typeof p!=="string"||p.length===0){return m}var o=/\+/g;p=p.split(z);var s=1000;if(A&&typeof A.maxKeys==="number"){s=A.maxKeys}var n=p.length;if(s>0&&n>s){n=s}for(var l=0;l<n;++l){var r=p[l].replace(o,"%20"),t=r.indexOf(y),q,w,j,u;if(t>=0){q=r.substr(0,t);w=r.substr(t+1)}else{q=r;w=""}j=decodeURIComponent(q);u=decodeURIComponent(w);if(!i(m,j)){m[j]=u}else{if(Array.isArray(m[j])){m[j].push(u)}else{m[j]=[m[j],u]}}}return m}})();var e=(function(){var i=function(j){switch(typeof j){case"string":return j;case"boolean":return j?"true":"false";case"number":return isFinite(j)?j:"";default:return""}};return function(m,l,j,k){l=l||"&";j=j||"=";if(m===null){m=undefined}if(typeof m==="object"){return Object.keys(m).map(function(n){var o=encodeURIComponent(i(n))+j;if(Array.isArray(m[n])){return m[n].map(function(p){return o+encodeURIComponent(i(p))}).join(l)}else{return o+encodeURIComponent(i(m[n]))}}).join(l)}if(!k){return""}return encodeURIComponent(i(k))+j+encodeURIComponent(i(m))}})();var a={decode:f,encode:e,parse:f,stringify:e};var g={"boolean":false,"function":true,object:true,number:false,string:false,"undefined":false};var b=(g[typeof window]&&window)||this;var d=g[typeof exports]&&exports&&!exports.nodeType&&exports;var c=g[typeof module]&&module&&!module.nodeType&&module;var h=c&&c.exports===d&&d;if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){b._=_;b.querystring=a}else{if(d&&c){if(h){(c.exports=a).querystring=a}else{d.querystring=a}}else{b.querystring=a}}}).call(this);
;
jive.namespace("search");jive.search.arrived=new Date().getTime();jive.search.SearchMetrics=jive.oo.Class.extend(function(a){var b=jQuery;a.init=function(d){this.data={name:d,referrer:document.referrer,pageArriveDate:jive.search.arrived,pageLeftDate:undefined,queries:[]};this.byName={};var c=this;b(window).on("beforeunload",function(){c.data.pageLeftDate=new Date().getTime();if(c.data.queries.length){c.commit(true)}})};this.commit=function(c){var d=JSON.stringify(this);return b.ajax({type:"POST",url:jive.app.url({path:"/api/core/v3/search/monitor"}),data:d,async:!c,contentType:"application/json",dataType:"json"})};this.addQuery=function(d,c){this.data.queries.push(d);if(c){this.byName[c]=d;if(c.slice(0,3)==="alt"){d.isAlternate=true}}return this};this.getQuery=function(c){return this.byName[c]};this.forEachCurrent=function(d){for(var c in this.byName){if(this.byName.hasOwnProperty(c)){d(this.byName[c],c)}}return this};this.setChoice=function(f,e,d){var g=this.byName[f],c=g.getResult(e);if(_.isObject(c)){g.setChoice({index:e,item:c,clickedUrl:d,date:new Date().getTime()})}return this};this.toJSON=function(){return this.data}});jive.search.SearchMetricsQuery=jive.oo.Class.extend(function(a){a.init=function(c,b){this.data={query:c||"",sentDate:b||new Date().getTime(),returnedDate:undefined,results:[]}};this.addResults=function(b){var c=this.data.results;c.push.apply(c,b);return this};this.getResult=function(b){return this.data.results[b]};this.forEachResult=function(d){var c=this.data.results;for(var b in c){if(c.hasOwnProperty(b)){d(c[b],b)}}return this};this.setReturnedDate=function(b){this.data.returnedDate=b;return this};this.incPage=function(){this.data.pagesLoaded=(this.data.pagesLoaded||0)+1;return this};this.abort=function(){this.data.aborted=new Date().getTime();return this};this.setChoice=function(b){this.data.choice=b;return this};this.toJSON=function(){return this.data}});
;
define("ui-modules/spotlight/scripts/tools",["jquery"],function(c){var b={};b.toProperCase=function(d){return d.replace(/\w\S*/g,function(e){return b.uppercaseFirst(e)})};b.uppercaseFirst=function(d){return d&&d.charAt(0).toUpperCase()+d.substr(1).toLowerCase()};b.startsWith=function(e,d){return e.indexOf(d)==0};b.endsWith=function(e,d){return e.indexOf(d,e.length-d.length)!==-1};b.timestamp=function(d){return b.timestampMsec(d)/1000};b.timestampMsec=function(e){var d=e?new Date(e):new Date();return Math.round(d.getTime())};b.normalizeQuery=function(d){return d.replace(/,+/g," ").replace(/\s+/g," ").replace(/^\s+|\s+$/g,"").toLowerCase()};b.indexedDBSize=function(d,g,h){var e=0;var f=indexedDB.open(d);f.onsuccess=function(j){var i=f.result;var k=i.transaction([g]).objectStore(g).openCursor();k.onsuccess=function(m){var o=m.target.result;if(o){var n=o.value;var l=JSON.stringify(n);e+=l.length;o["continue"]()}else{h(e,null)}};k.onerror=function(l){h(null,l)}}};b.arrayToObject=function(g,d){var e=_.isFunction(d),f={};_.each(g,function(h){var i;if(e){i=d(h)}else{i=d}f[i]=h});return f};b.hashCode=function(g){var h=0,e,f,d;if(g.length==0){return h}for(e=0,d=g.length;e<d;e++){f=g.charCodeAt(e);h=((h<<5)-h)+f;h|=0}return h};b.formatJiveDate=function(d){if(Date.prototype.toISOString){return d.toISOString().replace(/Z$/,"+0000")}function e(g){var f=String(g);if(f.length===1){f="0"+f}return f}return d.getUTCFullYear()+"-"+e(d.getUTCMonth()+1)+"-"+e(d.getUTCDate())+"T"+e(d.getUTCHours())+":"+e(d.getUTCMinutes())+":"+e(d.getUTCSeconds())+"."+String((d.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)+"+0000"};b.jivePersonProfileMap=function(d){var e={};_.each(d.jive.profile,function(f){e[f.jive_label.toLowerCase()]=f.value});return e};b.jivePersonSummary=function(e){var d=[];var f=function(h){if(h.jive_showSummaryLabel){var g=h.jive_summaryDisplayOrder;d[g]={label:h.jive_label,value:h.value}}};_.each(e.jive.profile,f);_.each(["emails","phoneNumbers","photos"],function(g){_.each(e[g]||[],f)});return d};b.decodeHtmlEntities=function(d){return c("<textarea />").html(d).text()};var a=/[^\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;b.tokenize=function(d,e){return d.split(e||a)};b.chunk=function(e,d){var h=[],f=0,g=e.length;while(f<g){h.push(e.slice(f,f+=d))}return h};b.escapeRegExp=function(d){return d.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")};b.isNumeric=function(d){return/^\d+$/.test(d)};b.repeat=function(d,e){return new Array(e+1).join(d)};b.idFromUri=function(e){var d=e.split("/");return d.length?d[d.length-1]:null};b.valuePromise=function(e){var d=c.Deferred();d.resolve(e);return d.promise()};b.stackTrace=function(){var d=new Error();return d.stack.split("\n").slice(1)};return b});
;
define("ui-modules/spotlight/scripts/parsers/constants",[],function(){var a={};a.D={FWD:0,BACK:1,BOTH:2,SELF:3};a.T={DUMMY:100,OP:90,IGNORE:80,OR:70,PARTICIPATED:32,FOLLOWED:31,VIEWED:30,DATE_BETWEEN:29,EXPLICIT_DATE:28,DUE:27,DATE:26,GROUP:24,PROJECT:23,SPACE:22,PLACE:21,DATE2:20,FROM:11,IN:10,LABEL:9,ASSIGNEE:8,SOMEONE:7,ME:6,CONTENT_TYPE:5,PERSON:3,PERSON_NAME:2,TEXT:1,NONE:0,IGNORE2:-1};a.F={SEARCH:0,TASKS_SEARCH:1};a.defaultLanguage="en";return a});
;
define("ui-modules/spotlight/scripts/parsers/simple",["underscore","ui-modules/spotlight/scripts/tools","ui-modules/spotlight/scripts/parsers/constants"],function(c,f,d){var a={},e=d.D,b=d.T;a.parse=function(h){h=f.normalizeQuery(h);var g={text:[]},i=[];c.each(f.tokenize(h),function(j){if(j){g.text.push([j.replace(",","\\,"),null]);i.push([j,{type:b.TEXT,dir:e.SELF,alts:{}}])}});return[{action:"search",normalizedQuery:h,filters:g,tokens:i,flags:[]}]};return a});
;
define("ui-modules/spotlight/scripts/parsers/languages/en",["ui-modules/spotlight/scripts/parsers/constants"],function(c){var a={},e=c.D,b=c.T,d=c.F;a.keywords={contain:{type:b.TEXT,dir:e.FWD},contains:{type:b.TEXT,dir:e.FWD},containing:{type:b.TEXT,dir:e.FWD},"contain the word":{type:b.TEXT,dir:e.FWD},"contains the word":{type:b.TEXT,dir:e.FWD},"containing the word":{type:b.TEXT,dir:e.FWD},"contain the phrase":{type:b.TEXT,dir:e.FWD},"contains the phrase":{type:b.TEXT,dir:e.FWD},"containing the phrase":{type:b.TEXT,dir:e.FWD},about:{type:b.TEXT,dir:e.FWD},regarding:{type:b.TEXT,dir:e.FWD},on:{type:b.TEXT,dir:e.FWD},place:{type:b.PLACE,dir:e.BACK},group:{type:b.GROUP,dir:e.BACK},space:{type:b.SPACE,dir:e.BACK},places:{type:b.PLACE,dir:e.BACK},groups:{type:b.GROUP,dir:e.BACK},spaces:{type:b.SPACES,dir:e.BACK},"place called":{type:b.PLACE,dir:e.FWD},"group called":{type:b.GROUP,dir:e.FWD},"space called":{type:b.SPACES,dir:e.FWD},"places called":{type:b.PLACE,dir:e.FWD},"groups called":{type:b.GROUP,dir:e.FWD},"spaces called":{type:b.SPACE,dir:e.FWD},"place named":{type:b.PLACE,dir:e.FWD},"group named":{type:b.GROUP,dir:e.FWD},"space named":{type:b.SPACES,dir:e.FWD},"places named":{type:b.PLACE,dir:e.FWD},"groups named":{type:b.GROUP,dir:e.FWD},"spaces named":{type:b.SPACE,dir:e.FWD},project:{type:b.PROJECT,dir:e.BACK},projects:{type:b.PROJECT,dir:e.BACK},"project called":{type:b.PROJECT,dir:e.FWD},"projects called":{type:b.PROJECT,dir:e.FWD},"project named":{type:b.PROJECT,dir:e.FWD},"projects named":{type:b.PROJECT,dir:e.FWD},"created by":{type:b.PERSON,dir:e.FWD},"written by":{type:b.PERSON,dir:e.FWD},"posted by":{type:b.PERSON,dir:e.FWD},by:{type:b.PERSON,dir:e.FWD},wrote:{type:b.PERSON,dir:e.BACK},posted:{type:b.PERSON,dir:e.BACK},made:{type:b.PERSON,dir:e.BACK},me:{type:b.ME,dir:e.SELF},myself:{type:b.ME,dir:e.SELF},my:{type:b.ME,dir:e.SELF},i:{type:b.ME,dir:e.SELF},"yours truly":{type:b.ME,dir:e.SELF},someone:{type:b.SOMEONE,dir:e.SELF},"someone called":{type:b.PERSON,dir:e.FWD},"someone named":{type:b.PERSON,dir:e.FWD},somebody:{type:b.SOMEONE,dir:e.SELF},"somebody called":{type:b.PERSON,dir:e.FWD},"somebody named":{type:b.PERSON,dir:e.FWD},author:{type:b.SOMEONE,dir:e.FWD},"author called":{type:b.PERSON,dir:e.FWD},"author named":{type:b.PERSON,dir:e.FWD},"user called":{type:b.PERSON,dir:e.FWD},"user named":{type:b.PERSON,dir:e.FWD},user:{type:b.PERSON,dir:e.FWD},"employee called":{type:b.PERSON,dir:e.FWD},"employee named":{type:b.PERSON,dir:e.FWD},person:{type:b.SOMEONE,dir:e.FWD},"person called":{type:b.PERSON,dir:e.FWD},"person named":{type:b.PERSON,dir:e.FWD},"people called":{type:b.PERSON,dir:e.FWD},"people named":{type:b.PERSON,dir:e.FWD},from:{type:b.FROM,dir:e.FWD},"posted on":{type:b.EXPLICIT_DATE,dir:e.FWD},"written on":{type:b.EXPLICIT_DATE,dir:e.FWD},"created on":{type:b.EXPLICIT_DATE,dir:e.FWD},"updated on":{type:b.EXPLICIT_DATE,dir:e.FWD},updated:{type:b.EXPLICIT_DATE,dir:e.FWD},between:{type:b.DATE_BETWEEN,dir:e.FWD},today:{type:b.DATE,dir:e.SELF,dateType:"today"},yesterday:{type:b.DATE,dir:e.SELF,dateType:"yesterday"},"week ago":{type:b.DATE2,dir:e.SELF,dateType:"week ago"},"last few days":{type:b.DATE,dir:e.SELF,dateType:"the last week"},"the last week":{type:b.DATE,dir:e.SELF,dateType:"the last week"},"the last year":{type:b.DATE,dir:e.SELF,dateType:"the last year"},"the last month":{type:b.DATE,dir:e.SELF,dateType:"the last month"},"in the last week":{type:b.DATE,dir:e.SELF,dateType:"the last week"},"in the last year":{type:b.DATE,dir:e.SELF,dateType:"the last year"},"in the last month":{type:b.DATE,dir:e.SELF,dateType:"the last month"},"this week":{type:b.DATE,dir:e.SELF,dateType:"this week"},"last week":{type:b.DATE,dir:e.SELF,dateType:"last week"},"this year":{type:b.DATE,dir:e.SELF,dateType:"this year"},"last year":{type:b.DATE,dir:e.SELF,dateType:"last year"},"this month":{type:b.DATE,dir:e.SELF,dateType:"this month"},"last month":{type:b.DATE,dir:e.SELF,dateType:"last month"},or:{type:b.OR,dir:e.SELF},"in":{type:b.IN,dir:e.FWD},anything:{type:b.CONTENT_TYPE,dir:e.SELF},everything:{type:b.CONTENT_TYPE,dir:e.SELF},something:{type:b.CONTENT_TYPE,dir:e.SELF},post:{type:b.CONTENT_TYPE,dir:e.SELF},posts:{type:b.CONTENT_TYPE,dir:e.SELF},content:{type:b.CONTENT_TYPE,dir:e.SELF},stuff:{type:b.CONTENT_TYPE,dir:e.SELF},last:{type:b.IGNORE2,dir:e.SELF},the:{type:b.IGNORE2,dir:e.SELF},that:{type:b.IGNORE,dir:e.SELF},"this":{type:b.IGNORE2,dir:e.SELF},which:{type:b.IGNORE,dir:e.SELF},a:{type:b.IGNORE,dir:e.SELF},and:{type:b.IGNORE,dir:e.SELF},all:{type:b.IGNORE,dir:e.SELF},every:{type:b.IGNORE,dir:e.SELF},"in a":{type:b.IGNORE,dir:e.SELF},"in the":{type:b.IGNORE2,dir:e.SELF},some:{type:b.IGNORE,dir:e.SELF},sometime:{type:b.IGNORE,dir:e.SELF},written:{type:b.IGNORE,dir:e.SELF},published:{type:b.IGNORE,dir:e.SELF},"or so":{type:b.IGNORE,dir:e.SELF},whatever:{type:b.IGNORE,dir:e.SELF}};a.pluralize=function(f){return f+"s"};a.contentTypes={blog:{name:"post",sets:{mode:d.SEARCH}},blogpost:{name:"post",sets:{mode:d.SEARCH}},"blog post":{name:"post",sets:{mode:d.SEARCH}},doc:{name:"document",sets:{mode:d.SEARCH}},document:{name:"document",sets:{mode:d.SEARCH}},discussion:{name:"discussion",sets:{mode:d.SEARCH}},thread:{name:"discussion",sets:{mode:d.SEARCH}},video:{name:"video",sets:{mode:d.SEARCH}},poll:{name:"poll",sets:{mode:d.SEARCH}},idea:{name:"idea",sets:{mode:d.SEARCH}},status:{name:"update",sets:{mode:d.SEARCH}},"status update":{name:"update",sets:{mode:d.SEARCH}},update:{name:"update",sets:{mode:d.SEARCH}},file:{name:"file",sets:{mode:d.SEARCH}},upload:{name:"file",sets:{mode:d.SEARCH}},message:{name:"message",sets:{mode:d.SEARCH}},msg:{name:"message",sets:{mode:d.SEARCH}},dm:{name:"message",sets:{mode:d.SEARCH}}};return a});
;
define("ui-modules/spotlight/scripts/constants",[],function(){var a={};a.contentTypeTitles={post:"Blog Post",document:"Document",discussion:"Discussion",video:"Video",poll:"Poll",idea:"Idea",update:"Status Update",message:"Message",file:"File",task:"Task"};a.contentTypeTitlesPlural={post:"Blogs",document:"Documents",discussion:"Discussions",video:"Videos",poll:"Polls",idea:"Ideas",update:"Status Updates",message:"Messages",file:"Files",task:"Tasks"};a.filterTypeNames={people:"People",contentType:"Content Types",text:"Content",relationship:"Relationship",places:"Places",groups:"Groups",date:"Published",assignee:"Assignees",due:"Due",label:"Labels"};a.filterTypeIcons={person:"user",contentType:"file",text:"search",following:"exchange",participated:"retweet",place:"globe",group:"group",date:"calendar",assignee:"check",due:"clock-o",label:"tag"};return a});
;
define("ui-modules/spotlight/scripts/log",["underscore"],function(d){var f={debug3:8,debug2:9,debug:10,timer:10,info:20,warn:30,warning:30,error:40},a=f.info,e="info";var b=window.console||{};if(!b.log){b.log=function(){}}d.each(["debug","warn","error","time","timeEnd"],function(g){if(!b[g]){b[g]=b.log}});if(Function.prototype.bind&&window.console&&typeof b.log=="object"){d.each(["log","debug","warn","error","time","timeEnd"],function(g){b[g]=Function.prototype.call.bind(b[g],b)})}var c=function(){if(a<=f.info){b.log.apply(b,arguments)}};c.log=c;c.levels=d.keys(f);c.setLevel=function(g){g=g.toLowerCase();if(f[g]){a=f[g];e=g}else{throw Error("Invalid log level specified - "+g)}};c.getLevel=function(){return e};c.debug=function(){if(a<=f.debug){b.debug.apply(b,arguments)}};c.debug2=function(){if(a<=f.debug2){b.debug.apply(b,arguments)}};c.debug3=function(){if(a<=f.debug3){b.debug.apply(b,arguments)}};c.warn=c.warning=function(){if(a<=f.warning){b.warn.apply(b,arguments)}};c.error=function(){if(a<=f.error){b.error.apply(b,arguments)}};c.time=function(){if(a<=f.timer){b.time.apply(b,arguments)}};c.timeEnd=function(){if(a<=f.timer){b.timeEnd.apply(b,arguments)}};return c});
;
define("ui-modules/spotlight/scripts/tools/html",["underscore","jquery","ui-modules/spotlight/scripts/tools"],function(d,f,g){var c={IGNORE:0,BLOCK:1,INLINE:2,TEXT:3,SPACE:4},b="  ",a={"#comment":c.IGNORE,"#doctype":c.IGNORE,AREA:c.IGNORE,BASE:c.IGNORE,BASEFONT:c.IGNORE,BUTTON:c.IGNORE,CANVAS:c.IGNORE,COL:c.IGNORE,COLGROUP:c.IGNORE,DATALIST:c.IGNORE,DEL:c.IGNORE,DIALOG:c.IGNORE,EMBED:c.IGNORE,FIGURE:c.IGNORE,FRAME:c.IGNORE,FRAMESET:c.IGNORE,HEAD:c.IGNORE,IFRAME:c.IGNORE,IMG:c.IGNORE,INPUT:c.IGNORE,KEYGEN:c.IGNORE,LINK:c.IGNORE,MAP:c.IGNORE,MENU:c.IGNORE,MENUITEM:c.IGNORE,META:c.IGNORE,NAV:c.IGNORE,NOFRAMES:c.IGNORE,NOSCRIPT:c.IGNORE,OBJECT:c.IGNORE,OPTGROUP:c.IGNORE,OPTION:c.IGNORE,PARAM:c.IGNORE,PROGRESS:c.IGNORE,SELECT:c.IGNORE,SCRIPT:c.IGNORE,SOURCE:c.IGNORE,STYLE:c.IGNORE,TEXTAREA:c.IGNORE,TH:c.IGNORE,THEAD:c.IGNORE,TRACK:c.IGNORE,VIDEO:c.IGNORE,WBR:c.IGNORE,ARTICLE:c.BLOCK,ASIDE:c.BLOCK,BLOCKQUOTE:c.BLOCK,BODY:c.BLOCK,CAPTION:c.BLOCK,DD:c.BLOCK,DETAILS:c.BLOCK,DIR:c.BLOCK,DIV:c.BLOCK,DL:c.BLOCK,DT:c.BLOCK,FIELDSET:c.BLOCK,FIGCAPTION:c.BLOCK,FOOTER:c.BLOCK,FORM:c.BLOCK,H1:c.BLOCK,H2:c.BLOCK,H3:c.BLOCK,H4:c.BLOCK,H5:c.BLOCK,H6:c.BLOCK,HEADER:c.BLOCK,HGROUP:c.BLOCK,HTML:c.BLOCK,LABEL:c.BLOCK,LEGEND:c.BLOCK,LI:c.BLOCK,MAIN:c.BLOCK,OL:c.BLOCK,P:c.BLOCK,PRE:c.BLOCK,RUBY:c.BLOCK,SAMP:c.BLOCK,SECTION:c.BLOCK,SUMMARY:c.BLOCK,TABLE:c.BLOCK,TBODY:c.BLOCK,TD:c.BLOCK,TFOOT:c.BLOCK,TITLE:c.BLOCK,TR:c.BLOCK,UL:c.BLOCK,A:c.INLINE,ABBR:c.INLINE,ADDRESS:c.INLINE,ACRONYM:c.INLINE,B:c.INLINE,BDI:c.INLINE,BDO:c.INLINE,BIG:c.INLINE,CENTER:c.INLINE,CITE:c.INLINE,CODE:c.INLINE,DFN:c.INLINE,FONT:c.INLINE,EM:c.INLINE,I:c.INLINE,INS:c.INLINE,KBD:c.INLINE,MARK:c.INLINE,METER:c.INLINE,OUTPUT:c.INLINE,Q:c.INLINE,RB:c.INLINE,RT:c.INLINE,S:c.INLINE,SPAN:c.INLINE,STRIKE:c.INLINE,STRONG:c.INLINE,SUB:c.INLINE,SUP:c.INLINE,TIME:c.INLINE,TT:c.INLINE,VAR:c.INLINE,U:c.INLINE,BR:c.SPACE,HR:c.SPACE,"#text":c.TEXT};var e=function(m,p,s){if(!m||!m.trim().length){return""}s=d.sortBy(s||[],function(t){return -t.length});m=m.replace(/<img[^>]*>/g,"");var o=f.parseHTML(m),i=[],k=null,j=0,l=false,r=d.map(s,function(t){return new RegExp(g.escapeRegExp(t),"gi")}),q=(r.length>0),n=function(u){if(l){return}u=(u||"").replace(/\s+/g," ");if(j+u.length>p){var t="";d.every(u.split(),function(v){if(j+t.length<=p){t+=v+" ";return true}else{return false}});u=t;l=true}if(k==null||k[k.length-1]==" "){u=u.replace(/^\s+/,"")}if(!u.length){return}if(q){d.each(r,function(v){u=u.replace(v,/<em class=\"jive-hilite\">$&<\/em>/)})}i.push(u);k=u;j+=u.length},h=function(v){var t=v.nodeName,u=a[t]||c.BLOCK;switch(u){case c.IGNORE:break;case c.BLOCK:if(k&&k.indexOf(b)==-1){n(b)}case c.INLINE:d.each(v.childNodes,h);break;case c.TEXT:n(v.textContent===undefined?v.innerText:v.textContent);break;case c.SPACE:n(" ");break;default:break}return !l};d.each(o,h);if(i.length&&i[i.length-1]==b){i[i.length-1]=""}return i.join("").trim()};return{getSnippet:e}});
;
define("ui-modules/spotlight/scripts/config",[],function(){var a={devMode:false,windowId:(new Date().getTime())+"-"+Math.round(Math.random()*100000),logLevel:"info",enableScheduler:true,enableBrowserDb:window._jive_enable_browserdb,enableEncryption:true,enableNaturalSearch:false,userAuthToken:window._jive_auth_token,userId:window._jive_effective_user_id,userLoggedIn:_jive_current_user&&!_jive_current_user.anonymous,containerId:jive.global.containerID,containerType:jive.global.containerType,containerBrowseId:jive.global.containerBrowseId};if(window.localStorage&&window.localStorage["jive.browserdb.disabled"]==1){a.enableBrowserDb=false}return a});
;
define("ui-modules/spotlight/scripts/browserdb",["jquery","underscore","ui-modules/spotlight/scripts/config","ui-modules/spotlight/scripts/tools","ui-modules/spotlight/scripts/log"],function(c,r,o,l,g){var s={},e=window.async,m=4,j=["get","put","add","remove","keys","values"],f=["websql","indexeddb"],h=o.enableEncryption,k={stores:[{name:"settings",keyPath:"key"},{name:"activity",encrypted:h},{name:"cache",encrypted:h},{name:"suggestions",encrypted:h},{name:"lists",encrypted:h},{name:"tokenIndex"},{name:"locks",keyPath:"id",autoIncrement:true,indexes:[{name:"name",keyPath:"name",unique:true}]}]},i={Encryption:{secrets:[{name:"primary",key:o.userAuthToken}]},mechanisms:f,size:45*1024*1024},p=null;s.errorHandler=function(t){if(t.code==1||t.code==18){g.error("Browser database error (disabling)",t,l.stackTrace().slice(1));s.enabled=false;p.close();p=null}else{g.error("Browser database error",t,l.stackTrace().slice(1))}};s.getSetting=function(u){if(!p){return l.valuePromise(null)}var t=c.Deferred();p.get("settings",u).done(function(v){if(v){t.resolve(v.value)}else{t.resolve(null)}}).fail(t.reject);return t.promise()};s.getSettings=function(){if(!p){return l.valuePromise({})}var t=c.Deferred();p.values("settings").done(function(u){var v={};r.each(u,function(w){v[w.key]=w.value});t.resolve(v)}).fail(t.reject);return t.promise()};s.updateSetting=function(t,u){if(!p){return l.valuePromise(null)}return p.put("settings",{key:t,value:u}).fail(p.errorHandler)};var b=function(t){if(p){p.clear().done(function(){t()}).fail(t)}else{t("database not initialized")}};var q=function(u){var t=[];for(var v=1;v<m;v++){t.push(v)}e.each(t,function(y,w){var x=n(y);g.debug("Deleting db "+x);ydn.db.deleteDatabase(x).done(function(){w()}).fail(s.errorHandler)},function(){u&&u()})};var n=function(t){return"jive-user-"+o.userId+"-v"+t};s.enabled=null;if(o.enableBrowserDb&&o.userLoggedIn){try{p=new ydn.db.Storage(n(m),k,i);s._db=p}catch(d){if(d.name=="SecurityError"&&window.localStorage){window.localStorage["jive.browserdb.disabled"]=1}g.warn("Unable to initialize browser DB",d)}}else{if(!o.enableBrowserDb){s.enabled=false}}s.KeyRange=ydn.db.KeyRange;r.each(j,function(t){s[t]=function(){if(s.enabled&&p){return p[t].apply(p,arguments)}else{g.warn("Attempting browserdb operation ("+t+") while db is disabled",arguments,l.stackTrace().slice(1));return l.valuePromise(null)}}});s.init=function(){if(!p){return c.Deferred(function(t){g.debug("Browser DB disabled");t.resolve()})}else{return c.Deferred(function(t){g.debug("Initializing browser DB");p.onReady(function(){a(t)})})}};var a=function(u){if(!r.contains(f,p.getType())){g.debug("Unable to initialize browser DB (browser not supported)");u.resolve()}var t=function(){s.enabled=true;g.debug("Browser-db initialized");u.resolve()};if(h){var v=l.hashCode(o.userAuthToken);s.getSettings().done(function(w){if(w.keyHash==v){t()}else{g("Resetting user database (updated key)");g.debug("Previous keyhash: "+w.keyHash,"New keyhash: "+v);b(function(x){if(x){throw x}s.updateSetting("keyHash",v);t();q()})}}).fail(s.errorHandler)}else{t()}};return s});
;
define("ui-modules/spotlight/scripts/scheduler",["jquery","underscore","ui-modules/spotlight/scripts/config","ui-modules/spotlight/scripts/browserdb","ui-modules/spotlight/scripts/tools","ui-modules/spotlight/scripts/log"],function(c,t,q,r,o,e){var u={},p="jive.scheduler.droppedLock.",n="jive.scheduler.lastTaskRun.",h=10,j={},a=1,m={},k={},b=false,g;u.registerTask=function(i){if(!i.name||!i.handler||!i.interval){throw Error("Invalid task specification")}j[i.name]=i};u.removeTask=function(i){delete j[i]};u.triggerTask=function(i){r.enabled&&r.updateSetting(n+i,0)};u.start=function(){if(!q.enableScheduler||!r.enabled||b){return}b=true;r.getSettings().done(function i(y){var w=o.timestamp();t.each(j,function x(A,D){var C="scheduler.lastTaskRun."+D,E=y[C]||0,F=A.lockTimeout||A.interval;if(r.enabled&&!k[D]&&w-E>A.interval){u.acquireLock("scheduler."+D,F).done(function z(G){e.debug("Starting scheduler task "+D);k[D]=w;A.handler(function H(){r.updateSetting(C,w);u.releaseLock(G);delete k[D]},y)}).fail(function B(G){if(G&&G.name&&G.name=="lock_held"){e.debug2("Lock held for task "+D,G)}else{throw G}})}});if(b&&r.enabled){g=setTimeout(u.start,h*1000)}else{e.debug("Stopped task scheduler")}}).fail(r.errorHandler)};u.stop=function(){b=false;clearTimeout(g)};u.acquireLock=function(i,w){return c.Deferred(function x(y){var z=o.timestamp(),A={windowId:q.windowId,name:i,ts:z},B=new ydn.db.KeyRange.only(i);r.put("locks",A).done(function D(E){m[E]=A;A.id=E;y.resolve(A)}).fail(function C(F){if(F.name!="ConstraintError"){y.reject(F);return}r.values("locks","name",B).done(function E(G){var H=G[0];if(H){if(z-H.ts>w){u.releaseLock(H).done(function I(){u.acquireLock(i,w).done(function(K){y.resolve(K)})}).fail(function J(K){y.reject(K)})}else{y.reject({name:"lock_held",message:"Lock "+i+" is already held (acquired at "+H.ts+")",existingLock:H})}}else{u.acquireLock(i,w).done(function(K){y.resolve(K)})}}).fail(r.errorHandler)})}).promise()};u.releaseLock=function(x){var w=(t.isNumber(x)||t.isString(x))?x:x.id;return c.Deferred(function i(y){if(r.enabled){r.remove("locks",w).done(function z(){delete m[w];y.resolve();e.debug("Released lock",w)}).fail(y.reject)}}).promise()};if(window.localStorage){for(var l=0;l<localStorage.length;l++){var v=localStorage.key(l);if(v.indexOf(p)==0){var f=parseInt(v.slice(p.length));u.releaseLock(f);localStorage.removeItem(v)}}}var d=function(){t.each(m,function i(w,x){if(localStorage){localStorage[p+x]=1}u.releaseLock(x)});return null};window.addEventListener&&window.addEventListener("onunload",d);var s=window.onbeforeunload;window.onbeforeunload=function(){d();if(s){s.apply(this,arguments)}};return u});
;
define("ui-modules/spotlight/scripts/cache",["jquery","underscore","ui-modules/spotlight/scripts/tools","ui-modules/spotlight/scripts/log","ui-modules/spotlight/scripts/browserdb","ui-modules/spotlight/scripts/scheduler"],function(d,h,f,b,i,e){var c={},j=1,a=function(m,k){var l=f.timestamp();if(k===undefined){k=m.ttl||0}return l-m.stored>k||(m.version||0)<j};c.get=function(m,l){if(!l||!i.enabled){return f.valuePromise(null)}var k=d.Deferred();i.get("cache",m).then(function(n){if(!n){k.resolve()}else{if(a(n,l)){b.debug("Expired cache key "+m);i.remove("cache",m);k.resolve()}else{b.debug("Got cached key "+m);k.resolve(n.value)}}},function(){k.reject()});return k.promise()};c.set=function(l,m,k){if(!i.enabled){return f.valuePromise(null)}var n={key:l,stored:f.timestamp(),value:m,version:j,type:"cache",ttl:k};b.debug("Caching key "+l,n);return i.put("cache",n,l).fail(i.errorHandler)};c.clearExpired=function(){var k=d.Deferred();i.values("cache").then(function(l){var m=0;h.each(l,function(n){if(a(n,n.ttl)){i.remove("cache",n.key);m++}});k.resolve({total:l.length,expired:m,remaining:l.length-m})},function(){k.reject()});return k.promise()};c.clearAll=function(){return i._db.clear("cache")};e.registerTask({name:"cleanupExpiredCaches",interval:600,handler:function g(l,k){c.clearExpired().done(function(m){b.debug("Cleared "+m.expired+" expired items from cache ("+m.remaining+" items remain in cache");l()})}});return c});
;
define("ui-modules/spotlight/scripts/query",["underscore","jquery","ui-modules/spotlight/scripts/config","ui-modules/spotlight/scripts/tools","ui-modules/spotlight/scripts/log","ui-modules/spotlight/scripts/cache"],function(m,g,c,h,e,a){var f={},l=window.Url,j=window.querystring,k={dataType:"text",type:"GET",data:{}},i=function(p){var o=h.hashCode(JSON.stringify({data:p.data,type:p.type||""}));return"query-"+p.url+"-"+o};f.metrics=new jive.search.SearchMetrics("spotlight-search");function b(o){return{id:o.id,type:o.type}}function d(q){if(q._searchMetricsType){var o=new jive.search.SearchMetricsQuery(q.url,(new Date()).getTime());f.metrics.addQuery(o,q._searchMetricsType);var p=q.success;q.success=function(r,s,t){o.setReturnedDate(new Date().getTime());o.addResults(r.list.map(b));p&&p(r,s,t)}}g.ajax(q)}f.RateLimiter=function(o){var p=this;p.delay=o;p.lastCall=0;this.limit=function(r){var q=new Date().getTime(),s=p.delay-(q-p.lastCall);if(s>0){e.debug3("Limiter waiting for "+s+" msecs before calling",r);setTimeout(function(){p.limit(r)},s+1)}else{e.debug3("Limiter calling",r);p.lastCall=q;r()}}};f.query=function(q,o){if(q.limiter){q.limiter.limit(function(){q.limiter=null;f.query(q,o)});return}q=m.extend({},k,q);o=q.cacheTTL||o;if(!o){d(q);return}var p=i(q);a.get(p,o).then(function(s){var r=s&&s.result;if(r){if(q.success){q.success(r)}if(q.complete){if(m.isArray(q.complete)){m.each(q.complete,function(u){u(r)})}else{q.complete(r)}}}else{if(o){var t=q.success;q.success=function(u,v,x){var w={url:q.url,data:q.data,type:"cachedquery",result:u};if(u){a.set(p,w,o)}if(t){t(u,v,x)}}}d(q)}})};var n=function(o){return encodeURI(o).replace("#","%23").replace("&","%26").replace("=","%3D").replace("?","%3F").replace(",","\\,")};f.prepareFilters=function(p){var o=[];m.each(p,function(q,r){var s="";if(!q){return true}if(m.isString(q)){s=n(q)}else{if(m.isNumber(q)){s=n(""+q)}else{if(m.isArray(q)){s=m.map(q,function(t){return n(""+t)}).join(",")}}}o.push(r+"("+s+")")});return o};f.parseJiveAPIResponse=function(o){return JSON.parse(o.replace(/^throw [^;]*;/,""))};f.jiveQuery=function(r){r.url=_jive_base_url+(r.url||"/");var q=r.url,o=r.query;if(r.query){o=m.isString(r.query)?j.parse(r.query):r.query}else{o={}}if(r.filters){o.filter=(o.filter||[]).concat(f.prepareFilters(r.filters))}if(!m.isEmpty(o)){var p=new Url(q);p.query=m.extend(p.query||{},o);r.url=p.toString()}if(!(r.type&&r.type.toLowerCase()=="post")){r.dataType="text";r.dataFilter=f.parseJiveAPIResponse}r.headers={};if(c.userAuthToken){r.headers["X-J-Token"]=c.userAuthToken}return f.query(r)};f.iterateJiveQuery=function(o){o.success=function(y,s,x){var r=o._returned||0,t=true,v=y.list||y.items||[];if(v.length){if(o.paginator&&(!o.limit||(r+v.length)<o.limit)){t=false}if(o.callback){for(var u=0;u<v.length;u++){var q=o.callback(v[u],u+r);if(q===false){t=true;break}}}if(o.pageCallback){q=o.pageCallback(v);if(q===false){t=true}}r+=v.length;if(!t){var w=o.paginator(o,y);if(w){var p=m.extend({},o,w);p._returned=r;f.iterateJiveQuery(p)}else{t=true}}}if(t&&o.done){o.done(r,y)}};f.jiveQuery(m.omit(o,["limit","_returned","callback","pageCallback","paginator","done"]))};f.V3APIPaginator=function(p,o){if(o.links&&o.links.next){return{url:o.links.next,query:null}}};return f});
;
define("ui-modules/spotlight/scripts/visor/apis",["underscore","jquery","ui-modules/spotlight/scripts/config","ui-modules/spotlight/scripts/browserdb","ui-modules/spotlight/scripts/tools","ui-modules/spotlight/scripts/log","ui-modules/spotlight/scripts/query","ui-modules/spotlight/scripts/tools/html"],function(k,f,b,m,g,d,i,j){var c={},e=3600,a=86400,h=86400,l={decision:false,finalized:true,helpful:false,official:true,outdated:true,pending:false,success:false,wip:true};c.CONTENT_SNIPPET_LENGTH=200;c.defaultFields={content:["onBehalfOf","parentPlace","type","question","iconCss","content","discussion","subject","resources","published","updated","contentID","author.@all","summary.@all","outcomeCounts","visibleToExternalContributors","uuid","index","favoriteObject.@all"],place:["id","type","placeID","iconCss","name","updated","description","url","groupType","creator","visibleToExternalContributors"],person:["id","type","thumbnailUrl","displayName","jive","emails","phoneNumbers","photos","resources"]};c.resultConverters={content:function(u){if(!u.highlightBody&&u.content&&u.content.text){try{u.highlightBody=j.getSnippet(u.content.text,c.CONTENT_SNIPPET_LENGTH)}catch(t){d.warn("Could not create snippet for content item",u)}}var v,q=u.author||(u.onBehalfOf&&u.onBehalfOf.person),n=u.parentPlace;if(u.type=="message"&&u.discussion){v=g.idFromUri(u.discussion)}else{v=u.contentID||g.idFromUri(u.resources.self.ref)}var p={metadataUpdated:u.partial?0:g.timestamp(),type:"content",subType:u.type,id:v,icon:u.iconCss,value:u.subject,url:(u.resources&&u.resources.html&&u.resources.html.ref)||"#",outcomes:[],snippet:u.highlightBody||"",published:u.published,updated:u.updated,question:u.question,promotedResult:u.promotedResult,uuid:u.uuid,index:u.index,bookmarked:u.bookmarked};if(q){p.author={id:q.id,name:q.displayName,url:(q.resources&&q.resources.html&&q.resources.html.ref)||"#"}}if(n&&n.type!="person"){var o=n.uri?g.idFromUri(n.uri):n.id;if(o){p.place={id:o,name:n.name,type:n.type,groupType:n.groupType,url:n.html||"#"}}}if(u.outcomeCounts){k.each(u.outcomeCounts,function(s,r){if(u.type=="message"||l[r]){p.outcomes.push({key:r,count:s})}})}if(u.visibleToExternalContributors){p.externallyAccessible=u.visibleToExternalContributors}return p},place:function(o){var n={metadataUpdated:o.partial?null:g.timestamp(),type:"place",subType:o.type,id:o.placeID,icon:o.iconCss,value:o.name,lastUpdated:o.updated,description:f.trim(o.description||""),url:o.resources.html.ref,image:o.resources.avatar&&o.resources.avatar.ref};if(o.type=="group"){n.groupType=o.groupType}if(o.creator){n.creator={id:o.creator.id,name:o.creator.displayName||(o.creator.name&&o.creator.name.formatted)}}if(o.visibleToExternalContributors){n.externallyAccessible=o.visibleToExternalContributors}return n},person:function(o){var n={metadataUpdated:o.partial?null:g.timestamp(),type:"person",id:o.id,icon:"user",image:o.thumbnailUrl||o.resources.avatar.ref,value:o.displayName,profile:{},summary:g.jivePersonSummary(o),url:o.resources.html.ref};k.each(n.summary,function(p){if(p){n.profile[p.label.toLowerCase().replace(/ /g,"_")]=p.value}});return n}};c.getList=function(n,p,q){var o=k.extend({},p,{success:function(r){var s={list:k.map(r.list,c.resultConverters[n])};q(s)},error:function(r){q({error:r,list:[]})}});if(!o.query){o.query={}}if(!o.query.fields){o.query.fields=c.defaultFields[n].join(",")}i.jiveQuery(o)};c.frequentlyViewed={content:function(n,p){var o={url:"/api/core/v3/activities/frequent/content",query:{count:n},cacheTTL:e};c.getList("content",o,p)},place:function(n,p){var o={url:"/api/core/v3/activities/frequent/places",query:{count:n},cacheTTL:a};c.getList("place",o,p)},person:function(n,p){var o={url:"/api/core/v3/activities/frequent/people",query:{count:n},cacheTTL:h};c.getList("person",o,p)}};c.recentlyViewed={content:function(n,p){var o={url:"/api/core/v3/activities/recent/content",query:{count:n}};c.getList("content",o,p)},place:function(n,p){var o={url:"/api/core/v3/activities/recent/places",query:{count:n}};c.getList("place",o,p)},person:function(n,p){var o={url:"/api/core/v3/activities/recent/people",query:{count:n}};c.getList("person",o,p)}};return c});
;
define("ui-modules/spotlight/scripts/visor/suggestions/ingress",["underscore","ui-modules/spotlight/scripts/config","ui-modules/spotlight/scripts/browserdb","ui-modules/spotlight/scripts/tools","ui-modules/spotlight/scripts/scheduler","ui-modules/spotlight/scripts/log","ui-modules/spotlight/scripts/query","ui-modules/spotlight/scripts/visor/apis"],function(F,D,E,A,e,n,g,y){var G={},h=window.async,k=60,p=k*86400*1000,j=48,B=Math.pow(2,j),b={NO_EXPIRE:1},t=1000,s=500,x=100,C={content:"C",place:"P",person:"U",search:"S"},d=["jive:group","jive:space","jive:place","jive:project"],i=new g.RateLimiter(1000),m={person:86400,place:86400*7},w={content:function(H,I){n.debug("Updating metadata for "+H.length+" content items");h.eachSeries(A.chunk(H,25),function(L,K){var M=[],N={};F.each(L,function(P){var O=""+P.id;M.push({key:O,request:{method:"GET",endpoint:"/api/core/v3/contents/"+P.id+"?directive=silent&fields="+y.defaultFields.content.join(",")}});N[O]=P});g.jiveQuery({url:"/api/core/v3/executeBatch",type:"POST",contentType:"application/json",data:JSON.stringify(M),dataType:"json",limiter:i,success:function J(O){F.each(O,function(P){var R=P.data;if(!R){n.warn("Could not get metadata for content "+P.id,P);return}var S=y.resultConverters.content(R),Q=G.mergeSuggestions(N[P.id],S);E.put("suggestions",Q,Q.key).fail(E.errorHandler)});K()},error:K})},I)},person:function c(H,I){n.debug("Updating metadata for "+H.length+" people");h.eachSeries(A.chunk(H,25),function(K,J){var L=F.pluck(K,"id").join(",");g.iterateJiveQuery({url:"/api/core/v3/people",query:{ids:L,fields:y.defaultFields.person.join(",")},limiter:i,callback:function N(R,P){var O=y.resultConverters.person(R),Q=G.mergeSuggestions(K[P],O);E.put("suggestions",Q,Q.key).fail(E.errorHandler);return true},done:function M(O){J()},error:J})},I)},place:function(H,I){n.debug("Updating metadata for "+H.length+" places");h.eachSeries(A.chunk(H,25),function(K,J){var L=[],N={};F.each(K,function(P){var O=""+P.id;L.push({key:O,request:{method:"GET",endpoint:"/api/core/v3/places/"+P.id+"?fields="+y.defaultFields.place.join(",")}});N[O]=P});g.jiveQuery({url:"/api/core/v3/executeBatch",type:"POST",contentType:"application/json",data:JSON.stringify(L),dataType:"json",limiter:i,success:function M(O){F.each(O,function(P){var R=P.data;if(!R){n.warn("Could not get metadata for place "+P.id,P);return}var S=y.resultConverters.place(R),Q=G.mergeSuggestions(N[P.id],S);E.put("suggestions",Q,Q.key).fail(E.errorHandler)});J()},error:J})},I)}};G.ACTIVITY_EXPIRATION_DAYS=k;G.ACTIVITY_EXPIRATION_MSECS=p;var u=function(M,I){if(!M.noExpire&&G.isReferenceExpired(M.ts)){return}switch(M._type){case"v3Content":switch(M._subType){case"bookmark":M.weight=900;M.author.partial=true;break;case"recentContent":M.weight=700;break}I(y.resultConverters.content(M));if(M.author&&""+M.author.id!=""+D.userId){I(y.resultConverters.person(M.author))}if(M.parentPlace&&M.parentPlace.uri&&M.parentPlace.type!="user"&&M.parentPlace.type!="person"){I({type:"place",id:A.idFromUri(M.parentPlace.uri),subType:M.parentPlace.type,value:M.parentPlace.name,url:M.parentPlace.html})}break;case"search":I({type:"search",icon:"search",key:M.query,value:M.query});break;case"jiveOpenSocial":if(!M.object){return}switch(M.verb){case"jive:installed":case"jive:promoted":return;case"jive:created":if(M.object&&M.object.objectType=="jive:announcement"){return}case"jive:notification":case"jive:modified":case"jive:mentioned":case"jive:replied":case"jive:outcome_set":case"jive:bookmarked":default:var K,L,H={};if(M.object.objectType=="jive:comment"||M.object.objectType=="jive:message"){L=M.jive.parent;K=M.jive.parentActor}else{L=M.object;K=M.object.author}F.extend(H,{type:"content",id:A.idFromUri(L.id),subType:L.objectType.split(":")[1],value:L.displayName,url:L.url,question:L.question,published:L.published,updated:L.updated,snippet:L.summary,icon:M.jive.iconCss.replace(/\-comment$/,"")});if(M.target&&F.contains(d,M.target.objectType)){var J={type:"place",id:A.idFromUri(M.target.id),subType:M.target.objectType.split(":")[1],value:M.target.displayName,url:M.target.url};H.place={id:J.id,type:J.subType,name:J.value,url:J.url};I(J)}if(!K){K=M.actor}if(!K){break}H.author={id:A.idFromUri(K.id),name:K.displayName,url:K.url};I(H);var N=(M.actor&&M.actor.id&&A.idFromUri(M.actor.id));if(N&&N!=""+D.userId){I({type:"person",id:N,image:M.actor.image.url,value:M.actor.displayName,url:M.actor.url})}break}}};G.logActivity=function(H){n.debug3("Parsing activity",H);u(H,function(I){if(!I.ts){I.ts=A.timestampMsec()}I.key=C[I.type]+I.id;I.value=I.value.trim();n.debug3("Logging activity item",I);E.put("activity",I,""+I.ts).fail(E.errorHandler)})};G.isTimestampExpired=function(H){return(A.timestampMsec()-H>p)};var f=function(H){return Math.round(H/t)*t};G.packReference=function(I){var H=0;if(I.noExpire){H|=b.NO_EXPIRE}return f(I.ts)+(I.weight||s)+(H*B)};G.unpackReference=function(H){return{ts:f(H%B),weight:(H%t)/(t-1),flags:parseInt(H/B)}};G.isReferenceExpired=function(I){var H=G.unpackReference(I);return !(H.flags&b.NO_EXPIRE)&&G.isTimestampExpired(H.ts)};G.removeExpired=function(H){E.values("activity").done(function(I){var J=0;F.each(I,function(K){if(!K.noExpire&&G.isTimestampExpired(K.ts)){E.remove("activity",K.ts);J++}});H(J)}).fail(E.errorHandler)};G.needsMetadataUpdate=function(I){var H=A.timestamp();return(w[I.type]&&(!I.metadataUpdated||H-I.metadataUpdated>m[I.type]))};G.updateMetadata=function(H,K){var J={},I=0;F.each(H,function(L){if(w[L.type]){if(J[L.type]){J[L.type].push(L)}else{J[L.type]=[L]}I++}});h.each(F.pairs(J),function(O,L){var N=w[O[0]],M=O[1];N(M,L)},function(){if(I){E.updateSetting("toplistActivityOffset",0)}K&&K()})};G.mergeSuggestions=function(J,H){var L=J||H;if(J&&H){var I=(J.refs||[]).concat(H.refs||[]),K=function(M){return M.metadataUpdated||(M.refs&&M.refs.length&&M.refs.slice(-1)[0]/1000)||0};if((H.metadataUpdated&&!J.metadataUpdated)||K(J)<K(H)){L=F.extend({},J,H)}else{L=F.extend({},H,J)}L.bookmarked=J.bookmarked||H.bookmarked;L.refs=I}L.refs=F.unique(F.sortBy(F.reject(L.refs,G.isReferenceExpired)),true);return L};var l=function(O,J,M,U,L,Q,H){var R="tasks."+O+".lastLogged",K=L[R]||0,I=K,S=K||(A.timestampMsec()-p),P=Q?null:{count:x,after:A.formatJiveDate(new Date(S))};g.iterateJiveQuery({url:J,query:P,limiter:i,callback:function T(X){var V=X.published,W=new Date(V).getTime();if(G.isTimestampExpired(W)||(K&&W<=K)){return false}if(H&&!H(X)){return true}if(W>I){I=W}X._type="jiveOpenSocial";X._subType=M;X.ts=W;X.partial=true;G.logActivity(X);return true},paginator:Q?null:g.V3APIPaginator,done:function N(V){E.updateSetting(R,I);e.triggerTask("updateIndex");U()}})};e.registerTask({name:"getRecentContent",interval:240,handler:function z(O,N){var M="tasks.getRecentContent.lastLogged",K=N[M],J=K||0,L=0;g.iterateJiveQuery({url:"/api/core/v3/activities/recent/content",query:{fields:y.defaultFields.content.join(","),count:25},limiter:i,callback:function I(P,Q){var R=P.lastActivity;if(!L||R<L){L=R}if(G.isTimestampExpired(R)||(R&&K&&R<=K)){return false}if(R>J){J=R}P._type="v3Content";P._subType="recentContent";P.ts=R;G.logActivity(P)},paginator:function(Q,P){if(P.list.length){if(!L){n.warn("Missing lastActivity timestamp on recent content");return false}var R=A.formatJiveDate(new Date(L));L=0;return{query:F.extend({},Q.query,{before:R})}}else{return false}},done:function H(P){if(P){E.updateSetting(M,J);e.triggerTask("updateIndex")}O()}})}});e.registerTask({name:"getBookmarks",interval:600,handler:function a(N,M){var L="tasks.getBookmarks.lastLogged",K=M[L]||0,H=K;g.iterateJiveQuery({url:"/api/core/v3/contents",query:{count:20},filters:{type:"favorite",author:"/people/"+D.userId},limiter:i,callback:function J(O){var P=A.timestampMsec(O.published);if(K&&P<=K){return false}if(P>H){H=P}F.extend(O,O.favoriteObject||{});O.ts=P;O._type="v3Content";O._subType="bookmark";O.noExpire=true;O.bookmarked=true;G.logActivity(O);return true},paginator:g.V3APIPaginator,done:function I(O,P){if(H){E.updateSetting(L,H)}N()}})}});e.registerTask({name:"getActivities",interval:240,handler:function r(J,I){l("getActivities","/api/core/v3/people/@me/activities","myActivity",J,I,false,function H(K){return K.actor&&A.idFromUri(K.actor.id)==""+D.userId})}});e.registerTask({name:"getInbox",interval:240,handler:function q(I,H){l("getInbox","/api/core/v3/inbox","inbox",I,H)}});e.registerTask({name:"getRecognitions",interval:600,handler:function v(I,H){l("getRecognitions","/api/core/v3/people/@me/@recognition","myActivity",I,H,true)}});e.registerTask({name:"cleanupOldActivity",interval:600,handler:function o(J,H){G.removeExpired(function I(K){if(K){n.debug("Removed "+K+" expired activity items")}J()})}});return G});
;
define("ui-modules/spotlight/scripts/visor/suggestions/index",["jquery","underscore","ui-modules/spotlight/scripts/config","ui-modules/spotlight/scripts/browserdb","ui-modules/spotlight/scripts/constants","ui-modules/spotlight/scripts/tools","ui-modules/spotlight/scripts/log","ui-modules/spotlight/scripts/tools/html","ui-modules/spotlight/scripts/visor/suggestions/ingress","ui-modules/spotlight/scripts/visor/apis","ui-modules/spotlight/scripts/scheduler"],function(w,M,y,n,A,s,i,x,r,p,f){var D={},z=window.async,C=10000,k=10,u=4,v=k*10,H=50,e="lastIndexedActivity",N="toplistActivityOffset",t=["content","place","person"],a=0.1,j=10,B=1,I=1,E=1,o=100,G=Math.E,L=-1/4,g=10,m=10,d=3,q=5;var b=function(O){return s.tokenize(s.normalizeQuery(s.decodeHtmlEntities(O)))};var c=function(O){return g-O},K=function(O){return Math.pow(G,O*L)};var l=function(R){var Q=r.unpackReference(R);if(!Q.ts){return 0}var P=s.timestampMsec(),S=P-Q.ts,T=0;if(S<r.ACTIVITY_EXPIRATION_MSECS){var O=(g*S)/r.ACTIVITY_EXPIRATION_MSECS;T=c(O)}T=(E+T*(o-E))*I;return T*Q.weight};var F=function(P){var O=P.refs||P,Q=0;M.each(O,function(R){Q+=l(parseInt(R))});return Q};var J=function(Q,O,S){var P=s.timestampMsec(),R=s.arrayToObject(O,"key");n.get("tokenIndex",Q).done(function(T){if(T){T.refs=M.object(M.map(T.refs,function(V,U){return[U,M.map(V,parseInt)]}))}else{T={refs:{}}}M.each(T.refs,function(X,V){if(!R[V]){var U=M.reject(X.slice(1),r.isReferenceExpired);if(U.length){var W=X[0];T.refs[V]=[W].concat(U)}else{delete T.refs[V]}}});M.each(O,function(V){var U=T.refs[V.key],W=V.tokens[Q];if(U){U=U.slice(1).concat(V.refs)}else{U=V.refs}T.refs[V.key]=[W].concat(M.unique(M.sortBy(U),true))});if(M.size(T.refs)>H){T.refs=M.object(M.sortBy(M.pairs(T.refs),function(U){return F(U[1].slice(1))}).slice(-H))}T.key=Q;T.updated=P;n.put("tokenIndex",T,T.key).done(function(){S()}).fail(function(U){S(U)})}).fail(n.errorHandler)};D.updateIndex=function(T,S){if(!n.enabled){T(0);return}var P=S.lastIndexedActivity||-1,O=new n.KeyRange.lowerBound(""+(P+1)),R="-> fetch new activities",Q=n.errorHandler;n.values("activity",O,C).done(function(V){if(!V.length){T(0);return}i.debug("-> found "+V.length+" new activities");var U={},W=function(X){var Y=U[X.key];X=r.mergeSuggestions(X,Y);U[X.key]=X};M.each(V,function(X){try{X.refs=[r.packReference(X)];delete X.ts;delete X.weight;W(X)}catch(Y){i.error("Unable to process suggestion for activity:",X,Y)}});R="-> fetch existing suggestions from db";i.time(R);n.values("suggestions",M.keys(U)).done(function(X){i.timeEnd(R);M.each(X,function(aa){if(aa){aa.refs=M.map(aa.refs,parseInt);W(aa)}});var Y={},Z=[];M.each(U,function(aa){aa.tokens={};M.each(b(aa.value),function(ac){if(ac){aa.tokens[ac]=j}});if(aa.authorName){M.each(b(aa.authorName),function(ac){if(ac){aa.tokens[ac]=B+(aa.tokens[ac]||0)}})}n.put("suggestions",aa,aa.key).fail(n.errorHandler);var ab=Math.max.apply(null,aa.refs);if(ab>P){P=ab}M.each(aa.tokens,function(ad,ac){if(Y[ac]){Y[ac].push(aa)}else{Y[ac]=[aa]}});if(r.needsMetadataUpdate(aa)){Z.push(aa)}});r.updateMetadata(Z);R="-> update token index records";i.time(R);z.each(M.pairs(Y),function(ab,aa){J(ab[0],ab[1],aa)},function(aa){i.timeEnd(R);if(aa){throw aa}if(P){n.updateSetting(e,P)}T(V.length)})},Q)},Q)};D.clearIndex=function(O){n._db.clear(["suggestions","tokenIndex"]).done(function(){n.updateSetting(e,0);O()}).fail(function(P){O(P)})};D.getAllSuggestions=function(){var O=n.KeyRange();return w.Deferred(function(P){n.values("suggestions",O,10000).done(function(Q){M.each(Q,function(R){R.score=F(R);R.unpackedRefs=M.map(R.refs,function(T){var S=r.unpackReference(T);S.packed=T;S.score=l(T);return S})});P.resolve(Q)}).fail(n.errorHandler)})};D.updateTopLists=function(S){var R=n.KeyRange(),Q={},T,P=w.Deferred(),O=function(U){i.debug("Updating top lists");z.each(t,function(Y,V){var X=M.filter(U,function(aa){return aa.type==Y}),W=M.sortBy(X,function(aa){return F(aa)});var Z={key:"top-"+Y,type:"toplist",list:W.reverse().slice(0,u)};Q[Y]=Z.list;n.put("lists",Z,Z.key).done(function(){V()}).fail(P.reject)},function(V){if(V){P.reject(V);return}n.updateSetting(N,T).done(function(){P.resolve(Q)}).fail(n.errorHandler)})};n.getSettings().done(function(U){T=U[e]||0;if(S||T>U[N]){n.values("suggestions",R,100000).done(O).fail(n.errorHandler)}else{P.resolve(false)}}).fail(n.errorHandler);return P.promise()};D.getTopLists=function(P){var O={};M.each(t,function(Q){O[Q]=[]});if(!n.enabled){P(O);return}D.updateTopLists().done(function(Q){if(Q){P(Q);return}var R=M.map(t,function(S){return"top-"+S});n.values("lists",R).done(function(S){M.each(t,function(T,U){if(S[U]){O[T]=S[U].list}});P(O)}).fail(n.errorHandler)}).fail(n.errorHandler)};D.searchSuggestions=function(O,R){var P=O.filters,W=O.normalizedQuery;if(!(n.enabled&&P&&P.text&&P.text.length)){R([]);return}var V=M.uniq(M.map(P.text,M.first)),S=[],Q={},U={},T={};M.each(V,function(X){U[X]={}});z.each(V,function(aa,X){if(!aa){X();return}var Z="-> db query - "+aa,Y=new n.KeyRange.bound(aa,aa+"\uffff");i.time(Z);n.values("tokenIndex",Y,1000).done(function(ab){i.timeEnd(Z);var ac=[];M.each(ab,function(ad){M.each(ad.refs,function(ah,af){var ag=ah[0],ae=M.map(ah.slice(1),parseInt);if(aa!=ad.key){ag*=a}var ai=M.reduce(ae,function(aj,ak){return aj+l(ak)*ag});U[aa][af]=ag;Q[af]=(Q[af]||0)+ai;ac.push(af)})});S.push(ac);X()}).fail(n.errorHandler)},function(Y){var Z;if(S.length==1){Z=S[0]}else{Z=M.intersection.apply(this,S)}var X=M.sortBy(Z,function(aa){return Q[aa]});X=X.reverse().slice(0,v);n.values("suggestions",X).done(function(ab){var aa=[];M.each(ab,function(ad){var af=0;if(ad.value.toLowerCase()==W&&ad.type=="search"){return}M.each(V,function(ag){af+=U[ag][ad.key]});ad.updatedScore=F(ad)*af;if(!ad.updatedScore){return}var ae=ad.value.toLowerCase();if(ae==W){ad.updatedScore*=m}else{if(W.length>=d&&ae.indexOf(W)==0){ad.updatedScore*=q}}aa.push(ad)});var ac=M.sortBy(aa,function(ad){return ad.updatedScore}).reverse().slice(0,k);R(ac)}).fail(n.errorHandler)})};f.registerTask({name:"updateIndex",interval:30,handler:function h(R,P){var O="Suggestion index update";i.time(O);D.updateIndex(function Q(S){i.timeEnd(O);if(S){O="Update top lists";i.time(O);D.updateTopLists(function T(){i.timeEnd(O);R()})}else{R()}},P)}});return D});
;
define("ui-modules/spotlight/scripts/visor/search",["underscore","ui-modules/spotlight/scripts/constants","ui-modules/spotlight/scripts/query","ui-modules/spotlight/scripts/tools","ui-modules/spotlight/scripts/visor/apis"],function(n,p,k,i,j){var g={},q=_jive_moment,f=window.async,e=10,d=4,h=86400,a=86400,o=3600,l={searchContent:true,searchPeople:true,searchPlaces:true,contentSearchFilters:{},contentSearchParams:{}},c=["onBehalfOf","parentPlace","type","question","iconCss","highlightBody","subject","resources","published","updated","contentID","author","summary.@all","discussion","outcomeCounts","visibleToExternalContributors","uuid","index","promotedResult"];var b=function(s,v){var r=[];var u={};n.each(s,function(y,x){if(y&&y.length){var w=[];n.each(y,function(z){if(z){w.push(z[0])}});u[x]=w}});var t=k.prepareFilters(u);n.each(t,function(w){r.push("filter="+w)});n.each(v,function(x,w){r.push(w+"="+x)});r.push("origin=spotlight");return r.join("&")};var m=function(r){return(r.links&&r.links.next&&[r.links.next])||[]};g.runApiQueries=function(r,t){var s=[],u=[];t=n.extend({limit:null,callback:null,sort:function(w,v){return -((new Date(w.updated||w.published))-(new Date(v.updated||v.published)))}},t);f.each(r,function(w,v){var x=w.id;w=n.extend({},w,{success:function(y){if(y.list){n.each(y.list,function(A){A.queryId=x;s.push(A)});var z=m(y);if(z.length){u.push(z[0])}v()}},error:v});k.jiveQuery(w)},function(v){if(t.sort&&r.length>1){s.sort(t.sort)}if(t.limit&&s.length>t.limit){s=s.slice(0,t.limit)}t.callback&&t.callback({error:v,list:s,next:u})})};g.performSearch=function(v,r,E){var u=[],x=[],C=1,z={content:{next:[],list:[]},place:{next:[],list:[]},person:{next:[],list:[]}},y=function(){if(--C==0){E(z)}};r=n.extend({},l,r);if(n.isEmpty(v)){E(z);return}var t=v.text||[];var s,B,A=v.person||[];v.person=null;if(A.length){A=n.filter(A,function(F){if(F[1]=="me"){u.push({url:"/api/core/v3/people/@me",cacheTTL:h,success:function(G){z.person.list.push(G);v.person=(v.person||[]).concat([G.resources.self.href,null])}});return false}else{return true}});B=b({search:A},{count:d,fields:j.defaultFields.person.join(",")});s={url:"/api/core/v3/search/people?"+B,cacheTTL:h,_searchMetricsType:"person",success:function(F){if(r.searchPeople){n.extend(z.person.list,F.list.slice(0,d))}var G=n.map(F.list,function(H){return[H.resources.self.ref,null]});v.person=(v.person||[]).concat(G)}};u.push(s)}else{if(r.searchPeople&&t.length){B=b({search:t},{count:d,fields:j.defaultFields.person.join(",")});s={url:"/api/core/v3/search/people?"+B,cacheTTL:h,_searchMetricsType:"person",success:function(F){z.person.list=F.list.slice(0,d);z.person.next=m(F)}};x.push(s)}}var D;var w=v.place||[];v.place=null;if(w.length){B=b({search:w},{count:d,fields:j.defaultFields.place.join(",")});D={url:"/api/core/v3/search/places?"+B,cacheTTL:a,_searchMetricsType:"place",success:function(F){if(r.searchPlaces){z.place.list=F.list;z.place.next=m(F)}v.place=n.map(F.list,function(G){return[G.resources.self.ref,null]})}};u.push(D)}else{if(r.searchPlaces&&t.length){B=b({search:t},{count:d,socialSearch:true,fields:j.defaultFields.place.join(",")});D={url:"/api/core/v3/search/places?"+B,cacheTTL:a,_searchMetricsType:"place",success:function(F){z.place.list=F.list;z.place.next=m(F)}};x.push(D)}}C+=x.length;n.each(x,function(F){F.complete=function(){y()};k.jiveQuery(F)});f.each(u,function(G,F){G.complete=function(){F()};k.jiveQuery(G)},function(){if(v.place!==null&&v.place.length==0){y();return}if(!r.searchContent){y();return}var H=[];var G=function(J,I){var M={};n.each(J,function(N,O){if(N&&N.length){switch(O){case"person":M.author=N;break;case"contentType":M.type=N;break;case"place":M.place=N;break;case"text":M.search=N;break;case"date":if(N[0][0]){M.after=[[q(N[0][0]).format(),null]]}if(N[0][1]){M.before=[[q(N[0][1]).format(),null]]}break}}});if(!M.search||!M.search.length){M.search=[["a*",null]]}n.each(r.contentSearchFilters,function(O,N){M[N]=[[O,null]]});var L=n.extend({sortBy:"updatedDesc",collapse:true,fields:c.join(","),count:e},r.contentSearchParams);B=b(M,L);var K="/api/core/v3/search/contents?"+B;H.push({id:I,url:K,_searchMetricsType:"content",limit:e,cacheTTL:o})};if(v.person!==null){if(v.person.length>0){var F=v.person.slice(0,5);n.each(F,function(K,J){var I=n.extend({},v);I.person=[K];G(I,J)})}}else{G(v,0)}g.runApiQueries(H,{limit:e,callback:function(I){z.content=I;y()}})})};return g});
;
goog.provide("jive.i18n.keys.globalClear");jive.i18n.keys.globalClear=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200d"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.searchSpotlightParserOr");jive.i18n.keys.searchSpotlightParserOr=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k34b1"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.searchSpotlightResultError");jive.i18n.keys.searchSpotlightResultError=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k34b2"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.searchSpotlightResultNoMoreResults");jive.i18n.keys.searchSpotlightResultNoMoreResults=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k34b3"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.searchSpotlightResultNoResults");jive.i18n.keys.searchSpotlightResultNoResults=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k34b4"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.searchSpotlightViewsSearchFiltersContainer");jive.i18n.keys.searchSpotlightViewsSearchFiltersContainer=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k34be"),[])));return opt_sb?"":output.toString()};
;
define("ui-modules/spotlight/scripts/visor/ui",["underscore","jquery","jive/i18n","ui-modules/spotlight/scripts/config","ui-modules/spotlight/scripts/constants","ui-modules/spotlight/scripts/tools","ui-modules/spotlight/scripts/log","ui-modules/spotlight/scripts/browserdb","ui-modules/spotlight/scripts/query","ui-modules/spotlight/scripts/parsers/simple","ui-modules/spotlight/scripts/visor/search","ui-modules/spotlight/scripts/visor/suggestions/ingress","ui-modules/spotlight/scripts/visor/suggestions/index","ui-modules/spotlight/scripts/visor/apis","soy!jive.soy.spotlight.visor","soy!jive.soy.spotlight.suggestion.content","soy!jive.soy.spotlight.suggestion.place","soy!jive.soy.spotlight.suggestion.person","soy!jive.soy.spotlight.parserFilters","soy!jive.soy.spotlight.views.defaultView","soy!jive.soy.spotlight.views.search","soy!jive.soy.spotlight.views.history","soy!jive.soy.spotlight.views.bookmarks","soy!jive.soy.spotlight.search.resultContent","soy!jive.soy.spotlight.search.resultPerson","soy!jive.soy.spotlight.search.resultPlace","soy!jive.soy.spotlight.search.topResultPerson","soy!jive.soy.spotlight.search.topResultPlace","soy!jive.soy.spotlight.resultMessage","soy!jive.soy.spotlight.views.exception","soy!jive.soy.spotlight.search.placeholder","soy!jive.soy.spotlight.search.placeholderSmall","soy!jive.i18n.keys.globalClear","soy!jive.i18n.keys.globalClose","soy!jive.i18n.keys.searchSpotlightParserOr","soy!jive.i18n.keys.searchSpotlightResultError","soy!jive.i18n.keys.searchSpotlightResultNoMoreResults","soy!jive.i18n.keys.searchSpotlightResultNoResults","soy!jive.i18n.keys.searchSpotlightViewsSearchFiltersContainer"],function(aC,bk,aG,aV,af,au,l,S,ay,q,R,I,aU,ap,aw,m,v,A,V,a2,aS,bn,ah,bl,aL,n,c,w,h,z,D,H,d,br,aD,bi,E,k,X){var a8=400,bf=100,ab=2,aF="$*$",bB=["content","person","place"],aM=8,ax=aM,bg=4;var aO=af.filterTypeIcons,f=af.contentTypeTitlesPlural,aT=null,bo=null,P=false,e=0,N="",K={},aR={},bz={},ae=null,av=bk("body"),ac=bk("#j-links"),F=bk("#j-header-wrap"),am=bk("#j-globalNav-bg"),aQ=bk("#j-nav-search"),bw=null,b=null,aW=null,p=null,T=null,a7=null,B=null,Y=null,o=null,ar=null,C=null,bc=null,bq=[],Q=false,be=null,s=null,aA=false,i=null,ag=false,bC="",bt=false,a6=false,a5=false,aP=q,u={},az={},by=false,al="content",at={"default":{render:function(bD){if(!aV.userId||aV.userId=="-1"){bD("");return}aU.getTopLists(function bE(bF){var bG={},bH={},bI=[];aC.each(bF,function(bK,bJ){if(az[bJ]){return}aC.each(bK,function(bL){aa(bL)});bG[bJ]=aC.pluck(bK,"id");bH[bJ+"Suggestions"]=bK});bD(a2(bH));aC.each(bG,function(bN,bL){var bM=bg-bN.length,bJ=W["default"][bL];if(bM){for(var bK=0;bK<bM;bK++){bJ.$elm.append(H({uid:aC.uniqueId()}))}bI.push({type:bL,handler:ap.frequentlyViewed[bL],limit:bg+bM})}});if(bI.length){bx();async.each(bI,function(bK,bJ){bK.handler(bK.limit,function(bM){var bN=bG[bK.type],bL=W["default"][bK.type];aC.every(bM.list,function(bQ){if(bN.indexOf(bQ.id)!=-1){return true}var bP=bL.$elm.children(".j-search-placeholder");if(bP.length==0){return false}var bO=bu(bL.template,bQ);bP.first().replaceWith(bO);return true});bJ(bM.error)})},function(bJ){var bK=false;aq("default").find(".j-search-placeholder").remove();aC.each(W["default"],function(bL){if(bL.$elm.children().length){bK=true}else{bL.$elm.hide()}});if(bJ){l.error(bJ);if(!bK){bs("default")}}else{if(!bK){Z("default","drawer","search.spotlight.views.default.empty")}}aH()})}})}},search:{render:function(bD){bD(aS({}))},update:function(bE){var bG=at.search.$elm;at.search.$sidebar=at.search.$elm.find(".j-visor-search-results-aside");aJ();bG.find(".j-get-more-link").click(function(bJ){var bI=bk(this).data("type");ai(bI)});bG.on("click mousedown","a.j-visor-result-link",function(bJ){if(bJ.type=="mousedown"&&bJ.button==0){return}var bI=bk(bJ.target).closest(".j-visor-result");aX(bI)});var bD=bG.find(".j-visor-search-filter-container"),bF=bG.find(".j-visor-search-filter-clear"),bH=bG.find(".j-visor-search-filter");bF.on("click",function(bI){bI.preventDefault();a1();aJ();bm(true);bD.show();bk(this).hide()});bH.on("click",function(bK){bK.preventDefault();var bI=bk(this),bJ=bI.data("filters"),bL=bI.data("params");if(bL){G(bL)}if(bJ){aZ(bJ)}aJ();bm(true)});bD.on("click",function(bI){bF.show();bk(this).hide();return false});if(aV.containerType==3&&aV.containerId&&aV.containerId!=-1){ay.jiveQuery({url:"/api/core/v3/people/"+aV.containerId,query:{fields:"resources,displayName"},success:function(bJ){var bI=aG.i18nText(au.uppercaseFirst(X()),["<em>"+bJ.displayName+"</em>"]);bD.html(au.decodeHtmlEntities(bI.toString())).data("filters",{author:new RegExp("/[^/]*/[^/]*$").exec(bJ.resources.self.ref)[0]}).show();bE()},error:function(){l.error("Could not retrieve container information");bE()}})}else{if(aV.containerType!=2020&&aV.containerBrowseId&&aV.containerBrowseId!=-1){ay.jiveQuery({url:"/api/core/v3/places/"+aV.containerBrowseId,query:{fields:"type,parent,resources,name"},success:function(bJ){if(bJ&&!(bJ.type=="space"&&!bJ.parent)){var bI=aG.i18nText(X(),["<em>"+bJ.name+"</em>"]);bD.html(au.decodeHtmlEntities(bI.toString())).data("filters",{place:new RegExp("/[^/]*/[^/]*$").exec(bJ.resources.self.ref)[0],depth:"ALL"}).show()}bE()},error:function(){l.error("Could not retrieve container information");bE()}})}else{bE()}}}},history:{render:function(bD){bD(bn({}))},update:function(bD){var bE={};async.each(aC.pairs(W.history),function(bJ,bF){var bI=bJ[0],bG=bJ[1],bH=ap.recentlyViewed[bI];bH(bG.initialLimit,function(bK){bE[bI]=bK.list;bF(bK.error)})},function(bF){if(bF){l.error(bF);bs("history")}else{var bG=false;aC.each(W.history,function(bH,bI){bH.$elm.html("");aC.each(bE[bI],function(bK){var bJ=bu(bH.template,bK);bH.$elm.append(bJ)});if(bE[bI].length){bG=true}});if(!bG){Z("history","drawer","search.spotlight.views.history.empty")}}aH();bD()})}},bookmarks:{render:function(bD){bD(ah({}))},update:function(bD){var bE=W.bookmarks.content,bF=bE.$elm;ay.jiveQuery({url:"/api/core/v3/contents",query:{count:bE.initialLimit},filters:{type:"favorite",author:"/people/"+aV.userId},success:function(bG){bF.html("");if(!bG||!bG.list||!bG.list.length){Z("bookmarks","drawer","search.spotlight.views.bookmarks.empty");return}aC.each(bG.list,function(bJ){aC.extend(bJ,bJ.favoriteObject||{});var bI=ap.resultConverters.content(bJ);bI.bookmarked=true;if(bI.icon){bI.icon=bI.icon.replace(/\-bookmark$/,"")}var bH=bu(m,bI);bF.append(bH)})},error:function(){bs("bookmarks")},complete:function(){aq("bookmarks").find(".j-search-placeholder").remove();bD()}})}}},W={"default":{content:{selector:".j-visor-suggestions-content",template:m,level:1,nextUp:null,nextDown:"place",nextLeft:"person",nextRight:"place"},place:{selector:".j-visor-suggestions-place",template:v,level:1,nextUp:"content",nextDown:"person",nextLeft:"content",nextRight:"person"},person:{selector:".j-visor-suggestions-person",template:A,level:1,nextUp:"place",nextDown:null,nextLeft:"place",nextRight:"content"}},search:{topResult:{selector:".j-visor-search-results-top",initialItemCount:0,initialLimit:1,nextUp:null,nextDown:"main",nextLeft:null,nextRight:"person"},main:{selector:".j-visor-search-results-main",template:bl,placeholderTemplate:D,initialItemCount:5,initialLimit:10,nextUp:"topResult",nextDown:"topResult",nextLeft:null,nextRight:"person"},person:{selector:".j-visor-search-results-people",template:aL,placeholderTemplate:H,initialItemCount:5,initialLimit:10,nextUp:null,nextDown:"place",nextLeft:"main",nextRight:null},place:{selector:".j-visor-search-results-places",template:n,placeholderTemplate:H,initialItemCount:5,initialLimit:10,nextUp:"person",nextDown:null,nextLeft:"main",nextRight:null}},history:{content:{selector:".j-visor-suggestions-content",template:m,placeholderTemplate:H,initialItemCount:4,initialLimit:aM,level:1,nextUp:null,nextDown:"place",nextLeft:"person",nextRight:"place"},place:{selector:".j-visor-suggestions-place",template:v,placeholderTemplate:H,initialItemCount:4,initialLimit:aM,level:1,nextUp:"content",nextDown:"person",nextLeft:"content",nextRight:"person"},person:{selector:".j-visor-suggestions-person",template:A,placeholderTemplate:H,initialItemCount:0,initialLimit:aM,level:1,nextUp:"place",nextDown:null,nextLeft:"place",nextRight:"content"}},bookmarks:{content:{selector:".j-visor-suggestions-content",template:m,placeholderTemplate:H,initialItemCount:4,initialLimit:ax,level:1,nextUp:null,nextDown:null,nextLeft:null,nextRight:null}}},ak={person:c,place:w},ao={clearUserDb:function(bD){S._db.clear().done(bD)},clearBrowserDb:function(bD){S._db.clear().done(bD)},clearCache:function(bD){S._db.clear(["cache"]).done(bD)},clearSuggestionIndex:function(bD){aU.clearIndex(bD)},disableBrowserDb:function(bD){if(window.localStorage){window.localStorage["jive.browserdb.disabled"]=1}bD()},enableBrowserDb:function(bD){if(window.localStorage){window.localStorage["jive.browserdb.disabled"]=0}bD()},debugMode:function(bD){l.setLevel("debug2");bD()},updateIndex:function(bD){S.getSettings().done(function(bE){aU.updateIndex(function(){ao.updateTopLists(bD)},bE)})},resetIndex:function(bD){aU.clearIndex(function(){ao.updateIndex(bD)})},updateTopLists:function(bD){aU.updateTopLists(true).done(bD)},updateMetadata:function(bD){var bE=S.KeyRange();S.values("suggestions",bE,10000).done(function(bF){I.updateMetadata(bF,bD)})},logSettings:function(bD){var bE=S.KeyRange();S.values("settings",bE,10000).done(function(bF){l(bF);bD()})},logActivities:function(bD){var bE=S.KeyRange();S.values("activity",bE,10000).done(function(bF){l(bF);bD()})},logSuggestions:function(bD){aU.getAllSuggestions().done(function(bE){l(bE);bD()})},logLists:function(bD){var bE=S.KeyRange();S.values("lists",bE,10000).done(function(bF){l(bF);bD()})},logTokenIndex:function(bD){var bE=S.KeyRange();S.values("tokenIndex",bE,10000).done(function(bF){l(bF);bD()})}},aB=function(bE){var bD="";bE=[].concat(bE);aC.each(bE,function(bF){if(!bF){return}if(bD){bD+=" "+aD()+" "}if(typeof bF==="string"){bD+=bF}else{if(bF[0]){bD+=bF[0];if(bF[1]){bD+=" ("+bF[1]+")"}}}});return bD},g=function(bE){var bD=aC.map(bE,function(bF){return au.toProperCase(bF[0])});return aB(bD)},aN={following:function(){return"Following"},participated:function(){return"Participated"},person:g,contentType:function(bE){var bD=aC.map(bE,function(bF){return f[bF[0]]});return aB(bD)},date:function(bD){var bE=bD[0][0],bF=bD[0][1];if(bE&&bF){if(bE.hour()==bE.minute()==bE.second()==0&&bF.diff(bE)==86400000){return"Updated "+bE.calendar().replace(/ at.*/,"")}else{return"Updated between "+bE.calendar()+" and "+bF.calendar()}}else{if(bE){return"Updated since "+bE.calendar()}else{if(bF){return"Updated before "+bF.calendar()}else{return""}}}}},ba=function(bD){if(aW.val()!=bD){aW.val(bD);bA(bD)}},j=function(){var bD=bw.find("ul:visible, :input").map(function(){return this.id}).get().join(" ");bw.attr("aria-activedescendant",bw.find(".j-visor-cursor:visible").id()).attr("aria-owns",bD).attr("aria-expanded",Q).attr("aria-hidden",!bw.is(":visible")).attr("aria-busy",ag)},bb=function(){Q=true;if(!be){be="default"}bj(be,null,true);bp();aQ.addClass("active");bw.addClass("open");var bF=av.innerWidth();av.addClass("j-search-visor-open");var bD=av.innerWidth(),bE=(bD-bF)+"px";av.css({width:bF+"px","padding-right":bE});ac.css("padding-right",bE);aW.focus();j()},U=function(){Q=false;aQ.removeClass("active");bw.removeClass("open");av.removeClass("j-search-visor-open").css({width:"default","padding-right":"default"});ac.css("padding-right",0);ba("");aj("history");aj("bookmarks");j()},bx=function(){if(ag){return}ag=true;T.hide();p.show();j();if(!window.Modernizr.cssanimations){var bD=0,bE=function(){if(ag){bD=((bD+8)%360);p.css("transform","rotate("+bD+"deg)");setTimeout(bE,25)}};bE()}},aH=function(){if(!ag){return}ag=false;T.show();p.hide();j()},Z=function(bI,bG,bF,bD){var bH=aq(bI),bE=z({icon:bG,message:aG.jsGetMsg(bF),cls:bD||""});bH.html(bE)},bs=function(bF){var bE=aq(bF),bD=z({icon:"warning",message:jive.i18n.keys.searchSpotlightResultError(),cls:"j-visor-error"});bE.html(bD)},a9=function(bE,bF){var bD=at[bE].update;if(bD){bD(function(){aH();bF&&bF(true)})}else{aH();bF&&bF(false)}},aq=function(bD){return o.children(".j-visor-view-"+bD)},bj=function(bF,bG,bD){if(!bD&&(!bF||bF==be)){return}if(u[bF]){return bj("blank",bG)}var bE=aq(bF);if(bE.length){be=bF;ar=bE;bw.removeClass("current-view-"+s).addClass("current-view-"+be);s=be;B.children(".j-visor-menu-item-"+bF).addClass("j-active").siblings().removeClass("j-active");bE.siblings("div").hide();bE.show();bG&&bG();aH();setTimeout(function(){aW.focus()},1)}else{bx();ad(bF,function(){bj(bF,function(){a9(bF,bG)},bD)})}},ad=function(bH,bI){var bF="j-visor-view-"+bH,bE=at[bH].render,bD=bk('<div class="'+bF+'"></div>'),bG=at[bH].$elm;if(bG){bG.remove()}if(!bE){throw Error("Unrecognized view: "+bH)}bE(function(bJ){if(bJ){bD.html(bJ)}o.append(bD);bG=aq(bH);at[bH].$elm=bG;aC.each(W[bH],function(bL,bK){bL.name=bK;bL.$view=bG;bL.$elm=bG.find(bL.selector);bL.$elm.data("name",bK)});bh(bH);bI&&bI()})},aj=function(bE){var bD=aq(bE);if(bD.length){bD.remove()}},bv=function(bD,bE){ad(bD,function(){a9(bD,bE)})},a4=function(bD,bE){if(!bE){bE={}}if((bt||bE.metaKey)||(a6||bE.ctrlKey)||(bE.type=="click"&&bE.which==2)){open(bD,"_blank");return false}else{P=true;window.location.href=bD;return true}},aX=function(bD){var bF=bD.index(),bG=bD.data("type"),bE=bD.data("url");ay.metrics.setChoice(bG,bF,bE)},r=function(bD,bF){clearTimeout(aT);clearTimeout(bo);e++;if(be=="search"){aX(bD)}var bE=bD.data("url"),bG=bD.data("value");if(bD.data("type")=="search"){ba(bG)}else{a4(bE,bF)}},an=function(bD){if(bD==al){bD="main"}return W.search[bD]},aZ=function(bD){aC.extend(K,bD);bc.addClass("show")},G=function(bD){aC.extend(aR,bD)},J=function(bD){if(K[bD]){delete K[bD];if(aC.isEmpty(K)){bc.removeClass("show")}}},a1=function(){aC.each(K,function(bE,bD){J(bD)})},a0=function(bG){var bD=bG.replace(/\+\d+/,"Z");var bF=new Date(bD);if(isNaN(bF.getTime())){var bE=bD.replace(/-/,"/").replace("T"," ").replace(/\.\d+Z/," GMT");bF=new Date(bE)}return bF},a3=function(bD){if(ae){return}bD.template=ak[bD.type];if(bD.template){bD.topResult=true;bD.container="topResult";ae=bD}M(bD);bD.skip=true},M=function(bE,bH){if(bE.skip||az[bE.type]){return}var bG=an(bE.container||bE.type),bD=an(bE.type),bO=bE.template||bG.template,bJ=bG.initialLimit,bN=-1,bP=bE.type+"-"+bE.id,bF=bz[bP];if(bF){if(bE.promotedResult){bN=bF.index;bE=aC.extend({},bF,bE);bE.bookmarked=bF.bookmarked;bE.snippet=bF.snippet}else{return}}bE.instant=bE.instant||false;bE.displayExternalAccess=!_jive_current_user.partner&&bE.externallyAccessible;if(bE.description){bE.description=bk.trim(bE.description)}bE.isBlog=bE.subType=="blog";if(bE.published){bE.published=a0(bE.published);bE.publishedAgo=new Date(bE.published).formatRelative()}if(bE.updated){bE.updated=a0(bE.updated);bE.updatedAgo=new Date(bE.updated).formatRelative();if(bE.publishedAgo==bE.updatedAgo){bE.updatedAgo=null}}if(bH&&bJ&&bG.currentResultKeys.length>=bJ){bE.hidden=true}var bI=bu(bO,bE),bK=bG.$elm.children();if(bN>=0){bK.eq(bN).replaceWith(bI)}else{if(bE.promotedResult&&bG.currentResultKeys.length){var bM=bG.$elm.children(".j-visor-result-promoted");if(bM.length){bM.last().after(bI);bN=bK.index(bI)}else{bG.$elm.prepend(bI);bN=0}}else{var bQ=bG.currentResultKeys.length;bN=bQ;if(bK.length>bQ){bK.eq(bQ).replaceWith(bI)}else{bG.$elm.append(bI)}}}bE.index=bN;var bL=bI.find(".j-search-description p");if(bL.length>0&&typeof(bL.get(0).style.webkitLineClamp)!="undefined"){bL.addClass("j-multi-line-clamp")}bz[bP]=bE;bG.currentResultKeys.push(bE.id);bD.hasResults=true;if(bG.initialLimit&&bG.currentResultKeys.length>=bG.initialLimit){return false}},aE=function(bE,bD){return au.normalizeQuery(bD.value)==bE},bm=function(bD){var bE=aW.val();if(bD||bE!=bC){if(bE&&bE.length){C.attr("aria-label",d({}))}else{C.attr("aria-label",br({}))}bA(bE,bD);bC=bE}},aa=function(bD){bD.uid=aC.uniqueId();bD.value=bD.value?au.decodeHtmlEntities(bD.value||""):"";if(bD.subType=="group"&&bD.groupType){bD.displayType=jive.i18n.jsGetMsg("global.group."+bD.groupType.replace(/ /g,"_").toLowerCase())}else{bD.displayType=jive.i18n.jsGetMsg("global.access.content.type."+bD.subType)}if(!bD.icon&&bD.type=="place"&&bD.subType){bD.icon="jive-icon-"+bD.subType}},bu=function(bE,bF){aa(bF);var bD=bk(bE(bF));bD.attr("data-result-id",bF.uid);return bD},aK=function(bD,bF){for(var bE=0;bE<bF;bE++){bD.$elm.append(bD.placeholderTemplate({uid:aC.uniqueId()}))}},bh=function(bD){l.debug3("Resetting result containers");aC.each(W[bD],function(bE){bE.hasResults=false;bE.currentResultKeys=[];bE.paginationUrls=[];if(bE.$elm&&bE.initialItemCount!==undefined){bE.$elm.html("");if(bE.placeholderTemplate){aK(bE,bE.initialItemCount)}}})},aJ=function(){bh("search")},bA=function(bL,bG){bL=bL&&bL.replace(/\s+/g," ").trim();if(!bL||bL.length<ab){if(be!="default"){e++;N="";bj("default");aJ()}return}if(bL.indexOf(aF)==0){return}bj("search");if(!bG&&N==bL){return}clearTimeout(aT);clearTimeout(bo);N=bL;if(P){return}var bE=++e,bJ=aC.extend({},K),bH=aC.extend({},aR),bI=!aC.isEmpty(bJ);bz={};ae=null;aC.each(W.search,function(bN){bN.hasResults=false;bN.currentResultKeys=[];bN.paginationUrls=[];bN.currentQuery=bL;bN.searchInProgress=bE});var bK=[],bF={query:bL};if(bL.length>=ab){aC.extend(bF,aP.parse(bL)[0]);aC.each(bF.filters,function(bP,bO){if(bP.length){var bN=aN[bO]||aB;bK.push({type:bO,filter:bP,filterString:bN(bP),icon:aO[bO]})}});bx()}if(a5){a7.html(V({filters:bK}));if(bK.length){a7.show()}else{a7.hide()}}var bM=at.search.$sidebar;if(bI){bM.hide();bM.find("ul").html()}else{bM.show();bo=setTimeout(function(){bd(bF,bE)},bG?0:bf)}var bD={searchContent:true,searchPeople:!bI&&!az.person,searchPlaces:!bI&&!az.place,contentSearchFilters:bJ,contentSearchParams:bH};aT=setTimeout(function(){t(bF,bE,bD)},bG?bf:a8)},aI=function(bE,bD){bD.list=aC.map(bD.list,function(bF){return ap.resultConverters[bE](bF)})},a=function(bG,bF,bE){var bH=bF.list.length;aC.each(bF.list,function(bK){M(bK,bE)});var bD=an(bG);bD.paginationUrls=bF.next;bD.searchInProgress=null;var bJ=o.children(".j-visor-view-search"),bI=bD.$elm.parent().find(".j-get-more-link[data-type="+bG+"]");bJ.find(".j-search-placeholder").remove();if(bF.next.length){bI.addClass("has-more")}else{bI.removeClass("has-more")}return bH},bd=function(bD,bF){var bE="Suggestion query "+bF+"-"+Math.floor(Math.random()*1000)+" ("+ay+")";aU.searchSuggestions(bD,function(bH){l.time(bE);if(bF!=e){return}var bI=null,bG=bD.normalizedQuery;l.debug("Got suggestions for "+bG,bH);aC.each(bH,function(bK,bJ){if(bJ==0){bI=bK}else{if(aE(bG,bK)&&!(bI&&aE(bG,bI))){bI=bK}}if(bK.type=="place"){bK.icon="jive-icon-"+bK.subType}bK.instant=true});if(bI){a3(bI)}aC.each(bH,function(bJ){M(bJ,true)});aC.each(W.search,function(bJ){var bP=bJ.currentResultKeys,bQ=bJ.$elm,bO=bQ.children(),bN=bJ.initialItemCount;for(var bM=bP.length;bM<bO.length;bM++){if(bM>=bN){bO.slice(bM).remove();break}else{var bK=bO.eq(bM);if(!bK.hasClass("j-search-placeholder")){bK.replaceWith(bJ.placeholderTemplate({uid:aC.uniqueId()}))}}}var bL=bN-bQ.children().length;aK(bJ,bL)})})},L=function(bF){if(bF.length<2){return bF}var bE=bF.split(" ");var bD=bE[bE.length-1];if(bD.length>1){return bF+"*"}else{if(bD.length==1&&au.isNumeric(bD)){return bF}else{return L(bk.trim(bF.substring(0,bF.length-2)))}}},t=function(bD,bG,bF){var bE=aC.extend({},bD.filters);delete bE.text;if(bD.query){bE.text=[[L(bD.query),null]]}l.debug("Searching",bD,bE);R.performSearch(bE,bF,function(bH){var bJ=0,bI;l.debug("Got search results for '"+bD.normalizedQuery+"'",bH,bG,e);if(bG!=e){return}aC.each(bB,function(bL){var bK=bH[bL];aI(bL,bK);aC.every(bK.list,function(bN){if(ae){return false}var bM=au.normalizeQuery(bN.value);if(bN.promotedResult||bM==bD.normalizedQuery){a3(bN)}});if(bK.error){bI=bK.error}});aC.each(bH,function(bK,bL){bJ+=a(bL,bK,true)});aH();if(bJ){I.logActivity({type:"search",query:bD.normalizedQuery})}else{if(bI){bs("search");return}}aC.each(W.search,function(bK){if(bK.$elm.children().length==0){var bL={message:k()};if(bK.name=="main"){bL.cls="j-visor-exception";bL.icon="drawer"}else{if(bK.hasResults){bL.message=E()}}bK.$elm.append(h(bL))}})})},ai=function(bG){var bD=an(bG);if(bD.searchInProgress){return}var bE=bD.paginationUrls;if(bE.length){var bH=++e;bD.searchInProgress=bH;bD.paginationUrls=[];bx();aK(bD,bD.initialItemCount);var bF=aC.map(bE,function(bI){return{url:bI}});R.runApiQueries(bF,{callback:function(bI){if(bH==e){l.debug("Got additional "+bG+" results",bI);bD.$elm.children().removeClass(".j-visor-result-hidden");aI(bG,bI);a(bG,bI);if(!bD.paginationUrls.length){bD.$elm.append(h({cls:"j-visor-result-nomoreresults",message:E()}))}aH();bD.searchInProgress=null}}})}},x=function(){if(!aA&&i){aA=true;var bD=i;i=null;bw.scrollTo(bD,600,{offset:-(bw.height()/2),onAfter:function(){aA=false;x()}})}},O=function(bG,bD){if(bq.length){bq.removeClass("j-visor-cursor")}if(bG){bq=bk(bG);bq.addClass("j-visor-cursor");if(bD){var bF=bq.offset().top,bE=bw.offset().top;if((bF+bq.height()*1.5>bE+bw.height())||(bF<bE)){i=bq;if(!aA){x()}}}}else{bq=[]}j()},y=function(){if(be=="search"){ba("")}else{aW.blur();U()}},bp=function(){var bE=F.offset().top-bk(window).scrollTop();var bD=((bE>=-F.outerHeight())?bE+F.outerHeight():0)+"px",bF=window.innerWidth-(am.offset().left+am.outerWidth());bw.css("top",bD);bw.css("right",bF)},aY=function(bD){l.debug("Init visor UI");bD=bD||{};if(bD.enableNaturalParser){}av.prepend(aw({enableQueryFilters:a5}));by=av.hasClass("j-no-responsive");bw=bk("#j-search-visor");Y=bw.children(".j-search-visor-inner");o=Y.children(".j-visor-views");B=bw.find(".j-visor-tabs");b=Y.children(".j-visor-searchbar-wrapper");aW=b.children("input");T=b.find(".j-searchbar-icon");C=b.find(".j-searchbar-close");p=b.find(".j-searchbar-thinker");a7=Y.children(".j-visor-parserfilters");bc=bw.find(".j-visor-filter-indicator");if(F.offset()&&am.offset()){bp();bk(window).resize(bp)}aC.each(bk.trim(aQ.data("hideviews")).split(" "),function(bF){if(bF){u[bF]=true}});aC.each(bk.trim(aQ.data("hidetypes")).split(" "),function(bF){if(bF){az[bF]=true;aC.each(W,function(bG){delete bG[bF]})}});B.children().each(function(bG,bH){var bF=bk(bH);if(u[bF.data("view")]){bF.remove()}});if(!B.children().length){B.hide()}aW.on("keydown",function(bF){if(bF.keyCode==17){a6=true}else{if(bF.keyCode==91){bt=true}}});aW.on("keyup",function(bF){if(bF.keyCode==17){a6=false}else{if(bF.keyCode==91){bt=false}}});aW.on("focus click",function(){O();bw.addClass("j-visor-input-focused")});aW.on("blur",function(){bw.removeClass("j-visor-input-focused")});aW.on("keydown",function(bG){var bI=aW.val().trim();if(bG.keyCode==13){if(bq.length){r(bq,bG)}else{if(bI&&bI.indexOf(aF)==0){var bH=bI.slice(aF.length),bF=ao[bH];if(bF){l("Running dev command "+bH);aW.val("");bF(function(bJ){l("-> dev command "+bH+" completed. Output: ",bJ)})}else{l("Dev command "+bH+" not recognized")}}else{if(bI){a4(_jive_base_url+"/search.jspa?q="+encodeURIComponent(bI),bG);aW.val("")}else{a4(_jive_base_url+"/search.jspa",bG);aW.val("")}}}}else{if(bG.keyCode==32){if(!bI.length){bG.preventDefault()}}}});bw.on("keydown",function(bK){var bH=aW.val().trim();if(37<=bK.keyCode&&bK.keyCode<=40){var bJ=null,bN=0,bL=null,bM=null,bI=W[be],bO=null;if(bq&&bq.length){bJ=bq.parent().data("name");bN=bq.index();bL=bI[bJ]}var bG=function(bP,bQ,bR){bK.preventDefault();if(bJ){bO=bq[bP](".j-visor-result").get(0);while(!bO&&bL){bL=bI[bL[bQ]];if(bL){bO=bL.$elm.children(".j-visor-result").get(bR)}else{bO=null}}}else{bO=ar.find(".j-visor-result").get(bR)}O(bO,true);return bO},bF=function(bP){if(bJ){bK.preventDefault();while(!bO&&bL){bM=bL.level;bL=bI[bL[bP]];if(bL){if(bM&&bL.level==bM){bO=bL.$elm.children(".j-visor-result").get(bN)}if(!bO){bO=bL.$elm.children(".j-visor-result").get(0)}}}if(bO){O(bO,true);return bO}}};if(bK.keyCode==40){bG("next","nextDown",0)}else{if(bK.keyCode==38){if(!bG("prev","nextUp",-1)){aW.focus()}}else{if(bK.keyCode==37){bF("nextLeft")}else{if(bK.keyCode==39){bF("nextRight")}}}}}else{if(bK.keyCode==27){bK.preventDefault();bK.stopPropagation();y()}}});C.click(y);aW.on("keyup",function(bF){bm()});bw.on("mouseover",".j-visor-result a",function(bG){var bF=bk(bG.target).closest(".j-visor-result").get(0);if(!aA&&!(bq.length&&bq.get(0)==bF)){O(bF)}});bw.on("mouseover focus","a",function(bF){if(!bk(bF.target).closest(".j-visor-result").length){O(null)}});bw.on("click",".j-visor-menu-item",function(bF){bj(bk(this).data("view"),j);return false});aQ.click(function(bF){bF.preventDefault();if(Q){U()}else{bb()}});var bE=".j-nav-open-visor, #jive-modal-direct-messaging, .js_lb_overlay";bw.bind("clickoutside",function(bF){if(bk(bF.target).closest(bE).length==0){U()}});bk(document).on("keydown",null,"s",function(bF){if(document.activeElement==document.body){bF.preventDefault();bb()}});bw.on("keydown",null,"s",function(bF){if(!aW.is(":focus")){bF.preventDefault();aW.focus()}});bw.on("keydown",function(bH){if(bH.keyCode==9){var bG=bk(bH.target);if(bH.shiftKey){if(bG.get(0)==aW.get(0)){bH.preventDefault();bw.find(":focusable").last().focus()}}else{var bF=bw.find(":focusable").last();if(bG.get(0)==bF.get(0)){bH.preventDefault();aW.focus()}}}});bw.on("focus",":focusable",function(bH){var bF=bk(bH.target),bG=bF.closest(".j-visor-result");if(bG.length){O(bG,true)}});bw.scrolled(200,function(){if(be!="search"){return}if(bw.scrollTop()+bw.height()>Y.height()-300){ai("content")}});bw.on("click","a.j-js-send-direct-message",function(bG){bG.preventDefault();var bF=$j(this).attr("data-userid");require(["apps/direct_messaging/factory"],function(bH){bH.sendMessageToUserIds([bF])})});l.debug("Visor UI init complete")};return{init:aY,open:bb,close:U,setInput:ba}});
;
goog.provide("jive.welcome.updateIndicator");
jive.welcome.updateIndicator=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.type=="count"?'<span data-count="'+soy.$$escapeHtmlAttribute(opt_data.count)+'" tabindex="-1" aria-label="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k26c2"),[]))+'" class="j-js-update-indicator j-update-count'+(opt_data.count==0?" zero":"")+(opt_data.count>50?" fiftyplus":"")+(opt_data.extraCssClasses?" "+soy.$$escapeHtmlAttribute(opt_data.extraCssClasses):"")+
'"'+(opt_data.count==0&&!opt_data.showZero?'style="display:none;"':"")+">"+(opt_data.count>50?"50+":opt_data.count==0&&opt_data.initial?"&ndash;":soy.$$escapeHtml(opt_data.count))+"</span>":opt_data.type=="gauge"?'<span role="img" data-count="'+soy.$$escapeHtmlAttribute(opt_data.count)+'" class="j-js-update-indicator j-update-gauge jive-icon-glyph '+(opt_data.count<10?"icon-activity-gauge-low":opt_data.count<40?"icon-activity-gauge-med":"icon-activity-gauge-high")+'" '+(opt_data.count==0?'style="display:none;"':
"")+' title="'+(opt_data.count<10?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k26b1"),[])):opt_data.count<40?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k26b2"),[])):soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k26b0"),[])))+'" aria-label="'+(opt_data.count<10?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k26b1"),[])):opt_data.count<40?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k26b2"),[])):soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k26b0"),
[])))+'" tabindex="0" ></span>':"");return opt_sb?"":output.toString()};
;
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(d){var c=/iPhone|iPad|iPod/.test(window.navigator.platform),b=0,a={touchstart:null,touchend:null,touchmove:null,touchcancel:null},e=function(f){d(window)[f?"off":"on"]("focus blur",function(g){d.each(a,function(h,i){(this.ownerDocument||this)[(g.type==="focus")?"addEventListener":"removeEventListener"](h,i,true)})})};if(c){jQuery.each(a,function(f,g){jQuery.event.special[f]={setup:function(j,i,k,h){if(b++===0){a[f]=h;(this.ownerDocument||this).addEventListener(f,h,true);e()}},teardown:function(){if(--b===0){a[f]=null;(this.ownerDocument||this).removeEventListener(f,a[f],true);e(true)}}}})}}));
;
goog.provide("jive.integration.tiles.edit.errorEditing");jive.integration.tiles.edit.errorEditing=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2a78"),[])),"</p>");return opt_sb?"":output.toString()};
;
define("apps/tile/tile",["jive/promise_util","underscore","jquery","soy!jive.integration.tiles.edit.errorEditing"],function(k,n,h,m){var p={};if(Object.freeze){Object.freeze(p)}function b(r){var q=jive.rest.corev3.url("/tiles/"+r);return h.getJSON(q).then(function(u,s,t){return o(u)})}function d(t){var r=h(t),s=r.data("tile"),q=r.data("instancePromise"),v=f(r).id,u;if(q){return q}else{if(s){u=k.success(o(s))}else{u=k.retry(b.bind(null,v),3);u.fail(function(){h(m()).message({style:"error"})})}}r.data("instancePromise",u);return u}function f(r){var q=h(r);return q.data("tile")||q.data("tileView")}function l(r,q){h(r).data("instancePromise",q.then(o))}function g(r,s){var q=d(r).then(function(t){return s(t)});l(r,q)}function o(q){var s=n.clone(q);if(!s.config){s.config=p}else{if(typeof s.config==="string"){try{s.config=JSON.parse(s.config)}catch(t){console.warn("Error [%s] trying to parse [%s]. Returning empty config.",t,s.config);s.config={}}}}(function r(u){if(u&&u.action&&u.action.context){if(typeof u.action.context==="string"){u.action.context=JSON.parse(u.action.context)}}else{if(u&&h.isArray(u)){u.forEach(r)}else{if(u&&typeof u==="object"){Object.keys(u).forEach(function(v){r(u[v])})}}}}(s.data));return s}function j(q){return !q.id||q.id==="-1"}function a(q){return !!q.config&&q.config!==p}function e(q){return !!q.definition.config}function i(q){return q.definition.configurationRequired}function c(q){return !!q.definition.register}return{fetch:b,fromDOM:d,viewFromDOM:f,set:l,update:g,isNew:j,isConfigured:a,canBeConfigured:e,requiresConfig:i,isExternal:c,normalized:o}});
;
define("apps/tile/template",["./tile","underscore","jquery"],function(p,n,h){function a(r){var q=jive.rest.corev3.url("/pages/"+r);return h.getJSON(q).then(function(u,s,t){return u})}function d(){var q=jive.rest.corev3.url("/people/@me/pages");return h.getJSON(q).then(function(t,r,s){if(t.list){if(t.list.length>0){return t.list[0]}else{return undefined}}return t})}function e(r){var q=jive.rest.corev3.url("/places/"+r+"/pages?filter=name(mobileHomePage)");return h.getJSON(q).then(function(u,s,t){return u.list instanceof Array&&u.list.length>0?u.list[0]:undefined})}function m(q){return(k(q)?j:g)(q)}function j(q){return i("POST","",q)}function g(q){return i("PUT",q.id,q)}function i(q,u,s){var r=jive.rest.corev3.url("/pages/"+u),t=s.tiles?h.extend({},s,{tiles:s.tiles.map(c),extstreams:s.extstreams.map(c)}):s;return h.ajax(r,{type:q,data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json"}).then(function(x,v,w){return x})}function k(q){return !q.id||q.id<=0}function c(q){var r=n.clone(q);if(!r.id||r.id=="-1"){delete r.id}if(!p.isConfigured(r)){delete r.config}if(typeof r.definition==="object"){r.definition=q.definition.resources.self.ref}return r}function o(r){var q=jive.app.url({path:"/api/core/v3/pages/"+r});return h.ajax(q,{type:"DELETE",contentType:"application/json; charset=utf-8",dataType:"json"})}function l(r,q){return b("name",r,q)}function f(r,q){return b("displayname",r,q)}function b(u,t,r){var q=jive.rest.url("/containers/"+t.objectType+"/"+u+"/validity"),s={name:r};if(t.parentID&&t.parentType){s=h.extend({},s,{parentID:t.parentID,parentType:t.parentType})}return h.ajax(q,{type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",data:s})}return{fetch:a,fetchUserPage:d,fetchMobileHomePage:e,save:m,create:j,update:g,deleteTemplate:o,isNew:k,getNameValid:l,getDisplayNameValid:f}});
;
define("apps/tile/integrations/image_gallery",["jquery","underscore","documentReady"],function(d,b){function c(g){g.preventDefault();var f=d(this).data("index"),h=d(".j-slide.slick-slide:not(.slick-cloned) a",g.delegateTarget).map(function(){return d(this).data()});d.gallery(h,f)}function a(){d(".js-tile-image-gallery-wide").each(function(e,f){d(f).find("ul").slick({slide:"li",slidesToShow:3,slidesToScroll:1,dots:true})});d(".js-tile-image-gallery-narrow").each(function(e,f){d(f).find("ul").slick({slide:"li",slidesToShow:1,slidesToScroll:1,dots:true})});d(".js-tile-image-gallery").on("vclick",'a[data-action="showGallery"]:not([data-disabled="true"])',c)}if(d(".js-tile-image-gallery-wide, .js-tile-image-gallery-narrow").length){a()}return{initSlick:a}});
;
goog.provide("jive.place.layout.columnPlaceholder");
jive.place.layout.columnPlaceholder=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.customizeNow){output.append('<div class="js-column" style="display: none;" data-column="',soy.$$escapeHtmlAttribute(opt_data.column),'">');var instanceList8=opt_data.instances;var instanceListLen8=instanceList8.length;for(var instanceIndex8=0;instanceIndex8<instanceListLen8;instanceIndex8++){var instanceData8=instanceList8[instanceIndex8];output.append('<div class="js-tile" data-column="',
soy.$$escapeHtmlAttribute(opt_data.column),'" data-tile="',soy.$$escapeHtmlAttribute(JSON.stringify(instanceData8).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")),'"></div>')}output.append("</div>")}return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.view.statusIcon");jive.integration.tiles.view.statusIcon=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;switch(opt_data.level){case "warn":output.append("jive-icon-warn");break;case "error":output.append("jive-icon-redalert");break;default:output.append("jive-icon-info")}return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.view.status");
jive.integration.tiles.view.status=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href="#" class="js-status j-status j-status-level-',soy.$$escapeHtmlAttribute(opt_data.status.level),'" data-status="',soy.$$escapeHtmlAttribute(JSON.stringify([{id:opt_data.id,name:opt_data.definition.displayNameLocalized,level:opt_data.status.level,message:opt_data.status.message,icon:opt_data.definition.icons["48"]?opt_data.definition.icons["48"]:"",internal:opt_data.status.__set_by_jive_canned_status}]).replace(/</g,
"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")),'"><span class="jive-icon-med ');jive.integration.tiles.view.statusIcon(opt_data.status,output);output.append('"></span></a>');return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.view.disabled");jive.integration.tiles.view.disabled=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2af6"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.authorLink");
jive.integration.tiles.viewstyle.authorLink=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append((opt_data.context||opt_data.url)&&opt_data.text?'<a href="'+(opt_data.authorUrl?soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.authorUrl)):!opt_data.context&&opt_data.url&&opt_data.containerUrl?soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.containerUrl))+soy.$$escapeHtmlAttribute(opt_data.url):!opt_data.context&&opt_data.url?
soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,opt_data.url))):"#")+'" class="'+(opt_data.context?"js-action":"")+(opt_data.classes?" "+soy.$$escapeHtmlAttribute(opt_data.classes):"")+'"'+(opt_data.context?'data-action-context="'+soy.$$escapeHtmlAttribute(JSON.stringify(opt_data.context).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"))+'"':"")+(opt_data.url&&(opt_data.url.match(new RegExp("^https?:",
"i"))||[]).length>0?'target="_action_link"':"")+(opt_data.attrs?soy.$$filterNoAutoescape(opt_data.attrs):"")+">"+(opt_data.noEscapeText?soy.$$filterNoAutoescape(opt_data.text):soy.$$escapeHtml(opt_data.text))+"</a>":opt_data.text?opt_data.noEscapeText?soy.$$filterNoAutoescape(opt_data.text):soy.$$escapeHtml(opt_data.text):"");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.bannerImage");
jive.integration.tiles.viewstyle.bannerImage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<figure><a href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.actionUrl)),'" data-index="',soy.$$escapeHtml(opt_data.index),'" data-caption="',soy.$$escapeHtml(opt_data.title),'" data-src="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.image)),'"',opt_data.openInNewWindow?'target="_blank"':"",'><img class="j-banner-image" src="',
soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.image)),'" data-src="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.image)),'" alt="',soy.$$escapeHtml(opt_data.title),'" ><\!-- not yet supported in all browsers, see https://developer.mozilla.org/en-US/docs/Link_prefetching_FAQ --\><meta http-equiv="Link" content="<',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.image)),'>; rel=prefetch">',opt_data.title&&!opt_data.hideCaptions?
"<figcaption class='j-banner-caption'><p>"+soy.$$escapeHtml(opt_data.title)+"</p></figcaption>":"","</a></figure>");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.view.actionLink");
jive.integration.tiles.view.actionLink=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append((opt_data.context||opt_data.url)&&opt_data.text?'<a href="'+(!opt_data.context&&opt_data.url&&opt_data.containerUrl?soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.containerUrl))+soy.$$escapeHtmlAttribute(opt_data.url):!opt_data.context&&opt_data.url?soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,opt_data.url))):
"#")+'" class="'+(opt_data.context?"js-action":"")+(opt_data.classes?" "+soy.$$escapeHtmlAttribute(opt_data.classes):"")+'"'+(opt_data.context?'data-action-context="'+soy.$$escapeHtmlAttribute(JSON.stringify(opt_data.context).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"))+'"':"")+(opt_data.url&&(opt_data.url.match(new RegExp("^https?:","i"))||[]).length>0?'target="_action_link"':"")+(opt_data.attrs?soy.$$filterNoAutoescape(opt_data.attrs):
"")+">"+(opt_data.noEscapeText?soy.$$filterNoAutoescape(opt_data.text):soy.$$escapeHtml(opt_data.text))+"</a>":opt_data.text?opt_data.noEscapeText?soy.$$filterNoAutoescape(opt_data.text):soy.$$escapeHtml(opt_data.text):"");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.view.footer");jive.integration.tiles.view.footer=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;if(opt_data.text){output.append('<footer class="j-tile-footer clearfix">');jive.integration.tiles.view.actionLink(soy.$$augmentMap(opt_data,{classes:(opt_data.classes?"$classes ":"")+"j-footer-link"}),output);output.append("</footer>")}return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.banner");
jive.integration.tiles.viewstyle.banner=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<label class="j-508-label" id="tile-header-',opt_data.tileInstanceId?soy.$$escapeHtmlAttribute(opt_data.tileInstanceId):"-1",'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2adf"),[])),'</label><section id="tile-banner-',soy.$$escapeHtmlAttribute(opt_data.tileInstanceId),'" class="j-tile-body  j-tile-banner j-tile-banner-',soy.$$escapeHtmlAttribute(opt_data.config.size),
"  js-tile-banner js-tile-banner-",soy.$$escapeHtmlAttribute(opt_data.config.size),"  ",!opt_data.config.disableFullScreenView?" j-fullscreen-enabled":"",typeof opt_data.contents=="string"||opt_data.contents.length==0?" j-empty-gallery":"",'">');if(typeof opt_data.contents!="string"&&opt_data.contents.length!=0){output.append('<ul class="">');var imageList28=opt_data.contents;var imageListLen28=imageList28.length;for(var imageIndex28=0;imageIndex28<imageListLen28;imageIndex28++){var imageData28=imageList28[imageIndex28];
if(imageData28.display!="none"){output.append('<li class="j-tile-banner-thumb">');jive.integration.tiles.viewstyle.bannerImage(soy.$$augmentMap(imageData28,{hideCaptions:opt_data.config.hideCaptions,index:imageIndex28}),output);output.append("</li>")}}output.append("</ul>")}else output.append('<p class="noContent">',typeof opt_data.contents=="string"?soy.$$escapeHtml(opt_data.contents):"","</p>");output.append("</section>");if(opt_data.action&&opt_data.config.showAdditionalLink)jive.integration.tiles.view.footer(opt_data.action,
output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.byline");
jive.integration.tiles.viewstyle.byline=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;if(opt_data.user)output.append('<div class="linkDescription font-color-meta">',opt_data.user.title!=null?opt_data.user.dept!=null?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k40f8"),[opt_data.user.title,opt_data.user.dept])):soy.$$escapeHtml(opt_data.user.title):"","</div>");else if(opt_data.content){output.append('<div class="linkDescription font-color-meta" style="display: none;">');var userLink__soy16=
new soy.StringBuilder;jive.shared.displayutil.userDisplayNameLink(opt_data.content.author,userLink__soy16);userLink__soy16=userLink__soy16.toString();output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k40f7"),[new soydata.VERY_UNSAFE.ordainSanitizedHtml(userLink__soy16),opt_data.content.date])),"</div>")}return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.view.header");jive.integration.tiles.view.header=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<header class="j-tile-header"><h2 id="tile-header-',opt_data.tileInstanceId?soy.$$escapeHtmlAttribute(opt_data.tileInstanceId):"-1",'" class="font-color-meta">',soy.$$escapeHtml(opt_data.title),"</h2></header>");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.eventLocation");jive.integration.tiles.viewstyle.eventLocation=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.event.location&&(!opt_data.config||opt_data.config&&opt_data.config.locationDisplay&&opt_data.config.locationDisplay!="false")?'<p class="j-eventLocation font-color-meta">'+soy.$$escapeHtml(opt_data.event.location)+"</p>":"");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.eventList");
jive.integration.tiles.viewstyle.eventList=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(typeof opt_data.events=="string")output.append('<p class="noContent">',soy.$$escapeHtml(opt_data.events),"</p>");else if(opt_data.events.length<1)output.append('<p class="noContent">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k408d"),[])),"</p>");else{var eventList13=opt_data.events;var eventListLen13=eventList13.length;if(eventListLen13>0)for(var eventIndex13=0;eventIndex13<
eventListLen13;eventIndex13++){var eventData13=eventList13[eventIndex13];if(eventData13.title){output.append('<li id="event_',soy.$$escapeHtmlAttribute(eventData13.start),'" class="j-calEvent clearfix"><div class="j-tile-calendarIcon">',opt_data.isEvent&&opt_data.isEvent==true?'<strong class="month">'+soy.$$escapeHtml((eventData13.start?jive.model.DateUtil.parseISODateTime(eventData13.start):"")?_jive_moment(parseFloat(eventData13.start?jive.model.DateUtil.parseISODateTime(eventData13.start):"")?
parseFloat(eventData13.start?jive.model.DateUtil.parseISODateTime(eventData13.start):""):eventData13.start?jive.model.DateUtil.parseISODateTime(eventData13.start):"").add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("MMM"):"")+'</strong><strong class="day">'+soy.$$escapeHtml((eventData13.start?jive.model.DateUtil.parseISODateTime(eventData13.start):"")?_jive_moment(parseFloat(eventData13.start?jive.model.DateUtil.parseISODateTime(eventData13.start):"")?
parseFloat(eventData13.start?jive.model.DateUtil.parseISODateTime(eventData13.start):""):eventData13.start?jive.model.DateUtil.parseISODateTime(eventData13.start):"").add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("D"):"")+"</strong>":'<strong class="month">'+soy.$$escapeHtml((eventData13.start?jive.model.DateUtil.parseISODateTime(eventData13.start):"")?_jive_moment(parseFloat(eventData13.start?jive.model.DateUtil.parseISODateTime(eventData13.start):"")?
parseFloat(eventData13.start?jive.model.DateUtil.parseISODateTime(eventData13.start):""):eventData13.start?jive.model.DateUtil.parseISODateTime(eventData13.start):"").add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("MMM"):"")+'</strong><strong class="day">'+soy.$$escapeHtml((eventData13.start?jive.model.DateUtil.parseISODateTime(eventData13.start):"")?_jive_moment(parseFloat(eventData13.start?jive.model.DateUtil.parseISODateTime(eventData13.start):"")?
parseFloat(eventData13.start?jive.model.DateUtil.parseISODateTime(eventData13.start):""):eventData13.start?jive.model.DateUtil.parseISODateTime(eventData13.start):"").add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("D"):"")+"</strong>",'</div><header class="j-calEventHeader">');if(eventData13.action)jive.integration.tiles.view.actionLink(soy.$$augmentMap(eventData13.action,{text:eventData13.title}),output);else output.append(soy.$$escapeHtml(eventData13.title));
output.append('</header><section class="j-eventDescription"><p class="j-eventDescription">',eventData13.description?soy.$$escapeHtml(eventData13.description):"","</p>");jive.integration.tiles.viewstyle.eventLocation({event:eventData13,config:opt_data.config},output);output.append("</section></li>")}}else output.append('<li class="j-cal-empty"><p class="noContent"></p></li>')}return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.calendar");jive.integration.tiles.viewstyle.calendar=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.view.header(opt_data,output);output.append('<section class="j-tile-body j-tile-calendar"><ul class="j-calendar">');jive.integration.tiles.viewstyle.eventList(opt_data,output);output.append("</ul></section>");if(opt_data.action)jive.integration.tiles.view.footer(opt_data.action,output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.carousel");
jive.integration.tiles.viewstyle.carousel=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.title)jive.integration.tiles.view.header(opt_data,output);output.append('<section id="js-tile-carousel-',soy.$$escapeHtmlAttribute(opt_data.tileInstanceId),'" class="j-tile-carousel j-tile-body clearfix ',opt_data.config&&opt_data.config.previewPane?"js-carousel-preview-pane j-carousel-show-previewPane":"",'">');if(typeof opt_data.contents=="string"||opt_data.contents.length<=0)jive.integration.tiles.viewstyle.noResults(null,
output);else jive.integration.tiles.viewstyle.carouselbody({slides:opt_data.contents,previewPane:opt_data.config&&opt_data.config.previewPane},output);output.append("</section><script type=\"text/javascript\">$j(function() {require(['apps/tile/integrations/carousel'], function(carouselFunction) {carouselFunction();});});<\/script>");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.commentControl");
jive.integration.tiles.viewstyle.commentControl=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;switch(opt_data.type){default:output.append('<a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,opt_data.url+"#jive-comments"))),'">');jive.shared.soy.getCountTextByType({count:opt_data.commentCount,type:"commentcount"},output);output.append("</a>")}return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.badge");jive.outcomes.badge.badge=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.outcomes.badge.badgeRaw(soy.$$augmentMap(opt_data,{tagName:"li"}),output);return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.outcomeBadge");jive.outcomes.badge.outcomeBadge=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.outcomes.badge.badge({outcomeType:String(opt_data.outcome.outcomeType.name).toLowerCase(),embedded:opt_data.embedded},output);return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.badges");jive.outcomes.badge.badges=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var outcomeList3=opt_data.outcomes;var outcomeListLen3=outcomeList3.length;for(var outcomeIndex3=0;outcomeIndex3<outcomeListLen3;outcomeIndex3++){var outcomeData3=outcomeList3[outcomeIndex3];jive.outcomes.badge.outcomeBadge({outcome:outcomeData3,embedded:opt_data.embedded},output)}return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.badgeContainer");
jive.outcomes.badge.badgeContainer=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<ul class="js-outcome-badge-container j-outcome-badge-container js-ed-',soy.$$escapeHtml(opt_data.objectType),"-",soy.$$escapeHtml(opt_data.objectId),opt_data.extraClasses?" "+soy.$$escapeHtml(opt_data.extraClasses):"",'" data-object-type="',soy.$$escapeHtml(opt_data.objectType),'" data-object-id="',soy.$$escapeHtml(opt_data.objectId),'"',opt_data.parentType?'data-parent-object-type="'+
soy.$$escapeHtml(opt_data.parentType)+'"':"",opt_data.parentID?'data-parent-object-id="'+soy.$$escapeHtml(opt_data.parentID)+'"':"",'aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2927"),[])),'"',opt_data.allowedOutcomeTypes?'data-allowed-outcome-types="'+soy.$$escapeHtml(JSON.stringify(opt_data.allowedOutcomeTypes).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"))+'"':"",'aria-live="polite">');if(opt_data.outcomes)jive.outcomes.badge.badges(opt_data,
output);else if(opt_data.outcomeTypeName)jive.outcomes.badge.badge({outcomeType:opt_data.outcomeTypeName,embedded:opt_data.embedded,objectType:opt_data.objectType,objectId:opt_data.objectId,outcomeId:opt_data.outcomeId},output);output.append("</ul>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.headerBadgeRaw");
jive.outcomes.badge.headerBadgeRaw=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<",soy.$$escapeHtml(opt_data.tagName),' class="js-outcome-badge js-outcome-badge-noclick js-outcome-type-',soy.$$escapeHtml(opt_data.outcomeType)," j-outcome-type-",soy.$$escapeHtml(opt_data.outcomeType),opt_data.extraClasses?" "+soy.$$escapeHtml(opt_data.extraClasses):"",'" data-outcome-type="',soy.$$escapeHtml(opt_data.outcomeType),'"><span class="j-outcome-badge j-outcome-type-',
soy.$$escapeHtml(opt_data.outcomeType),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.badge."+opt_data.outcomeType)),[])),"</span></",soy.$$escapeHtml(opt_data.tagName),">");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.headerBadge");jive.outcomes.badge.headerBadge=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.outcomes.badge.headerBadgeRaw(soy.$$augmentMap(opt_data,{tagName:"li"}),output);return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.headerOutcomeBadge");jive.outcomes.badge.headerOutcomeBadge=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.outcomes.badge.headerBadge({outcomeType:String(opt_data.outcome.outcomeType.name).toLowerCase(),embedded:opt_data.embedded},output);return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.headerBadges");jive.outcomes.badge.headerBadges=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var outcomeList3=opt_data.outcomes;var outcomeListLen3=outcomeList3.length;for(var outcomeIndex3=0;outcomeIndex3<outcomeListLen3;outcomeIndex3++){var outcomeData3=outcomeList3[outcomeIndex3];jive.outcomes.badge.headerOutcomeBadge({outcome:outcomeData3,embedded:opt_data.embedded},output)}return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.headerBadgeByline");
jive.outcomes.badge.headerBadgeByline=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span class="j-outcome-byline font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.badge.popup."+opt_data.outcomeTypeName)),[]))," ");jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.author,{anonymous:false}),output);output.append(' <span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2917"),
[(opt_data.modifiedDate?jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate):"")?_jive_moment(parseFloat(opt_data.modifiedDate?jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate):"")?parseFloat(opt_data.modifiedDate?jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate):""):opt_data.modifiedDate?jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate):"").add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("lll"):""])),"</span></span>");
return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.headerBadgeOutdatedLink");jive.outcomes.badge.headerBadgeOutdatedLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span class="j-outcomes-redirect">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k291f"),[])),' <a href="',soy.$$escapeHtml(opt_data.href),'">',soy.$$escapeHtml(opt_data.title),"</a></span>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.headerBadgeActionLink");
jive.outcomes.badge.headerBadgeActionLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span class="j-outcome-modal-footer-link font-color-meta"><a class="j-outcome-modal-footer-link js-actionLink ',soy.$$escapeHtml(opt_data.extraClasses?opt_data.extraClasses:""),'"',opt_data.actionData?'data-action-data="'+soy.$$escapeHtml(opt_data.actionData)+'"':"",opt_data.event?'data-event="'+soy.$$escapeHtml(opt_data.event)+'"':"",'href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.actionMenu.item.meta."+
opt_data.labelSuffix)),[])),"</a></span>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.headerBadgePopup");
jive.outcomes.badge.headerBadgePopup=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-outcome-badge-popup j-outcome-popup j-outcome-meta">');if(!(opt_data.props.url&&opt_data.props.title))jive.outcomes.badge.headerBadgeByline(opt_data,output);if(opt_data.props.url&&opt_data.props.title)jive.outcomes.badge.headerBadgeOutdatedLink({href:opt_data.props.url,title:opt_data.props.title},output);if(opt_data.props.url&&opt_data.props.title)jive.outcomes.badge.headerBadgeByline(opt_data,
output);if(opt_data.actions.length>0){var itemList17=opt_data.actions;var itemListLen17=itemList17.length;for(var itemIndex17=0;itemIndex17<itemListLen17;itemIndex17++){var itemData17=itemList17[itemIndex17];output.append(!(itemIndex17==0)?"":"");jive.outcomes.badge.headerBadgeActionLink(itemData17,output)}}output.append("</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.fakeOutcomeBadge");jive.outcomes.badge.fakeOutcomeBadge=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.outcomes.badge.badgeRaw({outcomeType:String(opt_data.outcomeTypeName).toLowerCase(),tagName:"li",embedded:true,extraClasses:"j-fake-badge js-fake-badge"},output);return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.badgeByline");
jive.outcomes.badge.badgeByline=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-outcome-byline">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.badge.popup."+opt_data.outcomeTypeName)),[]))," ");jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.author,{anonymous:false}),output);output.append(' <span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2917"),[(opt_data.modifiedDate?
jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate):"")?_jive_moment(parseFloat(opt_data.modifiedDate?jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate):"")?parseFloat(opt_data.modifiedDate?jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate):""):opt_data.modifiedDate?jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate):"").add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("lll"):""])),"</span></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.badgeComment");jive.outcomes.badge.badgeComment=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-outcome-comment"><p><strong class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k291b"),[])),"</strong> ",soy.$$changeNewlineToBr(soy.$$escapeHtml(opt_data.comment)),"</p></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.badgeAlertedNames");jive.outcomes.badge.badgeAlertedNames=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-outcome-approvers font-color-meta"><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2916"),[])),"</strong> ");jive.shared.displayutil.itemList({items:opt_data.alertedNames,expandable:true},output);output.append("</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.badgeShareLink");
jive.outcomes.badge.badgeShareLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a class="j-share-link ',opt_data.actionData&&opt_data.event?"js-actionLink j-ui-elem j-share-add-contributors font-color-meta-light":"",'"',opt_data.actionData?'data-action-data="'+soy.$$escapeHtml(opt_data.actionData)+'"':"",opt_data.event?'data-event="'+soy.$$escapeHtml(opt_data.event)+'"':"",opt_data.actionData&&opt_data.event?'title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.actionMenu.share."+
opt_data.labelSuffix)),[]))+'"':"",'href="',soy.$$escapeHtml(opt_data.href?opt_data.href:"#"),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.actionMenu.share."+opt_data.labelSuffix)),[])),"</a>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.badgeOutdatedLink");jive.outcomes.badge.badgeOutdatedLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-outcomes-outdated-redirect j-outcome-comment"><p><h5>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k291e"),[])),' </h5><a href="',soy.$$escapeHtml(opt_data.href),'">',soy.$$escapeHtml(opt_data.title),"</a></p></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.badgeActionLink");
jive.outcomes.badge.badgeActionLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a class="j-outcome-modal-footer-link js-actionLink ',soy.$$escapeHtml(opt_data.extraClasses?opt_data.extraClasses:""),'"',opt_data.actionData?'data-action-data="'+soy.$$escapeHtml(opt_data.actionData)+'"':"",opt_data.event?'data-event="'+soy.$$escapeHtml(opt_data.event)+'"':"",'href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.actionMenu.item."+opt_data.labelSuffix)),
[])),"</a>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.badgePopup");
jive.outcomes.badge.badgePopup=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-outcome-badge-popup j-outcome-popup">');jive.outcomes.badge.badgeByline(opt_data,output);if(opt_data.comment)jive.outcomes.badge.badgeComment(opt_data,output);if(opt_data.alertedNames)jive.outcomes.badge.badgeAlertedNames(opt_data,output);if(opt_data.shareLink)jive.outcomes.badge.badgeShareLink(opt_data.shareLink,output);if(opt_data.props.url&&opt_data.props.title)jive.outcomes.badge.badgeOutdatedLink({href:opt_data.props.url,
title:opt_data.props.title},output);if(opt_data.actions.length>0){output.append('<footer class="j-outcome-modal-footer j-pop-row j-last">');var itemList24=opt_data.actions;var itemListLen24=itemList24.length;for(var itemIndex24=0;itemIndex24<itemListLen24;itemIndex24++){var itemData24=itemList24[itemIndex24];output.append(!(itemIndex24==0)?'<span class="font-color-meta-light">|</span>':"");jive.outcomes.badge.badgeActionLink(itemData24,output)}output.append("</footer>")}output.append("</div>");return opt_sb?
"":output.toString()};
;
define("apps/outcomes/viewUtil",["jquery","apps/shared/controllers/localexchange"],function(g,i){var l=["wip","finalized","outdated","official","decision","pending","resolved","success","helpful"];function c(q){var o=[];var r=false;for(var p=l.length-1;p>=0;--p){if(r){o.push(l[p])}else{if(l[p]===q){r=true}}}return o}function f(u,r){if(u===r){return 0}var t=u.name.toLowerCase(),o=r.name.toLowerCase(),p=t.localeCompare(o);if(p===0){return 0}for(var q=0;q<l.length;++q){var s=l[q];if(s==t){return -1}if(s==o){return 1}}return p}function b(){if(b.timeout){clearTimeout(b.timeout)}b.timeout=setTimeout(function(){b.timeout=null;i.emit("heightChanged")},250)}function j(q,p,o){this.labelSuffix=q;this.event=p;this.actionData=o}function a(o){return g.map(o,function(p){if(p.verb=="get"){return null}var r="outcome."+p.verb;var q;if(p.context){q={outcomeType:p.subject,predecessor:{url:p.context.resources.self.ref,outcomeType:p.context.outcomeType,shared:p.context.properties?p.context.properties.shared:false}}}else{q=p.subject}q=JSON.stringify(q);var s;if(p.context){s=p.context.outcomeType.name.toLowerCase()+"."}else{s=""}s+=p.subject.name.toLowerCase()+"."+p.verb;return new j(s,r,q)})}function d(s,r,q){var o=r.first();var p=null;while(o.length){p=null;s.each(function(){if(o.has(this).length){p=g(this);return false}return true});if(p){return p}o=o.parent()}if(!r||r.length==0){s.each(function(){if(g(this).data("outcome-type")==q){p=g(this);return false}return true});if(p){return p}}return g()}return{getEd:function k(p){var o=g(p);return{type:o.data("objectType"),id:o.data("objectId")}},getParentEd:function e(p){var o=g(p);return{type:o.data("parentObjectType"),id:o.data("parentObjectId")}},getContext:function n(p){var o=g(p);return o.data("context")},getContextMeta:function n(p){var o=g(p);return o.data("meta-context")},getRootCommunityName:function m(p){var o=g(p);return o.data("root-community")},placeItem:function h(q,t,s,r,p){var u=g();var o=g();q.each(function(){var y=g(this),x=y.children(":visible").length==0,v=g(t).clone(),w=c(s);if(x&&p){y.hide()}u=u.add(v);if(w!=null){var z=g();g.each(w,function(A,B){z=r(y,B);return z.length==0});if(z.length==0){y.prepend(v)}else{z.after(v)}}else{y.append(v)}if(p){y.slideDown(p)}if(x){o=o.add(y)}});if(o.length>0){o.promise().done(b)}return u},outcomeTypeComparator:f,buildLinkActions:a,nearest:d}});
;
goog.provide("jive.outcomes.summary.avatar");jive.outcomes.summary.avatar=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.user,{enabled:opt_data.user.jive.enabled,partner:opt_data.user.jive.externalContributor,username:opt_data.user.jive.username,visible:opt_data.user.jive.visible,anonymous:false,prop:null,avatarID:0,size:32,hideTooltip:true}),output);return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.mostLiked.reply");
jive.outcomes.mostLiked.reply=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-outcome-badge-popup"><div class="outcome-byline">',opt_data.reply.likeCount==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k293c"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k293b"),[opt_data.reply.likeCount])),'</div></div><div class="j-outcome-rollup-reply"><div class="j-outcome-reply-avatar">');if(opt_data.reply.author)jive.outcomes.summary.avatar({user:opt_data.reply.author},output);
else jive.shared.displayutil.avatar({anonymous:true,enabled:true,partner:false,username:"guest",id:0,ID:0,displayName:"",visible:true,prop:null,avatarID:0,size:32},output);output.append('</div><div class="j-outcome-reply-box"><p class="j-outcome-reply-byline jive-comment-meta font-color-meta">');if(opt_data.reply.author)jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.reply.author,{anonymous:false}),output);else jive.shared.displayutil.userDisplayNameLink({anonymous:true,enabled:true,
username:"guest",id:0,displayName:"",visible:true},output);output.append(' <a href="',soy.$$escapeHtml(opt_data.reply.resources.html.ref),'" class="j-outcome-reply-date font-color-normal js-outcome-reply-incontext">',soy.$$escapeHtml((opt_data.reply.updated?jive.model.DateUtil.parseISODateTime(opt_data.reply.updated):"")?_jive_moment(parseFloat(opt_data.reply.updated?jive.model.DateUtil.parseISODateTime(opt_data.reply.updated):"")?parseFloat(opt_data.reply.updated?jive.model.DateUtil.parseISODateTime(opt_data.reply.updated):
""):opt_data.reply.updated?jive.model.DateUtil.parseISODateTime(opt_data.reply.updated):"").add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("lll"):""),'<span class="j-in-context font-color-meta-light"> (',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2947"),[])),')</span></a></p><div class="j-outcome-reply-body js-outcome-reply-body">',soy.$$filterNoAutoescape(opt_data.reply.content.text),'</div><div class="j-outcome-more js-outcome-more" style="display:none;"><a class="j-rc3 font-color-meta" href=\'#\'>',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20de"),[])),"</a></div></div></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.mostLiked.rollup");
jive.outcomes.mostLiked.rollup=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-outcome-rollup jive-modal-wide"><h3 class="j-outcome-rollup-title">');jive.outcomes.badge.badgeRaw({outcomeType:"mostLiked",embedded:true,tagName:"span"},output);output.append("<b>",soy.$$filterNoAutoescape(opt_data.tloSubject),'</b></h3><div class="j-outcome-rollup-replies">');var replyList12=opt_data.replies;var replyListLen12=replyList12.length;for(var replyIndex12=0;replyIndex12<
replyListLen12;replyIndex12++){var replyData12=replyList12[replyIndex12];jive.outcomes.mostLiked.reply({reply:replyData12},output)}output.append('</div><div class="j-outcome-done-block j-rc5 j-rc-none-top"><a href="#" class="js-outcome-done-button j-btn-global">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2940"),[])),"</a></div></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.mostLiked.pseudoBadge");
jive.outcomes.mostLiked.pseudoBadge=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="js-outcome-summary-count j-outcome-summary-count js-mostLiked j-most-liked" tabindex="0" role="button" aria-haspopup="true"><a class="js-outcome-count-block j-outcome-count-block" href="#">');jive.outcomes.badge.badgeRaw({outcomeType:"mostLiked",embedded:true,tagName:"span"},output);output.append("</a></li>");return opt_sb?"":output.toString()};
;
define("apps/outcomes/mostLikedView",["jquery","apps/shared/controllers/localexchange","apps/outcomes/viewUtil","apps/outcomes/outcomesMain"],function(d,a,c){function f(g){return g.length>0}function b(j,i,g){if(f(i)){var h=d(jive.outcomes.mostLiked.pseudoBadge({}));j.find(".js-mostLiked").remove();j.append(h)}}function e(l,j,h){var k=jive.outcomes.mostLiked.rollup({replies:l,tloSubject:j});var i={context:h,returnPopover:true,hoverSelection:false,onClose:function(){h.removeAttr("aria-owns")}};var m=d(k).popover(i);h.attr("aria-owns",m.id());function g(o){var p=o.hasClass("j-js-expanded");if(!p){o.addClass("j-js-expanded")}var n=o.height();if(!p){o.removeClass("j-js-expanded")}return n}m.find(".js-outcome-reply-body").each(function(){var n=d(this);if(g(n)>150){n.next(".js-outcome-more").show()}});m.find(".js-outcome-more").on("click",function(n){d(this).hide().prev(".js-outcome-reply-body").addClass("j-js-expanded");n.preventDefault()});m.find(".js-outcome-done-button").on("click",function(n){i.closeFunc();n.preventDefault()});a.emit("renderedContent",m);a.emit("mostLiked.rollupDisplayed",l)}a.addListener("mostLiked.rolledup",e);a.addListener("mostLiked.badge",b);return{mostLikedRollup:e,mostLikedBadge:b}});
;
define("apps/outcomes/badgeHelper",["jquery"],function(f){var d=["outdated","official","finalized","wip"];var a=false;function g(){a=true}function c(){a=false}function b(h){if(a&&d.indexOf(h)!=-1){return true}return false}function e(j,i){var h=j.outcomeType.name.toLowerCase();if(a&&d.indexOf(h)>-1){return jive.outcomes.badge.headerOutcomeBadge({outcome:j,customBadgeTemplate:i})}else{return jive.outcomes.badge.outcomeBadge({outcome:j,customBadgeTemplate:i})}}return{isHeaderBadge:b,getBadge:e,enableHeaderBadges:g,disableHeaderBadges:c}});
;
define("apps/outcomes/badgeView",["jquery","apps/shared/controllers/localexchange","apps/outcomes/viewUtil","apps/shared/views/itemList","apps/outcomes/badgeHelper","apps/outcomes/outcomesMain"],function(j,l,d,n,b){function i(s,r,t){return d.placeItem(s,r,t,function(v,u){return v.find(".js-outcome-badge.js-outcome-type-"+u)})}function m(s,v){var t=v.outcomeType.name.toLowerCase();var w=j(".js-outcome-badge-container.js-ed-"+s.type+"-"+s.id);var u=w.data("customBadgeTemplate");var r=b.getBadge(v,u);w=f(w,t);w=w.not(":has(.js-outcome-type-"+t+")");i(w,r,t).data("outcome",v.resources.self.ref).data("ed",s);if(b.isHeaderBadge(t)){c(w)}l.emit("outcome.displayed",s,v)}function e(s,t,v){var r=jive.outcomes.badge.fakeOutcomeBadge({outcomeTypeName:t});var u=j(".js-outcome-badge-container.js-ed-"+s.type+"-"+s.id);u=f(u,t);i(u.not(":has(.js-outcome-badge.js-outcome-type-"+t+")"),r,t);v.emitSuccess(u.find(".js-outcome-badge.js-outcome-type-"+t))}function g(r,t){var s=t.name.toLowerCase();var u=j(".js-outcome-badge-container.js-ed-"+r.type+"-"+r.id);u.find(".js-outcome-badge.js-outcome-type-"+s).safeRemove()}function q(s,r){j.each(s,function(){var t=this;var u=j(".js-outcome-badge-container.js-ed-"+t.type+"-"+t.id);u.find(".js-outcome-badge").safeRemove()});if(r){r.emitSuccess()}}function p(r){r=r||document;var s=[];j(".js-outcome-badge-container",r).not("[data-no-hydrate]").each(function(){s.push(d.getEd(this))});l.emit("outcome.refresh",s)}function o(r){if(r){r.preventDefault()}var s=j(this);if(s.data("outcome")&&s.data("ed")){k(s,s.data("ed"),s.data("outcome"))}else{console.log("badge is missing outcome or entity descriptor data: ",s)}}function h(u,t,s,r){this.labelSuffix=u;this.event=t;this.actionData=s;this.href=r}function c(t){var s=t.find("li");var r=$j(".js-outcome-badge-container-top > li > .j-outcome-badge-popup");if(!(r.length>0)){if(s.data("outcome")&&s.data("ed")){l.emitP("outcome.prepareForBadgePopup",s.data("outcome")).then(function(x,y){var w=d.buildLinkActions(y);var v={outcomeTypeName:x.outcomeType.name.toLowerCase(),author:x.user,modifiedDate:x.updated,actions:w,props:x.properties};v=a(x,v);var u=jive.outcomes.badge.headerBadgePopup(v);s.append(u);s.on("click",".js-actionLink",function(A){A.preventDefault();var B=j(this);var C=s.closest(".js-outcome-badge-container");var z=d.getEd(C);l.emit("outcome.doAction",B.data("event"),z,B.data("actionData"),C)})})}}}function a(s,r){if(s.note){r.comment=j("<div/>").html(s.note).text()}if(s.properties){var u=[];if(s.properties.alertedUsers){j.each(s.properties.alertedUsers,function(w,v){u.push(v.displayName)});r.alertedNames=u}if(s.outcomeType.name=="pending"){if(u.length==0){u.push(s.user.displayName);r.alertedNames=u}if(s.properties.outcomeShare){if(document.URL!=s.properties.outcomeShare.resources.html.ref){var t=s.outcomeType.name.toLowerCase()+".view";r.shareLink=new h(t,null,null,s.properties.outcomeShare.resources.html.ref)}}else{if(s.update){var t=s.outcomeType.name.toLowerCase()+".put";r.shareLink=new h(t,"outcome.put",JSON.stringify(s.outcomeType),null)}}}}return r}function k(t,r,s){if(t.attr("aria-owns")){j("#"+t.attr("aria-owns")).trigger("close")}else{l.emitP("outcome.prepareForBadgePopup",s).then(function(z,A){var y=_.filter(A,function(B){if(j.inArray(B.subject.name,["decision","success"])!=-1){return true}return B.verb!="delete"});var x=d.buildLinkActions(y);var v={outcomeTypeName:z.outcomeType.name.toLowerCase(),author:z.user,modifiedDate:z.updated,actions:x,props:z.properties};v=a(z,v);var u=jive.outcomes.badge.badgePopup(v);var w=j(u).popover({context:t,hoverSelection:true,onClose:function(){t.removeAttr("aria-owns")},hoverSelection:false});l.emit("outcome.history.displayLink",z,v.alertedNames,w.find(".j-outcome-modal-footer"),r,t);l.addListener("outcome.history.popoverDisplayed",function(){w.trigger("close")});t.attr("aria-owns",w.id());n.bindHandlers(w);w.on("click",".js-actionLink",function(C){C.preventDefault();var D=j(this);var E=j(t).closest(".js-outcome-badge-container");var B=d.getEd(E);l.emit("outcome.doAction",D.data("event"),B,D.data("actionData"),t);D.trigger("close")})})}}function f(s,r){s=s.filter(function(){var t=j(this).data("allowedOutcomeTypes");return !t||t.indexOf(r)>=0});return s}l.addListener("outcome.display",m);l.addListener("outcome.displayFake",e);l.addListener("outcome.removeBadge",g);l.addListener("outcome.clearBadges",q);return{display:m,removeBadge:g,refresh:p,clickHandler:o}});
;
goog.provide("jive.outcomes.summary.summaryCount");
jive.outcomes.summary.summaryCount=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="js-outcome-summary-count j-outcome-summary-count js-outcome-type-',soy.$$escapeHtml(opt_data.outcomeType)," j-outcome-type-",soy.$$escapeHtml(opt_data.outcomeType),'" tabindex="0" role="button" aria-haspopup="true" data-outcome-type="',soy.$$escapeHtml(opt_data.outcomeType),'" data-count="',soy.$$escapeHtml(opt_data.count),'" aria-label="',soy.$$escapeHtml(opt_data.outcomeType),
'"><a class="js-outcome-count-block j-outcome-count-block" href="#"><span class="j-outcome-count">',soy.$$escapeHtml(opt_data.count),"</span>");jive.outcomes.badge.badgeRaw({outcomeType:opt_data.outcomeType,embedded:true,tagName:"span"},output);output.append("</a></li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.summary.detailsLinks");
jive.outcomes.summary.detailsLinks=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.outcome.note||opt_data.outcome.properties&&opt_data.outcome.properties.approvers?'<div class="j-outcome-link-container"><a class="j-outcome-link-details js-outcome-link-details js-outcome-link" href="#" data-outcome-url="'+soy.$$escapeHtml(opt_data.outcome.resources.self.ref)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k293f"),[]))+'</a><a class="j-outcome-link-incontext js-outcome-link-incontext js-outcome-link" href="'+
soy.$$escapeHtml(opt_data.contextUrl)+'" style="display:none;">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2947"),[]))+"</a></div>":"");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.helpful.msgHelpfulCount");
jive.outcomes.helpful.msgHelpfulCount=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(parseInt(opt_data.helpfulCount,10)>0?opt_data.displayOverall?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1b"),[opt_data.helpfulCount,opt_data.overallCount])):parseInt(opt_data.helpfulCount,10)==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1d"),[opt_data.helpfulCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1c"),[opt_data.helpfulCount])):"");
return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.summary.rollupReply");
jive.outcomes.summary.rollupReply=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-outcome-badge-popup">');jive.outcomes.summary.detailsLinks({outcome:opt_data.reply.outcomes[opt_data.outcomeTypeName],contextUrl:opt_data.reply.resources.html.ref},output);jive.outcomes.badge.badgeByline({outcomeTypeName:opt_data.outcomeTypeName,author:opt_data.reply.outcomes[opt_data.outcomeTypeName].user,modifiedDate:opt_data.reply.outcomes[opt_data.outcomeTypeName].updated},output);
output.append('<div class="j-outcome-details js-outcome-details" style="display:none;"></div></div><div class="j-outcome-rollup-reply"><div class="j-outcome-reply-avatar">');if(opt_data.reply.author)jive.outcomes.summary.avatar({user:opt_data.reply.author},output);else jive.shared.displayutil.avatar({anonymous:true,enabled:true,partner:false,username:"guest",id:0,ID:0,displayName:"",visible:true,prop:null,avatarID:0,size:32},output);output.append('</div><div class="j-outcome-reply-box"><p class="j-outcome-reply-byline jive-comment-meta font-color-meta">');
if(opt_data.reply.author)jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.reply.author,{anonymous:false}),output);else jive.shared.displayutil.userDisplayNameLink({anonymous:true,enabled:true,username:"guest",id:0,displayName:"",visible:true},output);output.append(' <a href="',soy.$$escapeHtml(opt_data.reply.resources.html.ref),'" class="j-outcome-reply-date font-color-normal js-outcome-reply-incontext">',soy.$$escapeHtml((opt_data.reply.updated?jive.model.DateUtil.parseISODateTime(opt_data.reply.updated):
"")?_jive_moment(parseFloat(opt_data.reply.updated?jive.model.DateUtil.parseISODateTime(opt_data.reply.updated):"")?parseFloat(opt_data.reply.updated?jive.model.DateUtil.parseISODateTime(opt_data.reply.updated):""):opt_data.reply.updated?jive.model.DateUtil.parseISODateTime(opt_data.reply.updated):"").add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("lll"):""),'<span class="j-in-context font-color-meta-light"> (',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2947"),
[])),")</span></a>");if(opt_data.reply.helpfulCount){output.append('<span style="float:right;">');if(!opt_data.reply.unhelpfulCount)jive.outcomes.helpful.msgHelpfulCount({helpfulCount:opt_data.reply.helpfulCount,overallCount:opt_data.reply.helpfulCount,displayOverall:false},output);else jive.outcomes.helpful.msgHelpfulCount({helpfulCount:opt_data.reply.helpfulCount,overallCount:opt_data.reply.helpfulCount+opt_data.reply.unhelpfulCount,displayOverall:true},output);output.append("</span>")}output.append('</p><div class="j-outcome-reply-body js-outcome-reply-body">',
soy.$$filterNoAutoescape(opt_data.reply.content.text),'</div><div class="j-outcome-more js-outcome-more" style="display:none;"><a class="j-rc3 font-color-meta" href=\'#\'>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20de"),[])),"</a></div></div></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.summary.rollup");
jive.outcomes.summary.rollup=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-outcome-rollup jive-modal-wide"><h3 class="j-outcome-rollup-title">');jive.outcomes.badge.badgeRaw({tagName:"span",outcomeType:opt_data.outcomeType,embedded:true},output);output.append('<span class="j-outcome-rollup-title-text"> ',soy.$$filterNoAutoescape(opt_data.tloTitle),'</span></h3><div class="j-outcome-rollup-replies">');var replyList12=opt_data.replies;var replyListLen12=
replyList12.length;for(var replyIndex12=0;replyIndex12<replyListLen12;replyIndex12++){var replyData12=replyList12[replyIndex12];jive.outcomes.summary.rollupReply({reply:replyData12,outcomeTypeName:opt_data.outcomeType},output)}output.append('</div><div class="j-outcome-done-block j-rc5 j-rc-none-top"><a href="#" class="js-outcome-done-button j-btn-global">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2940"),[])),"</a></div></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.badge.badgeByline");goog.provide("jive.outcomes.badge.badgeDetails");
jive.outcomes.badge.badgeByline=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-outcome-byline">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.badge.popup."+opt_data.outcomeTypeName)),[]))," ");jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.author,{anonymous:false}),output);output.append(' <span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2917"),[(opt_data.modifiedDate?
jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate):"")?_jive_moment(parseFloat(opt_data.modifiedDate?jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate):"")?parseFloat(opt_data.modifiedDate?jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate):""):opt_data.modifiedDate?jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate):"").add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("lll"):""])),"</span></div>");return opt_sb?"":output.toString()};
jive.outcomes.badge.badgeDetails=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append(opt_data.comment?'<div class="j-outcome-comment"><strong class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k291b"),[]))+"</strong> "+soy.$$changeNewlineToBr(soy.$$escapeHtml(opt_data.comment))+"</div>":"");if(opt_data.alertedNames)jive.outcomes.badge.badgeAlertedNames(opt_data,output);return opt_sb?"":output.toString()};
;
define("apps/outcomes/summaryView",["jquery","apps/shared/controllers/localexchange","apps/outcomes/viewUtil","apps/shared/views/itemList","apps/outcomes/outcomesMain"],function(d,f,b,h){function c(k,o,m,l){var n=d("#js-outcome-summary-container-"+k.type+"-"+k.id);if(n.length&&o){d.each(o,function(q,r){if(r>0){var p=jive.outcomes.summary.summaryCount({outcomeType:q,count:r});if(0==n.children(".js-outcome-summary-count.js-outcome-type-"+q).replaceWith(p).length){b.placeItem(n,p,q,function(t,s){return t.children(".js-outcome-summary-count.js-outcome-type-"+s)},200)}}else{n.children(".js-outcome-summary-count.js-outcome-type-"+q).safeRemove()}});n.children(".js-outcome-summary-count.js-mostLiked").safeRemove();f.emit("mostLiked.badge",n,m,l.subject)}if(n.length){d(function(){n.off();n.on("click","li",function p(u){u.preventDefault();var s=d(this);if(!s.attr("data-outcome-type")){return}if(s.attr("aria-owns")){d("#"+s.attr("aria-owns")).trigger("close")}else{var t=s.data("outcomeType"),v=s.closest(".js-outcome-summary-container"),r=v.data("objectType"),q=v.data("objectId");f.emit("outcome.rollup",{id:q,type:r},t,s)}});n.on("click",".js-mostLiked",function p(r){r.preventDefault();var q=d(this);f.emit("outcome.rollupMostLiked",m.valueOf(),l.subject,q)})})}}f.addListener("outcome.summary",c);function g(o,q,l,n){var p=jive.outcomes.summary.rollup({replies:q,outcomeType:o,tloTitle:n});var m={context:l,returnPopover:true,hoverSelection:true,onClose:function(){l.removeAttr("aria-owns")}};var r=d(p).popover(m);l.attr("aria-owns",r.id());function k(t){var u=t.hasClass("j-js-expanded");if(!u){t.addClass("j-js-expanded")}var s=t.height();if(!u){t.removeClass("j-js-expanded")}return s}r.find(".js-outcome-reply-body").each(function(){var s=d(this);if(k(s)>150){s.next(".js-outcome-more").show()}});r.find(".js-outcome-more").on("click",function(s){d(this).hide().prev(".js-outcome-reply-body").addClass("j-js-expanded");s.preventDefault()});r.find(".js-outcome-done-button").on("click",function(s){m.closeFunc();s.preventDefault()});r.find("a.js-outcome-reply-incontext").on("click",function(){m.closeFunc();var s=/#.*$/.exec(d(this).attr("href"));if(s){jive.conc.nextTick(function(){jive.Accessibility.focusIn(d(s[0]))})}f.emit("outcome.expandCollapsedComments")});r.find(".js-outcome-link-incontext").on("click",function(){m.closeFunc();var s=/#.*$/.exec(d(this).attr("href"));if(s){jive.conc.nextTick(function(){jive.Accessibility.focusIn(d(s[0]))})}f.emit("outcome.expandCollapsedComments")});f.emit("renderedContent",r);f.emit("outcome.rollupDisplayed",o,q)}function i(l){if(l){l.preventDefault()}var k=d(this);if(k.data("outcomeUrl")){j(k.closest(".j-outcome-badge-popup"),k.data("outcomeUrl"))}else{console.log("link is missing outcomeUrl: ",k)}}function j(k,l){f.emitP("outcome.prepareOutcomeDetails",l).then(function(o){var q=k.find(".j-outcome-details");var n={comment:d("<div/>").html(o.note).text()};var p=[];if(o.properties.alertedUsers){d.each(o.properties.alertedUsers,function(s,r){p.push(r.displayName)});n.alertedNames=p}var m=jive.outcomes.badge.badgeDetails(n);q.append(m).slideDown();k.find(".js-outcome-link").toggle().focus();h.bindHandlers(k)})}function a(k){k=k||document;d(".js-outcome-summary-container",k).each(function(){f.emit("outcome.summarize",b.getEd(this))})}function e(k,m){var l=m.outcomeType.name.toLowerCase();if(l!="finalized"){return}f.emit("outcome.collapseComments")}f.addListener("outcome.rolledup",g);f.addListener("outcome.refreshSummary",a);f.addListener("outcome.created",e);return{summarize:a,outcomeRollup:g,clickHandler:i}});
;
goog.provide("jive.outcomes.action.actionMenuItem");
jive.outcomes.action.actionMenuItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<li>",opt_data.url||opt_data.event?'<a class="js-actionItem lnk '+soy.$$escapeHtmlAttribute(opt_data.extraClasses?opt_data.extraClasses:"")+'"'+(opt_data.actionData?'data-action-data="'+soy.$$escapeHtmlAttribute(opt_data.actionData)+'"':"")+(opt_data.event?'data-event="'+soy.$$escapeHtmlAttribute(opt_data.event)+'"':"")+'href="'+soy.$$filterNoAutoescape(opt_data.url?opt_data.url:"#")+
'">':'<span class="font-color-meta j-disabled-actionItem '+soy.$$escapeHtmlAttribute(opt_data.extraClasses?opt_data.extraClasses:"")+'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.actionMenu.item."+opt_data.labelSuffix)),[])),opt_data.url||opt_data.event?"</a>":"</span>","</li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.action.actionMenu");
jive.outcomes.action.actionMenu=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-pop-main j-menu j-quick-menu">');if(opt_data.outcomes.length){output.append('<h4 id="action-menu-outcome-heading" class="j-menu-section-heading font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2909"),[])),'</h4><ul aria-labelledby="action-menu-outcome-heading">');var itemList9=opt_data.outcomes;var itemListLen9=itemList9.length;for(var itemIndex9=
0;itemIndex9<itemListLen9;itemIndex9++){var itemData9=itemList9[itemIndex9];jive.outcomes.action.actionMenuItem(itemData9,output)}if(opt_data.additionalActions){var itemList14=opt_data.additionalActions;var itemListLen14=itemList14.length;for(var itemIndex14=0;itemIndex14<itemListLen14;itemIndex14++){var itemData14=itemList14[itemIndex14];jive.outcomes.action.actionMenuItem(itemData14,output)}}output.append("</ul>")}if(opt_data.actions.length){output.append('<h4 id="action-menu-action-heading" class="j-menu-section-heading font-color-meta-light">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28da"),[])),'</h4><ul id="action-menu-action-list" aria-labelledby="action-menu-action-heading">');var itemList23=opt_data.actions;var itemListLen23=itemList23.length;for(var itemIndex23=0;itemIndex23<itemListLen23;itemIndex23++){var itemData23=itemList23[itemIndex23];jive.outcomes.action.actionMenuItem(itemData23,output)}output.append("</ul>")}output.append(!opt_data.actions.length&&!opt_data.outcomes.length?'<div class="j-no-actions">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28db"),
[]))+"</div>":"","</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.action.createdMessage");jive.outcomes.action.createdMessage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<div>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.action.createdMessage."+opt_data.suffix)),[])),"</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.action.deletedMessage");jive.outcomes.action.deletedMessage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<div>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.action.deletedMessage."+opt_data.suffix)),[])),"</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.action.updatedMessage");jive.outcomes.action.updatedMessage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<div>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.action.updatedMessage."+opt_data.suffix)),[])),"</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.action.confirmModal");
jive.outcomes.action.confirmModal=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-modal jive-modal-narrow j-outcome-confirm"><header><h2 class="jive-modal-title">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.action.confirmMessage."+String(opt_data.outcomeType.name).toLowerCase()+".title")),[])),'</h2></header><a href="#" class="j-modal-close-top close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200e"),[])),
'<span class="j-close-icon j-ui-elem" role="img"></span></a><div class="jive-modal-content clearfix"><p><span class="jive-icon-med jive-icon-warn"></span><span class="j-confirm-question">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.action.confirmMessage."+String(opt_data.outcomeType.name).toLowerCase()+".question")),[])),'</span><span class="j-confirm-result">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.action.confirmMessage."+
String(opt_data.outcomeType.name).toLowerCase()+".result")),[])),'</span></p><div class="jive-form-buttons"><button type="button" name="ok" class="j-btn-callout">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.action.confirmMessage."+String(opt_data.outcomeType.name).toLowerCase()+".confirmButton")),[])),'</button><button type="button" name="cancel">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2003"),[])),"</button></div></div></div>");return opt_sb?
"":output.toString()};
;
goog.provide("jive.outcomes.action.markAlertModal");
jive.outcomes.action.markAlertModal=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-outcome-popup"><form name="pending-alert-form" action="#" class="j-form"><header class="j-outcome-modal-heading"><h3 class="font-color-meta">',opt_data.communityName?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.actionMenu.item."+opt_data.outcomeTypeName+".context.post")),[opt_data.communityName])):opt_data.notShareable?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.actionMenu.item."+
opt_data.outcomeTypeName+".post")),[])):opt_data.isUpdate?opt_data.isTakeOwnership?" "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28d2"),[]))+" ":" "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28d1"),[]))+" ":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28d0"),[])),"</h3>",opt_data.communityName?'<span class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.actionMenu.item."+opt_data.outcomeTypeName+".context.post.desc")),
[]))+"</span>":"",'</header><div class="shareable" style="display:none"><div class="j-pending-alert-note-container js-pending-alert-note-container j-form-row"><textarea id="pending-alert-note" name="pending-alert-note" class="j-pending-alert-note" placeholder="',!opt_data.existingShare?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k28ca"),[])):soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k28c9"),[])),'"></textarea><label for="pending-alert-note"><span class="font-color-meta">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28c7"),[])),"</span></label></div>",!opt_data.existingShare?'<div class="j-pending-share-target-container js-pending-share-target-container j-form-row j-rc4"><input type="checkbox" id="j-send-pending-share-checkbox" name="send-pending-share"/><label for="j-send-pending-share-checkbox" class="js-send-pending-share-label">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28c5"),[]))+'</label><div class="j-pending-share j-pending-share-optional js-pending-share" style="display: none;"><div class="j-pending-share-people-picker-container js-pending-share-people-picker-container j-form-row"><input type="text" name="pending-share-users" class="j-autocomplete-input j-user-autocomplete j-ui-elem" role="combobox" placeHolder="'+
soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k28cb"),[]))+'" aria-label="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k28cb"),[]))+'"/></div><label for="pending-share-message">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28cf"),[opt_data.shareText]))+'</label><div class="j-pending-share-place-message-container js-pending-share-place-message-container"><textarea id="pending-share-message" name="pending-share-message" class="j-pending-share-message">'+
soy.$$escapeHtmlRcdata(jive.i18n.i18nText(jive.i18n.getMsg("k28cf"),[opt_data.shareText]))+"</textarea></div></div></div>":"",'</div><div class="jive-form-element j-form-row urlAllowed" style="display:none"><label for="outdated-link">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28c2"),[])),'</label><input type="hidden" id="outdated-url" name="outdated-url"/><input type="text" id="outdated-link" name="outdated-link" class="jive-form-textinput"/><p id="outdated-url-display" class="j-outdated-link-meta font-color-meta-light" name="outdated-url-display"></p></div><div class="j-form-row generalNote" style="display:none"><div class="j-note-container"><label for="outcome-note">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28bb"),[])),'</label><textarea id="outcome-note" name="outcome-note" class="j-outcome-note"></textarea></div></div><footer class="j-pending-alert-footer j-pop-row j-last"><button type="submit" name="success" class="j-btn-callout">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28ce"),[])),'</button><button type="button" name="cancel">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2003"),[])),"</button></footer></form></div>");
return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.action.tloExclusionModal");
jive.outcomes.action.tloExclusionModal=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-modal jive-modal-narrow j-outcome-confirm"><header><h2 class="jive-modal-title" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.action.confirmMessage.exclusion."+String(opt_data.outcomeType.name).toLowerCase()+".title")),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.action.confirmMessage.exclusion."+String(opt_data.outcomeType.name).toLowerCase()+
".title")),[])),'</h2></header><a href="#" class="j-modal-close-top close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200e"),[])),'<span class="j-close-icon j-ui-elem" role="img"></span></a><div class="jive-modal-content clearfix"><p><span class="jive-icon-med jive-icon-warn"></span><span class="j-confirm-question" id="j-confirm-question-',soy.$$escapeHtmlAttribute(String(opt_data.outcomeType.name).toLowerCase()),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.action.confirmMessage.exclusion."+
String(opt_data.outcomeType.name).toLowerCase()+".question")),[])),'</span><span class="j-confirm-result" id="j-confirm-result-',soy.$$escapeHtmlAttribute(String(opt_data.outcomeType.name).toLowerCase()),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2899"),[])),'</span></p><div class="jive-form-buttons"><button type="button" name="ok" class="j-btn-callout" aria-labelledby="j-confirm-question-',soy.$$escapeHtmlAttribute(String(opt_data.outcomeType.name).toLowerCase()),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2892"),
[])),'</button><button type="button" name="cancel">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2003"),[])),"</button></div></div></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.action.pendingAssigneeModal");
jive.outcomes.action.pendingAssigneeModal=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-outcome-popup" style="width:516px;"><form name="pending-alert-form" action="#" class="j-form"><header class="j-outcome-modal-heading"><h3 class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28c4"),[])),'</h3></header><div class="j-pending-share js-pending-share j-form-row"><div class="j-pending-share-people-picker-container js-pending-share-people-picker-container"><input type="text" name="pending-share-users" class="j-autocomplete-input j-user-autocomplete j-ui-elem" role="combobox" placeHolder="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k28cb"),
[])),'" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k28cb"),[])),'"/></div><label for="pending-share-message">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28cf"),[opt_data.shareText])),'</label><div class="j-pending-share-place-message-container js-pending-share-place-message-container"><textarea id="pending-share-message" name="pending-share-message" class="j-pending-share-message">',soy.$$escapeHtmlRcdata(jive.i18n.i18nText(jive.i18n.getMsg("k28cf"),
[opt_data.shareText])),'</textarea></div></div><footer class="j-pending-alert-footer j-pop-row j-last"><button type="submit" name="success" class="j-btn-callout">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28ce"),[])),'</button><button type="button" name="cancel">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2003"),[])),"</button></footer></form></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.action.pendingAlertPermissionWarning");jive.outcomes.action.pendingAlertPermissionWarning=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append('<div class="js-pending-permissionWarning j-pending-permissionWarning">',opt_data.privateContent?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28cd"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28cc"),[])),"</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.action.unknownError");jive.outcomes.action.unknownError=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<div>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2954"),[])),"</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.outcomes.action.actionTooltip");
jive.outcomes.action.actionTooltip=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-outcome-tooltip-popup j-outcome-popup"><header><h5><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28d5"),[])),'</strong></h5><header><div class="j-outcome-tooltip-details"><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28d3"),[])),'</p><a class="j-outcome-tooltip-link" href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,"/actions/marked"))),
'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k28d4"),[])),'</a></div><footer class="j-outcome-modal-footer j-pop-row j-last"><a href="#" class="js-outcome-done-button">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2940"),[])),"</a></footer></div>");return opt_sb?"":output.toString()};
;
jive.namespace("Modalizer");jive.Modalizer.ModalView=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.Modalizer;a.init=function(h){var e=this,f,g={};if(h.width&&h.width.match(/^(narrow|medium|wide)$/i)){f="jive-modal-"+h.width}else{if(h.width){g.width=h.width}else{f="jive-modal-medium"}}this.width=f;this.styles=g;this.opts=h;var d=function(j){var i=c(this).attr("href")||c(this).find("a:first").attr("href");if(i){e.modalize(i)}else{alert("No valid URL found to modalize")}j.preventDefault()};c(document).ready(function(){if(h.triggers){c.each(h.triggers,function(){c(""+this).click(d)})}if(h.liveTriggers){c.each(h.liveTriggers,function(){c("body").on("click",""+this,d)})}})};this.modalize=function(f,e){var d=this,g=this.width,i=this.styles,h=this.opts;d.emitP("launch",f).addCallback(function(o){var n=c("<div/>",{"class":"jive-modal j-modal"+(g?" "+g:""),id:"js-modalized"}).css(i);var m=d.separateScripts(o);var l=d.shiv(m[0]);var j=m[1];var k=!c.browser.msie||parseInt(c.browser.version,10)>8;k&&n.html(l);n.lightbox_me({destroyOnClose:true,closeFocusSelector:e?e:(h.triggers?h.triggers.join(", "):h.liveTriggers.join(", ")),onClose:h.onClose,onLoad:function(){if(!k){n.html(l);j()}}});if(k){j()}})}});define("apps/modalizer/views/modal_view",function(){return jive.Modalizer.ModalView});
;
jive.namespace("Modalizer");jive.Modalizer.ModalSource=jive.oo.Class.extend(function(a){a.init=function(b){this.method=b.method?b.method:"GET"};this.getConfirmation=function(b,d){var c=this;$j.ajax({url:b,type:c.method,dataType:"html",success:function(e){d(e)},error:function(e){require(["jquery","soy!jive.error.rest.soy.errorFinding"],function(g,f){g(f({href:window.location})).message({style:"error"})})}})}});define("apps/modalizer/models/modal_source",function(){return jive.Modalizer.ModalSource});
;
jive.namespace("Modalizer");jive.Modalizer.Main=jive.oo.Class.extend(function(a){a.init=function(c){var b=this;this.modalView=new jive.Modalizer.ModalView(c);this.modalSource=jive.Modalizer.ModalSource(c);this.modalView.addListener("launch",function(d,e){b.modalSource.getConfirmation(d,function(f){e.emitSuccess(f)})})};this.modalize=function(c,b){this.modalView.modalize(c,b)}});define("apps/modalizer/main",function(){return jive.Modalizer.Main});
;
define("apps/outcomes/actionView",["jquery","underscore","apps/shared/controllers/localexchange","apps/outcomes/viewUtil","apps/outcomes/outcomesMain","apps/outcomes/badgeView","apps/userpicker/main","apps/shared/views/loader_view","apps/modalizer/main"],function(h,y,c,p,q,s,m,t,o){var w=new o({width:"medium"});function e(C,B,A){this.labelSuffix=C;this.event=B;this.actionData=A}function g(A){A.sort(function(C,B){return p.outcomeTypeComparator(C.subject,B.subject)});return A}function k(J){if(J){J.preventDefault()}var A=h(this);var E={context:A,returnPopover:true,hoverSelection:true};var H=p.getEd(A),C=p.getContext(A);var N,G;if(C==="activity"){N=c.emitP("outcome.getAdditionalContentObjectActions",H).deferred();G=[]}else{N=[];G=c.emitP("outcome.getContentObjectActions",H).deferred()}var K=c.emitP("outcome.getOutcomeCreateActions",H).deferred().then(g);var F=setTimeout(D,500);var B;function D(){F=null;B=h("<div></div>");var O=new t({size:"small",showLabel:false,inline:true});O.appendTo(B);B.popover({context:A,onClose:function(){O.destroy()}})}function L(){if(F!=null){clearTimeout(F)}else{if(B){B.trigger("close")}}}h.when(K,N,G).then(function I(T,U,Q){L();var R=[],P=[],S=[];h.each(Q,function(){S.push(new e(this.subject.type+"."+this.verb,"reply."+this.subject.type+"."+this.verb))});var O=A.data("domActions");if(O){S=S.concat(O)}h.each(T,function(){var V;if(this.verb!="get"){V="outcome."+this.verb}R.push(new e(this.subject.name.toLowerCase()+"."+this.verb,V,JSON.stringify(this.subject)))});h.each(U,function(){P.push(new e(this.subject.type+"."+this.verb,"reply."+this.subject.type+"."+this.verb,JSON.stringify(h.extend(this.context,{nonOutcome:true}))))});h(jive.outcomes.action.actionMenu({outcomes:R,additionalActions:P,actions:S})).on("click","a.js-actionItem",function(X){var Y=h(this);var W=Y.data("event");if(W){var V=Y.data("actionData");if(V&&V.nonOutcome){j(W,V,A)}else{l(W,H,V,A,A.data("parentId"))}X.preventDefault()}else{if(Y.is(".js-modalize-action[href]")){w.modalize(Y.attr("href"),A);X.preventDefault()}}E.closeFunc()}).popover(E)},function M(){L();h(jive.outcomes.action.unknownError()).message({style:"error"});console.log("action button request(s) failed: ",arguments)})}var i={POST:"outcome.post",PUT:"outcome.put",DELETE:"outcome.delete"};var z={};function j(B,A,C){c.emitP(B,A,C)}function l(C,A,B,D,G){function F(I,H){return c.emitP(C,A,B,G,D,I,H)}var E=null;if(B){if(B.outcomeType){E=B.outcomeType}else{E=B}}r(E,A,C,B,D,F).then(function(I,H){F(I,H)})}function r(W,am,al,T,Q,P){var R=new h.Deferred(),ac=al,ad,H;if(T){H=T.outcomeType?T.outcomeType.name.toLowerCase():T.name.toLowerCase()}var ai;var U=false;if(al==i.PUT&&T.shareable){f(am,T,Q,P).then(function(){R.reject()});return R}function S(){ai.reposition()}function M(){this.callbacks=[];this.run=function(ao,an){return y.reduce(this.callbacks,function(aq,ap){return ap.call(this,aq)},ao,an)};this.addCallback=function(an){this.callbacks.push(an)}}function I(){function an(ap,ar,at){var au=new h.Deferred();var aq=h(jive.outcomes.action.confirmModal({outcomeType:at}));var ao={centered:true,onClose:function(){au.reject()}};aq.lightbox_me(ao).on("click","button[name='ok']",function(av){av.preventDefault();R.resolve();au.resolve();h(this).trigger("close")}).on("click","button[name='cancel']",function(av){av.preventDefault();au.reject();h(this).trigger("close")});return au}an(am,al,T).always(function(){Q.focus()}).then(function(){c.emit("outcome.expandCollapsedComments")})}if(ac==i.DELETE){var E={confirmUnmark:I};var X=new M();y.each(E,function(ao,an){if(W[an]){X.addCallback(ao)}});X.run();if(X.callbacks.length==0){R.resolve()}return R}var ah=new M(),aj=new M(),O=new M(),Z=new M();var N={shareable:".shareable",urlAllowed:".urlAllowed",generalNote:".generalNote"};y.each(N,function(an,ao){if(W&&W[ao]){ah.addCallback(function(){this.find(an).show()})}});function F(ao){var ap="input[name='send-pending-share']";var au="input[name='pending-share-users']";var at="textarea[name='pending-share-message']";var ar="textarea[name='pending-alert-note']";var aq;function an(){var av=h(ap).is(":checked");if(av){ao.find(".js-pending-share").show()}else{ao.find(".js-pending-share").hide()}}ao.find(ap).on("change",an);ao.on("click","button[name='success']",function(az){az.preventDefault();c.removeListener("heightChanged",S);if(h(this).prop("disabled")){return}var aw=ao.find(ar).val();var ay=null;var ax=null;var aA=false;var av=ao.find(ap).is(":checked");if(av){var aB=ao.find(au).val().split(",");aB=h.map(aB,function(aC){return parseInt(aC,10)});ay=h.map(aB,function(aC){return"people/api/core/v3/people/"+aC});ax=ao.find(at).val();aA=true}aq.teardown();R.resolve(aw,{approvers:ay,message:ax,shared:aA})}).on("click","button[name='cancel']",function(av){c.removeListener("heightChanged",S);R.reject();av.preventDefault();aq.teardown()});aq=new m({userMessages:[{type:"warn",render:function(){return jive.outcomes.action.pendingAlertPermissionWarning({privateContent:a(am,ad)})}}],messageDelay:100,canInvitePartners:true,object:{objectID:am.id,objectType:am.type},$input:ao.find(au),multiple:true,listAllowed:true,browseAllowed:true});aq.addListener("selectedUsersChanged",function(){ai.reposition();C()});an()}function L(){var ap=["outdated","official","finalized","wip"];for(var ao=0;ao<ap.length;ao++){var an=ap[ao];if(H!=an){c.emit("outcome.removeBadge",am,{name:an});if(an==="finalized"){c.emit("outcome.expandCollapsedComments")}}}}function ae(ap){var at=/((?:[a-z][a-z\\.\\d\\-]+)\\.(?:[a-z][a-z\\-]+))(?![\\w\\.])/;var ao="input#outdated-url";var ar="#outdated-url-display";var aq="input#outdated-link";var an=function(){var au=h.trim(ap.find(aq).val());if(au.length>0){if(au.indexOf("://")==-1){au="http://"+au}h.ajax({type:"GET",url:_jive_base_absolute_url+"/__services/v2/rest/rteLinks",data:{href:au},dataFilter:function(aw,av){return aw.slice(aw.indexOf("{"))}}).done(function(av){if(av.value.length>0&&!av.customTitle){if(av.macroName){ap.find(ao).val(au);ap.find(ar).html(h('<a href="'+au+'" class="font-color-meta-light">'+au.substr(au.indexOf("://")+3)+"</>"));ap.find(aq).val(av.title).addClass("font-color-link")}else{ap.find(ao).val(av.value);ap.find(ar).html(h('<a href="'+av.value+'" class="font-color-meta-light">'+av.value.substr(av.value.indexOf("://")+3)+"</>"));ap.find(aq).val(av.title).addClass("font-color-link")}}})}};ap.on("click","button[name='success']",function(aw){aw.preventDefault();var au=h.trim(ap.find(ao).val());var av=h.trim(ap.find(aq).val());if(au.length==0){if(av.indexOf("://")==-1){if(av.length>0&&at.test(av.split("/")[0])){au="http://"+av}else{av=""}}else{if(av.indexOf("http")==0){au=av}else{au="";av=""}}}R.resolve(undefined,{url:au,title:av});L()}).on("click","button[name='cancel']",function(au){R.reject();au.preventDefault()}).on("blur",aq,an).on("paste",aq,function(au){setTimeout(an,0)})}function J(ao){var an="textarea[name='outcome-note']";ao.on("click","button[name='success']",function(aq){aq.preventDefault();if(h(this).prop("disabled")){return}var ap=ao.find(an).val();R.resolve(ap)}).on("click","button[name='cancel']",function(ap){R.reject();ap.preventDefault()})}function D(an){an.on("click","button[name='ok']",function(ao){ao.preventDefault();R.resolve();h(this).trigger("close");L()}).on("click","button[name='cancel']",function(ao){ao.preventDefault();R.reject();h(this).trigger("close")})}var ak={shareable:F,urlAllowed:ae,generalNote:J,confirmExclusion:D};y.each(ak,function(ao,an){if(W&&W[an]){Z.addCallback(function(){ao(this)})}});if(ah.callbacks.length==0&&(W&&!W.confirmExclusion)){R.resolve();return R}function A(){if(!T){return R.resolve()}var aq;var ao;var at=h.Deferred();if(T.outcomeType){aq=T.outcomeType.name.toLowerCase();if(T.outcomeType.communityAudience){ao="true"===T.outcomeType.communityAudience}}else{aq=T.name.toLowerCase();if(T.communityAudience){ao="true"===T.communityAudience}}if(W.confirmExclusion){var ar=aq;var ap=[];if("finalized"==ar){ap=["official","outdated","wip"]}else{if("outdated"==ar){ap=["official","finalized","wip"]}else{if("official"==ar){ap=["finalized","outdated","wip"]}else{if("wip"==ar){ap=["finalized","outdated","official"]}}}}var an=h("li.js-outcome-type-"+ap[0]).length>0||h("li.js-outcome-type-"+ap[1]).length>0||h("li.js-outcome-type-"+ap[2]).length>0;if(!an){R.resolve();at.reject();return at}}c.emitP("outcome.prepareForShareActionPopup",am).then(function(au){c.emitP("outcome.displayFake",am,aq).then(function(ay){var aw;if(ao){if("activity"==p.getContext(Q)){var aE;var av=p.getContextMeta(Q);if(av&&"inbox"==av){aE=$j("#j-comm-activity-list")}else{aE=$j("#j-stream-item-list");if(aE.length==0){aE=$j("#j-comm-activity-list")}}if(aE&&aE.length>0){aw=p.getRootCommunityName(aE)}}else{aw=T.rootCommunityName?T.rootCommunityName:p.getRootCommunityName(Q)}}ad=p.nearest(ay,Q,aq);var aA="textarea[name='outcome-note']";var aD=ad.parent().filter(".js-outcome-badge-container-top");aD.addClass("j-fake-badge");aD.find(".js-outcome-badge").find("div").hide().end().find("[class*=j-outcome-type]").removeClass("j-outcome-badge").end().addClass("j-outcome-badge").removeClass("j-fake-badge");var ax=!!T.predecessor;var az={isUpdate:ax,isTakeOwnership:ax&&T.predecessor.outcomeType.name==T.outcomeType.name,existingShare:ax&&!!T.predecessor.shared,shareText:h("<div/>").html(au).text(),outcomeTypeName:aq,notShareable:!W.shareable,communityName:aw};ai={context:ad,onClose:function(){ay.filter(".js-fake-badge").remove();aD.removeClass("j-fake-badge")},returnPopover:true,hoverSelection:false,accessibleBoundaryType:"dialog",additionalContainerSelector:"#user-autocomplete-modal-container, .js-pending-permissionWarning"};var aB={centered:true,onClose:function(){ay.filter(".js-fake-badge").remove();aD.removeClass("j-fake-badge");aD.find(".js-outcome-badge").find("div").show().end().find("[class*=j-outcome-type]").addClass("j-outcome-badge").end().removeClass("j-outcome-badge")}};var aC;if(T.confirmExclusion){aC=h(jive.outcomes.action.tloExclusionModal({outcomeType:T}));aC.lightbox_me(aB);aC.options=aB}else{U=true;aC=h(jive.outcomes.action.markAlertModal(az));aC.popover(ai).on("click","button[name='success']",function(aF){aF.preventDefault();if(h(this).prop("disabled")){return}ai.closeFunc()}).on("click","button[name='cancel']",function(aF){ai.closeFunc();aF.preventDefault()});aC.options=ai}at.resolve(aC)})});return at}var ag={shareable:{sendMessage:"input[name='send-pending-share']",targetUserIds:"input[name='pending-share-users']",shareText:"textarea[name='pending-share-message']",noteText:"textarea[name='pending-alert-note']"},urlAllowed:{urlSelector:"input#outdated-link"},generalNote:{noteSelector:"textarea[name='outcome-note']"}};y.each(ag,function(an,ao){if(W&&W[ao]){aj.addCallback(function(ap){var aq=this;ap[ao]={};y.each(ag[ao],function(at,ar){if(aq.find(at).is(":checkbox")){ap[ao][ar]=aq.find(at).is(":checked")}else{ap[ao][ar]=aq.find(at).val()}});return ap})}});function ab(an){return an&&an.length>0}function aa(ap,an,ao){if(an.sendMessage){return ab(an.targetUserIds)&&ab(an.shareText)}return true}function V(aq,an,ap,ao){if(ao.noteRequired){return ab(aq)}return true}var K={shareable:{sendMessage:aa,targetUserIds:aa,shareText:aa,noteText:ab},generalNote:{noteSelector:V}};y.each(K,function(ao,an){if(W&&W[an]){O.addCallback(function(ar){var aq=this;var ap=true;y.each(K[an],function(at,au){ap=ap&&at(aq[an][au],aq[an],au,W)});return !!ar&&!!ap})}});var Y;var af;var B;function G(){var an=h.Deferred();if(W&&W.urlAllowed&&(h("li.js-outcome-type-finalized").length>0||h("li.js-outcome-type-official").length>0||h("li.js-outcome-type-outdated").length>0||h("li.js-outcome-type-wip").length>0)){d(am,al,T).then(function(){an.resolve()})}else{an.resolve()}return an}G().then(function(){if(!T){return R.resolve()}A().then(function(an){Y=an;ah.run(null,Y);if(U){S()}Z.run(null,Y);y.each(ag,function(ao,ap){if(W[ap]){y.each(ag[ap],function(ar,aq){C();Y.find(ar).on("change keyup blur",function(){af=aj.run({},Y)});Y.find(ar).on("change keyup blur",function(){B=O.run(true,af);if(B){Y.find("button[name='success']").prop("disabled",false)}else{Y.find("button[name='success']").prop("disabled",true)}})})}})}).always(function(){Q.focus()})});function C(){af=aj.run({},Y);B=O.run(true,af);if(B){Y.find("button[name='success']").prop("disabled",false)}else{Y.find("button[name='success']").prop("disabled",true)}}return R}function b(C,D,B){if(!z[C]){z[C]={}}var A=z[C];A[D]=B}function v(C){var D=h(".js-tlo",C||document);if(D.length){var A=p.getEd(D);var B=h(".js-tlo-action-button",C||document).closest("li");c.emitP("outcome.getOutcomeActions",A).then(function(E){B.hide();h.each(E,function(){var F=B.find(".js-outcome-method-"+this.verb+".js-outcome-type-"+this.subject.name.toLowerCase()).closest("li");F.show()})})}}c.addListener("outcome.doAction",l);c.addListener("outcome.created",function(A,B,D){var C=jive.outcomes.action.createdMessage({suffix:D?"takeOwnership":B.outcomeType.name.toLowerCase()});h(C).message({style:"success"});v()});c.addListener("outcome.deleted",function(A,C){var B=jive.outcomes.action.deletedMessage({suffix:C.name.toLowerCase()});h(B).message({style:"success"});v()});c.addListener("outcome.updated",function(B,C,A){var D=jive.outcomes.action.updatedMessage({suffix:A?"addAssignees":C.outcomeType.name.toLowerCase()});h(D).message({style:"success"});v()});c.addListener("outcome.resync",function(){v()});c.addListener("outcome.created",n);c.addListener("outcome.warnEdit",function(D,A,B,C){if(D&&A.type){c.emitP("outcome.get",A).then(function(E){var H=false;var F;for(var G=0;G<E.length;++G){if(E[G].outcomeType.confirmContentEdit&&E[G].outcomeType.confirmContentEdit=="true"&&E[G].user&&E[G].user.id!=B){H=true;F=E[G].user;break}}if(H){u(F).then(function(){document.location.href=h(C).attr("href")})}else{document.location.href=h(C).attr("href")}})}else{document.location.href=h(C).attr("href")}});function d(B,D,E){var F=new h.Deferred();var C=h(jive.outcomes.action.tloExclusionModal({outcomeType:E}));var A={centered:true,onClose:function(){F.reject()}};C.lightbox_me(A).on("click","button[name='ok']",function(G){G.preventDefault();F.resolve();h(this).trigger("close")}).on("click","button[name='cancel']",function(G){G.preventDefault();F.reject();h(this).trigger("close")});return F}function u(B){var D=new h.Deferred();var C=h(jive.outcomes.action.inProgressConfirmModal({user:B}));var A={centered:true,onClose:function(){D.reject()}};C.lightbox_me(A).on("click","button[name='ok']",function(E){D.resolve();h(this).trigger("close")}).on("click","button[name='cancel']",function(E){E.preventDefault();D.reject();h(this).trigger("close")});return D}function f(A,B,D,F){var C=h.Deferred();c.emitP("outcome.prepareForShareActionPopup",A).then(function(G){E(A,G).then(F).then(function(){C.resolve()}).always(function(){D.focus()})});function E(H,G){var I=new h.Deferred();c.emitP("outcome.displayFake",H,"pending").then(function(P){var Q=p.nearest(P,D,"pending");var L={context:Q,onClose:function(){c.removeListener("heightChanged",O);I.reject()},returnPopover:true,hoverSelection:false,accessibleBoundaryType:"dialog",additionalContainerSelector:"#user-autocomplete-modal-container, .js-pending-permissionWarning"};function O(){L.reposition()}c.addListener("heightChanged",O);I.always(function(){L.closeFunc()});var J="input[name='pending-share-users']";var N="textarea[name='pending-share-message']";var R=h(jive.outcomes.action.pendingAssigneeModal({shareText:G}));R.popover(L).on("click","button[name='success']",function(V){V.preventDefault();if(h(this).prop("disabled")){return}var W=R.find(J).val().split(",");W=h.map(W,function(X){return parseInt(X,10)});if(W.indexOf(_jive_current_user.ID)<0){W.unshift(_jive_current_user.ID)}var U=h.map(W,function(X){return"people/api/core/v3/people/"+X});var T=R.find(N).val();var S=null;I.resolve(S,{approvers:U,message:T,shared:true})}).on("click","button[name='cancel']",function(S){I.reject();S.preventDefault()});var M=new m({userMessages:[{type:"warn",render:function(){return jive.outcomes.action.pendingAlertPermissionWarning({privateContent:a(H,Q)})}}],messageDelay:100,canInvitePartners:true,object:{objectID:H.id,objectType:H.type},$input:R.find(J),multiple:true,listAllowed:true,browseAllowed:true});M.addListener("selectedUsersChanged",function(){L.reposition();K()});function K(){var T=R.find(J).val();var S=h.trim(R.find(N).val());if(T.length<=0||S.length<=0){R.find("button[name='success']").prop("disabled",true)}else{R.find("button[name='success']").prop("disabled",false)}}R.find(N).on("change keyup blur",K);K()},function(){I.reject()});return I}return C}function n(A,C){var B=C.outcomeType.name.toLowerCase();if(B!="pending"){return}var E=h(".js-outcome-badge-container.js-ed-"+A.type+"-"+A.id);var D=E.find(".js-outcome-badge.js-outcome-type-"+B);c.emitP("outcome.prepareActionTooltip").then(function(F){if(F.length>1){return}x(D)})}function x(A){var B=jive.outcomes.action.actionTooltip();h(B).popover({context:A,closeSelector:".js-outcome-done-button"})}function a(E,B){if((E.type===102||E.type===105||E.type===1||E.type===2)&&B){var D=B.parent();if((E.type===1||E.type===102)&&D&&D.siblings("div.jive-content-personal").length>0){return true}else{if(D){var C=p.getParentEd(D);if(C&&C.type&&(C.type===102||C.type===1)){var A=$j("ul#js-outcome-badge-container-"+C.type+"-"+C.id);return A&&A.siblings("div.jive-content-personal").length>0}}}}return false}return{clickHandler:k,tloActionButtonRefresh:v,setActionHandler:b,displayTooltip:n}});
;
goog.provide("jive.outcomes.helpful.displayHelpfulCounts");
jive.outcomes.helpful.displayHelpfulCounts=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span class="js-outcome-helpful-counts-container j-outcome-helpful-counts-container font-color-okay" data-object-type="',soy.$$escapeHtml(opt_data.objectType),'" data-object-id="',soy.$$escapeHtml(opt_data.objectId),'" data-helpful-count="',soy.$$escapeHtml(opt_data.helpfulCount),'" data-overall-count="',soy.$$escapeHtml(opt_data.overallCount),'" data-display-overall="',soy.$$escapeHtml(opt_data.displayOverall),
'" >');jive.outcomes.helpful.msgHelpfulCount(opt_data,output);output.append("</span>");return opt_sb?"":output.toString()};
;
define("apps/outcomes/helpfulModel",["jquery","apps/shared/models/core_deferred"],function(f,c){function e(h){return a(h).then(function(i){if(i.markHelpful){return c.runQuery(i.markHelpful())}})}function b(h){return a(h).then(function(i){if(i.unmarkHelpful){return c.runQuery(i.unmarkHelpful())}})}function g(h){return a(h).then(function(i){if(i.markUnhelpful){return c.runQuery(i.markUnhelpful())}})}function d(h){return a(h).then(function(i){if(i.unmarkUnhelpful){return c.runQuery(i.unmarkUnhelpful())}})}function a(h){return c.getObject(h.type,h.id)}return{createHelpful:e,destroyHelpful:b,createUnhelpful:g,destroyUnhelpful:d}});
;
define("apps/outcomes/helpfulMain",["jquery","apps/shared/controllers/localexchange","apps/outcomes/helpfulModel"],function(c,e,d){function f(h){return d.createHelpful(h).done(function(){e.emit("outcome.helpfulCreated",h)})}function a(h){return d.destroyHelpful(h).done(function(){e.emit("outcome.helpfulDeleted",h)})}function g(h){return d.createUnhelpful(h).done(function(){e.emit("outcome.unhelpfulCreated",h)})}function b(h){return d.destroyUnhelpful(h).done(function(){e.emit("outcome.unhelpfulDeleted",h)})}e.addListener("outcome.createHelpful",f);e.addListener("outcome.deleteHelpful",a);e.addListener("outcome.createUnhelpful",g);e.addListener("outcome.deleteUnhelpful",b);return{createHelpful:f,destroyHelpful:a,createUnhelpful:g,destroyUnhelpful:b}});
;
define("apps/outcomes/helpfulView",["jquery","underscore","apps/shared/controllers/localexchange","apps/outcomes/viewUtil","apps/outcomes/helpfulMain"],function(b,t,a,p){function l(v){var u=b(this);if(u.attr("data-command")==="mark"){k(u)}else{o(u)}}function k(u){if(u.attr("data-type")==="helpful"){r(u)}else{i(u)}}function o(u){if(u.attr("data-type")==="helpful"){m(u)}else{j(u)}}function r(v){var u=v.parent(".js-outcome-helpful-container"),w=p.getEd(u),y=u.find(".js-unhelpful-link"),x=y.hasClass("js-selected");a.emit("outcome.createHelpful",w);u.find(".js-icon-helpful").addClass("active");y.removeClass("js-selected").removeClass("j-selected");v.addClass("js-selected").addClass("j-selected");y.attr("data-command","mark");v.attr("data-command","unmark");if(x){h(w)}else{e(w)}}function m(v){var u=v.parent(".js-outcome-helpful-container"),w=p.getEd(u),x=u.find(".js-unhelpful-link");a.emit("outcome.deleteHelpful",w);u.find(".js-selected").removeClass("js-selected").removeClass("j-selected");u.find(".js-icon-helpful").removeClass("active");v.attr("data-command","mark");x.attr("data-command","mark");s(w)}function i(y){var v=y.parent(".js-outcome-helpful-container"),w=p.getEd(v),u=v.find(".js-helpful-link"),x=u.hasClass("js-selected");a.emit("outcome.createUnhelpful",w);v.find(".js-selected").removeClass("js-selected").removeClass("j-selected");v.find(".js-icon-helpful").addClass("active");y.addClass("js-selected").addClass("j-selected");y.attr("data-command","unmark");u.attr("data-command","mark");if(x){d(w)}else{q(w)}}function j(x){var v=x.parent(".js-outcome-helpful-container"),w=p.getEd(v),u=v.find(".js-helpful-link");a.emit("outcome.deleteUnhelpful",w);v.find(".js-selected").removeClass("js-selected").removeClass("j-selected");v.find(".js-icon-helpful").removeClass("active");x.attr("data-command","mark");u.attr("data-command","mark");n(w)}function h(u){g(1,0,u)}function q(u){g(0,1,u)}function e(u){g(1,1,u)}function d(u){g(-1,0,u)}function n(u){g(0,-1,u)}function s(u){g(-1,-1,u)}function g(w,x,v){var y=f(v),z=y.data();if(y.length){z=t.extend(z,c(y,w,x));var u=jive.outcomes.helpful.displayHelpfulCounts(z);y.replaceWith(u)}}function f(u){return b('.js-outcome-helpful-counts-container[data-object-type="'+u.type+'"][data-object-id="'+u.id+'"]')}function c(w,u,v){return{helpfulCount:w.data("helpfulCount")+u,overallCount:w.data("overallCount")+v}}return{clickHandler:l}});
;
define("apps/discussion_app/models/question_source",["apps/shared/models/rest_service","lib/jiverscripts/src/conc/observable","lib/jiverscripts/src/conc/promise"],function(a,c,b){return a.extend(function(d,e){c(this);d.resourceType="message";d.pluralizedResourceType=d.resourceType;this.init=function(f){this.options=f;e.init.call(this,this.options)};this.getQuestion=function(g){var f=this.RESOURCE_ENDPOINT+"/"+g+"/question";return this.commonAjaxRequest(new b(),"GET",{url:f,data:{}})};this.markAssumedAnswered=function(g){var f=this.RESOURCE_ENDPOINT+"/"+g+"/assumedanswered";return this.commonAjaxRequest(new b(),"POST",{url:f,data:{}})};this.markCorrect=function(h,f){var g=this.RESOURCE_ENDPOINT+"/"+h+"/"+f+"/correct";return this.commonAjaxRequest(new b(),"POST",{url:g,data:{}})};this.unmarkCorrect=function(h,f){var g=this.RESOURCE_ENDPOINT+"/"+h+"/"+f+"/unmark";return this.commonAjaxRequest(new b(),"POST",{url:g,data:{}})}})});
;
define("apps/outcomes/correctAnswerHelper",["jquery","apps/shared/controllers/localexchange","apps/discussion_app/models/question_source"],function(d,b,e){var a=new e();function c(f,g,i){var h=g.closest(".j-sub-activity-items").data("threadId");var j=a.markCorrect(h,f.id).then(function(k){b.emit("reply.message.correctAnswer.created",k);b.emit("outcome.clearEntityCache",{type:1,id:h});g.closest("div.reply").addClass("j-act-correct-answer")});if(i){i.proxy(j)}return j}return{markCorrect:c}});
;
require(["jquery","underscore","apps/shared/controllers/localexchange"],function(c,a,b){b.addLazyListener("renderedContent",["apps/outcomes/badgeView"],function(e,d){e.refresh(d)},function(d){return c(".js-outcome-badge-container",d).not("[data-no-hydrate]").length>0});b.addLazyListener("reply.message.correctAnswer",["apps/outcomes/correctAnswerHelper"],function(d,e,f,g){d.markCorrect(e,f,g)},function(d,e){return d.id>0&&e});b.addLazyListener("renderedContent",["apps/outcomes/summaryView"],function(e,d){e.summarize(d)},function(d){return c(".js-outcome-summary-container",d).length>0});b.addLazyListener("renderedContent",["apps/outcomes/actionView"],function(e,d){e.tloActionButtonRefresh(d)},function(d){return c(".js-tlo-action-button",d).length>0});c(function(){c("body").off(".outcomes").on("vclick.outcomes","a.js-outcome-button",function(d){require(["apps/outcomes/actionView"],a.bind(function(e){e.clickHandler.call(this)},this));d.preventDefault()}).on("vclick.outcomes",".js-outcome-badge-container .js-outcome-badge:not(.js-outcome-badge-noclick)",function(d){require(["apps/outcomes/badgeView"],a.bind(function(e){e.clickHandler.call(this)},this));d.preventDefault()}).on("vclick.outcomes",".js-outcome-history-link",function(d){require(["apps/outcomes/historyView"],a.bind(function(e){c(this).parent("j-pop-main").attr("id");e.clickHandler.call(this)},this));d.preventDefault()}).on("vclick.outcomes",".j-outcome-link-details",function(d){require(["apps/outcomes/summaryView"],a.bind(function(e){e.clickHandler.call(this)},this))}).on("vclick.outcomes",".js-outcome-helpful-container .js-action-link",function(d){require(["apps/outcomes/helpfulView"],a.bind(function(e){e.clickHandler.call(this)},this));d.preventDefault()});require(["apps/outcomes/actionView"],function(d){d.tloActionButtonRefresh()})})});
;
goog.provide("jive.integration.tiles.viewstyle.outcomes");jive.integration.tiles.viewstyle.outcomes=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.outcomes.badge.badgeContainer({objectType:opt_data.type,objectId:opt_data.id},output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.userLink");
jive.integration.tiles.viewstyle.userLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,"/people/"+encodeURIComponent(opt_data.username))),'" class="linkText jiveTT-hover-user ',opt_data.userIsPartner?"j-partner ":"",'" target="_action_link" data-userid="',soy.$$escapeHtml(opt_data.userID),'">',soy.$$filterNoAutoescape(opt_data.displayName),"</a>");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.titleAndAuthor");
jive.integration.tiles.viewstyle.titleAndAuthor=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-title" role="heading">',opt_data.iconClass?'<span class="jive-icon-big '+soy.$$escapeHtml(opt_data.iconClass)+"\" role='img'></span>":"",'<a href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.action.url)),'">',soy.$$escapeHtml(opt_data.subject),'</a></div><div class="j-byline font-color-meta">');var param16=new soy.StringBuilder;
jive.integration.tiles.viewstyle.userLink(opt_data.originalAuthor,param16);var param20=new soy.StringBuilder;jive.integration.tiles.viewstyle.userLink(opt_data.lastModifiedBy,param20);jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k18ff"),arg0:param16.toString(),arg1:soy.$$escapeHtml(opt_data.creationDate?_jive_moment(parseFloat(opt_data.creationDate)?parseFloat(opt_data.creationDate):opt_data.creationDate).add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("lll"):
""),arg2:param20.toString(),arg3:soy.$$escapeHtml(opt_data.modificationDate?_jive_moment(parseFloat(opt_data.modificationDate)?parseFloat(opt_data.modificationDate):opt_data.modificationDate).add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("lll"):""),noAutoEscape:true},output);output.append("</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.header");jive.integration.tiles.viewstyle.header=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(!opt_data.suppressOutcomes)jive.integration.tiles.viewstyle.outcomes(opt_data,output);if(!opt_data.suppressTitle)jive.integration.tiles.viewstyle.titleAndAuthor(opt_data,output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.contentBody");jive.integration.tiles.viewstyle.contentBody=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-content-body">',soy.$$filterNoAutoescape(opt_data.body),"</div>");return opt_sb?"":output.toString()};
;
if(!jive.share){jive.share=(function(){var a;require(["jive/dispatcher"],function(b){b.listen("share",function(c){require(["apps/share/main"],function(d){a=a||new d();a.showModal(c.objectId,c.objectType,c.relationshipId)})})});return{}})()};
;
goog.provide("jive.soy.share.control");
jive.soy.share.control=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href="#" class="',opt_data.type=="text"?"share-link j-meta-control lnk ":opt_data.type=="largeButton"?"j-social-action ":"",opt_data.classes?soy.$$escapeHtmlAttribute(opt_data.classes):"",'" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k3aa2"),[])),'" data-command="share" data-object-type="',soy.$$escapeHtmlAttribute(opt_data.objectType),'" data-object-id="',soy.$$escapeHtmlAttribute(opt_data.objectId),
'"',opt_data.contentPlaceRelInfo?'data-relationship-id="'+soy.$$escapeHtmlAttribute(opt_data.contentPlaceRelInfo.relationshipID)+'"':"",">",opt_data.icon?"<span"+(opt_data.type=="smallButton"?' class="j-ui-elem"':"")+'><span class="jive-icon-glyph icon-share2"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aa1"),[]))+"</span>":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aa1"),[])),"</a>");return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.acclaim.renderIcon");
jive.eae.acclaim.renderIcon=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.acclaimType=="like"?opt_data.iconType=="small"?'<span class="jive-icon-glyph icon-thumbs-up '+(opt_data.iconClass?soy.$$escapeHtml(opt_data.iconClass):"")+'"></span>':opt_data.iconType=="medium"?'<span class="jive-icon-glyph icon-thumbs-up2"><span class="icon-variant-unlike"></span><span class="icon-variant-disabled"></span></span>':opt_data.iconType=="news"?'<span class="jive-icon-glyph icon-thumbs-up2"></span>':
"":"");return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.acclaim.getAcclaimTextByType");
jive.eae.acclaim.getAcclaimTextByType=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;switch(opt_data.acclaimType){case "same_question":output.append(opt_data.applied?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k39"),[])));break;default:output.append(opt_data.applied?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k27"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k24"),[])))}return opt_sb?
"":output.toString()};
;
goog.provide("jive.eae.acclaim.expressLike");
jive.eae.acclaim.expressLike=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var likeBody__soy3=new soy.StringBuilder;jive.eae.acclaim.renderIcon(opt_data,likeBody__soy3);if(!opt_data.suppressLikeText)jive.eae.acclaim.getAcclaimTextByType(opt_data,likeBody__soy3);likeBody__soy3=likeBody__soy3.toString();if(!opt_data.disabled){output.append("<a ",opt_data.id?'id="'+soy.$$escapeHtml(opt_data.id)+'"':"",'class="',opt_data.classes?soy.$$escapeHtml(opt_data.classes):""," ",soy.$$escapeHtml(opt_data.type),
'" data-command="',soy.$$escapeHtml(opt_data.type),'" data-object-id="',soy.$$escapeHtml(opt_data.objectId),'" data-object-type="',soy.$$escapeHtml(opt_data.objectType),'" data-acclaim-type="',opt_data.acclaimType?soy.$$escapeHtml(opt_data.acclaimType):"like",'"',opt_data.followObjectType&&opt_data.followObjectId?'data-follow-object-type="'+soy.$$escapeHtml(opt_data.followObjectType)+'" data-follow-object-id="'+soy.$$escapeHtml(opt_data.followObjectId)+'"':"",'title="');jive.eae.acclaim.getAcclaimTextByType(opt_data,
output);output.append('" aria-label="');jive.eae.acclaim.getAcclaimTextByType(opt_data,output);output.append('" href="#">',soy.$$filterNoAutoescape(likeBody__soy3),"</a>")}else output.append(soy.$$filterNoAutoescape(likeBody__soy3));return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.acclaim.acclaimContainerMedium");
jive.eae.acclaim.acclaimContainerMedium=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span id="acclaim-container-',soy.$$escapeHtml(opt_data.objectType),"-",soy.$$escapeHtml(opt_data.objectId),'" data-type="medium" data-can-apply="',soy.$$escapeHtml(opt_data.canApply),'" data-acclaim-type="',soy.$$escapeHtml(opt_data.acclaimType),'" data-acclaim-count="',soy.$$escapeHtml(opt_data.acclaimCount),'" class="js-acclaim-container acclaim-container acclaim-like-container',!opt_data.canApply?
" j-disabled":"",'"><span>');if(opt_data.canApply)jive.eae.acclaim.expressLike(soy.$$augmentMap(opt_data,{disabled:!opt_data.canApply,iconType:"medium",type:opt_data.applied?"uncredit":"credit",classes:"jive-acclaim-likelink j-social-action",suppressLikeText:false}),output);else{output.append('<span class="j-social-action">');jive.eae.acclaim.renderIcon({acclaimType:opt_data.acclaimType,iconType:"medium",iconClass:opt_data.iconClass},output);jive.eae.acclaim.getAcclaimTextByType(opt_data,output);
output.append("</span>")}var param45=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:opt_data.acclaimCount,type:"showlikescount"},param45);jive.eae.acclaim.count(soy.$$augmentMap(opt_data,{command:"showAcclaim",count:opt_data.acclaimCount,acclaimType:opt_data.acclaimType,classes:"j-people-count j-rc3 jive-acclaim-likedlink",accessibilityLinkLabel:param45.toString()}),output);output.append("</span></span>");return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.acclaim.activityAcclaimLinkContainer");
jive.eae.acclaim.activityAcclaimLinkContainer=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.showIcon)jive.eae.acclaim.renderIcon({acclaimType:opt_data.acclaimType,iconType:"small",showGlyph:opt_data.showGlyph,iconClass:opt_data.iconClass},output);output.append('<span id="acclaim-container-',soy.$$escapeHtml(opt_data.objectType),"-",soy.$$escapeHtml(opt_data.objectId),'" class="acclaim-container"><span id="jive-acclaim-like-container-',soy.$$escapeHtml(opt_data.objectType),
"-",soy.$$escapeHtml(opt_data.objectId),'" data-acclaim-count="',soy.$$escapeHtml(opt_data.acclaimCount),'" data-can-apply="',soy.$$escapeHtml(opt_data.canApply),'" data-type="',opt_data.type?soy.$$escapeHtml(opt_data.type):"mini",'" data-show-icon="',soy.$$escapeHtml(opt_data.showIcon),'"',opt_data.followObjectType&&opt_data.followObjectId?'data-follow-object-type="'+soy.$$escapeHtml(opt_data.followObjectType)+'" data-follow-object-id="'+soy.$$escapeHtml(opt_data.followObjectId)+'"':"",'class="js-acclaim-container acclaim-like-container',
opt_data.acclaimType!="same_question"?"":"",'"><span class="j-social-action">');jive.eae.acclaim.expressLike(soy.$$augmentMap(opt_data,{disabled:!opt_data.canApply,iconType:"none",type:opt_data.applied?"uncredit":"credit",applied:opt_data.applied,classes:"jive-acclaim-likelink",acclaimType:opt_data.acclaimType,followObjectType:opt_data.followObjectType,followObjectId:opt_data.followObjectId,suppressLikeText:false}),output);output.append(" ");var param66=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:opt_data.acclaimCount,
type:"showlikescount"},param66);jive.eae.acclaim.count(soy.$$augmentMap(opt_data,{command:"showAcclaim",count:opt_data.acclaimCount,acclaimType:opt_data.acclaimType,classes:"jive-acclaim-likedlink",text:"("+soy.$$escapeHtml(opt_data.acclaimCount)+")",accessibilityLinkLabel:param66.toString()}),output);output.append("</span></span></span>");return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.acclaim.activityAcclaimLinkContainerNews");
jive.eae.acclaim.activityAcclaimLinkContainerNews=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span class="font-color-meta-light j-brick-meta"><span id="acclaim-container-',soy.$$escapeHtml(opt_data.objectType),"-",soy.$$escapeHtml(opt_data.objectId),'" class="acclaim-container"><span id="jive-acclaim-like-container-',soy.$$escapeHtml(opt_data.objectType),"-",soy.$$escapeHtml(opt_data.objectId),'" data-acclaim-count="',soy.$$escapeHtml(opt_data.acclaimCount),
'" data-can-apply="',soy.$$escapeHtml(opt_data.canApply),'" data-type="',opt_data.type?soy.$$escapeHtml(opt_data.type):"mini",'"',opt_data.followObjectType&&opt_data.followObjectId?'data-follow-object-type="'+soy.$$escapeHtml(opt_data.followObjectType)+'" data-follow-object-id="'+soy.$$escapeHtml(opt_data.followObjectId)+'"':"",'class="js-acclaim-container acclaim-like-container',opt_data.acclaimType!="same_question"?"":"",'">');jive.eae.acclaim.expressLike(soy.$$augmentMap(opt_data,{disabled:!opt_data.canApply,
iconType:"news",type:opt_data.applied?"uncredit":"credit",applied:opt_data.applied,classes:"jive-acclaim-likelink",acclaimType:opt_data.acclaimType,followObjectType:opt_data.followObjectType,followObjectId:opt_data.followObjectId,suppressLikeText:true}),output);output.append(" ");var param54=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:opt_data.acclaimCount,type:"showlikescount"},param54);jive.eae.acclaim.count(soy.$$augmentMap(opt_data,{command:"showAcclaim",count:opt_data.acclaimCount,
acclaimType:opt_data.acclaimType,classes:"jive-acclaim-likedlink lnk",text:false,accessibilityLinkLabel:param54.toString()}),output);output.append("</span></span></span>");return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.acclaim.acclaimControl");
jive.eae.acclaim.acclaimControl=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;switch(opt_data.type){case "medium":jive.eae.acclaim.acclaimContainerMedium(opt_data,output);break;case "mini":jive.eae.acclaim.activityAcclaimLinkContainer(opt_data,output);break;case "news":jive.eae.acclaim.activityAcclaimLinkContainerNews(opt_data,output);break;case "small":output.append('<span class="js-liking-control j-liking-control">');jive.eae.acclaim.activityAcclaimLinkContainer(opt_data,output);
output.append("</span>");break}return opt_sb?"":output.toString()};
;
define("apps/core_acclaim/models/core_acclaim_source",["apps/shared/models/rest_service","jive/dispatcher"],function(a,b){return jive.oo.Class.extend(function(d,c){jive.conc.observable(this);c.resourceType="acclaim";c.pluralizedResourceType=c.resourceType;this.getCredits=function(f,h,e){var g=this.RESOURCE_ENDPOINT+"/"+f+"/"+h+"/scoredisplay";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:g,data:{ratingType:e}})};this.getCreditData=function(f,h,e){var g=this.RESOURCE_ENDPOINT+"/"+f+"/"+h;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:g,data:{ratingType:e}})};this.setCredited=function(j,f,h,g){var e,i,m=1,n=new jive.conc.Promise();if(j){i={ratingType:g,voteValue:m};var l=$j.deparam.querystring().fromQ;if(l){i.fromQuest=l}else{if(jive.Onboarding&&jive.Onboarding.Controller&&g=="like"){var k=jive.Onboarding.Controller.getActiveQuestAndStep();if(k.activeQuestID=="StayInTouchQuest"&&k.activeQuestStep==1){i.fromQuest=k.activeQuestID}}}if(i.fromQuest){n.addCallback(function(){jive.localexchange.emit("trial.like.created");b.dispatch("trial.updatePercentComplete")})}e="/"+this.resourceType+"/"+f+"/"+h+"/addvote"}else{e="/"+this.resourceType+"/"+f+"/"+h+"/removevote";i={ratingType:g}}$j.post(jive.rest.url(e),i,function(){n.emitSuccess()}).fail(function(p,o,q){n.emitError(p.responseJSON.error)});return n}})});
;
define("apps/core_acclaim/core_acclaim",["jive/dispatcher","apps/core_acclaim/models/core_acclaim_source","apps/shared/controllers/localexchange","soy!jive.eae.acclaim.acclaimControl"],function(b,d,a,c){return jive.oo.Class.extend(function(f){f.acclaimSource=new d();var e={};a.addListener("discussions.correct_answer.marked",function(g){$j("#same-question-acclaim-control-"+g.threadId).hide()});a.addListener("discussions.correct_answer.unmarked",function(g){$j("#same-question-acclaim-control-"+g.threadId).show()});b.listen(["credit","uncredit"],function(n,k,m){var i=n.objectType,h=n.objectId,g=n.acclaimType;var j=i+"_"+h+"_"+g;if(e[j]){console.log("duplicate credit request, ignoring",n,k,m);return}else{e[j]=true}var l=k==="credit";f.acclaimSource.setCredited(l,i,h,g).addCallback(function(){jive.switchboard.emit("acclaim.recorded."+g,l,i,h);f.updateUI($j(m),l,i,h,g);if(g==="same_question"){jive.switchboard.emit("follows.updateStreamAssociations",n,l)}}).addErrback(function(o){$j("<p>"+o.message+"</p>").message({style:"error"})}).always(function(){delete e[j]})});f.updateUI=function(n,j,g,l,h){var o=n.closest(".js-acclaim-container"),i,k=o.data("acclaimCount"),p={canApply:true,objectId:l,objectType:g,type:o.data("type"),showIcon:o.data("showIcon"),applied:j,acclaimType:h,followObjectType:o.data("followObjectType"),followObjectId:o.data("followObjectId")};k+=j?1:-1;k=k<0?0:k;p.acclaimCount=k;switch(p.type){case"mini":i=n.closest(".js-liking-control").html(c(p));break;case"news":i=n.closest(".js-liking-control").html(c(p));break;case"medium":i=n.closest(".js-acclaim-container").replaceWith(c(p));break;case"small":i=$j(c($j.extend({showGlyph:true},p)));var m=o.closest(".js-liking-control");if(m.length>0){m.replaceWith(i)}else{o.replaceWith(i)}break;default:throw"Unknown widget type"}if(i){i.find("a.jive-acclaim-likelink").focus()}}})});
;
goog.provide("jive.integration.tiles.viewstyle.socialActions");
jive.integration.tiles.viewstyle.socialActions=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-meta-actions font-color-meta">');if(opt_data.shareable){jive.soy.share.control({objectId:opt_data.id,objectType:opt_data.type,type:"text"},output);output.append(' <span class="j-bullet">&#8226;</span> ')}if(opt_data.commentsAllowed){output.append('<span id="jive-comments-count" class="j-comment-count">');jive.integration.tiles.viewstyle.commentControl({commentCount:opt_data.commentCount?
opt_data.commentCount:0,url:opt_data.action.url,type:"mini"},output);output.append('</span> <span class="j-bullet">&#8226;</span> ')}if(opt_data.likeInfo.likeable){output.append('<span class="js-liking-control j-liking-control">');jive.eae.acclaim.acclaimControl({canApply:opt_data.likeInfo.canLike,applied:opt_data.likeInfo.liked,acclaimCount:opt_data.likeInfo.likeCount,acclaimType:"like",objectId:opt_data.id,objectType:opt_data.type,showIcon:false,type:"mini"},output);output.append("</span>")}output.append("</div>");
return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.content");
jive.integration.tiles.viewstyle.content=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.view.header(opt_data,output);output.append('<section class="j-tile-body j-tile-content">');if(opt_data.content&&typeof opt_data.content!="string"){jive.integration.tiles.viewstyle.header(soy.$$augmentMap(opt_data.content,{suppressTitle:opt_data.suppressTitle,suppressOutcomes:opt_data.suppressOutcomes}),output);jive.integration.tiles.viewstyle.contentBody(opt_data.content,output);
if(!opt_data.suppressSocial)jive.integration.tiles.viewstyle.socialActions(opt_data.content,output)}else output.append('<p class="noContent">',typeof opt_data.content=="string"?soy.$$escapeHtml(opt_data.content):"","</p>");output.append("</section>");if(opt_data.action)jive.integration.tiles.view.footer(opt_data.action,output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.contentIcon");
jive.integration.tiles.viewstyle.contentIcon=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append(opt_data.jiveIconClasses?'<span class="'+soy.$$escapeHtml(opt_data.jiveIconClasses)+'"></span>':(typeof opt_data.icon=="string"?'<img src="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.icon))+'" class="jive-ext-icon-'+soy.$$escapeHtml(opt_data.iconClass)+' icn jive-avatar" alt="">':opt_data.iconUrl?'<img src="'+soy.$$escapeHtml(opt_data.iconUrl)+
'" class="icn '+(opt_data.externalIconClass?soy.$$escapeHtml(opt_data.externalIconClass):"")+'" alt="">':'<img src="'+soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/9.0.2.8500fd4/","","/images/transparent.png"))+'" class="jive-ext-icon-'+soy.$$escapeHtml(opt_data.iconClass)+' icn" alt="" style="background-image: url('+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.icon.backgroundUrl))+"); background-position: "+soy.$$escapeHtml(opt_data.icon.backgroundOffset)+
';">')+(opt_data.userIsPartner?'<span class="jive-icon-med jive-icon-partner" role="img"></span>':""));return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.icon");
jive.integration.tiles.viewstyle.icon=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append(opt_data.jiveIconClasses?'<span class="'+soy.$$escapeHtml(opt_data.jiveIconClasses)+'"></span>':(typeof opt_data.icon=="string"?'<img src="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.icon))+'" class="jive-ext-icon-'+soy.$$escapeHtml(opt_data.iconClass)+' icn" alt="">':'<img src="'+soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,
"/9.0.2.8500fd4/","","/images/transparent.png"))+'" class="jive-ext-icon-'+soy.$$escapeHtml(opt_data.iconClass)+' icn" alt="" style="background-image: url('+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.icon.backgroundUrl))+"); background-position: "+soy.$$escapeHtml(opt_data.icon.backgroundOffset)+';">')+(opt_data.userIsPartner?'<span class="jive-icon-med jive-icon-partner"></span>':""));return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.displayutil.containerDisplayNameLink");
jive.shared.displayutil.containerDisplayNameLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.container.jiveObjectURL)),'" class="font-color-meta j-container ',!opt_data.hideTooltip?" jivecontainerTT-hover-container":"",'" data-objectId="',soy.$$escapeHtml(opt_data.container.id),'" data-objectType="',soy.$$escapeHtml(opt_data.container.type),'">',opt_data.container.typeSocialGroup?
soy.$$filterNoAutoescape(opt_data.container.name):opt_data.container.typeUserContainer&&opt_data.container.typeWallEntry?soy.$$filterNoAutoescape(jive.i18n.i18nText(jive.i18n.getMsg("k1d5"),[opt_data.container.userDisplayName])):opt_data.container.typeUserContainer?soy.$$filterNoAutoescape(opt_data.container.userDisplayName):soy.$$filterNoAutoescape(opt_data.container.name),"</a>");return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.common.activityContainer");
jive.eae.common.activityContainer=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.location!="subActivity")if(opt_data.activityContainer.container.type&&opt_data.activityContainer.container.type!=-2)if(opt_data.activityContainer.container.type==2020){var param11=new soy.StringBuilder;jive.shared.displayutil.userDisplayNameLink(opt_data.activityContainer.originalAuthor,param11);jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k257a"),arg0:param11.toString(),arg1:String(opt_data.activityContainer.jiveObject.contentTypeFeatureName).toLowerCase(),
noAutoEscape:true},output)}else{var param19=new soy.StringBuilder;jive.shared.displayutil.containerDisplayNameLink({container:opt_data.activityContainer.container},param19);jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k1b7b"),arg0:param19.toString(),noAutoEscape:true},output)}return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.tileActivity.renderOnBehalfOModified");
jive.eae.tileActivity.renderOnBehalfOModified=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k43c0"),[])),' <span id="act-title-',soy.$$escapeHtmlAttribute(opt_data.viewBean.domIDPostfix),'" class="font-color-meta-light" aria-role="heading">');if(opt_data.viewBean.modifierName||opt_data.viewBean.modifierEmail){var param15=new soy.StringBuilder;if(opt_data.viewBean.modifierUser)jive.shared.displayutil.userDisplayNameLink(opt_data.viewBean.modifierUser,param15);
else if(opt_data.viewBean.modifierName&&opt_data.viewBean.modifierEmail)param15.append('<a href="mailto:',soy.$$escapeHtmlAttribute(opt_data.viewBean.attributionEmail),'" class="jive-username-span jive-username-link"> ',soy.$$escapeHtml(opt_data.viewBean.modifierName),"  </a>");else if(opt_data.viewBean.modifierEmail)param15.append('<a href="mailto:',soy.$$escapeHtmlAttribute(opt_data.viewBean.attributionEmail),'" class="jive-username-span jive-username-link"> ',soy.$$escapeHtml(opt_data.viewBean.modifierEmail),
"  </a>");else param15.append('<span class="jive-username-span jive-username-link"> ',soy.$$escapeHtml(opt_data.viewBean.modifierName),"  </span>");jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k43b4"),arg0:'<strong class="font-color-normal">'+soy.$$escapeHtml(opt_data.viewBean.tile.serviceName?opt_data.viewBean.tile.serviceName:opt_data.viewBean.tile.displayName)+"</strong>",arg1:param15.toString(),noAutoEscape:"true"},output)}else output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k43b5"),
[opt_data.viewBean.tile.serviceName?opt_data.viewBean.tile.serviceName:opt_data.viewBean.tile.displayName])));output.append(' <span class="font-color-meta-light">',opt_data.viewBean.modificationTime?soy.$$escapeHtml(opt_data.viewBean.modificationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20c6"),[])),"</span></span>");return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.tileActivity.extModified");
jive.eae.tileActivity.extModified=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.viewBean.modifierName||opt_data.viewBean.modifierEmail)if(opt_data.noCell)jive.eae.tileActivity.renderOnBehalfOModified(opt_data,output);else{output.append('<div class="j-act-node j-mod font-color-meta-light j-js-collapsed"><span class="jive-icon-sml jive-glyph-edit actglyph"></span>');jive.eae.tileActivity.renderOnBehalfOModified(opt_data,output);output.append("</div>")}return opt_sb?
"":output.toString()};
;
goog.provide("jive.eae.tileActivity.parentPreviewLinks");
jive.eae.tileActivity.parentPreviewLinks=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span class="font-color-meta-light paren">(</span><a href=\'#\' class="j-js-show-full-content j-act-preview font-color-meta" data-extVisible="false" data-objectID="',soy.$$escapeHtmlAttribute(opt_data.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtmlAttribute(opt_data.activityContainer.jiveObject.objectType),'" ',opt_data.activityContainer.jiveObject.typePoll?
'data-containerID="'+soy.$$escapeHtmlAttribute(opt_data.activityContainer.container.id)+'" data-containerType="'+soy.$$escapeHtmlAttribute(opt_data.activityContainer.container.type)+'" ':"",' aria-hidden="false" ',opt_data.activityContainer.jiveObject.typeTask||opt_data.activityContainer.jiveObject.typeExternalActivity?'title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k2154"),[]))+'">':'title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k1d6f"),[]))+'">',
'<span class="lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1d70"),[])),'</span></a><a href=\'#\' class="j-js-hide-full-content j-act-preview font-color-meta" style="display:none;" aria-hidden="true" ',opt_data.activityContainer.jiveObject.typeTask||opt_data.activityContainer.jiveObject.typeExternalActivity?'title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k2154"),[]))+'">':'title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k1d3f"),[]))+
'">','<span class="lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1d6e"),[])),'</span></a><span class="font-color-meta-light paren">)</span>');return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.tileActivity.renderOnBehalfOf");
jive.eae.tileActivity.renderOnBehalfOf=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.viewBean.streamTileEntryCreator){var param17=new soy.StringBuilder;if(opt_data.viewBean.jiveUser=="true")jive.shared.displayutil.userDisplayNameLink(opt_data.viewBean.streamTileEntryCreator,param17);else if(opt_data.viewBean.attributionName&&opt_data.viewBean.attributionEmail)param17.append('<a href="mailto:',soy.$$escapeHtmlAttribute(opt_data.viewBean.attributionEmail),'" class="jive-username-span jive-username-link"> ',
soy.$$escapeHtml(opt_data.viewBean.attributionName),"  </a>");else if(opt_data.viewBean.attributionEmail)param17.append('<a href="mailto:',soy.$$escapeHtmlAttribute(opt_data.viewBean.attributionEmail),'" class="jive-username-span jive-username-link"> ',soy.$$escapeHtml(opt_data.viewBean.attributionEmail),"  </a>");else if(opt_data.viewBean.attributionName)param17.append('<strong class="font-color-normal"> ',soy.$$escapeHtml(opt_data.viewBean.attributionName),"  </strong>");else jive.shared.displayutil.userDisplayNameLink(opt_data.viewBean.streamTileEntryCreator,
param17);jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k43b6"),arg0:'<strong class="font-color-normal">'+(opt_data.viewBean.tileInstance&&opt_data.viewBean.tileInstance.displayName?soy.$$escapeHtml(opt_data.viewBean.tileInstance.displayName):opt_data.viewBean.tile.serviceName?soy.$$escapeHtml(opt_data.viewBean.tile.serviceName):soy.$$escapeHtml(opt_data.viewBean.tile.displayName))+"</strong>                ",arg1:param17.toString(),noAutoEscape:"true"},output);output.append(" ");if(opt_data.viewBean.externalGroupName){output.append("<span>");
jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k43b7"),arg0:'<strong class="font-color-normal"> '+soy.$$escapeHtml(opt_data.viewBean.externalGroupName)+"  </strong>",noAutoEscape:"true"},output);output.append("</span>")}else if(opt_data.activityContainer)jive.eae.common.activityContainer(opt_data,output)}else output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k43b5"),[opt_data.viewBean.tile.serviceName?opt_data.viewBean.tile.serviceName:opt_data.viewBean.tile.displayName])));
if(opt_data.viewBean.creationTime&&!opt_data.hideTimestamp){output.append('<span class="j-author-act-meta font-color-meta-light"><span class="j-act-time font-color-meta-light">',!opt_data.viewBean.hideJiveObjectURL?'<a href="'+soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,opt_data.viewBean.jiveObjectURL))+'" class="font-color-meta-light">':'<span class="font-color-meta-light">',soy.$$escapeHtml(opt_data.viewBean.creationTime),!opt_data.viewBean.hideJiveObjectURL?"</a>":"</span>",
opt_data.showGoToItem?opt_data.viewBean.externalURL?'<span class="act-tile-go-to-item font-color-meta"> <span class="j-bullet">&#8226;</span> <a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.viewBean.externalURL))+'" alt="" target="'+(!opt_data.viewBean.relativeUrl?"_blank":"")+'"> '+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k43be"),[]))+"</a></span>":"":"");if(opt_data.showModified&&(opt_data.viewBean.modifierName||opt_data.viewBean.modifierEmail)){output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k43bf"),
[]))," ");jive.eae.tileActivity.extModified({viewBean:opt_data.viewBean,noCell:true},output)}if(opt_data.activityContainer){output.append('<span class="j-act-preview-control j-act-show-more"> <span class="j-bullet">&#8226;</span> ');jive.eae.tileActivity.parentPreviewLinks(opt_data,output);output.append("</span>")}output.append("</span></span>")}return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.tileActivity.renderUser");
jive.eae.tileActivity.renderUser=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.viewBean.jiveUser=="true")jive.shared.displayutil.userDisplayNameLink(opt_data.viewBean.streamTileEntryCreator,output);else if(opt_data.viewBean.attributionName&&opt_data.viewBean.attributionEmail)output.append('<a href="mailto:',soy.$$escapeHtmlAttribute(opt_data.viewBean.attributionEmail),'" class="jive-username-span jive-username-link"> ',soy.$$escapeHtml(opt_data.viewBean.attributionName),
"  </a>");else if(opt_data.viewBean.attributionEmail)output.append('<a href="mailto:',soy.$$escapeHtmlAttribute(opt_data.viewBean.attributionEmail),'" class="jive-username-span jive-username-link"> ',soy.$$escapeHtml(opt_data.viewBean.attributionEmail),"  </a>");else if(opt_data.viewBean.tileInstance&&opt_data.viewBean.tileInstance.displayName){output.append('<strong class="font-color-normal">');jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.viewBean.streamTileEntryCreator,
{displayNameOverride:opt_data.viewBean.tileInstance.displayName}),output);output.append("</strong>")}else jive.shared.displayutil.userDisplayNameLink(opt_data.viewBean.streamTileEntryCreator,output);output.append(" ",!opt_data.hideTimestamp?' <span class="j-author-act-meta font-color-meta-light"><span class="font-color-meta-light">'+(opt_data.viewBean.modificationTime?soy.$$escapeHtml(opt_data.viewBean.modificationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20c6"),[])))+"</span></span>":
"");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.renderUser");
jive.integration.tiles.viewstyle.renderUser=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.viewstyle.authorLink(soy.$$augmentMap(opt_data.action,{authorUrl:opt_data.authorUsername?soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,"/people/"+encodeURIComponent(opt_data.authorUsername))):"",classes:opt_data.authorID?"jiveTT-hover-user jive-username-link ":"",attrs:opt_data.authorID?'data-userid="'+soy.$$escapeHtml(opt_data.authorID)+'" ':
"",text:opt_data.authorDisplayName,noEscapeText:true}),output);if(opt_data.authorDisplayName){output.append('<span class="contentAuthor ',opt_data.avatar?"showAvatar":"noAvatar",'"><span class="authorInfo">');if(opt_data.avatar){var param50=new soy.StringBuilder;if(opt_data.icon||opt_data.jiveIconClasses)jive.integration.tiles.viewstyle.contentIcon({externalIconClass:opt_data.externalIconClass,icon:soy.$$escapeHtml(opt_data.avatar),iconClass:"48",userIsPartner:opt_data.authorIsPartner},param50);jive.integration.tiles.viewstyle.authorLink(soy.$$augmentMap(opt_data.action,
{authorUrl:opt_data.authorUsername?soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,"/people/"+encodeURIComponent(opt_data.authorUsername))):"",classes:(opt_data.authorID?"jiveTT-hover-user j-avatar ":"")+(opt_data.authorIsPartner?"j-partner ":""),attrs:opt_data.authorID?'data-userid="'+soy.$$escapeHtml(opt_data.authorID)+'" ':"",text:param50.toString(),noEscapeText:true}),output)}output.append("</span></span>")}return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.contentListItem");
jive.integration.tiles.viewstyle.contentListItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="listItem showIcon ',soy.$$escapeHtml(opt_data.iconSizes!=null?opt_data.iconSizes:"")," ",opt_data.index%2==0?"odd":"even",'">');if(opt_data.action){var param25=new soy.StringBuilder;if(opt_data.icon||opt_data.jiveIconClasses||opt_data.iconUrl)jive.integration.tiles.viewstyle.contentIcon(opt_data,param25);param25.append(soy.$$escapeHtml(opt_data.text));jive.integration.tiles.view.actionLink(soy.$$augmentMap(opt_data.action,
{classes:"linkText "+(opt_data.description?"showDescription ":""),attrs:opt_data.userID?'data-userid="'+soy.$$escapeHtml(opt_data.userID)+'" ':"",text:param25.toString(),noEscapeText:true}),output)}else{if(opt_data.icon||opt_data.jiveIconClasses)jive.integration.tiles.viewstyle.icon(opt_data,output);output.append(soy.$$escapeHtml(opt_data.text))}output.append('<div class="linkDescription font-color-meta j-timestamp">');if(opt_data.viewBean&&!opt_data.viewBean.hideOnBehalfOf)jive.eae.tileActivity.renderOnBehalfOf({viewBean:opt_data.viewBean,
showGoToItem:false,showModified:false,hideTimestamp:true},output);else if(opt_data.viewBean)jive.eae.tileActivity.renderUser(soy.$$augmentMap(opt_data,{viewBean:opt_data.viewBean,hideTimestamp:true}),output);else jive.integration.tiles.viewstyle.renderUser(opt_data,output);output.append("  ",soy.$$escapeHtml(opt_data.relativeTimestamp),"</div></li>",opt_data.showDescription&&opt_data.description?'<p class="linkDescription">'+soy.$$escapeHtml(opt_data.description)+"</p>":"",opt_data.showDescription&&
opt_data.moreDescription?'<p class="linkDescription">'+soy.$$escapeHtml(opt_data.moreDescription)+"</p>":"");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.contentSectionClasses");jive.integration.tiles.viewstyle.contentSectionClasses=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("j-tile-body j-tile-list-narrow clearfix");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.contentUlClasses");jive.integration.tiles.viewstyle.contentUlClasses=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append(opt_data.config&&(opt_data.config.listStyle&&opt_data.config.listStyle=="peopleList"||opt_data.config.style&&opt_data.config.style=="peopleList")?"peopleList j-icon-list":"contentList j-icon-list");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.defaults.emptyDefault");
jive.integration.tiles.defaults.emptyDefault=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="noContent  ',soy.$$escapeHtmlAttribute(opt_data.iconClassOne)," ",soy.$$escapeHtmlAttribute(opt_data.iconClassTwo),' clearfix"><img src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,"/images/empty-tile-1col-oneType.png"))),'" alt="" class="emptyListIcon"><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18nKeyOne),
[])),"</p><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18nKeyTwo),[])),"</p></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.defaults.emptyDefaultWide");
jive.integration.tiles.defaults.emptyDefaultWide=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="noContent ',soy.$$escapeHtmlAttribute(opt_data.iconClassOne),"  ",soy.$$escapeHtmlAttribute(opt_data.iconClassTwo),' clearfix"><img src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,"/images/empty-tile-1col-oneType.png"))),'" alt="" class="emptyListIcon"><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18nKeyOne),
[])),"</p><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18nKeyTwo),[])),"</p></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.defaults.frequentlyViewed");jive.integration.tiles.defaults.frequentlyViewed=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.defaults.emptyDefault({iconClassOne:"showIconEmpty",iconClassTwo:"",i18nKeyOne:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2afa"),[])),i18nKeyTwo:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2afb"),[]))},output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.defaults.frequentlyViewedWide");jive.integration.tiles.defaults.frequentlyViewedWide=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.defaults.emptyDefaultWide({iconClassOne:"showIconEmpty",iconClassTwo:"",i18nKeyOne:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2afa"),[])),i18nKeyTwo:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2afb"),[]))},output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.defaults.noContent");
jive.integration.tiles.defaults.noContent=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data["default"]&&opt_data["default"].defaultTemplate)jive.shared.soy.render({templateName:opt_data["default"].defaultTemplate,data:function(){var map={};var pairs=[];for(var i=0;i<pairs.length;i+=1)map[pairs[i][0]]=pairs[i][1];return map}(),failGracefully:true},output);else if(opt_data["default"]&&opt_data["default"].defaultMessage)output.append('<div class="noContent clearfix">',soy.$$escapeHtml(opt_data["default"].defaultMessage),
"</div>");else if(typeof opt_data.contents=="string")output.append('<div class="noContent clearfix">',soy.$$escapeHtml(opt_data.contents),"</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.defaults.recentBlog");jive.integration.tiles.defaults.recentBlog=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.defaults.emptyDefault({iconClassOne:"showIconEmpty",iconClassTwo:"",i18nKeyOne:"",i18nKeyOne:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2b33"),[])),i18nKeyTwo:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2b34"),[]))},output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.defaults.recentBlogWide");jive.integration.tiles.defaults.recentBlogWide=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.defaults.emptyDefaultWide({iconClassOne:"showIconEmpty",iconClassTwo:"",i18nKeyOne:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2b33"),[])),i18nKeyTwo:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2b34"),[]))},output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.defaults.recentlyViewed");jive.integration.tiles.defaults.recentlyViewed=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.defaults.emptyDefault({iconClassOne:"showIconEmpty",iconClassTwo:"",i18nKeyOne:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2b36"),[])),i18nKeyTwo:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2b37"),[]))},output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.defaults.recentlyViewedWide");jive.integration.tiles.defaults.recentlyViewedWide=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.defaults.emptyDefaultWide({iconClassOne:"showIconEmpty",iconClassTwo:"",i18nKeyOne:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2b36"),[])),i18nKeyTwo:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2b37"),[]))},output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.defaults.trendingContent");jive.integration.tiles.defaults.trendingContent=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.defaults.emptyDefault({iconClassOne:"showIconEmpty",iconClassTwo:"",i18nKeyOne:"",i18nKeyOne:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2b52"),[])),i18nKeyTwo:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2b53"),[]))},output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.defaults.trendingContentWide");jive.integration.tiles.defaults.trendingContentWide=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.defaults.emptyDefaultWide({iconClassOne:"showIconEmpty",iconClassTwo:"",i18nKeyOne:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2b52"),[])),i18nKeyTwo:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2b53"),[]))},output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.defaults.trendingPeople");jive.integration.tiles.defaults.trendingPeople=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.defaults.emptyDefault({iconClassOne:"showIconEmpty",iconClassTwo:"",i18nKeyOne:"",i18nKeyOne:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2b56"),[])),i18nKeyTwo:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2b57"),[]))},output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.contentlistnarrow");
jive.integration.tiles.viewstyle.contentlistnarrow=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.view.header(opt_data,output);output.append('<section class="');jive.integration.tiles.viewstyle.contentSectionClasses(opt_data,output);output.append('">');if(opt_data.contents&&typeof opt_data.contents!="string"&&opt_data.contents.length!=0){output.append('<ul class="contentList j-icon-list">');var itemList13=opt_data.contents;var itemListLen13=itemList13.length;
for(var itemIndex13=0;itemIndex13<itemListLen13;itemIndex13++){var itemData13=itemList13[itemIndex13];jive.integration.tiles.viewstyle.contentListItem(soy.$$augmentMap(itemData13,{iconClass:itemData13.action&&itemData13.action.iconSize?soy.$$escapeHtml(itemData13.action.iconSize):"16",index:itemIndex13}),output)}output.append("</ul>")}else jive.integration.tiles.defaults.noContent(opt_data,output);output.append("</section>");if(opt_data.action)jive.integration.tiles.view.footer(opt_data.action,output);
return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.contentlistwide");
jive.integration.tiles.viewstyle.contentlistwide=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.view.header(opt_data,output);output.append('<section class="');jive.integration.tiles.viewstyle.contentSectionClasses(opt_data,output);output.append('">');if(opt_data.contents&&typeof opt_data.contents!="string"&&opt_data.contents.length!=0){output.append('<ul class="contentList">');var itemList13=opt_data.contents;var itemListLen13=itemList13.length;for(var itemIndex13=
0;itemIndex13<itemListLen13;itemIndex13++){var itemData13=itemList13[itemIndex13];jive.integration.tiles.viewstyle.contentListItem(soy.$$augmentMap(itemData13,{iconClass:itemData13.action&&itemData13.action.iconSize?soy.$$escapeHtml(itemData13.action.iconSize):"16",iconSizes:"ic24",index:itemIndex13,externalIconClass:"jive-icon-big"}),output)}output.append("</ul>")}else jive.integration.tiles.defaults.noContent(opt_data,output);output.append("</section>");if(opt_data.action)jive.integration.tiles.view.footer(opt_data.action,
output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.customViewError");
jive.integration.tiles.viewstyle.customViewError=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div id="jive-customview-modal-error" class="jive-modal jive-modal-wide style="display: none;"><header><h2>',jive.i18n.i18nText(jive.i18n.getMsg("k205c"),[]),'</h2></header><a href="#" class="j-modal-close-top close">',jive.i18n.i18nText(jive.i18n.getMsg("k200e"),[]),'<span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content clearfix"><textarea readonly rows="10" cols="80">',opt_data.message,
"</textarea></section></div>");return opt_sb?"":output.toString()};
;
define("apps/tile/integrations/custom_view",["jquery","underscore","documentReady"],function(b,a){return jive.oo.Class.extend(function(d){d.init=function(e){require(["syntheticAppContainer"],function(f){var i=b("#"+e.domElement);var g=i.closest(".js-tile").data("tile-view");if(g){e={domElement:i,url:g.definition.view,objectType:"tileInstance",objectID:g.id,relatedTiles:[],context:g.data,container:{type:jive.global.containerType,id:jive.global.containerID},instanceId:jive.global.instanceID,userId:_jive_current_user.ID,errorCallback:function(j){c(e.domElement,j)}};if(g.definition.action){e.actionHandler=function(j,l){var k=b.Deferred();require(["apps/tile/embedded_view","soy!jive.integration.tiles.view.embeddedExperience"],function(o,p){var r=b(p());var q="dummyContext_"+String(Math.random()).substring(2);var n={left:(i.position().left+l.left)+"px",top:(i.position().top+l.top)+"px",width:l.width+"px",height:l.height+"px",position:"absolute"};var m=b("<div/>").attr("id",q).css(n).insertAfter(i);r.popover({context:m,position:"left",align:"middle",beforeClose:function(){r.find("iframe").prop("src","about:blank");b("#"+q).remove()},onClose:function(){f.rejectAppActionDataPromise()}});o.render({url:g.definition.action,objectType:"tileInstance",objectID:g.id,domElement:r.find(".js-embed"),context:j,relatedTiles:[],container:{type:jive.global.containerType,id:jive.global.containerID},instanceId:jive.global.instanceID,userId:_jive_current_user.ID}).then(function(s){k.resolve(s);r.trigger("close")},function(){k.reject();r.trigger("close")})});return k}}f.renderEmbeddedView(e)}else{var h=i.closest(".js-tile").data("tile")}})};function c(f,e){b(".js-error",f).show();if(e&&e.message){b(".js-error a",f).click(function(h){var g=b(jive.integration.tiles.viewstyle.customViewError(e));g.lightbox_me({closeSelector:".close",destroyOnClose:true,centered:true})})}}})});
;
goog.provide("jive.integration.tiles.viewstyle.custom_view");
jive.integration.tiles.viewstyle.custom_view=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.title)jive.integration.tiles.view.header(opt_data,output);if(!opt_data.editing){output.append('<section class="j-tile-body"><div id="j-app-tile-parent-',soy.$$escapeHtmlAttribute(opt_data.tileInstanceId),'"><div class="js-error" style="display: none;"><div>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k402a"),[])),'</div><a href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2154"),
[])),'</a></div><div class="j-custom-view-tile-placeholder">&nbsp;</div></div></section>');if(opt_data.action)jive.integration.tiles.view.footer(opt_data.action,output)}else output.append('<section class="j-tile-body"><div class="noContent clearfix">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4029"),[])),"</div></section>");output.append("<script>require(['apps/tile/integrations/custom_view', 'documentReady'], function(TileAppRenderer) {new TileAppRenderer({domElement: \"j-app-tile-parent-",
soy.$$escapeJsString(opt_data.tileInstanceId),'"});});<\/script>');return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.galleryImage");
jive.integration.tiles.viewstyle.galleryImage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<figure><a href="#" data-action="showGallery" data-disabled="',opt_data.disableFullScreen?"true":"false",'" data-index="',soy.$$escapeHtml(opt_data.index),'" data-caption="',soy.$$escapeHtml(opt_data.title),'" data-src="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.image)),'"><img class="j-slide-image j-gallery js-slide-image " src="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,
opt_data.thumb?opt_data.thumb:opt_data.image)),'"',opt_data.thumb?'data-thumb="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.thumb))+'"':"",'alt="" data-src="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.image)),'" ><\!-- not yet supported in all browsers, see https://developer.mozilla.org/en-US/docs/Link_prefetching_FAQ --\><meta http-equiv="Link" content="<',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.image)),'>; rel=prefetch">',
opt_data.title&&!opt_data.hideCaptions?"<figcaption><p>"+soy.$$escapeHtml(opt_data.title)+"</p></figcaption>":"","</a></figure>");return opt_sb?"":output.toString()};
;
goog.provide("jive.overlay.imageGallery");
jive.overlay.imageGallery=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="lb-overlay"></div><div class="lb-container lb-gallery"><div class="lb-actions"><a class="lb-close font-color-white" data-action="close" href="#" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k200e"),[])),'" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k200e"),[])),'"><span class="jive-icon-glyph icon-close-med"></span></a></div><nav class="lb-dotnav">');if(opt_data.imageData.length>
1){output.append('<ul class="lb-dots js-dots">');var imageList11=opt_data.imageData;var imageListLen11=imageList11.length;for(var imageIndex11=0;imageIndex11<imageListLen11;imageIndex11++){var imageData11=imageList11[imageIndex11];output.append('<li data-action="goto" data-index="',soy.$$escapeHtmlAttribute(imageIndex11),'"><a href="#">',soy.$$escapeHtml(imageIndex11),"</a></li>")}output.append("</ul>")}output.append("</nav>",opt_data.imageData.length>1?'<a class="lb-pagination lb-previous" href="#" data-action="previous"><span>'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2126"),[]))+'</span></a><a class="lb-pagination lb-next" href="#" data-action="next"><span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20e9"),[]))+"</span></a>":"",'<div class="lb"><div class="lb-content gallery j-active clearfix"><div class="js-figures">');var imageList28=opt_data.imageData;var imageListLen28=imageList28.length;for(var imageIndex28=0;imageIndex28<imageListLen28;imageIndex28++){var imageData28=imageList28[imageIndex28];
output.append('<figure><img src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(imageData28.src)),'" alt="">',imageData28.caption?'<figcaption class="font-color-white">'+soy.$$escapeHtml(imageData28.caption)+"</figcaption>":"","</figure>")}output.append("</div></div></div></div>");return opt_sb?"":output.toString()};
;
/*
 * jQuery imagesLoaded plugin v1.0.3
 * http://github.com/desandro/imagesloaded
 *
 * MIT License. by Paul Irish et al.
 */
(function(a,b){a.fn.imagesLoaded=function(i){var g=this,e=g.find("img").add(g.filter("img")),c=e.length,h="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";function f(){i.call(g,e)}function d(){if(--c<=0&&this.src!==h){setTimeout(f);e.unbind("load error",d)}}if(!c){f()}e.bind("load error",d).each(function(){if(this.complete||this.complete===b){var j=this.src;this.src=h;this.src=j}});return g}})(jQuery);define("jquery/jquery.imagesloaded",["jquery"],function(a){return a.fn.imagesLoaded});
;
define('jquery/jquery.gallery', ['jquery', 'soy!jive.overlay.imageGallery', 'jquery/jquery.imagesloaded'], function($, tmpl) {
    var PADDING = 100;

    function activate(nodes, index) {
        $(nodes).removeClass('j-active').eq(index).addClass('j-active');
    }

    function setMaxDimensions() {
        gallery().find('.js-figures > figure.j-active img').css({
            maxHeight: $(window).height() - PADDING,
            maxWidth : $(window).width()  - PADDING
        });
    }

    function gallery() {
        return $('body > .lb-container .lb-content.gallery');
    }

    function close() {
        $('body > .lb-container').remove();
        $('body').removeClass('lb-active').add(window).off('.gallery');
    }

    function offsetIndex(offset)  {
        return gallery().find('.js-figures > figure.j-active').index() + offset;
    }

    function goto(index) {
        var $figures = gallery().find('.js-figures > figure');

        // normalize index
        index = index > $figures.length - 1 ? 0 : index;
        index = index < 0 ? $figures.length - 1 : index;

        // set the current dot and image, move current image in to place
        activate($('body > .lb-container .js-dots li'), index);
        activate($figures, index);
        setMaxDimensions();
    }

    function handleClick(e) {
        var action = this.getAttribute('data-action');

        if ('close'    == action) { close(); }
        if ('goto'     == action) { goto($(this).data('index')); }
        if ('next'     == action) { goto(offsetIndex(1)); }
        if ('previous' == action) { goto(offsetIndex(-1)); }

        e.preventDefault();
    }

    function handleKey(e) {
        var key = $.ui.keyCode;

        if      (key.ESCAPE == e.which)   { close(); }
        else if (key.LEFT   == e.which)   { goto(offsetIndex(-1)); }
        else if (key.RIGHT  == e.which)   { goto(offsetIndex(1)); }
        else                              { return; }

        e.preventDefault();
    }


    $.gallery = function(imageData, index) {
        $(window).on('resize.gallery', setMaxDimensions);
        $('body').addClass('lb-active')
            .on('keydown.gallery', handleKey)
            .on('click.gallery', '[data-action]', handleClick)
            .append(tmpl({ imageData: imageData }));

        goto(index);
    };


    return $.gallery;
});

;
goog.provide("jive.integration.tiles.viewstyle.gallery");
jive.integration.tiles.viewstyle.gallery=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.view.header(opt_data,output);output.append('<section id="tile-image-gallery-',soy.$$escapeHtmlAttribute(opt_data.tileInstanceId),'" class="j-tile-body  j-tile-image-gallery j-tile-image-gallery-',soy.$$escapeHtmlAttribute(opt_data.config.size),"  js-tile-image-gallery js-tile-image-gallery-",soy.$$escapeHtmlAttribute(opt_data.config.size),"  j-slideshow",!opt_data.config.disableFullScreenView?
" j-fullscreen-enabled":"",typeof opt_data.contents=="string"||opt_data.contents.length==0?" j-empty-gallery":"",'">');if(typeof opt_data.contents!="string"&&opt_data.contents.length!=0){output.append('<ul class="',!opt_data.config.disableFullScreenView?" js-fullscreen-enabled":"",'">');var imageList27=opt_data.contents;var imageListLen27=imageList27.length;for(var imageIndex27=0;imageIndex27<imageListLen27;imageIndex27++){var imageData27=imageList27[imageIndex27];output.append('<li class="j-tile-image-gallery-thumb j-slide',
imageIndex27==0?" j-selected":"",'">');jive.integration.tiles.viewstyle.galleryImage(soy.$$augmentMap(imageData27,{disableFullScreen:opt_data.config.disableFullScreenView,hideCaptions:opt_data.config.hideCaptions,index:imageIndex27}),output);output.append("</li>")}output.append("</ul>")}else output.append('<p class="noContent">',typeof opt_data.contents=="string"?soy.$$escapeHtml(opt_data.contents):"","</p>");output.append("</section>");if(opt_data.action&&opt_data.config.showAdditionalLink)jive.integration.tiles.view.footer(opt_data.action,
output);return opt_sb?"":output.toString()};
;
(function(i){var e="0.3.4",j="hasOwnProperty",b=/[\.\/]/,a="*",g=function(){},f=function(m,l){return m-l},d,h,k={n:{}},c=function(m,C){var v=k,s=h,w=Array.prototype.slice.call(arguments,2),y=c.listeners(m),x=0,u=false,p,o=[],t={},q=[],n=d,A=[];d=m;h=0;for(var r=0,B=y.length;r<B;r++){if("zIndex" in y[r]){o.push(y[r].zIndex);if(y[r].zIndex<0){t[y[r].zIndex]=y[r]}}}o.sort(f);while(o[x]<0){p=t[o[x++]];q.push(p.apply(C,w));if(h){h=s;return q}}for(r=0;r<B;r++){p=y[r];if("zIndex" in p){if(p.zIndex==o[x]){q.push(p.apply(C,w));if(h){break}do{x++;p=t[o[x]];p&&q.push(p.apply(C,w));if(h){break}}while(p)}else{t[p.zIndex]=p}}else{q.push(p.apply(C,w));if(h){break}}}h=s;d=n;return q.length?q:null};c.listeners=function(l){var t=l.split(b),r=k,x,s,m,p,w,o,q,u,v=[r],n=[];for(p=0,w=t.length;p<w;p++){u=[];for(o=0,q=v.length;o<q;o++){r=v[o].n;s=[r[t[p]],r[a]];m=2;while(m--){x=s[m];if(x){u.push(x);n=n.concat(x.f||[])}}}v=u}return n};c.on=function(l,o){var q=l.split(b),p=k;for(var m=0,n=q.length;m<n;m++){p=p.n;!p[q[m]]&&(p[q[m]]={n:{}});p=p[q[m]]}p.f=p.f||[];for(m=0,n=p.f.length;m<n;m++){if(p.f[m]==o){return g}}p.f.push(o);return function(r){if(+r==+r){o.zIndex=+r}}};c.stop=function(){h=1};c.nt=function(l){if(l){return new RegExp("(?:\\.|\\/|^)"+l+"(?:\\.|\\/|$)").test(d)}return d};c.off=c.unbind=function(m,r){var t=m.split(b),s,v,n,p,w,o,q,u=[k];for(p=0,w=t.length;p<w;p++){for(o=0;o<u.length;o+=n.length-2){n=[o,1];s=u[o].n;if(t[p]!=a){if(s[t[p]]){n.push(s[t[p]])}}else{for(v in s){if(s[j](v)){n.push(s[v])}}}u.splice.apply(u,n)}}for(p=0,w=u.length;p<w;p++){s=u[p];while(s.n){if(r){if(s.f){for(o=0,q=s.f.length;o<q;o++){if(s.f[o]==r){s.f.splice(o,1);break}}!s.f.length&&delete s.f}for(v in s.n){if(s.n[j](v)&&s.n[v].f){var l=s.n[v].f;for(o=0,q=l.length;o<q;o++){if(l[o]==r){l.splice(o,1);break}}!l.length&&delete s.n[v].f}}}else{delete s.f;for(v in s.n){if(s.n[j](v)&&s.n[v].f){delete s.n[v].f}}}s=s.n}}};c.once=function(l,m){var n=function(){var o=m.apply(this,arguments);c.unbind(l,n);return o};return c.on(l,n)};c.version=e;c.toString=function(){return"You are running Eve "+e};(typeof module!="undefined"&&module.exports)?(module.exports=c):(typeof define!="undefined"?((i.eve=c)&&define("eve",[],function(){return c})):(i.eve=c))})(this);(function(){function aR(g){if(aR.is(g,"function")){return ao?g():eve.on("raphael.DOMload",g)}else{if(aR.is(g,bd)){return aR._engine.create[bG](aR,g.splice(0,3+aR.is(g[0],aL))).add(g)}else{var b=Array.prototype.slice.call(arguments,0);if(aR.is(b[b.length-1],"function")){var d=b.pop();return ao?d.call(aR._engine.create[bG](aR,b)):eve.on("raphael.DOMload",function(){d.call(aR._engine.create[bG](aR,b))})}else{return aR._engine.create[bG](aR,arguments)}}}}aR.version="2.1.0";aR.eve=eve;var ao,a=/[, ]+/,bw={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},br=/\{(\d+)\}/g,bJ="prototype",ak="hasOwnProperty",aA={doc:document,win:window},s={was:Object.prototype[ak].call(aA.win,"Raphael"),is:aA.win.Raphael},bF=function(){this.ca=this.customAttributes={}},a4,bo="appendChild",bG="apply",bE="concat",Z="createTouch" in aA.doc,aX="",aQ=" ",bH=String,F="split",Q="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[F](aQ),bx={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},bK=bH.prototype.toLowerCase,au=Math,m=au.max,bm=au.min,aw=au.abs,bp=au.pow,aV=au.PI,aL="number",aj="string",bd="array",a5="toString",a9="fill",a1=Object.prototype.toString,bz={},j="push",f=aR._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,A=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,av={"NaN":1,"Infinity":1,"-Infinity":1},c=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,ah=au.round,z="setAttribute",an=parseFloat,U=parseInt,bt=bH.prototype.toUpperCase,r=aR._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},ar=aR._availableAnimAttrs={blur:aL,"clip-rect":"csv",cx:aL,cy:aL,fill:"colour","fill-opacity":aL,"font-size":aL,height:aL,opacity:aL,path:"path",r:aL,rx:aL,ry:aL,stroke:"colour","stroke-opacity":aL,"stroke-width":aL,transform:"transform",width:aL,x:aL,y:aL},ac=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,bi=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,n={hs:1,rg:1},bg=/,?([achlmqrstvxz]),?/gi,a0=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,ai=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,aP=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig,aW=aR._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,aU={},bq=function(g,d){return g.key-d.key},u=function(g,d){return an(g)-an(d)},I=function(){},bB=function(b){return b},az=aR._rectPath=function(b,E,d,g,i){if(i){return[["M",b+i,E],["l",d-i*2,0],["a",i,i,0,0,1,i,i],["l",0,g-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-d,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-g],["a",i,i,0,0,1,i,-i],["z"]]}return[["M",b,E],["l",d,0],["l",0,g],["l",-d,0],["z"]]},K=function(b,i,g,d){if(d==null){d=g}return[["M",b,i],["m",0,-d],["a",g,d,0,1,1,0,2*d],["a",g,d,0,1,1,0,-2*d],["z"]]},N=aR._getPath={path:function(b){return b.attr("path")},circle:function(d){var b=d.attrs;return K(b.cx,b.cy,b.r)},ellipse:function(d){var b=d.attrs;return K(b.cx,b.cy,b.rx,b.ry)},rect:function(d){var b=d.attrs;return az(b.x,b.y,b.width,b.height,b.r)},image:function(d){var b=d.attrs;return az(b.x,b.y,b.width,b.height)},text:function(b){var d=b._getBBox();return az(d.x,d.y,d.width,d.height)}},L=aR.mapPath=function(bN,S){if(!S){return bN}var bL,R,g,b,bM,E,d;bN=W(bN);for(g=0,bM=bN.length;g<bM;g++){d=bN[g];for(b=1,E=d.length;b<E;b+=2){bL=S.x(d[b],d[b+1]);R=S.y(d[b],d[b+1]);d[b]=bL;d[b+1]=R}}return bN};aR._g=aA;aR.type=(aA.win.SVGAngle||aA.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML");if(aR.type=="VML"){var aE=aA.doc.createElement("div"),aH;aE.innerHTML='<v:shape adj="1"/>';aH=aE.firstChild;aH.style.behavior="url(#default#VML)";if(!(aH&&typeof aH.adj=="object")){return(aR.type=aX)}aE=null}aR.svg=!(aR.vml=aR.type=="VML");aR._Paper=bF;aR.fn=a4=bF.prototype=aR.prototype;aR._id=0;aR._oid=0;aR.is=function(d,b){b=bK.call(b);if(b=="finite"){return !av[ak](+d)}if(b=="array"){return d instanceof Array}return(b=="null"&&d===null)||(b==typeof d&&d!==null)||(b=="object"&&d===Object(d))||(b=="array"&&Array.isArray&&Array.isArray(d))||a1.call(d).slice(8,-1).toLowerCase()==b};function X(g){if(Object(g)!==g){return g}var d=new g.constructor;for(var b in g){if(g[ak](b)){d[b]=X(g[b])}}return d}aR.angle=function(E,S,g,R,d,i){if(d==null){var b=E-g,bL=S-R;if(!b&&!bL){return 0}return(180+au.atan2(-bL,-b)*180/aV+360)%360}else{return aR.angle(E,S,d,i)-aR.angle(g,R,d,i)}};aR.rad=function(b){return b%360*aV/180};aR.deg=function(b){return b*180/aV%360};aR.snapTo=function(d,E,b){b=aR.is(b,"finite")?b:10;if(aR.is(d,bd)){var g=d.length;while(g--){if(aw(d[g]-E)<=b){return d[g]}}}else{d=+d;var R=E%d;if(R<b){return E-R}if(R>d-b){return E-R+d}}return E};var h=aR.createUUID=(function(b,d){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(b,d).toUpperCase()}})(/[xy]/g,function(g){var d=au.random()*16|0,b=g=="x"?d:(d&3|8);return b.toString(16)});aR.setWindow=function(b){eve("raphael.setWindow",aR,aA.win,b);aA.win=b;aA.doc=aA.win.document;if(aR._engine.initWin){aR._engine.initWin(aA.win)}};var bf=function(g){if(aR.vml){var b=/^\s+|\s+$/g;var R;try{var S=new ActiveXObject("htmlfile");S.write("<body>");S.close();R=S.body}catch(bL){R=createPopup().document.body}var d=R.createTextRange();bf=aG(function(i){try{R.style.color=bH(i).replace(b,aX);var bM=d.queryCommandValue("ForeColor");bM=((bM&255)<<16)|(bM&65280)|((bM&16711680)>>>16);return"#"+("000000"+bM.toString(16)).slice(-6)}catch(bN){return"none"}})}else{var E=aA.doc.createElement("i");E.title="Rapha\xebl Colour Picker";E.style.display="none";aA.doc.body.appendChild(E);bf=aG(function(i){E.style.color=i;return aA.doc.defaultView.getComputedStyle(E,aX).getPropertyValue("color")})}return bf(g)},aI=function(){return"hsb("+[this.h,this.s,this.b]+")"},M=function(){return"hsl("+[this.h,this.s,this.l]+")"},x=function(){return this.hex},aY=function(R,E,d){if(E==null&&aR.is(R,"object")&&"r" in R&&"g" in R&&"b" in R){d=R.b;E=R.g;R=R.r}if(E==null&&aR.is(R,aj)){var i=aR.getRGB(R);R=i.r;E=i.g;d=i.b}if(R>1||E>1||d>1){R/=255;E/=255;d/=255}return[R,E,d]},a2=function(R,E,d,S){R*=255;E*=255;d*=255;var i={r:R,g:E,b:d,hex:aR.rgb(R,E,d),toString:x};aR.is(S,"finite")&&(i.opacity=S);return i};aR.color=function(b){var d;if(aR.is(b,"object")&&"h" in b&&"s" in b&&"b" in b){d=aR.hsb2rgb(b);b.r=d.r;b.g=d.g;b.b=d.b;b.hex=d.hex}else{if(aR.is(b,"object")&&"h" in b&&"s" in b&&"l" in b){d=aR.hsl2rgb(b);b.r=d.r;b.g=d.g;b.b=d.b;b.hex=d.hex}else{if(aR.is(b,"string")){b=aR.getRGB(b)}if(aR.is(b,"object")&&"r" in b&&"g" in b&&"b" in b){d=aR.rgb2hsl(b);b.h=d.h;b.s=d.s;b.l=d.l;d=aR.rgb2hsb(b);b.v=d.b}else{b={hex:"none"};b.r=b.g=b.b=b.h=b.s=b.v=b.l=-1}}}b.toString=x;return b};aR.hsb2rgb=function(S,bN,bL,i){if(this.is(S,"object")&&"h" in S&&"s" in S&&"b" in S){bL=S.b;bN=S.s;S=S.h;i=S.o}S*=360;var E,bM,d,g,b;S=(S%360)/60;b=bL*bN;g=b*(1-aw(S%2-1));E=bM=d=bL-b;S=~~S;E+=[b,g,0,0,g,b][S];bM+=[g,b,b,g,0,0][S];d+=[0,0,g,b,b,g][S];return a2(E,bM,d,i)};aR.hsl2rgb=function(bL,bN,E,i){if(this.is(bL,"object")&&"h" in bL&&"s" in bL&&"l" in bL){E=bL.l;bN=bL.s;bL=bL.h}if(bL>1||bN>1||E>1){bL/=360;bN/=100;E/=100}bL*=360;var S,bM,d,g,b;bL=(bL%360)/60;b=2*bN*(E<0.5?E:1-E);g=b*(1-aw(bL%2-1));S=bM=d=E-b/2;bL=~~bL;S+=[b,g,0,0,g,b][bL];bM+=[g,b,b,g,0,0][bL];d+=[0,0,g,b,b,g][bL];return a2(S,bM,d,i)};aR.rgb2hsb=function(bM,bL,d){d=aY(bM,bL,d);bM=d[0];bL=d[1];d=d[2];var R,E,i,bN;i=m(bM,bL,d);bN=i-bm(bM,bL,d);R=(bN==0?null:i==bM?(bL-d)/bN:i==bL?(d-bM)/bN+2:(bM-bL)/bN+4);R=((R+360)%6)*60/360;E=bN==0?0:bN/i;return{h:R,s:E,b:i,toString:aI}};aR.rgb2hsl=function(d,bL,bO){bO=aY(d,bL,bO);d=bO[0];bL=bO[1];bO=bO[2];var bP,R,bN,bM,E,i;bM=m(d,bL,bO);E=bm(d,bL,bO);i=bM-E;bP=(i==0?null:bM==d?(bL-bO)/i:bM==bL?(bO-d)/i+2:(d-bL)/i+4);bP=((bP+360)%6)*60/360;bN=(bM+E)/2;R=(i==0?0:bN<0.5?i/(2*bN):i/(2-2*bN));return{h:bP,s:R,l:bN,toString:M}};aR._path2string=function(){return this.join(",").replace(bg,"$1")};function bk(E,g){for(var b=0,d=E.length;b<d;b++){if(E[b]===g){return E.push(E.splice(b,1)[0])}}}function aG(i,d,b){function g(){var E=Array.prototype.slice.call(arguments,0),S=E.join("\u2400"),R=g.cache=g.cache||{},bL=g.count=g.count||[];if(R[ak](S)){bk(bL,S);return b?b(R[S]):R[S]}bL.length>=1000&&delete R[bL.shift()];bL.push(S);R[S]=i[bG](d,E);return b?b(R[S]):R[S]}return g}var bv=aR._preload=function(g,d){var b=aA.doc.createElement("img");b.style.cssText="position:absolute;left:-9999em;top:-9999em";b.onload=function(){d.call(this);this.onload=null;aA.doc.body.removeChild(this)};b.onerror=function(){aA.doc.body.removeChild(this)};aA.doc.body.appendChild(b);b.src=g};function aq(){return this.hex}aR.getRGB=aG(function(b){if(!b||!!((b=bH(b)).indexOf("-")+1)){return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:aq}}if(b=="none"){return{r:-1,g:-1,b:-1,hex:"none",toString:aq}}!(n[ak](b.toLowerCase().substring(0,2))||b.charAt()=="#")&&(b=bf(b));var E,d,g,S,i,bM,bL,R=b.match(A);if(R){if(R[2]){S=U(R[2].substring(5),16);g=U(R[2].substring(3,5),16);d=U(R[2].substring(1,3),16)}if(R[3]){S=U((bM=R[3].charAt(3))+bM,16);g=U((bM=R[3].charAt(2))+bM,16);d=U((bM=R[3].charAt(1))+bM,16)}if(R[4]){bL=R[4][F](bi);d=an(bL[0]);bL[0].slice(-1)=="%"&&(d*=2.55);g=an(bL[1]);bL[1].slice(-1)=="%"&&(g*=2.55);S=an(bL[2]);bL[2].slice(-1)=="%"&&(S*=2.55);R[1].toLowerCase().slice(0,4)=="rgba"&&(i=an(bL[3]));bL[3]&&bL[3].slice(-1)=="%"&&(i/=100)}if(R[5]){bL=R[5][F](bi);d=an(bL[0]);bL[0].slice(-1)=="%"&&(d*=2.55);g=an(bL[1]);bL[1].slice(-1)=="%"&&(g*=2.55);S=an(bL[2]);bL[2].slice(-1)=="%"&&(S*=2.55);(bL[0].slice(-3)=="deg"||bL[0].slice(-1)=="\xb0")&&(d/=360);R[1].toLowerCase().slice(0,4)=="hsba"&&(i=an(bL[3]));bL[3]&&bL[3].slice(-1)=="%"&&(i/=100);return aR.hsb2rgb(d,g,S,i)}if(R[6]){bL=R[6][F](bi);d=an(bL[0]);bL[0].slice(-1)=="%"&&(d*=2.55);g=an(bL[1]);bL[1].slice(-1)=="%"&&(g*=2.55);S=an(bL[2]);bL[2].slice(-1)=="%"&&(S*=2.55);(bL[0].slice(-3)=="deg"||bL[0].slice(-1)=="\xb0")&&(d/=360);R[1].toLowerCase().slice(0,4)=="hsla"&&(i=an(bL[3]));bL[3]&&bL[3].slice(-1)=="%"&&(i/=100);return aR.hsl2rgb(d,g,S,i)}R={r:d,g:g,b:S,toString:aq};R.hex="#"+(16777216|S|(g<<8)|(d<<16)).toString(16).slice(1);aR.is(i,"finite")&&(R.opacity=i);return R}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:aq}},aR);aR.hsb=aG(function(i,g,d){return aR.hsb2rgb(i,g,d).hex});aR.hsl=aG(function(g,d,b){return aR.hsl2rgb(g,d,b).hex});aR.rgb=aG(function(E,i,d){return"#"+(16777216|d|(i<<8)|(E<<16)).toString(16).slice(1)});aR.getColor=function(d){var g=this.getColor.start=this.getColor.start||{h:0,s:1,b:d||0.75},b=this.hsb2rgb(g.h,g.s,g.b);g.h+=0.075;if(g.h>1){g.h=0;g.s-=0.2;g.s<=0&&(this.getColor.start={h:0,s:1,b:g.b})}return b.hex};aR.getColor.reset=function(){delete this.start};function bb(E,bL){var S=[];for(var g=0,b=E.length;b-2*!bL>g;g+=2){var R=[{x:+E[g-2],y:+E[g-1]},{x:+E[g],y:+E[g+1]},{x:+E[g+2],y:+E[g+3]},{x:+E[g+4],y:+E[g+5]}];if(bL){if(!g){R[0]={x:+E[b-2],y:+E[b-1]}}else{if(b-4==g){R[3]={x:+E[0],y:+E[1]}}else{if(b-2==g){R[2]={x:+E[0],y:+E[1]};R[3]={x:+E[2],y:+E[3]}}}}}else{if(b-4==g){R[3]=R[2]}else{if(!g){R[0]={x:+E[g],y:+E[g+1]}}}}S.push(["C",(-R[0].x+6*R[1].x+R[2].x)/6,(-R[0].y+6*R[1].y+R[2].y)/6,(R[1].x+6*R[2].x-R[3].x)/6,(R[1].y+6*R[2].y-R[3].y)/6,R[2].x,R[2].y])}return S}aR.parsePathString=function(b){if(!b){return null}var g=Y(b);if(g.arr){return aZ(g.arr)}var i={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},d=[];if(aR.is(b,bd)&&aR.is(b[0],bd)){d=aZ(b)}if(!d.length){bH(b).replace(a0,function(R,E,bM){var bL=[],S=E.toLowerCase();bM.replace(aP,function(bO,bN){bN&&bL.push(+bN)});if(S=="m"&&bL.length>2){d.push([E][bE](bL.splice(0,2)));S="l";E=E=="m"?"l":"L"}if(S=="r"){d.push([E][bE](bL))}else{while(bL.length>=i[S]){d.push([E][bE](bL.splice(0,i[S])));if(!i[S]){break}}}})}d.toString=aR._path2string;g.arr=aZ(d);return d};aR.parseTransformString=aG(function(d){if(!d){return null}var g={r:3,s:4,t:2,m:6},b=[];if(aR.is(d,bd)&&aR.is(d[0],bd)){b=aZ(d)}if(!b.length){bH(d).replace(ai,function(E,i,bL){var S=[],R=bK.call(i);bL.replace(aP,function(bN,bM){bM&&S.push(+bM)});b.push([i][bE](S))})}b.toString=aR._path2string;return b});var Y=function(d){var b=Y.ps=Y.ps||{};if(b[d]){b[d].sleep=100}else{b[d]={sleep:100}}setTimeout(function(){for(var g in b){if(b[ak](g)&&g!=d){b[g].sleep--;!b[g].sleep&&delete b[g]}}});return b[d]};aR.findDotsAtSegment=function(d,b,b2,b0,S,E,bN,bL,bV){var bS=1-bV,bX=bp(bS,3),bY=bp(bS,2),bP=bV*bV,bM=bP*bV,bR=bX*d+bY*3*bV*b2+bS*3*bV*bV*S+bM*bN,bO=bX*b+bY*3*bV*b0+bS*3*bV*bV*E+bM*bL,bW=d+2*bV*(b2-d)+bP*(S-2*b2+d),bU=b+2*bV*(b0-b)+bP*(E-2*b0+b),b1=b2+2*bV*(S-b2)+bP*(bN-2*S+b2),bZ=b0+2*bV*(E-b0)+bP*(bL-2*E+b0),bT=bS*d+bV*b2,bQ=bS*b+bV*b0,i=bS*S+bV*bN,g=bS*E+bV*bL,R=(90-au.atan2(bW-b1,bU-bZ)*180/aV);(bW>b1||bU<bZ)&&(R+=180);return{x:bR,y:bO,m:{x:bW,y:bU},n:{x:b1,y:bZ},start:{x:bT,y:bQ},end:{x:i,y:g},alpha:R}};aR.bezierBBox=function(d,b,i,g,bM,S,R,E){if(!aR.is(d,"array")){d=[d,b,i,g,bM,S,R,E]}var bL=ba.apply(null,d);return{x:bL.min.x,y:bL.min.y,x2:bL.max.x,y2:bL.max.y,width:bL.max.x-bL.min.x,height:bL.max.y-bL.min.y}};aR.isPointInsideBBox=function(d,b,g){return b>=d.x&&b<=d.x2&&g>=d.y&&g<=d.y2};aR.isBBoxIntersect=function(g,d){var b=aR.isPointInsideBBox;return b(d,g.x,g.y)||b(d,g.x2,g.y)||b(d,g.x,g.y2)||b(d,g.x2,g.y2)||b(g,d.x,d.y)||b(g,d.x2,d.y)||b(g,d.x,d.y2)||b(g,d.x2,d.y2)||(g.x<d.x2&&g.x>d.x||d.x<g.x2&&d.x>g.x)&&(g.y<d.y2&&g.y>d.y||d.y<g.y2&&d.y>g.y)};function bj(b,S,R,E,i){var g=-3*S+9*R-9*E+3*i,d=b*g+6*S-12*R+6*E;return b*d-3*S+3*R}function q(bW,R,bV,g,bU,d,bR,b,bO){if(bO==null){bO=1}bO=bO>1?1:bO<0?0:bO;var bP=bO/2,bQ=12,bL=[-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],bT=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],E=0;for(var bS=0;bS<bQ;bS++){var bM=bP*bL[bS]+bP,bN=bj(bM,bW,bV,bU,bR),bX=bj(bM,R,g,d,b),S=bN*bN+bX*bX;E+=bT[bS]*au.sqrt(S)}return bP*E}function C(g,bP,d,bO,b,bM,bR,bL,bN){if(bN<0||q(g,bP,d,bO,b,bM,bR,bL)<bN){return}var bQ=1,i=bQ/2,R=bQ-i,E,S=0.01;E=q(g,bP,d,bO,b,bM,bR,bL,R);while(aw(E-bN)>S){i/=2;R+=(E<bN?1:-1)*i;E=q(g,bP,d,bO,b,bM,bR,bL,R)}return R}function O(i,bQ,g,bO,b,bN,bS,bM){if(m(i,g)<bm(b,bS)||bm(i,g)>m(b,bS)||m(bQ,bO)<bm(bN,bM)||bm(bQ,bO)>m(bN,bM)){return}var bL=(i*bO-bQ*g)*(b-bS)-(i-g)*(b*bM-bN*bS),S=(i*bO-bQ*g)*(bN-bM)-(bQ-bO)*(b*bM-bN*bS),E=(i-g)*(bN-bM)-(bQ-bO)*(b-bS);if(!E){return}var bR=bL/E,bP=S/E,R=+bR.toFixed(2),d=+bP.toFixed(2);if(R<+bm(i,g).toFixed(2)||R>+m(i,g).toFixed(2)||R<+bm(b,bS).toFixed(2)||R>+m(b,bS).toFixed(2)||d<+bm(bQ,bO).toFixed(2)||d>+m(bQ,bO).toFixed(2)||d<+bm(bN,bM).toFixed(2)||d>+m(bN,bM).toFixed(2)){return}return{x:bR,y:bP}}function ay(d,b){return af(d,b)}function t(d,b){return af(d,b,1)}function af(b2,b1,b0){var E=aR.bezierBBox(b2),d=aR.bezierBBox(b1);if(!aR.isBBoxIntersect(E,d)){return b0?0:[]}var bV=q.apply(0,b2),bU=q.apply(0,b1),bM=~~(bV/5),bL=~~(bU/5),bS=[],bR=[],g={},b3=b0?0:[];for(var bX=0;bX<bM+1;bX++){var bT=aR.findDotsAtSegment.apply(aR,b2.concat(bX/bM));bS.push({x:bT.x,y:bT.y,t:bX/bM})}for(bX=0;bX<bL+1;bX++){bT=aR.findDotsAtSegment.apply(aR,b1.concat(bX/bL));bR.push({x:bT.x,y:bT.y,t:bX/bL})}for(bX=0;bX<bM;bX++){for(var bW=0;bW<bL;bW++){var bZ=bS[bX],b=bS[bX+1],bY=bR[bW],S=bR[bW+1],bQ=aw(b.x-bZ.x)<0.001?"y":"x",bP=aw(S.x-bY.x)<0.001?"y":"x",R=O(bZ.x,bZ.y,b.x,b.y,bY.x,bY.y,S.x,S.y);if(R){if(g[R.x.toFixed(4)]==R.y.toFixed(4)){continue}g[R.x.toFixed(4)]=R.y.toFixed(4);var bO=bZ.t+aw((R[bQ]-bZ[bQ])/(b[bQ]-bZ[bQ]))*(b.t-bZ.t),bN=bY.t+aw((R[bP]-bY[bP])/(S[bP]-bY[bP]))*(S.t-bY.t);if(bO>=0&&bO<=1&&bN>=0&&bN<=1){if(b0){b3++}else{b3.push({x:R.x,y:R.y,t1:bO,t2:bN})}}}}}return b3}aR.pathIntersection=function(d,b){return D(d,b)};aR.pathIntersectionNumber=function(d,b){return D(d,b,1)};function D(g,b,bW){g=aR._path2curve(g);b=aR._path2curve(b);var bU,S,bT,E,bR,bL,d,bO,b0,bZ,b1=bW?0:[];for(var bS=0,bM=g.length;bS<bM;bS++){var bY=g[bS];if(bY[0]=="M"){bU=bR=bY[1];S=bL=bY[2]}else{if(bY[0]=="C"){b0=[bU,S].concat(bY.slice(1));bU=b0[6];S=b0[7]}else{b0=[bU,S,bU,S,bR,bL,bR,bL];bU=bR;S=bL}for(var bQ=0,bV=b.length;bQ<bV;bQ++){var bX=b[bQ];if(bX[0]=="M"){bT=d=bX[1];E=bO=bX[2]}else{if(bX[0]=="C"){bZ=[bT,E].concat(bX.slice(1));bT=bZ[6];E=bZ[7]}else{bZ=[bT,E,bT,E,d,bO,d,bO];bT=d;E=bO}var bN=af(b0,bZ,bW);if(bW){b1+=bN}else{for(var bP=0,R=bN.length;bP<R;bP++){bN[bP].segment1=bS;bN[bP].segment2=bQ;bN[bP].bez1=b0;bN[bP].bez2=bZ}b1=b1.concat(bN)}}}}}return b1}aR.isPointInsidePath=function(d,b,i){var g=aR.pathBBox(d);return aR.isPointInsideBBox(g,b,i)&&D(d,[["M",b,i],["H",g.x2+10]],1)%2==1};aR._removedFactory=function(b){return function(){eve("raphael.log",null,"Rapha\xebl: you are calling to method \u201c"+b+"\u201d of removed object",b)}};var am=aR.pathBBox=function(bT){var bN=Y(bT);if(bN.bbox){return bN.bbox}if(!bT){return{x:0,y:0,width:0,height:0,x2:0,y2:0}}bT=W(bT);var bQ=0,bP=0,R=[],d=[],g;for(var bL=0,bS=bT.length;bL<bS;bL++){g=bT[bL];if(g[0]=="M"){bQ=g[1];bP=g[2];R.push(bQ);d.push(bP)}else{var bM=ba(bQ,bP,g[1],g[2],g[3],g[4],g[5],g[6]);R=R[bE](bM.min.x,bM.max.x);d=d[bE](bM.min.y,bM.max.y);bQ=g[5];bP=g[6]}}var b=bm[bG](0,R),bR=bm[bG](0,d),S=m[bG](0,R),E=m[bG](0,d),bO={x:b,y:bR,x2:S,y2:E,width:S-b,height:E-bR};bN.bbox=X(bO);return bO},aZ=function(d){var b=X(d);b.toString=aR._path2string;return b},aC=aR._pathToRelative=function(E){var bM=Y(E);if(bM.rel){return aZ(bM.rel)}if(!aR.is(E,bd)||!aR.is(E&&E[0],bd)){E=aR.parsePathString(E)}var bP=[],bR=0,bQ=0,bU=0,bT=0,g=0;if(E[0][0]=="M"){bR=E[0][1];bQ=E[0][2];bU=bR;bT=bQ;g++;bP.push(["M",bR,bQ])}for(var bL=g,bV=E.length;bL<bV;bL++){var b=bP[bL]=[],bS=E[bL];if(bS[0]!=bK.call(bS[0])){b[0]=bK.call(bS[0]);switch(b[0]){case"a":b[1]=bS[1];b[2]=bS[2];b[3]=bS[3];b[4]=bS[4];b[5]=bS[5];b[6]=+(bS[6]-bR).toFixed(3);b[7]=+(bS[7]-bQ).toFixed(3);break;case"v":b[1]=+(bS[1]-bQ).toFixed(3);break;case"m":bU=bS[1];bT=bS[2];default:for(var S=1,bN=bS.length;S<bN;S++){b[S]=+(bS[S]-((S%2)?bR:bQ)).toFixed(3)}}}else{b=bP[bL]=[];if(bS[0]=="m"){bU=bS[1]+bR;bT=bS[2]+bQ}for(var R=0,d=bS.length;R<d;R++){bP[bL][R]=bS[R]}}var bO=bP[bL].length;switch(bP[bL][0]){case"z":bR=bU;bQ=bT;break;case"h":bR+=+bP[bL][bO-1];break;case"v":bQ+=+bP[bL][bO-1];break;default:bR+=+bP[bL][bO-2];bQ+=+bP[bL][bO-1]}}bP.toString=aR._path2string;bM.rel=aZ(bP);return bP},w=aR._pathToAbsolute=function(bQ){var g=Y(bQ);if(g.abs){return aZ(g.abs)}if(!aR.is(bQ,bd)||!aR.is(bQ&&bQ[0],bd)){bQ=aR.parsePathString(bQ)}if(!bQ||!bQ.length){return[["M",0,0]]}var bW=[],bL=0,S=0,bO=0,bN=0,E=0;if(bQ[0][0]=="M"){bL=+bQ[0][1];S=+bQ[0][2];bO=bL;bN=S;E++;bW[0]=["M",bL,S]}var bV=bQ.length==3&&bQ[0][0]=="M"&&bQ[1][0].toUpperCase()=="R"&&bQ[2][0].toUpperCase()=="Z";for(var bP,b,bT=E,bM=bQ.length;bT<bM;bT++){bW.push(bP=[]);b=bQ[bT];if(b[0]!=bt.call(b[0])){bP[0]=bt.call(b[0]);switch(bP[0]){case"A":bP[1]=b[1];bP[2]=b[2];bP[3]=b[3];bP[4]=b[4];bP[5]=b[5];bP[6]=+(b[6]+bL);bP[7]=+(b[7]+S);break;case"V":bP[1]=+b[1]+S;break;case"H":bP[1]=+b[1]+bL;break;case"R":var R=[bL,S][bE](b.slice(1));for(var bS=2,bU=R.length;bS<bU;bS++){R[bS]=+R[bS]+bL;R[++bS]=+R[bS]+S}bW.pop();bW=bW[bE](bb(R,bV));break;case"M":bO=+b[1]+bL;bN=+b[2]+S;default:for(bS=1,bU=b.length;bS<bU;bS++){bP[bS]=+b[bS]+((bS%2)?bL:S)}}}else{if(b[0]=="R"){R=[bL,S][bE](b.slice(1));bW.pop();bW=bW[bE](bb(R,bV));bP=["R"][bE](b.slice(-2))}else{for(var bR=0,d=b.length;bR<d;bR++){bP[bR]=b[bR]}}}switch(bP[0]){case"Z":bL=bO;S=bN;break;case"H":bL=bP[1];break;case"V":S=bP[1];break;case"M":bO=bP[bP.length-2];bN=bP[bP.length-1];default:bL=bP[bP.length-2];S=bP[bP.length-1]}}bW.toString=aR._path2string;g.abs=aZ(bW);return bW},bI=function(d,i,b,g){return[d,i,b,g,b,g]},bn=function(d,i,S,E,b,g){var R=1/3,bL=2/3;return[R*d+bL*S,R*i+bL*E,R*b+bL*S,R*g+bL*E,b,g]},ae=function(bS,cn,b1,bZ,bT,bN,E,bR,cm,bU){var bY=aV*120/180,b=aV/180*(+bT||0),b5=[],b2,cj=aG(function(co,cr,i){var cq=co*au.cos(i)-cr*au.sin(i),cp=co*au.sin(i)+cr*au.cos(i);return{x:cq,y:cp}});if(!bU){b2=cj(bS,cn,-b);bS=b2.x;cn=b2.y;b2=cj(bR,cm,-b);bR=b2.x;cm=b2.y;var d=au.cos(aV/180*bT),bP=au.sin(aV/180*bT),b7=(bS-bR)/2,b6=(cn-cm)/2;var ch=(b7*b7)/(b1*b1)+(b6*b6)/(bZ*bZ);if(ch>1){ch=au.sqrt(ch);b1=ch*b1;bZ=ch*bZ}var g=b1*b1,ca=bZ*bZ,cc=(bN==E?-1:1)*au.sqrt(aw((g*ca-g*b6*b6-ca*b7*b7)/(g*b6*b6+ca*b7*b7))),bW=cc*b1*b6/bZ+(bS+bR)/2,bV=cc*-bZ*b7/b1+(cn+cm)/2,bM=au.asin(((cn-bV)/bZ).toFixed(9)),bL=au.asin(((cm-bV)/bZ).toFixed(9));bM=bS<bW?aV-bM:bM;bL=bR<bW?aV-bL:bL;bM<0&&(bM=aV*2+bM);bL<0&&(bL=aV*2+bL);if(E&&bM>bL){bM=bM-aV*2}if(!E&&bL>bM){bL=bL-aV*2}}else{bM=bU[0];bL=bU[1];bW=bU[2];bV=bU[3]}var bQ=bL-bM;if(aw(bQ)>bY){var bX=bL,b0=bR,bO=cm;bL=bM+bY*(E&&bL>bM?1:-1);bR=bW+b1*au.cos(bL);cm=bV+bZ*au.sin(bL);b5=ae(bR,cm,b1,bZ,bT,0,E,b0,bO,[bL,bX,bW,bV])}bQ=bL-bM;var S=au.cos(bM),cl=au.sin(bM),R=au.cos(bL),ck=au.sin(bL),b8=au.tan(bQ/4),cb=4/3*b1*b8,b9=4/3*bZ*b8,ci=[bS,cn],cg=[bS+cb*cl,cn-b9*S],cf=[bR+cb*ck,cm-b9*R],cd=[bR,cm];cg[0]=2*ci[0]-cg[0];cg[1]=2*ci[1]-cg[1];if(bU){return[cg,cf,cd][bE](b5)}else{b5=[cg,cf,cd][bE](b5).join()[F](",");var b3=[];for(var ce=0,b4=b5.length;ce<b4;ce++){b3[ce]=ce%2?cj(b5[ce-1],b5[ce],b).y:cj(b5[ce],b5[ce+1],b).x}return b3}},ag=function(d,b,i,g,bM,bL,S,R,bN){var E=1-bN;return{x:bp(E,3)*d+bp(E,2)*3*bN*i+E*3*bN*bN*bM+bp(bN,3)*S,y:bp(E,3)*b+bp(E,2)*3*bN*g+E*3*bN*bN*bL+bp(bN,3)*R}},ba=aG(function(i,d,R,E,bU,bT,bQ,bN){var bS=(bU-2*R+i)-(bQ-2*bU+R),bP=2*(R-i)-2*(bU-R),bM=i-R,bL=(-bP+au.sqrt(bP*bP-4*bS*bM))/2/bS,S=(-bP-au.sqrt(bP*bP-4*bS*bM))/2/bS,bO=[d,bN],bR=[i,bQ],g;aw(bL)>"1e12"&&(bL=0.5);aw(S)>"1e12"&&(S=0.5);if(bL>0&&bL<1){g=ag(i,d,R,E,bU,bT,bQ,bN,bL);bR.push(g.x);bO.push(g.y)}if(S>0&&S<1){g=ag(i,d,R,E,bU,bT,bQ,bN,S);bR.push(g.x);bO.push(g.y)}bS=(bT-2*E+d)-(bN-2*bT+E);bP=2*(E-d)-2*(bT-E);bM=d-E;bL=(-bP+au.sqrt(bP*bP-4*bS*bM))/2/bS;S=(-bP-au.sqrt(bP*bP-4*bS*bM))/2/bS;aw(bL)>"1e12"&&(bL=0.5);aw(S)>"1e12"&&(S=0.5);if(bL>0&&bL<1){g=ag(i,d,R,E,bU,bT,bQ,bN,bL);bR.push(g.x);bO.push(g.y)}if(S>0&&S<1){g=ag(i,d,R,E,bU,bT,bQ,bN,S);bR.push(g.x);bO.push(g.y)}return{min:{x:bm[bG](0,bR),y:bm[bG](0,bO)},max:{x:m[bG](0,bR),y:m[bG](0,bO)}}}),W=aR._path2curve=aG(function(bU,bP){var bN=!bP&&Y(bU);if(!bP&&bN.curve){return aZ(bN.curve)}var E=w(bU),bQ=bP&&w(bP),bR={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},d={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},S=function(bV,bW){var i,bX;if(!bV){return["C",bW.x,bW.y,bW.x,bW.y,bW.x,bW.y]}!(bV[0] in {T:1,Q:1})&&(bW.qx=bW.qy=null);switch(bV[0]){case"M":bW.X=bV[1];bW.Y=bV[2];break;case"A":bV=["C"][bE](ae[bG](0,[bW.x,bW.y][bE](bV.slice(1))));break;case"S":i=bW.x+(bW.x-(bW.bx||bW.x));bX=bW.y+(bW.y-(bW.by||bW.y));bV=["C",i,bX][bE](bV.slice(1));break;case"T":bW.qx=bW.x+(bW.x-(bW.qx||bW.x));bW.qy=bW.y+(bW.y-(bW.qy||bW.y));bV=["C"][bE](bn(bW.x,bW.y,bW.qx,bW.qy,bV[1],bV[2]));break;case"Q":bW.qx=bV[1];bW.qy=bV[2];bV=["C"][bE](bn(bW.x,bW.y,bV[1],bV[2],bV[3],bV[4]));break;case"L":bV=["C"][bE](bI(bW.x,bW.y,bV[1],bV[2]));break;case"H":bV=["C"][bE](bI(bW.x,bW.y,bV[1],bW.y));break;case"V":bV=["C"][bE](bI(bW.x,bW.y,bW.x,bV[1]));break;case"Z":bV=["C"][bE](bI(bW.x,bW.y,bW.X,bW.Y));break}return bV},b=function(bV,bW){if(bV[bW].length>7){bV[bW].shift();var bX=bV[bW];while(bX.length){bV.splice(bW++,0,["C"][bE](bX.splice(0,6)))}bV.splice(bW,1);bS=m(E.length,bQ&&bQ.length||0)}},g=function(bZ,bY,bW,bV,bX){if(bZ&&bY&&bZ[bX][0]=="M"&&bY[bX][0]!="M"){bY.splice(bX,0,["M",bV.x,bV.y]);bW.bx=0;bW.by=0;bW.x=bZ[bX][1];bW.y=bZ[bX][2];bS=m(E.length,bQ&&bQ.length||0)}};for(var bM=0,bS=m(E.length,bQ&&bQ.length||0);bM<bS;bM++){E[bM]=S(E[bM],bR);b(E,bM);bQ&&(bQ[bM]=S(bQ[bM],d));bQ&&b(bQ,bM);g(E,bQ,bR,d,bM);g(bQ,E,d,bR,bM);var bL=E[bM],bT=bQ&&bQ[bM],R=bL.length,bO=bQ&&bT.length;bR.x=bL[R-2];bR.y=bL[R-1];bR.bx=an(bL[R-4])||bR.x;bR.by=an(bL[R-3])||bR.y;d.bx=bQ&&(an(bT[bO-4])||d.x);d.by=bQ&&(an(bT[bO-3])||d.y);d.x=bQ&&bT[bO-2];d.y=bQ&&bT[bO-1]}if(!bQ){bN.curve=aZ(E)}return bQ?[E,bQ]:E},null,aZ),v=aR._parseDots=aG(function(bO){var bN=[];for(var S=0,bP=bO.length;S<bP;S++){var b={},bM=bO[S].match(/^([^:]*):?([\d\.]*)/);b.color=aR.getRGB(bM[1]);if(b.color.error){return null}b.color=b.color.hex;bM[2]&&(b.offset=bM[2]+"%");bN.push(b)}for(S=1,bP=bN.length-1;S<bP;S++){if(!bN[S].offset){var g=an(bN[S-1].offset||0),E=0;for(var R=S+1;R<bP;R++){if(bN[R].offset){E=bN[R].offset;break}}if(!E){E=100;R=bP}E=an(E);var bL=(E-g)/(R-S+1);for(;S<R;S++){g+=bL;bN[S].offset=g+"%"}}}return bN}),aK=aR._tear=function(b,d){b==d.top&&(d.top=b.prev);b==d.bottom&&(d.bottom=b.next);b.next&&(b.next.prev=b.prev);b.prev&&(b.prev.next=b.next)},ap=aR._tofront=function(b,d){if(d.top===b){return}aK(b,d);b.next=null;b.prev=d.top;d.top.next=b;d.top=b},p=aR._toback=function(b,d){if(d.bottom===b){return}aK(b,d);b.next=d.bottom;b.prev=null;d.bottom.prev=b;d.bottom=b},G=aR._insertafter=function(d,b,g){aK(d,g);b==g.top&&(g.top=d);b.next&&(b.next.prev=d);d.next=b.next;d.prev=b;b.next=d},aT=aR._insertbefore=function(d,b,g){aK(d,g);b==g.bottom&&(g.bottom=d);b.prev&&(b.prev.next=d);d.prev=b.prev;b.prev=d;d.next=b},bl=aR.toMatrix=function(g,b){var i=am(g),d={_:{transform:aX},getBBox:function(){return i}};aO(d,b);return d.matrix},T=aR.transformPath=function(d,b){return L(d,bl(d,b))},aO=aR._extractTransform=function(d,bZ){if(bZ==null){return d._.transform}bZ=bH(bZ).replace(/\.{3}|\u2026/g,d._.transform||aX);var bR=aR.parseTransformString(bZ),bP=0,bN=0,bM=0,bT=1,bS=1,b0=d._,bU=new aF;b0.transform=bR||[];if(bR){for(var bV=0,bO=bR.length;bV<bO;bV++){var bQ=bR[bV],b=bQ.length,R=bH(bQ[0]).toLowerCase(),bY=bQ[0]!=R,bL=bY?bU.invert():0,bX,E,bW,g,S;if(R=="t"&&b==3){if(bY){bX=bL.x(0,0);E=bL.y(0,0);bW=bL.x(bQ[1],bQ[2]);g=bL.y(bQ[1],bQ[2]);bU.translate(bW-bX,g-E)}else{bU.translate(bQ[1],bQ[2])}}else{if(R=="r"){if(b==2){S=S||d.getBBox(1);bU.rotate(bQ[1],S.x+S.width/2,S.y+S.height/2);bP+=bQ[1]}else{if(b==4){if(bY){bW=bL.x(bQ[2],bQ[3]);g=bL.y(bQ[2],bQ[3]);bU.rotate(bQ[1],bW,g)}else{bU.rotate(bQ[1],bQ[2],bQ[3])}bP+=bQ[1]}}}else{if(R=="s"){if(b==2||b==3){S=S||d.getBBox(1);bU.scale(bQ[1],bQ[b-1],S.x+S.width/2,S.y+S.height/2);bT*=bQ[1];bS*=bQ[b-1]}else{if(b==5){if(bY){bW=bL.x(bQ[3],bQ[4]);g=bL.y(bQ[3],bQ[4]);bU.scale(bQ[1],bQ[2],bW,g)}else{bU.scale(bQ[1],bQ[2],bQ[3],bQ[4])}bT*=bQ[1];bS*=bQ[2]}}}else{if(R=="m"&&b==7){bU.add(bQ[1],bQ[2],bQ[3],bQ[4],bQ[5],bQ[6])}}}}b0.dirtyT=1;d.matrix=bU}}d.matrix=bU;b0.sx=bT;b0.sy=bS;b0.deg=bP;b0.dx=bN=bU.e;b0.dy=bM=bU.f;if(bT==1&&bS==1&&!bP&&b0.bbox){b0.bbox.x+=+bN;b0.bbox.y+=+bM}else{b0.dirtyT=1}},l=function(d){var b=d[0];switch(b.toLowerCase()){case"t":return[b,0,0];case"m":return[b,1,0,0,1,0,0];case"r":if(d.length==4){return[b,0,d[2],d[3]]}else{return[b,0]}case"s":if(d.length==5){return[b,1,1,d[3],d[4]]}else{if(d.length==3){return[b,1,1]}else{return[b,1]}}}},aB=aR._equaliseTransform=function(R,E){E=bH(E).replace(/\.{3}|\u2026/g,R);R=aR.parseTransformString(R)||[];E=aR.parseTransformString(E)||[];var b=m(R.length,E.length),bN=[],bO=[],g=0,d,S,bM,bL;for(;g<b;g++){bM=R[g]||l(E[g]);bL=E[g]||l(bM);if((bM[0]!=bL[0])||(bM[0].toLowerCase()=="r"&&(bM[2]!=bL[2]||bM[3]!=bL[3]))||(bM[0].toLowerCase()=="s"&&(bM[3]!=bL[3]||bM[4]!=bL[4]))){return}bN[g]=[];bO[g]=[];for(d=0,S=m(bM.length,bL.length);d<S;d++){d in bM&&(bN[g][d]=bM[d]);d in bL&&(bO[g][d]=bL[d])}}return{from:bN,to:bO}};aR._getContainer=function(b,E,g,i){var d;d=i==null&&!aR.is(b,"object")?aA.doc.getElementById(b):b;if(d==null){return}if(d.tagName){if(E==null){return{container:d,width:d.style.pixelWidth||d.offsetWidth,height:d.style.pixelHeight||d.offsetHeight}}else{return{container:d,width:E,height:g}}}return{container:1,x:b,y:E,width:g,height:i}};aR.pathToRelative=aC;aR._engine={};aR.path2curve=W;aR.matrix=function(i,g,bL,S,R,E){return new aF(i,g,bL,S,R,E)};function aF(i,g,bL,S,R,E){if(i!=null){this.a=+i;this.b=+g;this.c=+bL;this.d=+S;this.e=+R;this.f=+E}else{this.a=1;this.b=0;this.c=0;this.d=1;this.e=0;this.f=0}}(function(g){g.add=function(bT,bQ,bO,bM,S,R){var E=[[],[],[]],i=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],bS=[[bT,bO,S],[bQ,bM,R],[0,0,1]],bR,bP,bN,bL;if(bT&&bT instanceof aF){bS=[[bT.a,bT.c,bT.e],[bT.b,bT.d,bT.f],[0,0,1]]}for(bR=0;bR<3;bR++){for(bP=0;bP<3;bP++){bL=0;for(bN=0;bN<3;bN++){bL+=i[bR][bN]*bS[bN][bP]}E[bR][bP]=bL}}this.a=E[0][0];this.b=E[1][0];this.c=E[0][1];this.d=E[1][1];this.e=E[0][2];this.f=E[1][2]};g.invert=function(){var E=this,i=E.a*E.d-E.b*E.c;return new aF(E.d/i,-E.b/i,-E.c/i,E.a/i,(E.c*E.f-E.d*E.e)/i,(E.b*E.e-E.a*E.f)/i)};g.clone=function(){return new aF(this.a,this.b,this.c,this.d,this.e,this.f)};g.translate=function(i,E){this.add(1,0,0,1,i,E)};g.scale=function(E,S,i,R){S==null&&(S=E);(i||R)&&this.add(1,0,0,1,i,R);this.add(E,0,0,S,0,0);(i||R)&&this.add(1,0,0,1,-i,-R)};g.rotate=function(E,i,bL){E=aR.rad(E);i=i||0;bL=bL||0;var S=+au.cos(E).toFixed(9),R=+au.sin(E).toFixed(9);this.add(S,R,-R,S,i,bL);this.add(1,0,0,1,-i,-bL)};g.x=function(i,E){return i*this.a+E*this.c+this.e};g.y=function(i,E){return i*this.b+E*this.d+this.f};g.get=function(E){return +this[bH.fromCharCode(97+E)].toFixed(4)};g.toString=function(){return aR.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()};g.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"};g.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};function d(i){return i[0]*i[0]+i[1]*i[1]}function b(i){var E=au.sqrt(d(i));i[0]&&(i[0]/=E);i[1]&&(i[1]/=E)}g.split=function(){var E={};E.dx=this.e;E.dy=this.f;var S=[[this.a,this.c],[this.b,this.d]];E.scalex=au.sqrt(d(S[0]));b(S[0]);E.shear=S[0][0]*S[1][0]+S[0][1]*S[1][1];S[1]=[S[1][0]-S[0][0]*E.shear,S[1][1]-S[0][1]*E.shear];E.scaley=au.sqrt(d(S[1]));b(S[1]);E.shear/=E.scaley;var i=-S[0][1],R=S[1][1];if(R<0){E.rotate=aR.deg(au.acos(R));if(i<0){E.rotate=360-E.rotate}}else{E.rotate=aR.deg(au.asin(i))}E.isSimple=!+E.shear.toFixed(9)&&(E.scalex.toFixed(9)==E.scaley.toFixed(9)||!E.rotate);E.isSuperSimple=!+E.shear.toFixed(9)&&E.scalex.toFixed(9)==E.scaley.toFixed(9)&&!E.rotate;E.noRotation=!+E.shear.toFixed(9)&&!E.rotate;return E};g.toTransformString=function(i){var E=i||this[F]();if(E.isSimple){E.scalex=+E.scalex.toFixed(4);E.scaley=+E.scaley.toFixed(4);E.rotate=+E.rotate.toFixed(4);return(E.dx||E.dy?"t"+[E.dx,E.dy]:aX)+(E.scalex!=1||E.scaley!=1?"s"+[E.scalex,E.scaley,0,0]:aX)+(E.rotate?"r"+[E.rotate,0,0]:aX)}else{return"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}})(aF.prototype);var V=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);if((navigator.vendor=="Apple Computer, Inc.")&&(V&&V[1]<4||navigator.platform.slice(0,2)=="iP")||(navigator.vendor=="Google Inc."&&V&&V[1]<8)){a4.safari=function(){var b=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){b.remove()})}}else{a4.safari=I}var P=function(){this.returnValue=false},bD=function(){return this.originalEvent.preventDefault()},a8=function(){this.cancelBubble=true},aJ=function(){return this.originalEvent.stopPropagation()},aD=(function(){if(aA.doc.addEventListener){return function(R,i,g,d){var b=Z&&bx[i]?bx[i]:i,E=function(bP){var bO=aA.doc.documentElement.scrollTop||aA.doc.body.scrollTop,bQ=aA.doc.documentElement.scrollLeft||aA.doc.body.scrollLeft,S=bP.clientX+bQ,bR=bP.clientY+bO;if(Z&&bx[ak](i)){for(var bM=0,bN=bP.targetTouches&&bP.targetTouches.length;bM<bN;bM++){if(bP.targetTouches[bM].target==R){var bL=bP;bP=bP.targetTouches[bM];bP.originalEvent=bL;bP.preventDefault=bD;bP.stopPropagation=aJ;break}}}return g.call(d,bP,S,bR)};R.addEventListener(b,E,false);return function(){R.removeEventListener(b,E,false);return true}}}else{if(aA.doc.attachEvent){return function(R,i,g,d){var E=function(bM){bM=bM||aA.win.event;var bL=aA.doc.documentElement.scrollTop||aA.doc.body.scrollTop,bN=aA.doc.documentElement.scrollLeft||aA.doc.body.scrollLeft,S=bM.clientX+bN,bO=bM.clientY+bL;bM.preventDefault=bM.preventDefault||P;bM.stopPropagation=bM.stopPropagation||a8;return g.call(d,bM,S,bO)};R.attachEvent("on"+i,E);var b=function(){R.detachEvent("on"+i,E);return true};return b}}}})(),be=[],by=function(bM){var bP=bM.clientX,bO=bM.clientY,bR=aA.doc.documentElement.scrollTop||aA.doc.body.scrollTop,bS=aA.doc.documentElement.scrollLeft||aA.doc.body.scrollLeft,g,E=be.length;while(E--){g=be[E];if(Z){var S=bM.touches.length,R;while(S--){R=bM.touches[S];if(R.identifier==g.el._drag.id){bP=R.clientX;bO=R.clientY;(bM.originalEvent?bM.originalEvent:bM).preventDefault();break}}}else{bM.preventDefault()}var d=g.el.node,b,bL=d.nextSibling,bQ=d.parentNode,bN=d.style.display;aA.win.opera&&bQ.removeChild(d);d.style.display="none";b=g.el.paper.getElementByPoint(bP,bO);d.style.display=bN;aA.win.opera&&(bL?bQ.insertBefore(d,bL):bQ.appendChild(d));b&&eve("raphael.drag.over."+g.el.id,g.el,b);bP+=bS;bO+=bR;eve("raphael.drag.move."+g.el.id,g.move_scope||g.el,bP-g.el._drag.x,bO-g.el._drag.y,bP,bO,bM)}},e=function(g){aR.unmousemove(by).unmouseup(e);var d=be.length,b;while(d--){b=be[d];b.el._drag={};eve("raphael.drag.end."+b.el.id,b.end_scope||b.start_scope||b.move_scope||b.el,g)}be=[]},bh=aR.el={};for(var ax=Q.length;ax--;){(function(b){aR[b]=bh[b]=function(g,d){if(aR.is(g,"function")){this.events=this.events||[];this.events.push({name:b,f:g,unbind:aD(this.shape||this.node||aA.doc,b,g,d||this)})}return this};aR["un"+b]=bh["un"+b]=function(i){var g=this.events||[],d=g.length;while(d--){if(g[d].name==b&&g[d].f==i){g[d].unbind();g.splice(d,1);!g.length&&delete this.events;return this}}return this}})(Q[ax])}bh.data=function(d,E){var g=aU[this.id]=aU[this.id]||{};if(arguments.length==1){if(aR.is(d,"object")){for(var b in d){if(d[ak](b)){this.data(b,d[b])}}return this}eve("raphael.data.get."+this.id,this,g[d],d);return g[d]}g[d]=E;eve("raphael.data.set."+this.id,this,E,d);return this};bh.removeData=function(b){if(b==null){aU[this.id]={}}else{aU[this.id]&&delete aU[this.id][b]}return this};bh.hover=function(i,b,g,d){return this.mouseover(i,g).mouseout(b,d||g)};bh.unhover=function(d,b){return this.unmouseover(d).unmouseout(b)};var bu=[];bh.drag=function(d,R,E,b,g,i){function S(bM){(bM.originalEvent||bM).preventDefault();var bL=aA.doc.documentElement.scrollTop||aA.doc.body.scrollTop,bN=aA.doc.documentElement.scrollLeft||aA.doc.body.scrollLeft;this._drag.x=bM.clientX+bN;this._drag.y=bM.clientY+bL;this._drag.id=bM.identifier;!be.length&&aR.mousemove(by).mouseup(e);be.push({el:this,move_scope:b,start_scope:g,end_scope:i});R&&eve.on("raphael.drag.start."+this.id,R);d&&eve.on("raphael.drag.move."+this.id,d);E&&eve.on("raphael.drag.end."+this.id,E);eve("raphael.drag.start."+this.id,g||b||this,bM.clientX+bN,bM.clientY+bL,bM)}this._drag={};bu.push({el:this,start:S});this.mousedown(S);return this};bh.onDragOver=function(b){b?eve.on("raphael.drag.over."+this.id,b):eve.unbind("raphael.drag.over."+this.id)};bh.undrag=function(){var b=bu.length;while(b--){if(bu[b].el==this){this.unmousedown(bu[b].start);bu.splice(b,1);eve.unbind("raphael.drag.*."+this.id)}}!bu.length&&aR.unmousemove(by).unmouseup(e)};a4.circle=function(b,i,g){var d=aR._engine.circle(this,b||0,i||0,g||0);this.__set__&&this.__set__.push(d);return d};a4.rect=function(b,R,d,i,E){var g=aR._engine.rect(this,b||0,R||0,d||0,i||0,E||0);this.__set__&&this.__set__.push(g);return g};a4.ellipse=function(b,E,i,g){var d=aR._engine.ellipse(this,b||0,E||0,i||0,g||0);this.__set__&&this.__set__.push(d);return d};a4.path=function(b){b&&!aR.is(b,aj)&&!aR.is(b[0],bd)&&(b+=aX);var d=aR._engine.path(aR.format[bG](aR,arguments),this);this.__set__&&this.__set__.push(d);return d};a4.image=function(E,b,R,d,i){var g=aR._engine.image(this,E||"about:blank",b||0,R||0,d||0,i||0);this.__set__&&this.__set__.push(g);return g};a4.text=function(b,i,g){var d=aR._engine.text(this,b||0,i||0,bH(g));this.__set__&&this.__set__.push(d);return d};a4.set=function(d){!aR.is(d,"array")&&(d=Array.prototype.splice.call(arguments,0,arguments.length));var b=new al(d);this.__set__&&this.__set__.push(b);return b};a4.setStart=function(b){this.__set__=b||this.set()};a4.setFinish=function(d){var b=this.__set__;delete this.__set__;return b};a4.setSize=function(d,b){return aR._engine.setSize.call(this,d,b)};a4.setViewBox=function(b,E,d,i,g){return aR._engine.setViewBox.call(this,b,E,d,i,g)};a4.top=a4.bottom=null;a4.raphael=aR;var bs=function(g){var E=g.getBoundingClientRect(),bM=g.ownerDocument,R=bM.body,b=bM.documentElement,i=b.clientTop||R.clientTop||0,S=b.clientLeft||R.clientLeft||0,bL=E.top+(aA.win.pageYOffset||b.scrollTop||R.scrollTop)-i,d=E.left+(aA.win.pageXOffset||b.scrollLeft||R.scrollLeft)-S;return{y:bL,x:d}};a4.getElementByPoint=function(d,bL){var S=this,g=S.canvas,R=aA.doc.elementFromPoint(d,bL);if(aA.win.opera&&R.tagName=="svg"){var E=bs(g),i=g.createSVGRect();i.x=d-E.x;i.y=bL-E.y;i.width=i.height=1;var b=g.getIntersectionList(i,null);if(b.length){R=b[b.length-1]}}if(!R){return null}while(R.parentNode&&R!=g.parentNode&&!R.raphael){R=R.parentNode}R==S.canvas.parentNode&&(R=g);R=R&&R.raphael?S.getById(R.raphaelid):null;return R};a4.getById=function(d){var b=this.bottom;while(b){if(b.id==d){return b}b=b.next}return null};a4.forEach=function(g,b){var d=this.bottom;while(d){if(g.call(b,d)===false){return this}d=d.next}return this};a4.getElementsByPoint=function(b,g){var d=this.set();this.forEach(function(i){if(i.isPointInside(b,g)){d.push(i)}});return d};function y(){return this.x+aQ+this.y}function at(){return this.x+aQ+this.y+aQ+this.width+" \xd7 "+this.height}bh.isPointInside=function(b,g){var d=this.realPath=this.realPath||N[this.type](this);return aR.isPointInsidePath(d,b,g)};bh.getBBox=function(d){if(this.removed){return{}}var b=this._;if(d){if(b.dirty||!b.bboxwt){this.realPath=N[this.type](this);b.bboxwt=am(this.realPath);b.bboxwt.toString=at;b.dirty=0}return b.bboxwt}if(b.dirty||b.dirtyT||!b.bbox){if(b.dirty||!this.realPath){b.bboxwt=0;this.realPath=N[this.type](this)}b.bbox=am(L(this.realPath,this.matrix));b.bbox.toString=at;b.dirty=b.dirtyT=0}return b.bbox};bh.clone=function(){if(this.removed){return null}var b=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(b);return b};bh.glow=function(bL){if(this.type=="text"){return null}bL=bL||{};var g={width:(bL.width||10)+(+this.attr("stroke-width")||1),fill:bL.fill||false,opacity:bL.opacity||0.5,offsetx:bL.offsetx||0,offsety:bL.offsety||0,color:bL.color||"#000"},S=g.width/2,E=this.paper,b=E.set(),R=this.realPath||N[this.type](this);R=this.matrix?L(R,this.matrix):R;for(var d=1;d<S+1;d++){b.push(E.path(R).attr({stroke:g.color,fill:g.fill?g.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(g.width/S*d).toFixed(3),opacity:+(g.opacity/S).toFixed(3)}))}return b.insertBefore(this).translate(g.offsetx,g.offsety)};var a7={},k=function(d,b,E,i,bM,bL,S,R,g){if(g==null){return q(d,b,E,i,bM,bL,S,R)}else{return aR.findDotsAtSegment(d,b,E,i,bM,bL,S,R,C(d,b,E,i,bM,bL,S,R,g))}},a6=function(b,d){return function(bT,R,S){bT=W(bT);var bP,bO,g,bL,E="",bS={},bQ,bN=0;for(var bM=0,bR=bT.length;bM<bR;bM++){g=bT[bM];if(g[0]=="M"){bP=+g[1];bO=+g[2]}else{bL=k(bP,bO,g[1],g[2],g[3],g[4],g[5],g[6]);if(bN+bL>R){if(d&&!bS.start){bQ=k(bP,bO,g[1],g[2],g[3],g[4],g[5],g[6],R-bN);E+=["C"+bQ.start.x,bQ.start.y,bQ.m.x,bQ.m.y,bQ.x,bQ.y];if(S){return E}bS.start=E;E=["M"+bQ.x,bQ.y+"C"+bQ.n.x,bQ.n.y,bQ.end.x,bQ.end.y,g[5],g[6]].join();bN+=bL;bP=+g[5];bO=+g[6];continue}if(!b&&!d){bQ=k(bP,bO,g[1],g[2],g[3],g[4],g[5],g[6],R-bN);return{x:bQ.x,y:bQ.y,alpha:bQ.alpha}}}bN+=bL;bP=+g[5];bO=+g[6]}E+=g.shift()+g}bS.end=E;bQ=b?bN:d?bS:aR.findDotsAtSegment(bP,bO,g[0],g[1],g[2],g[3],g[4],g[5],1);bQ.alpha&&(bQ={x:bQ.x,y:bQ.y,alpha:bQ.alpha});return bQ}};var aS=a6(1),J=a6(),ad=a6(0,1);aR.getTotalLength=aS;aR.getPointAtLength=J;aR.getSubpath=function(d,i,g){if(this.getTotalLength(d)-g<0.000001){return ad(d,i).end}var b=ad(d,g,1);return i?ad(b,i).end:b};bh.getTotalLength=function(){if(this.type!="path"){return}if(this.node.getTotalLength){return this.node.getTotalLength()}return aS(this.attrs.path)};bh.getPointAtLength=function(b){if(this.type!="path"){return}return J(this.attrs.path,b)};bh.getSubpath=function(d,b){if(this.type!="path"){return}return aR.getSubpath(this.attrs.path,d,b)};var o=aR.easing_formulas={linear:function(b){return b},"<":function(b){return bp(b,1.7)},">":function(b){return bp(b,0.48)},"<>":function(bL){var i=0.48-bL/1.04,g=au.sqrt(0.1734+i*i),b=g-i,S=bp(aw(b),1/3)*(b<0?-1:1),R=-g-i,E=bp(aw(R),1/3)*(R<0?-1:1),d=S+E+0.5;return(1-d)*3*d*d+d*d*d},backIn:function(d){var b=1.70158;return d*d*((b+1)*d-b)},backOut:function(d){d=d-1;var b=1.70158;return d*d*((b+1)*d+b)+1},elastic:function(b){if(b==!!b){return b}return bp(2,-10*b)*au.sin((b-0.075)*(2*aV)/0.3)+1},bounce:function(i){var d=7.5625,g=2.75,b;if(i<(1/g)){b=d*i*i}else{if(i<(2/g)){i-=(1.5/g);b=d*i*i+0.75}else{if(i<(2.5/g)){i-=(2.25/g);b=d*i*i+0.9375}else{i-=(2.625/g);b=d*i*i+0.984375}}}return b}};o.easeIn=o["ease-in"]=o["<"];o.easeOut=o["ease-out"]=o[">"];o.easeInOut=o["ease-in-out"]=o["<>"];o["back-in"]=o.backIn;o["back-out"]=o.backOut;var ab=[],aN=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){setTimeout(b,16)},bC=function(){var bL=+new Date,bT=0;for(;bT<ab.length;bT++){var bZ=ab[bT];if(bZ.el.removed||bZ.paused){continue}var E=bL-bZ.start,bR=bZ.ms,bQ=bZ.easing,bU=bZ.from,bO=bZ.diff,d=bZ.to,bN=bZ.t,S=bZ.el,bP={},b,bX={},b1;if(bZ.initstatus){E=(bZ.initstatus*bZ.anim.top-bZ.prev)/(bZ.percent-bZ.prev)*bR;bZ.status=bZ.initstatus;delete bZ.initstatus;bZ.stop&&ab.splice(bT--,1)}else{bZ.status=(bZ.prev+(bZ.percent-bZ.prev)*(E/bR))/bZ.anim.top}if(E<0){continue}if(E<bR){var g=bQ(E/bR);for(var bS in bU){if(bU[ak](bS)){switch(ar[bS]){case aL:b=+bU[bS]+g*bR*bO[bS];break;case"colour":b="rgb("+[H(ah(bU[bS].r+g*bR*bO[bS].r)),H(ah(bU[bS].g+g*bR*bO[bS].g)),H(ah(bU[bS].b+g*bR*bO[bS].b))].join(",")+")";break;case"path":b=[];for(var bW=0,bM=bU[bS].length;bW<bM;bW++){b[bW]=[bU[bS][bW][0]];for(var bV=1,bY=bU[bS][bW].length;bV<bY;bV++){b[bW][bV]=+bU[bS][bW][bV]+g*bR*bO[bS][bW][bV]}b[bW]=b[bW].join(aQ)}b=b.join(aQ);break;case"transform":if(bO[bS].real){b=[];for(bW=0,bM=bU[bS].length;bW<bM;bW++){b[bW]=[bU[bS][bW][0]];for(bV=1,bY=bU[bS][bW].length;bV<bY;bV++){b[bW][bV]=bU[bS][bW][bV]+g*bR*bO[bS][bW][bV]}}}else{var b0=function(b2){return +bU[bS][b2]+g*bR*bO[bS][b2]};b=[["m",b0(0),b0(1),b0(2),b0(3),b0(4),b0(5)]]}break;case"csv":if(bS=="clip-rect"){b=[];bW=4;while(bW--){b[bW]=+bU[bS][bW]+g*bR*bO[bS][bW]}}break;default:var R=[][bE](bU[bS]);b=[];bW=S.paper.customAttributes[bS].length;while(bW--){b[bW]=+R[bW]+g*bR*bO[bS][bW]}break}bP[bS]=b}}S.attr(bP);(function(b3,i,b2){setTimeout(function(){eve("raphael.anim.frame."+b3,i,b2)})})(S.id,S,bZ.anim)}else{(function(b3,b2,i){setTimeout(function(){eve("raphael.anim.frame."+b2.id,b2,i);eve("raphael.anim.finish."+b2.id,b2,i);aR.is(b3,"function")&&b3.call(b2)})})(bZ.callback,S,bZ.anim);S.attr(d);ab.splice(bT--,1);if(bZ.repeat>1&&!bZ.next){for(b1 in d){if(d[ak](b1)){bX[b1]=bZ.totalOrigin[b1]}}bZ.el.attr(bX);aM(bZ.anim,bZ.el,bZ.anim.percents[0],null,bZ.totalOrigin,bZ.repeat-1)}if(bZ.next&&!bZ.stop){aM(bZ.anim,bZ.el,bZ.next,null,bZ.totalOrigin,bZ.repeat)}}}aR.svg&&S&&S.paper&&S.paper.safari();ab.length&&aN(bC)},H=function(b){return b>255?255:b<0?0:b};bh.animateWith=function(d,E,g,b,bL,bQ){var S=this;if(S.removed){bQ&&bQ.call(S);return S}var bO=g instanceof bA?g:aR.animation(g,b,bL,bQ),bN,bM;aM(bO,S,bO.percents[0],null,S.attr());for(var R=0,bP=ab.length;R<bP;R++){if(ab[R].anim==E&&ab[R].el==d){ab[bP-1].start=ab[R].start;break}}return S};function a3(bR,i,d,bQ,bP,bL){var bM=3*i,bO=3*(bQ-i)-bM,b=1-bM-bO,S=3*d,bN=3*(bP-d)-S,bS=1-S-bN;function R(bT){return((b*bT+bO)*bT+bM)*bT}function g(bT,bV){var bU=E(bT,bV);return((bS*bU+bN)*bU+S)*bU}function E(bT,b0){var bZ,bY,bW,bU,bX,bV;for(bW=bT,bV=0;bV<8;bV++){bU=R(bW)-bT;if(aw(bU)<b0){return bW}bX=(3*b*bW+2*bO)*bW+bM;if(aw(bX)<0.000001){break}bW=bW-bU/bX}bZ=0;bY=1;bW=bT;if(bW<bZ){return bZ}if(bW>bY){return bY}while(bZ<bY){bU=R(bW);if(aw(bU-bT)<b0){return bW}if(bT>bU){bZ=bW}else{bY=bW}bW=(bY-bZ)/2+bZ}return bW}return g(bR,1/(200*bL))}bh.onAnimation=function(b){b?eve.on("raphael.anim.frame."+this.id,b):eve.unbind("raphael.anim.frame."+this.id);return this};function bA(E,g){var d=[],i={};this.ms=g;this.times=1;if(E){for(var b in E){if(E[ak](b)){i[an(b)]=E[b];d.push(an(b))}}d.sort(u)}this.anim=i;this.top=d[d.length-1];this.percents=d}bA.prototype.delay=function(d){var b=new bA(this.anim,this.ms);b.times=this.times;b.del=+d||0;return b};bA.prototype.repeat=function(d){var b=new bA(this.anim,this.ms);b.del=this.del;b.times=au.floor(m(d,0))||1;return b};function aM(b3,g,b,b1,bL,bP){b=an(b);var ca,S,bO,cb=[],bV,bU,R,bX=b3.ms,b2={},E={},bR={};if(b1){for(b6=0,bQ=ab.length;b6<bQ;b6++){var b8=ab[b6];if(b8.el.id==g.id&&b8.anim==b3){if(b8.percent!=b){ab.splice(b6,1);bO=1}else{S=b8}g.attr(b8.totalOrigin);break}}}else{b1=+E}for(var b6=0,bQ=b3.percents.length;b6<bQ;b6++){if(b3.percents[b6]==b||b3.percents[b6]>b1*b3.top){b=b3.percents[b6];bU=b3.percents[b6-1]||0;bX=bX/b3.top*(b-bU);bV=b3.percents[b6+1];ca=b3.anim[b];break}else{if(b1){g.attr(b3.anim[b3.percents[b6]])}}}if(!ca){return}if(!S){for(var bZ in ca){if(ca[ak](bZ)){if(ar[ak](bZ)||g.paper.customAttributes[ak](bZ)){b2[bZ]=g.attr(bZ);(b2[bZ]==null)&&(b2[bZ]=r[bZ]);E[bZ]=ca[bZ];switch(ar[bZ]){case aL:bR[bZ]=(E[bZ]-b2[bZ])/bX;break;case"colour":b2[bZ]=aR.getRGB(b2[bZ]);var b0=aR.getRGB(E[bZ]);bR[bZ]={r:(b0.r-b2[bZ].r)/bX,g:(b0.g-b2[bZ].g)/bX,b:(b0.b-b2[bZ].b)/bX};break;case"path":var bM=W(b2[bZ],E[bZ]),bT=bM[1];b2[bZ]=bM[0];bR[bZ]=[];for(b6=0,bQ=b2[bZ].length;b6<bQ;b6++){bR[bZ][b6]=[0];for(var b5=1,b7=b2[bZ][b6].length;b5<b7;b5++){bR[bZ][b6][b5]=(bT[b6][b5]-b2[bZ][b6][b5])/bX}}break;case"transform":var cd=g._,cc=aB(cd[bZ],E[bZ]);if(cc){b2[bZ]=cc.from;E[bZ]=cc.to;bR[bZ]=[];bR[bZ].real=true;for(b6=0,bQ=b2[bZ].length;b6<bQ;b6++){bR[bZ][b6]=[b2[bZ][b6][0]];for(b5=1,b7=b2[bZ][b6].length;b5<b7;b5++){bR[bZ][b6][b5]=(E[bZ][b6][b5]-b2[bZ][b6][b5])/bX}}}else{var bY=(g.matrix||new aF),b9={_:{transform:cd.transform},getBBox:function(){return g.getBBox(1)}};b2[bZ]=[bY.a,bY.b,bY.c,bY.d,bY.e,bY.f];aO(b9,E[bZ]);E[bZ]=b9._.transform;bR[bZ]=[(b9.matrix.a-bY.a)/bX,(b9.matrix.b-bY.b)/bX,(b9.matrix.c-bY.c)/bX,(b9.matrix.d-bY.d)/bX,(b9.matrix.e-bY.e)/bX,(b9.matrix.f-bY.f)/bX]}break;case"csv":var d=bH(ca[bZ])[F](a),bN=bH(b2[bZ])[F](a);if(bZ=="clip-rect"){b2[bZ]=bN;bR[bZ]=[];b6=bN.length;while(b6--){bR[bZ][b6]=(d[b6]-b2[bZ][b6])/bX}}E[bZ]=d;break;default:d=[][bE](ca[bZ]);bN=[][bE](b2[bZ]);bR[bZ]=[];b6=g.paper.customAttributes[bZ].length;while(b6--){bR[bZ][b6]=((d[b6]||0)-(bN[b6]||0))/bX}break}}}}var bW=ca.easing,b4=aR.easing_formulas[bW];if(!b4){b4=bH(bW).match(c);if(b4&&b4.length==5){var bS=b4;b4=function(i){return a3(i,+bS[1],+bS[2],+bS[3],+bS[4],bX)}}else{b4=bB}}R=ca.start||b3.start||+new Date;b8={anim:b3,percent:b,timestamp:R,start:R+(b3.del||0),status:0,initstatus:b1||0,stop:false,ms:bX,easing:b4,from:b2,diff:bR,to:E,el:g,callback:ca.callback,prev:bU,next:bV,repeat:bP||b3.times,origin:g.attr(),totalOrigin:bL};ab.push(b8);if(b1&&!S&&!bO){b8.stop=true;b8.start=new Date-bX*b1;if(ab.length==1){return bC()}}if(bO){b8.start=new Date-b8.ms*b1}ab.length==1&&aN(bC)}else{S.initstatus=b1;S.start=new Date-S.ms*b1}eve("raphael.anim.start."+g.id,g,b3)}aR.animation=function(E,d,S,R){if(E instanceof bA){return E}if(aR.is(S,"function")||!S){R=R||S||null;S=null}E=Object(E);d=+d||0;var i={},g,b;for(b in E){if(E[ak](b)&&an(b)!=b&&an(b)+"%"!=b){g=true;i[b]=E[b]}}if(!g){return new bA(E,d)}else{S&&(i.easing=S);R&&(i.callback=R);return new bA({100:i},d)}};bh.animate=function(i,b,R,E){var d=this;if(d.removed){E&&E.call(d);return d}var g=i instanceof bA?i:aR.animation(i,b,R,E);aM(g,d,g.percents[0],null,d.attr());return d};bh.setTime=function(d,b){if(d&&b!=null){this.status(d,bm(b,d.ms)/d.ms)}return this};bh.status=function(R,E){var d=[],g=0,b,S;if(E!=null){aM(R,this,-1,bm(E,1));return this}else{b=ab.length;for(;g<b;g++){S=ab[g];if(S.el.id==this.id&&(!R||S.anim==R)){if(R){return S.status}d.push({anim:S.anim,status:S.status})}}if(R){return 0}return d}};bh.pause=function(d){for(var b=0;b<ab.length;b++){if(ab[b].el.id==this.id&&(!d||ab[b].anim==d)){if(eve("raphael.anim.pause."+this.id,this,ab[b].anim)!==false){ab[b].paused=true}}}return this};bh.resume=function(d){for(var b=0;b<ab.length;b++){if(ab[b].el.id==this.id&&(!d||ab[b].anim==d)){var g=ab[b];if(eve("raphael.anim.resume."+this.id,this,g.anim)!==false){delete g.paused;this.status(g.anim,g.status)}}}return this};bh.stop=function(d){for(var b=0;b<ab.length;b++){if(ab[b].el.id==this.id&&(!d||ab[b].anim==d)){if(eve("raphael.anim.stop."+this.id,this,ab[b].anim)!==false){ab.splice(b--,1)}}}return this};function aa(d){for(var b=0;b<ab.length;b++){if(ab[b].el.paper==d){ab.splice(b--,1)}}}eve.on("raphael.remove",aa);eve.on("raphael.clear",aa);bh.toString=function(){return"Rapha\xebl\u2019s object"};var al=function(b){this.items=[];this.length=0;this.type="set";if(b){for(var d=0,g=b.length;d<g;d++){if(b[d]&&(b[d].constructor==bh.constructor||b[d].constructor==al)){this[this.items.length]=this.items[this.items.length]=b[d];this.length++}}}},bc=al.prototype;bc.push=function(){var E,b;for(var d=0,g=arguments.length;d<g;d++){E=arguments[d];if(E&&(E.constructor==bh.constructor||E.constructor==al)){b=this.items.length;this[b]=this.items[b]=E;this.length++}}return this};bc.pop=function(){this.length&&delete this[this.length--];return this.items.pop()};bc.forEach=function(E,b){for(var d=0,g=this.items.length;d<g;d++){if(E.call(b,this.items[d],d)===false){return this}}return this};for(var B in bh){if(bh[ak](B)){bc[B]=(function(b){return function(){var d=arguments;return this.forEach(function(g){g[b][bG](g,d)})}})(B)}}bc.attr=function(d,S){if(d&&aR.is(d,bd)&&aR.is(d[0],"object")){for(var b=0,R=d.length;b<R;b++){this.items[b].attr(d[b])}}else{for(var g=0,E=this.items.length;g<E;g++){this.items[g].attr(d,S)}}return this};bc.clear=function(){while(this.length){this.pop()}};bc.splice=function(E,bL,bM){E=E<0?m(this.length+E,0):E;bL=m(0,bm(this.length-E,bL));var g=[],b=[],d=[],R;for(R=2;R<arguments.length;R++){d.push(arguments[R])}for(R=0;R<bL;R++){b.push(this[E+R])}for(;R<this.length-E;R++){g.push(this[E+R])}var S=d.length;for(R=0;R<S+g.length;R++){this.items[E+R]=this[E+R]=R<S?d[R]:g[R-S]}R=this.items.length=this.length-=bL-S;while(this[R]){delete this[R++]}return new al(b)};bc.exclude=function(g){for(var b=0,d=this.length;b<d;b++){if(this[b]==g){this.splice(b,1);return true}}};bc.animate=function(g,b,bL,bN){(aR.is(bL,"function")||!bL)&&(bN=bL||null);var S=this.items.length,E=S,bO,bM=this,R;if(!S){return this}bN&&(R=function(){!--S&&bN.call(bM)});bL=aR.is(bL,aj)?bL:R;var d=aR.animation(g,b,bL,R);bO=this.items[--E].animate(d);while(E--){this.items[E]&&!this.items[E].removed&&this.items[E].animateWith(bO,d,d)}return this};bc.insertAfter=function(d){var b=this.items.length;while(b--){this.items[b].insertAfter(d)}return this};bc.getBBox=function(){var b=[],S=[],d=[],E=[];for(var g=this.items.length;g--;){if(!this.items[g].removed){var R=this.items[g].getBBox();b.push(R.x);S.push(R.y);d.push(R.x+R.width);E.push(R.y+R.height)}}b=bm[bG](0,b);S=bm[bG](0,S);d=m[bG](0,d);E=m[bG](0,E);return{x:b,y:S,x2:d,y2:E,width:d-b,height:E-S}};bc.clone=function(g){g=new al;for(var b=0,d=this.items.length;b<d;b++){g.push(this.items[b].clone())}return g};bc.toString=function(){return"Rapha\xebl\u2018s set"};aR.registerFont=function(d){if(!d.face){return d}this.fonts=this.fonts||{};var i={w:d.w,face:{},glyphs:{}},g=d.face["font-family"];for(var S in d.face){if(d.face[ak](S)){i.face[S]=d.face[S]}}if(this.fonts[g]){this.fonts[g].push(i)}else{this.fonts[g]=[i]}if(!d.svg){i.face["units-per-em"]=U(d.face["units-per-em"],10);for(var E in d.glyphs){if(d.glyphs[ak](E)){var R=d.glyphs[E];i.glyphs[E]={w:R.w,k:{},d:R.d&&"M"+R.d.replace(/[mlcxtrv]/g,function(bL){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[bL]||"M"})+"z"};if(R.k){for(var b in R.k){if(R[ak](b)){i.glyphs[E].k[b]=R.k[b]}}}}}}return d};a4.getFont=function(bM,bN,d,E){E=E||"normal";d=d||"normal";bN=+bN||{normal:400,bold:700,lighter:300,bolder:800}[bN]||400;if(!aR.fonts){return}var R=aR.fonts[bM];if(!R){var g=new RegExp("(^|\\s)"+bM.replace(/[^\w\d\s+!~.:_-]/g,aX)+"(\\s|$)","i");for(var b in aR.fonts){if(aR.fonts[ak](b)){if(g.test(b)){R=aR.fonts[b];break}}}}var S;if(R){for(var bL=0,bO=R.length;bL<bO;bL++){S=R[bL];if(S.face["font-weight"]==bN&&(S.face["font-style"]==d||!S.face["font-style"])&&S.face["font-stretch"]==E){break}}}return S};a4.print=function(bL,S,b,bO,bP,bY,d){bY=bY||"middle";d=m(bm(d||0,1),-1);var bX=bH(b)[F](aX),bU=0,bW=0,bS=aX,bZ;aR.is(bO,b)&&(bO=this.getFont(bO));if(bO){bZ=(bP||16)/bO.face["units-per-em"];var E=bO.face.bbox[F](a),bN=+E[0],g=E[3]-E[1],R=0,bQ=+E[1]+(bY=="baseline"?g+(+bO.face.descent):g/2);for(var bT=0,bM=bX.length;bT<bM;bT++){if(bX[bT]=="\n"){bU=0;bV=0;bW=0;R+=g}else{var bR=bW&&bO.glyphs[bX[bT-1]]||{},bV=bO.glyphs[bX[bT]];bU+=bW?(bR.w||bO.w)+(bR.k&&bR.k[bX[bT]]||0)+(bO.w*d):0;bW=1}if(bV&&bV.d){bS+=aR.transformPath(bV.d,["t",bU*bZ,R*bZ,"s",bZ,bZ,bN,bQ,"t",(bL-bN)/bZ,(S-bQ)/bZ])}}}return this.path(bS).attr({fill:"#000",stroke:"none"})};a4.add=function(E){if(aR.is(E,"array")){var g=this.set(),d=0,R=E.length,b;for(;d<R;d++){b=E[d]||{};bw[ak](b.type)&&g.push(this[b.type]().attr(b))}}return g};aR.format=function(d,g){var b=aR.is(g,bd)?[0][bE](g):arguments;d&&aR.is(d,aj)&&b.length-1&&(d=d.replace(br,function(R,E){return b[++E]==null?aX:b[E]}));return d||aX};aR.fullfill=(function(){var g=/\{([^\}]+)\}/g,b=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,d=function(R,E,S){var i=S;E.replace(b,function(bN,bM,bL,bP,bO){bM=bM||bP;if(i){if(bM in i){i=i[bM]}typeof i=="function"&&bO&&(i=i())}});i=(i==null||i==S?R:i)+"";return i};return function(E,i){return String(E).replace(g,function(S,R){return d(S,R,i)})}})();aR.ninja=function(){s.was?(aA.win.Raphael=s.is):delete Raphael;return aR};aR.st=bc;(function(i,d,g){if(i.readyState==null&&i.addEventListener){i.addEventListener(d,g=function(){i.removeEventListener(d,g,false);i.readyState="complete"},false);i.readyState="loading"}function b(){(/in/).test(i.readyState)?setTimeout(b,9):aR.eve("raphael.DOMload")}b()})(document,"DOMContentLoaded");s.was?(aA.win.Raphael=aR):(Raphael=aR);eve.on("raphael.DOMload",function(){ao=true})})();window.Raphael.svg&&function(l){var d="hasOwnProperty",B=String,n=parseFloat,q=parseInt,f=Math,C=f.max,s=f.abs,h=f.pow,g=/[, ]+/,z=l.eve,r="",j=" ";var o="http://www.w3.org/1999/xlink",y={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},u={};l.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var i=function(F,D){if(D){if(typeof F=="string"){F=i(F)}for(var E in D){if(D[d](E)){if(E.substring(0,6)=="xlink:"){F.setAttributeNS(o,E.substring(6),B(D[E]))}else{F.setAttribute(E,B(D[E]))}}}}else{F=l._g.doc.createElementNS("http://www.w3.org/2000/svg",F);F.style&&(F.style.webkitTapHighlightColor="rgba(0,0,0,0)")}return F},a=function(M,Q){var O="linear",E=M.id+Q,K=0.5,I=0.5,G=M.node,D=M.paper,S=G.style,F=l._g.doc.getElementById(E);if(!F){Q=B(Q).replace(l._radial_gradient,function(V,T,W){O="radial";if(T&&W){K=n(T);I=n(W);var U=((I>0.5)*2-1);h(K-0.5,2)+h(I-0.5,2)>0.25&&(I=f.sqrt(0.25-h(K-0.5,2))*U+0.5)&&I!=0.5&&(I=I.toFixed(5)-0.00001*U)}return r});Q=Q.split(/\s*\-\s*/);if(O=="linear"){var J=Q.shift();J=-n(J);if(isNaN(J)){return null}var H=[0,0,f.cos(l.rad(J)),f.sin(l.rad(J))],P=1/(C(s(H[2]),s(H[3]))||1);H[2]*=P;H[3]*=P;if(H[2]<0){H[0]=-H[2];H[2]=0}if(H[3]<0){H[1]=-H[3];H[3]=0}}var N=l._parseDots(Q);if(!N){return null}E=E.replace(/[\(\)\s,\xb0#]/g,"_");if(M.gradient&&E!=M.gradient.id){D.defs.removeChild(M.gradient);delete M.gradient}if(!M.gradient){F=i(O+"Gradient",{id:E});M.gradient=F;i(F,O=="radial"?{fx:K,fy:I}:{x1:H[0],y1:H[1],x2:H[2],y2:H[3],gradientTransform:M.matrix.invert()});D.defs.appendChild(F);for(var L=0,R=N.length;L<R;L++){F.appendChild(i("stop",{offset:N[L].offset?N[L].offset:L?"100%":"0%","stop-color":N[L].color||"#fff"}))}}}i(G,{fill:"url(#"+E+")",opacity:1,"fill-opacity":1});S.fill=r;S.opacity=1;S.fillOpacity=1;return 1},b=function(E){var D=E.getBBox(1);i(E.pattern,{patternTransform:E.matrix.invert()+" translate("+D.x+","+D.y+")"})},c=function(O,Q,J){if(O.type=="path"){var D=B(Q).toLowerCase().split("-"),N=O.paper,ab=J?"end":"start",S=O.node,P=O.attrs,I=P["stroke-width"],W=D.length,G="classic",V,F,L,T,R,K=3,X=3,M=5;while(W--){switch(D[W]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":G=D[W];break;case"wide":X=5;break;case"narrow":X=2;break;case"long":K=5;break;case"short":K=2;break}}if(G=="open"){K+=2;X+=2;M+=2;L=1;T=J?4:1;R={fill:"none",stroke:P.stroke}}else{T=L=K/2;R={fill:P.stroke,stroke:"none"}}if(O._.arrows){if(J){O._.arrows.endPath&&u[O._.arrows.endPath]--;O._.arrows.endMarker&&u[O._.arrows.endMarker]--}else{O._.arrows.startPath&&u[O._.arrows.startPath]--;O._.arrows.startMarker&&u[O._.arrows.startMarker]--}}else{O._.arrows={}}if(G!="none"){var E="raphael-marker-"+G,aa="raphael-marker-"+ab+G+K+X;if(!l._g.doc.getElementById(E)){N.defs.appendChild(i(i("path"),{"stroke-linecap":"round",d:y[G],id:E}));u[E]=1}else{u[E]++}var H=l._g.doc.getElementById(aa),U;if(!H){H=i(i("marker"),{id:aa,markerHeight:X,markerWidth:K,orient:"auto",refX:T,refY:X/2});U=i(i("use"),{"xlink:href":"#"+E,transform:(J?"rotate(180 "+K/2+" "+X/2+") ":r)+"scale("+K/M+","+X/M+")","stroke-width":(1/((K/M+X/M)/2)).toFixed(4)});H.appendChild(U);N.defs.appendChild(H);u[aa]=1}else{u[aa]++;U=H.getElementsByTagName("use")[0]}i(U,R);var Z=L*(G!="diamond"&&G!="oval");if(J){V=O._.arrows.startdx*I||0;F=l.getTotalLength(P.path)-Z*I}else{V=Z*I;F=l.getTotalLength(P.path)-(O._.arrows.enddx*I||0)}R={};R["marker-"+ab]="url(#"+aa+")";if(F||V){R.d=Raphael.getSubpath(P.path,V,F)}i(S,R);O._.arrows[ab+"Path"]=E;O._.arrows[ab+"Marker"]=aa;O._.arrows[ab+"dx"]=Z;O._.arrows[ab+"Type"]=G;O._.arrows[ab+"String"]=Q}else{if(J){V=O._.arrows.startdx*I||0;F=l.getTotalLength(P.path)-V}else{V=0;F=l.getTotalLength(P.path)-(O._.arrows.enddx*I||0)}O._.arrows[ab+"Path"]&&i(S,{d:Raphael.getSubpath(P.path,V,F)});delete O._.arrows[ab+"Path"];delete O._.arrows[ab+"Marker"];delete O._.arrows[ab+"dx"];delete O._.arrows[ab+"Type"];delete O._.arrows[ab+"String"]}for(R in u){if(u[d](R)&&!u[R]){var Y=l._g.doc.getElementById(R);Y&&Y.parentNode.removeChild(Y)}}}},v={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},k=function(J,H,I){H=v[B(H).toLowerCase()];if(H){var F=J.attrs["stroke-width"]||"1",D={round:F,square:F,butt:0}[J.attrs["stroke-linecap"]||I["stroke-linecap"]]||0,G=[],E=H.length;while(E--){G[E]=H[E]*F+((E%2)?1:-1)*D}i(J.node,{"stroke-dasharray":G.join(",")})}},w=function(O,W){var S=O.node,P=O.attrs,M=S.style.visibility;S.style.visibility="hidden";for(var R in W){if(W[d](R)){if(!l._availableAttrs[d](R)){continue}var Q=W[R];P[R]=Q;switch(R){case"blur":O.blur(Q);break;case"href":case"title":case"target":var U=S.parentNode;if(U.tagName.toLowerCase()!="a"){var H=i("a");U.insertBefore(H,S);H.appendChild(S);U=H}if(R=="target"){U.setAttributeNS(o,"show",Q=="blank"?"new":Q)}else{U.setAttributeNS(o,R,Q)}break;case"cursor":S.style.cursor=Q;break;case"transform":O.transform(Q);break;case"arrow-start":c(O,Q);break;case"arrow-end":c(O,Q,1);break;case"clip-rect":var E=B(Q).split(g);if(E.length==4){O.clip&&O.clip.parentNode.parentNode.removeChild(O.clip.parentNode);var F=i("clipPath"),T=i("rect");F.id=l.createUUID();i(T,{x:E[0],y:E[1],width:E[2],height:E[3]});F.appendChild(T);O.paper.defs.appendChild(F);i(S,{"clip-path":"url(#"+F.id+")"});O.clip=T}if(!Q){var N=S.getAttribute("clip-path");if(N){var V=l._g.doc.getElementById(N.replace(/(^url\(#|\)$)/g,r));V&&V.parentNode.removeChild(V);i(S,{"clip-path":r});delete O.clip}}break;case"path":if(O.type=="path"){i(S,{d:Q?P.path=l._pathToAbsolute(Q):"M0,0"});O._.dirty=1;if(O._.arrows){"startString" in O._.arrows&&c(O,O._.arrows.startString);"endString" in O._.arrows&&c(O,O._.arrows.endString,1)}}break;case"width":S.setAttribute(R,Q);O._.dirty=1;if(P.fx){R="x";Q=P.x}else{break}case"x":if(P.fx){Q=-P.x-(P.width||0)}case"rx":if(R=="rx"&&O.type=="rect"){break}case"cx":S.setAttribute(R,Q);O.pattern&&b(O);O._.dirty=1;break;case"height":S.setAttribute(R,Q);O._.dirty=1;if(P.fy){R="y";Q=P.y}else{break}case"y":if(P.fy){Q=-P.y-(P.height||0)}case"ry":if(R=="ry"&&O.type=="rect"){break}case"cy":S.setAttribute(R,Q);O.pattern&&b(O);O._.dirty=1;break;case"r":if(O.type=="rect"){i(S,{rx:Q,ry:Q})}else{S.setAttribute(R,Q)}O._.dirty=1;break;case"src":if(O.type=="image"){S.setAttributeNS(o,"href",Q)}break;case"stroke-width":if(O._.sx!=1||O._.sy!=1){Q/=C(s(O._.sx),s(O._.sy))||1}if(O.paper._vbSize){Q*=O.paper._vbSize}S.setAttribute(R,Q);if(P["stroke-dasharray"]){k(O,P["stroke-dasharray"],W)}if(O._.arrows){"startString" in O._.arrows&&c(O,O._.arrows.startString);"endString" in O._.arrows&&c(O,O._.arrows.endString,1)}break;case"stroke-dasharray":k(O,Q,W);break;case"fill":var I=B(Q).match(l._ISURL);if(I){F=i("pattern");var L=i("image");F.id=l.createUUID();i(F,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});i(L,{x:0,y:0,"xlink:href":I[1]});F.appendChild(L);(function(X){l._preload(I[1],function(){var Y=this.offsetWidth,Z=this.offsetHeight;i(X,{width:Y,height:Z});i(L,{width:Y,height:Z});O.paper.safari()})})(F);O.paper.defs.appendChild(F);i(S,{fill:"url(#"+F.id+")"});O.pattern=F;O.pattern&&b(O);break}var G=l.getRGB(Q);if(!G.error){delete W.gradient;delete P.gradient;!l.is(P.opacity,"undefined")&&l.is(W.opacity,"undefined")&&i(S,{opacity:P.opacity});!l.is(P["fill-opacity"],"undefined")&&l.is(W["fill-opacity"],"undefined")&&i(S,{"fill-opacity":P["fill-opacity"]})}else{if((O.type=="circle"||O.type=="ellipse"||B(Q).charAt()!="r")&&a(O,Q)){if("opacity" in P||"fill-opacity" in P){var D=l._g.doc.getElementById(S.getAttribute("fill").replace(/^url\(#|\)$/g,r));if(D){var J=D.getElementsByTagName("stop");i(J[J.length-1],{"stop-opacity":("opacity" in P?P.opacity:1)*("fill-opacity" in P?P["fill-opacity"]:1)})}}P.gradient=Q;P.fill="none";break}}G[d]("opacity")&&i(S,{"fill-opacity":G.opacity>1?G.opacity/100:G.opacity});case"stroke":G=l.getRGB(Q);S.setAttribute(R,G.hex);R=="stroke"&&G[d]("opacity")&&i(S,{"stroke-opacity":G.opacity>1?G.opacity/100:G.opacity});if(R=="stroke"&&O._.arrows){"startString" in O._.arrows&&c(O,O._.arrows.startString);"endString" in O._.arrows&&c(O,O._.arrows.endString,1)}break;case"gradient":(O.type=="circle"||O.type=="ellipse"||B(Q).charAt()!="r")&&a(O,Q);break;case"opacity":if(P.gradient&&!P[d]("stroke-opacity")){i(S,{"stroke-opacity":Q>1?Q/100:Q})}case"fill-opacity":if(P.gradient){D=l._g.doc.getElementById(S.getAttribute("fill").replace(/^url\(#|\)$/g,r));if(D){J=D.getElementsByTagName("stop");i(J[J.length-1],{"stop-opacity":Q})}break}default:R=="font-size"&&(Q=q(Q,10)+"px");var K=R.replace(/(\-.)/g,function(X){return X.substring(1).toUpperCase()});S.style[K]=Q;O._.dirty=1;S.setAttribute(R,Q);break}}}p(O,W);S.style.visibility=M},A=1.2,p=function(D,H){if(D.type!="text"||!(H[d]("text")||H[d]("font")||H[d]("font-size")||H[d]("x")||H[d]("y"))){return}var M=D.attrs,F=D.node,O=F.firstChild?q(l._g.doc.defaultView.getComputedStyle(F.firstChild,r).getPropertyValue("font-size"),10):10;if(H[d]("text")){M.text=H.text;while(F.firstChild){F.removeChild(F.firstChild)}var G=B(H.text).split("\n"),E=[],K;for(var I=0,N=G.length;I<N;I++){K=i("tspan");I&&i(K,{dy:O*A,x:M.x});K.appendChild(l._g.doc.createTextNode(G[I]));F.appendChild(K);E[I]=K}}else{E=F.getElementsByTagName("tspan");for(I=0,N=E.length;I<N;I++){if(I){i(E[I],{dy:O*A,x:M.x})}else{i(E[0],{dy:0})}}}i(F,{x:M.x,y:M.y});D._.dirty=1;var J=D._getBBox(),L=M.y-(J.y+J.height/2);L&&l.is(L,"finite")&&i(E[0],{dy:L})},t=function(E,D){var G=0,F=0;this[0]=this.node=E;E.raphael=true;this.id=l._oid++;E.raphaelid=this.id;this.matrix=l.matrix();this.realPath=null;this.paper=D;this.attrs=this.attrs||{};this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};!D.bottom&&(D.bottom=this);this.prev=D.top;D.top&&(D.top.next=this);D.top=this;this.next=null},m=l.el;t.prototype=m;m.constructor=t;l._engine.path=function(D,G){var E=i("path");G.canvas&&G.canvas.appendChild(E);var F=new t(E,G);F.type="path";w(F,{fill:"none",stroke:"#000",path:D});return F};m.rotate=function(E,D,G){if(this.removed){return this}E=B(E).split(g);if(E.length-1){D=n(E[1]);G=n(E[2])}E=n(E[0]);(G==null)&&(D=G);if(D==null||G==null){var F=this.getBBox(1);D=F.x+F.width/2;G=F.y+F.height/2}this.transform(this._.transform.concat([["r",E,D,G]]));return this};m.scale=function(H,F,D,G){if(this.removed){return this}H=B(H).split(g);if(H.length-1){F=n(H[1]);D=n(H[2]);G=n(H[3])}H=n(H[0]);(F==null)&&(F=H);(G==null)&&(D=G);if(D==null||G==null){var E=this.getBBox(1)}D=D==null?E.x+E.width/2:D;G=G==null?E.y+E.height/2:G;this.transform(this._.transform.concat([["s",H,F,D,G]]));return this};m.translate=function(E,D){if(this.removed){return this}E=B(E).split(g);if(E.length-1){D=n(E[1])}E=n(E[0])||0;D=+D||0;this.transform(this._.transform.concat([["t",E,D]]));return this};m.transform=function(E){var F=this._;if(E==null){return F.transform}l._extractTransform(this,E);this.clip&&i(this.clip,{transform:this.matrix.invert()});this.pattern&&b(this);this.node&&i(this.node,{transform:this.matrix});if(F.sx!=1||F.sy!=1){var D=this.attrs[d]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":D})}return this};m.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this};m.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this};m.remove=function(){if(this.removed||!this.node.parentNode){return}var E=this.paper;E.__set__&&E.__set__.exclude(this);z.unbind("raphael.*.*."+this.id);if(this.gradient){E.defs.removeChild(this.gradient)}l._tear(this,E);if(this.node.parentNode.tagName.toLowerCase()=="a"){this.node.parentNode.parentNode.removeChild(this.node.parentNode)}else{this.node.parentNode.removeChild(this.node)}for(var D in this){this[D]=typeof this[D]=="function"?l._removedFactory(D):null}this.removed=true};m._getBBox=function(){if(this.node.style.display=="none"){this.show();var D=true}var F={};try{F=this.node.getBBox()}catch(E){}finally{F=F||{}}D&&this.hide();return F};m.attr=function(D,M){if(this.removed){return this}if(D==null){var J={};for(var L in this.attrs){if(this.attrs[d](L)){J[L]=this.attrs[L]}}J.gradient&&J.fill=="none"&&(J.fill=J.gradient)&&delete J.gradient;J.transform=this._.transform;return J}if(M==null&&l.is(D,"string")){if(D=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}if(D=="transform"){return this._.transform}var K=D.split(g),G={};for(var H=0,O=K.length;H<O;H++){D=K[H];if(D in this.attrs){G[D]=this.attrs[D]}else{if(l.is(this.paper.customAttributes[D],"function")){G[D]=this.paper.customAttributes[D].def}else{G[D]=l._availableAttrs[D]}}}return O-1?G:G[K[0]]}if(M==null&&l.is(D,"array")){G={};for(H=0,O=D.length;H<O;H++){G[D[H]]=this.attr(D[H])}return G}if(M!=null){var E={};E[D]=M}else{if(D!=null&&l.is(D,"object")){E=D}}for(var N in E){z("raphael.attr."+N+"."+this.id,this,E[N])}for(N in this.paper.customAttributes){if(this.paper.customAttributes[d](N)&&E[d](N)&&l.is(this.paper.customAttributes[N],"function")){var I=this.paper.customAttributes[N].apply(this,[].concat(E[N]));this.attrs[N]=E[N];for(var F in I){if(I[d](F)){E[F]=I[F]}}}}w(this,E);return this};m.toFront=function(){if(this.removed){return this}if(this.node.parentNode.tagName.toLowerCase()=="a"){this.node.parentNode.parentNode.appendChild(this.node.parentNode)}else{this.node.parentNode.appendChild(this.node)}var D=this.paper;D.top!=this&&l._tofront(this,D);return this};m.toBack=function(){if(this.removed){return this}var E=this.node.parentNode;if(E.tagName.toLowerCase()=="a"){E.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild)}else{if(E.firstChild!=this.node){E.insertBefore(this.node,this.node.parentNode.firstChild)}}l._toback(this,this.paper);var D=this.paper;return this};m.insertAfter=function(D){if(this.removed){return this}var E=D.node||D[D.length-1].node;if(E.nextSibling){E.parentNode.insertBefore(this.node,E.nextSibling)}else{E.parentNode.appendChild(this.node)}l._insertafter(this,D,this.paper);return this};m.insertBefore=function(D){if(this.removed){return this}var E=D.node||D[0].node;E.parentNode.insertBefore(this.node,E);l._insertbefore(this,D,this.paper);return this};m.blur=function(E){var D=this;if(+E!==0){var F=i("filter"),G=i("feGaussianBlur");D.attrs.blur=E;F.id=l.createUUID();i(G,{stdDeviation:+E||1.5});F.appendChild(G);D.paper.defs.appendChild(F);D._blur=F;i(D.node,{filter:"url(#"+F.id+")"})}else{if(D._blur){D._blur.parentNode.removeChild(D._blur);delete D._blur;delete D.attrs.blur}D.node.removeAttribute("filter")}};l._engine.circle=function(E,D,I,H){var G=i("circle");E.canvas&&E.canvas.appendChild(G);var F=new t(G,E);F.attrs={cx:D,cy:I,r:H,fill:"none",stroke:"#000"};F.type="circle";i(G,F.attrs);return F};l._engine.rect=function(F,D,K,E,I,J){var H=i("rect");F.canvas&&F.canvas.appendChild(H);var G=new t(H,F);G.attrs={x:D,y:K,width:E,height:I,r:J||0,rx:J||0,ry:J||0,fill:"none",stroke:"#000"};G.type="rect";i(H,G.attrs);return G};l._engine.ellipse=function(E,D,J,I,H){var G=i("ellipse");E.canvas&&E.canvas.appendChild(G);var F=new t(G,E);F.attrs={cx:D,cy:J,rx:I,ry:H,fill:"none",stroke:"#000"};F.type="ellipse";i(G,F.attrs);return F};l._engine.image=function(F,J,D,K,E,I){var H=i("image");i(H,{x:D,y:K,width:E,height:I,preserveAspectRatio:"none"});H.setAttributeNS(o,"href",J);F.canvas&&F.canvas.appendChild(H);var G=new t(H,F);G.attrs={x:D,y:K,width:E,height:I,src:J};G.type="image";return G};l._engine.text=function(E,D,I,H){var G=i("text");E.canvas&&E.canvas.appendChild(G);var F=new t(G,E);F.attrs={x:D,y:I,"text-anchor":"middle",text:H,font:l._availableAttrs.font,stroke:"none",fill:"#000"};F.type="text";w(F,F.attrs);return F};l._engine.setSize=function(E,D){this.width=E||this.width;this.height=D||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);if(this._viewBox){this.setViewBox.apply(this,this._viewBox)}return this};l._engine.create=function(){var G=l._getContainer.apply(0,arguments),E=G&&G.container,K=G.x,J=G.y,F=G.width,L=G.height;if(!E){throw new Error("SVG container not found.")}var D=i("svg"),I="overflow:hidden;",H;K=K||0;J=J||0;F=F||512;L=L||342;i(D,{height:L,version:1.1,width:F,xmlns:"http://www.w3.org/2000/svg"});if(E==1){D.style.cssText=I+"position:absolute;left:"+K+"px;top:"+J+"px";l._g.doc.body.appendChild(D);H=1}else{D.style.cssText=I+"position:relative";if(E.firstChild){E.insertBefore(D,E.firstChild)}else{E.appendChild(D)}}E=new l._Paper;E.width=F;E.height=L;E.canvas=D;E.clear();E._left=E._top=0;H&&(E.renderfix=function(){});E.renderfix();return E};l._engine.setViewBox=function(I,G,K,D,E){z("raphael.setViewBox",this,this._viewBox,[I,G,K,D,E]);var M=C(K/this.width,D/this.height),H=this.top,L=E?"meet":"xMinYMin",F,J;if(I==null){if(this._vbSize){M=1}delete this._vbSize;F="0 0 "+this.width+j+this.height}else{this._vbSize=M;F=I+j+G+j+K+j+D}i(this.canvas,{viewBox:F,preserveAspectRatio:L});while(M&&H){J="stroke-width" in H.attrs?H.attrs["stroke-width"]:1;H.attr({"stroke-width":J});H._.dirty=1;H._.dirtyT=1;H=H.prev}this._viewBox=[I,G,K,D,!!E];return this};l.prototype.renderfix=function(){var I=this.canvas,D=I.style,H;try{H=I.getScreenCTM()||I.createSVGMatrix()}catch(G){H=I.createSVGMatrix()}var F=-H.e%1,E=-H.f%1;if(F||E){if(F){this._left=(this._left+F)%1;D.left=this._left+"px"}if(E){this._top=(this._top+E)%1;D.top=this._top+"px"}}};l.prototype.clear=function(){l.eve("raphael.clear",this);var D=this.canvas;while(D.firstChild){D.removeChild(D.firstChild)}this.bottom=this.top=null;(this.desc=i("desc")).appendChild(l._g.doc.createTextNode("Created with Rapha\xebl "+l.version));D.appendChild(this.desc);D.appendChild(this.defs=i("defs"))};l.prototype.remove=function(){z("raphael.remove",this);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var D in this){this[D]=typeof this[D]=="function"?l._removedFactory(D):null}};var x=l.st;for(var e in m){if(m[d](e)&&!x[d](e)){x[e]=(function(D){return function(){var E=arguments;return this.forEach(function(F){F[D].apply(F,E)})}})(e)}}}(window.Raphael);window.Raphael.vml&&function(l){var e="hasOwnProperty",F=String,n=parseFloat,h=Math,B=h.round,I=h.max,C=h.min,s=h.abs,v="fill",i=/[, ]+/,A=l.eve,w=" progid:DXImageTransform.Microsoft",k=" ",q="",D={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},j=/([clmz]),?([^clmz]*)/gi,t=/ progid:\S+Blur\([^\)]+\)/g,H=/-?[^,\s-]+/g,d="position:absolute;left:0;top:0;width:1px;height:1px",b=21600,z={path:1,rect:1,image:1},r={circle:1,ellipse:1},f=function(S){var P=/[ahqstv]/ig,K=l._pathToAbsolute;F(S).match(P)&&(K=l._path2curve);P=/[clmz]/g;if(K==l._pathToAbsolute&&!F(S).match(P)){var O=F(S).replace(j,function(W,Y,U){var X=[],T=Y.toLowerCase()=="m",V=D[Y];U.replace(H,function(Z){if(T&&X.length==2){V+=X+D[Y=="m"?"l":"L"];X=[]}X.push(B(Z*b))});return V+X});return O}var Q=K(S),J,E;O=[];for(var M=0,R=Q.length;M<R;M++){J=Q[M];E=Q[M][0].toLowerCase();E=="z"&&(E="x");for(var L=1,N=J.length;L<N;L++){E+=B(J[L]*b)+(L!=N-1?",":q)}O.push(E)}return O.join(k)},o=function(L,K,J){var E=l.matrix();E.rotate(-L,0.5,0.5);return{dx:E.x(K,J),dy:E.y(K,J)}},p=function(R,Q,P,M,L,N){var Z=R._,T=R.matrix,E=Z.fillpos,S=R.node,O=S.style,K=1,J="",V,X=b/Q,W=b/P;O.visibility="hidden";if(!Q||!P){return}S.coordsize=s(X)+k+s(W);O.rotation=N*(Q*P<0?-1:1);if(N){var Y=o(N,M,L);M=Y.dx;L=Y.dy}Q<0&&(J+="x");P<0&&(J+=" y")&&(K=-1);O.flip=J;S.coordorigin=(M*-X)+k+(L*-W);if(E||Z.fillsize){var U=S.getElementsByTagName(v);U=U&&U[0];S.removeChild(U);if(E){Y=o(N,T.x(E[0],E[1]),T.y(E[0],E[1]));U.position=Y.dx*K+k+Y.dy*K}if(Z.fillsize){U.size=Z.fillsize[0]*s(Q)+k+Z.fillsize[1]*s(P)}S.appendChild(U)}O.visibility="visible"};l.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};var c=function(E,O,J){var Q=F(O).toLowerCase().split("-"),M=J?"end":"start",K=Q.length,N="classic",P="medium",L="medium";while(K--){switch(Q[K]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":N=Q[K];break;case"wide":case"narrow":L=Q[K];break;case"long":case"short":P=Q[K];break}}var R=E.node.getElementsByTagName("stroke")[0];R[M+"arrow"]=N;R[M+"arrowlength"]=P;R[M+"arrowwidth"]=L},x=function(Z,aj){Z.attrs=Z.attrs||{};var ae=Z.node,an=Z.attrs,V=ae.style,R,ah=z[Z.type]&&(aj.x!=an.x||aj.y!=an.y||aj.width!=an.width||aj.height!=an.height||aj.cx!=an.cx||aj.cy!=an.cy||aj.rx!=an.rx||aj.ry!=an.ry||aj.r!=an.r),Y=r[Z.type]&&(an.cx!=aj.cx||an.cy!=aj.cy||an.r!=aj.r||an.rx!=aj.rx||an.ry!=aj.ry),aq=Z;for(var W in aj){if(aj[e](W)){an[W]=aj[W]}}if(ah){an.path=l._getPath[Z.type](Z);Z._.dirty=1}aj.href&&(ae.href=aj.href);aj.title&&(ae.title=aj.title);aj.target&&(ae.target=aj.target);aj.cursor&&(V.cursor=aj.cursor);"blur" in aj&&Z.blur(aj.blur);if(aj.path&&Z.type=="path"||ah){ae.path=f(~F(an.path).toLowerCase().indexOf("r")?l._pathToAbsolute(an.path):an.path);if(Z.type=="image"){Z._.fillpos=[an.x,an.y];Z._.fillsize=[an.width,an.height];p(Z,1,1,0,0,0)}}"transform" in aj&&Z.transform(aj.transform);if(Y){var M=+an.cx,K=+an.cy,Q=+an.rx||+an.r||0,P=+an.ry||+an.r||0;ae.path=l.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",B((M-Q)*b),B((K-P)*b),B((M+Q)*b),B((K+P)*b),B(M*b))}if("clip-rect" in aj){var J=F(aj["clip-rect"]).split(i);if(J.length==4){J[2]=+J[2]+(+J[0]);J[3]=+J[3]+(+J[1]);var X=ae.clipRect||l._g.doc.createElement("div"),ap=X.style;ap.clip=l.format("rect({1}px {2}px {3}px {0}px)",J);if(!ae.clipRect){ap.position="absolute";ap.top=0;ap.left=0;ap.width=Z.paper.width+"px";ap.height=Z.paper.height+"px";ae.parentNode.insertBefore(X,ae);X.appendChild(ae);ae.clipRect=X}}if(!aj["clip-rect"]){ae.clipRect&&(ae.clipRect.style.clip="auto")}}if(Z.textpath){var al=Z.textpath.style;aj.font&&(al.font=aj.font);aj["font-family"]&&(al.fontFamily='"'+aj["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,q)+'"');aj["font-size"]&&(al.fontSize=aj["font-size"]);aj["font-weight"]&&(al.fontWeight=aj["font-weight"]);aj["font-style"]&&(al.fontStyle=aj["font-style"])}if("arrow-start" in aj){c(aq,aj["arrow-start"])}if("arrow-end" in aj){c(aq,aj["arrow-end"],1)}if(aj.opacity!=null||aj["stroke-width"]!=null||aj.fill!=null||aj.src!=null||aj.stroke!=null||aj["stroke-width"]!=null||aj["stroke-opacity"]!=null||aj["fill-opacity"]!=null||aj["stroke-dasharray"]!=null||aj["stroke-miterlimit"]!=null||aj["stroke-linejoin"]!=null||aj["stroke-linecap"]!=null){var af=ae.getElementsByTagName(v),am=false;af=af&&af[0];!af&&(am=af=G(v));if(Z.type=="image"&&aj.src){af.src=aj.src}aj.fill&&(af.on=true);if(af.on==null||aj.fill=="none"||aj.fill===null){af.on=false}if(af.on&&aj.fill){var O=F(aj.fill).match(l._ISURL);if(O){af.parentNode==ae&&ae.removeChild(af);af.rotate=true;af.src=O[1];af.type="tile";var E=Z.getBBox(1);af.position=E.x+k+E.y;Z._.fillpos=[E.x,E.y];l._preload(O[1],function(){Z._.fillsize=[this.offsetWidth,this.offsetHeight]})}else{af.color=l.getRGB(aj.fill).hex;af.src=q;af.type="solid";if(l.getRGB(aj.fill).error&&(aq.type in {circle:1,ellipse:1}||F(aj.fill).charAt()!="r")&&a(aq,aj.fill,af)){an.fill="none";an.gradient=aj.fill;af.rotate=false}}}if("fill-opacity" in aj||"opacity" in aj){var N=((+an["fill-opacity"]+1||2)-1)*((+an.opacity+1||2)-1)*((+l.getRGB(aj.fill).o+1||2)-1);N=C(I(N,0),1);af.opacity=N;if(af.src){af.color="none"}}ae.appendChild(af);var S=(ae.getElementsByTagName("stroke")&&ae.getElementsByTagName("stroke")[0]),ao=false;!S&&(ao=S=G("stroke"));if((aj.stroke&&aj.stroke!="none")||aj["stroke-width"]||aj["stroke-opacity"]!=null||aj["stroke-dasharray"]||aj["stroke-miterlimit"]||aj["stroke-linejoin"]||aj["stroke-linecap"]){S.on=true}(aj.stroke=="none"||aj.stroke===null||S.on==null||aj.stroke==0||aj["stroke-width"]==0)&&(S.on=false);var ad=l.getRGB(aj.stroke);S.on&&aj.stroke&&(S.color=ad.hex);N=((+an["stroke-opacity"]+1||2)-1)*((+an.opacity+1||2)-1)*((+ad.o+1||2)-1);var aa=(n(aj["stroke-width"])||1)*0.75;N=C(I(N,0),1);aj["stroke-width"]==null&&(aa=an["stroke-width"]);aj["stroke-width"]&&(S.weight=aa);aa&&aa<1&&(N*=aa)&&(S.weight=1);S.opacity=N;aj["stroke-linejoin"]&&(S.joinstyle=aj["stroke-linejoin"]||"miter");S.miterlimit=aj["stroke-miterlimit"]||8;aj["stroke-linecap"]&&(S.endcap=aj["stroke-linecap"]=="butt"?"flat":aj["stroke-linecap"]=="square"?"square":"round");if(aj["stroke-dasharray"]){var ac={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};S.dashstyle=ac[e](aj["stroke-dasharray"])?ac[aj["stroke-dasharray"]]:q}ao&&ae.appendChild(S)}if(aq.type=="text"){aq.paper.canvas.style.display=q;var ag=aq.paper.span,ab=100,L=an.font&&an.font.match(/\d+(?:\.\d*)?(?=px)/);V=ag.style;an.font&&(V.font=an.font);an["font-family"]&&(V.fontFamily=an["font-family"]);an["font-weight"]&&(V.fontWeight=an["font-weight"]);an["font-style"]&&(V.fontStyle=an["font-style"]);L=n(an["font-size"]||L&&L[0])||10;V.fontSize=L*ab+"px";aq.textpath.string&&(ag.innerHTML=F(aq.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var U=ag.getBoundingClientRect();aq.W=an.w=(U.right-U.left)/ab;aq.H=an.h=(U.bottom-U.top)/ab;aq.X=an.x;aq.Y=an.y+aq.H/2;("x" in aj||"y" in aj)&&(aq.path.v=l.format("m{0},{1}l{2},{1}",B(an.x*b),B(an.y*b),B(an.x*b)+1));var T=["x","y","text","font","font-family","font-weight","font-style","font-size"];for(var ai=0,ak=T.length;ai<ak;ai++){if(T[ai] in aj){aq._.dirty=1;break}}switch(an["text-anchor"]){case"start":aq.textpath.style["v-text-align"]="left";aq.bbx=aq.W/2;break;case"end":aq.textpath.style["v-text-align"]="right";aq.bbx=-aq.W/2;break;default:aq.textpath.style["v-text-align"]="center";aq.bbx=0;break}aq.textpath.style["v-text-kern"]=true}},a=function(E,R,U){E.attrs=E.attrs||{};var S=E.attrs,L=Math.pow,M,N,P="linear",Q=".5 .5";E.attrs.gradient=R;R=F(R).replace(l._radial_gradient,function(X,Y,W){P="radial";if(Y&&W){Y=n(Y);W=n(W);L(Y-0.5,2)+L(W-0.5,2)>0.25&&(W=h.sqrt(0.25-L(Y-0.5,2))*((W>0.5)*2-1)+0.5);Q=Y+k+W}return q});R=R.split(/\s*\-\s*/);if(P=="linear"){var J=R.shift();J=-n(J);if(isNaN(J)){return null}}var O=l._parseDots(R);if(!O){return null}E=E.shape||E.node;if(O.length){E.removeChild(U);U.on=true;U.method="none";U.color=O[0].color;U.color2=O[O.length-1].color;var V=[];for(var K=0,T=O.length;K<T;K++){O[K].offset&&V.push(O[K].offset+k+O[K].color)}U.colors=V.length?V.join():"0% "+U.color;if(P=="radial"){U.type="gradientTitle";U.focus="100%";U.focussize="0 0";U.focusposition=Q;U.angle=0}else{U.type="gradient";U.angle=(270-J)%360}E.appendChild(U)}return 1},u=function(J,E){this[0]=this.node=J;J.raphael=true;this.id=l._oid++;J.raphaelid=this.id;this.X=0;this.Y=0;this.attrs={};this.paper=E;this.matrix=l.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1};!E.bottom&&(E.bottom=this);this.prev=E.top;E.top&&(E.top.next=this);E.top=this;this.next=null};var m=l.el;u.prototype=m;m.constructor=u;m.transform=function(M){if(M==null){return this._.transform}var O=this.paper._viewBoxShift,N=O?"s"+[O.scale,O.scale]+"-1-1t"+[O.dx,O.dy]:q,R;if(O){R=M=F(M).replace(/\.{3}|\u2026/g,this._.transform||q)}l._extractTransform(this,N+M);var S=this.matrix.clone(),U=this.skew,K=this.node,Q,L=~F(this.attrs.fill).indexOf("-"),E=!F(this.attrs.fill).indexOf("url(");S.translate(-0.5,-0.5);if(E||L||this.type=="image"){U.matrix="1 0 0 1";U.offset="0 0";Q=S.split();if((L&&Q.noRotation)||!Q.isSimple){K.style.filter=S.toFilter();var P=this.getBBox(),J=this.getBBox(1),V=P.x-J.x,T=P.y-J.y;K.coordorigin=(V*-b)+k+(T*-b);p(this,1,1,V,T,0)}else{K.style.filter=q;p(this,Q.scalex,Q.scaley,Q.dx,Q.dy,Q.rotate)}}else{K.style.filter=q;U.matrix=F(S);U.offset=S.offset()}R&&(this._.transform=R);return this};m.rotate=function(J,E,L){if(this.removed){return this}if(J==null){return}J=F(J).split(i);if(J.length-1){E=n(J[1]);L=n(J[2])}J=n(J[0]);(L==null)&&(E=L);if(E==null||L==null){var K=this.getBBox(1);E=K.x+K.width/2;L=K.y+K.height/2}this._.dirtyT=1;this.transform(this._.transform.concat([["r",J,E,L]]));return this};m.translate=function(J,E){if(this.removed){return this}J=F(J).split(i);if(J.length-1){E=n(J[1])}J=n(J[0])||0;E=+E||0;if(this._.bbox){this._.bbox.x+=J;this._.bbox.y+=E}this.transform(this._.transform.concat([["t",J,E]]));return this};m.scale=function(M,K,E,L){if(this.removed){return this}M=F(M).split(i);if(M.length-1){K=n(M[1]);E=n(M[2]);L=n(M[3]);isNaN(E)&&(E=null);isNaN(L)&&(L=null)}M=n(M[0]);(K==null)&&(K=M);(L==null)&&(E=L);if(E==null||L==null){var J=this.getBBox(1)}E=E==null?J.x+J.width/2:E;L=L==null?J.y+J.height/2:L;this.transform(this._.transform.concat([["s",M,K,E,L]]));this._.dirtyT=1;return this};m.hide=function(){!this.removed&&(this.node.style.display="none");return this};m.show=function(){!this.removed&&(this.node.style.display=q);return this};m._getBBox=function(){if(this.removed){return{}}return{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}};m.remove=function(){if(this.removed||!this.node.parentNode){return}this.paper.__set__&&this.paper.__set__.exclude(this);l.eve.unbind("raphael.*.*."+this.id);l._tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var E in this){this[E]=typeof this[E]=="function"?l._removedFactory(E):null}this.removed=true};m.attr=function(E,R){if(this.removed){return this}if(E==null){var O={};for(var Q in this.attrs){if(this.attrs[e](Q)){O[Q]=this.attrs[Q]}}O.gradient&&O.fill=="none"&&(O.fill=O.gradient)&&delete O.gradient;O.transform=this._.transform;return O}if(R==null&&l.is(E,"string")){if(E==v&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}var P=E.split(i),L={};for(var M=0,T=P.length;M<T;M++){E=P[M];if(E in this.attrs){L[E]=this.attrs[E]}else{if(l.is(this.paper.customAttributes[E],"function")){L[E]=this.paper.customAttributes[E].def}else{L[E]=l._availableAttrs[E]}}}return T-1?L:L[P[0]]}if(this.attrs&&R==null&&l.is(E,"array")){L={};for(M=0,T=E.length;M<T;M++){L[E[M]]=this.attr(E[M])}return L}var J;if(R!=null){J={};J[E]=R}R==null&&l.is(E,"object")&&(J=E);for(var S in J){A("raphael.attr."+S+"."+this.id,this,J[S])}if(J){for(S in this.paper.customAttributes){if(this.paper.customAttributes[e](S)&&J[e](S)&&l.is(this.paper.customAttributes[S],"function")){var N=this.paper.customAttributes[S].apply(this,[].concat(J[S]));this.attrs[S]=J[S];for(var K in N){if(N[e](K)){J[K]=N[K]}}}}if(J.text&&this.type=="text"){this.textpath.string=J.text}x(this,J)}return this};m.toFront=function(){!this.removed&&this.node.parentNode.appendChild(this.node);this.paper&&this.paper.top!=this&&l._tofront(this,this.paper);return this};m.toBack=function(){if(this.removed){return this}if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);l._toback(this,this.paper)}return this};m.insertAfter=function(E){if(this.removed){return this}if(E.constructor==l.st.constructor){E=E[E.length-1]}if(E.node.nextSibling){E.node.parentNode.insertBefore(this.node,E.node.nextSibling)}else{E.node.parentNode.appendChild(this.node)}l._insertafter(this,E,this.paper);return this};m.insertBefore=function(E){if(this.removed){return this}if(E.constructor==l.st.constructor){E=E[0]}E.node.parentNode.insertBefore(this.node,E.node);l._insertbefore(this,E,this.paper);return this};m.blur=function(E){var J=this.node.runtimeStyle,K=J.filter;K=K.replace(t,q);if(+E!==0){this.attrs.blur=E;J.filter=K+k+w+".Blur(pixelradius="+(+E||1.5)+")";J.margin=l.format("-{0}px 0 0 -{0}px",B(+E||1.5))}else{J.filter=K;J.margin=0;delete this.attrs.blur}};l._engine.path=function(L,J){var M=G("shape");M.style.cssText=d;M.coordsize=b+k+b;M.coordorigin=J.coordorigin;var N=new u(M,J),E={fill:"none",stroke:"#000"};L&&(E.path=L);N.type="path";N.path=[];N.Path=q;x(N,E);J.canvas.appendChild(M);var K=G("skew");K.on=true;M.appendChild(K);N.skew=K;N.transform(q);return N};l._engine.rect=function(J,O,M,P,K,E){var Q=l._rectPath(O,M,P,K,E),L=J.path(Q),N=L.attrs;L.X=N.x=O;L.Y=N.y=M;L.W=N.width=P;L.H=N.height=K;N.r=E;N.path=Q;L.type="rect";return L};l._engine.ellipse=function(J,E,O,N,M){var L=J.path(),K=L.attrs;L.X=E-N;L.Y=O-M;L.W=N*2;L.H=M*2;L.type="ellipse";x(L,{cx:E,cy:O,rx:N,ry:M});return L};l._engine.circle=function(J,E,N,M){var L=J.path(),K=L.attrs;L.X=E-M;L.Y=N-M;L.W=L.H=M*2;L.type="circle";x(L,{cx:E,cy:N,r:M});return L};l._engine.image=function(J,E,P,N,Q,L){var S=l._rectPath(P,N,Q,L),M=J.path(S).attr({stroke:"none"}),O=M.attrs,K=M.node,R=K.getElementsByTagName(v)[0];O.src=E;M.X=O.x=P;M.Y=O.y=N;M.W=O.width=Q;M.H=O.height=L;O.path=S;M.type="image";R.parentNode==K&&K.removeChild(R);R.rotate=true;R.src=E;R.type="tile";M._.fillpos=[P,N];M._.fillsize=[Q,L];K.appendChild(R);p(M,1,1,0,0,0);return M};l._engine.text=function(E,O,N,P){var L=G("shape"),R=G("path"),K=G("textpath");O=O||0;N=N||0;P=P||"";R.v=l.format("m{0},{1}l{2},{1}",B(O*b),B(N*b),B(O*b)+1);R.textpathok=true;K.string=F(P);K.on=true;L.style.cssText=d;L.coordsize=b+k+b;L.coordorigin="0 0";var J=new u(L,E),M={fill:"#000",stroke:"none",font:l._availableAttrs.font,text:P};J.shape=L;J.path=R;J.textpath=K;J.type="text";J.attrs.text=F(P);J.attrs.x=O;J.attrs.y=N;J.attrs.w=1;J.attrs.h=1;x(J,M);L.appendChild(K);L.appendChild(R);E.canvas.appendChild(L);var Q=G("skew");Q.on=true;L.appendChild(Q);J.skew=Q;J.transform(q);return J};l._engine.setSize=function(K,E){var J=this.canvas.style;this.width=K;this.height=E;K==+K&&(K+="px");E==+E&&(E+="px");J.width=K;J.height=E;J.clip="rect(0 "+K+" "+E+" 0)";if(this._viewBox){l._engine.setViewBox.apply(this,this._viewBox)}return this};l._engine.setViewBox=function(N,M,O,K,L){l.eve("raphael.setViewBox",this,this._viewBox,[N,M,O,K,L]);var E=this.width,Q=this.height,R=1/I(O/E,K/Q),P,J;if(L){P=Q/K;J=E/O;if(O*P<E){N-=(E-O*P)/2/P}if(K*J<Q){M-=(Q-K*J)/2/J}}this._viewBox=[N,M,O,K,!!L];this._viewBoxShift={dx:-N,dy:-M,scale:R};this.forEach(function(S){S.transform("...")});return this};var G;l._engine.initWin=function(K){var J=K.document;J.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!J.namespaces.rvml&&J.namespaces.add("rvml","urn:schemas-microsoft-com:vml");G=function(L){return J.createElement("<rvml:"+L+' class="rvml">')}}catch(E){G=function(L){return J.createElement("<"+L+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}};l._engine.initWin(l._g.win);l._engine.create=function(){var K=l._getContainer.apply(0,arguments),E=K.container,Q=K.height,R,J=K.width,P=K.x,O=K.y;if(!E){throw new Error("VML container not found.")}var M=new l._Paper,N=M.canvas=l._g.doc.createElement("div"),L=N.style;P=P||0;O=O||0;J=J||512;Q=Q||342;M.width=J;M.height=Q;J==+J&&(J+="px");Q==+Q&&(Q+="px");M.coordsize=b*1000+k+b*1000;M.coordorigin="0 0";M.span=l._g.doc.createElement("span");M.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";N.appendChild(M.span);L.cssText=l.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",J,Q);if(E==1){l._g.doc.body.appendChild(N);L.left=P+"px";L.top=O+"px";L.position="absolute"}else{if(E.firstChild){E.insertBefore(N,E.firstChild)}else{E.appendChild(N)}}M.renderfix=function(){};return M};l.prototype.clear=function(){l.eve("raphael.clear",this);this.canvas.innerHTML=q;this.span=l._g.doc.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};l.prototype.remove=function(){l.eve("raphael.remove",this);this.canvas.parentNode.removeChild(this.canvas);for(var E in this){this[E]=typeof this[E]=="function"?l._removedFactory(E):null}return true};var y=l.st;for(var g in m){if(m[e](g)&&!y[e](g)){y[g]=(function(E){return function(){var J=arguments;return this.forEach(function(K){K[E].apply(K,J)})}})(g)}}}(window.Raphael);
;
/*
 * g.Raphael 0.51 - Charting library, based on Raphal
 *
 * Copyright (c) 2009-2012 Dmitry Baranovskiy (http://g.raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
Raphael.el.popup=function(o,r,q,m){var n=this.paper||this[0].paper,p,l,j,k;if(n){switch(this.type){case"text":case"circle":case"ellipse":l=!0;break;default:l=!1}o=null==o?"up":o;r=r||5;p=this.getBBox();q="number"==typeof q?q:l?p.x+p.width/2:p.x;m="number"==typeof m?m:l?p.y+p.height/2:p.y;j=Math.max(p.width/2-r,0);k=Math.max(p.height/2-r,0);this.translate(q-p.x-(l?p.width/2:0),m-p.y-(l?p.height/2:0));p=this.getBBox();q={up:["M",q,m,"l",-r,-r,-j,0,"a",r,r,0,0,1,-r,-r,"l",0,-p.height,"a",r,r,0,0,1,r,-r,"l",2*r+2*j,0,"a",r,r,0,0,1,r,r,"l",0,p.height,"a",r,r,0,0,1,-r,r,"l",-j,0,"z"].join(),down:["M",q,m,"l",r,r,j,0,"a",r,r,0,0,1,r,r,"l",0,p.height,"a",r,r,0,0,1,-r,r,"l",-(2*r+2*j),0,"a",r,r,0,0,1,-r,-r,"l",0,-p.height,"a",r,r,0,0,1,r,-r,"l",j,0,"z"].join(),left:["M",q,m,"l",-r,r,0,k,"a",r,r,0,0,1,-r,r,"l",-p.width,0,"a",r,r,0,0,1,-r,-r,"l",0,-(2*r+2*k),"a",r,r,0,0,1,r,-r,"l",p.width,0,"a",r,r,0,0,1,r,r,"l",0,k,"z"].join(),right:["M",q,m,"l",r,-r,0,-k,"a",r,r,0,0,1,r,-r,"l",p.width,0,"a",r,r,0,0,1,r,r,"l",0,2*r+2*k,"a",r,r,0,0,1,-r,r,"l",-p.width,0,"a",r,r,0,0,1,-r,-r,"l",0,-k,"z"].join()};r={up:{x:-!l*(p.width/2),y:2*-r-(l?p.height/2:p.height)},down:{x:-!l*(p.width/2),y:2*r+(l?p.height/2:p.height)},left:{x:2*-r-(l?p.width/2:p.width),y:-!l*(p.height/2)},right:{x:2*r+(l?p.width/2:p.width),y:-!l*(p.height/2)}}[o];this.translate(r.x,r.y);return n.path(q[o]).attr({fill:"#000",stroke:"none"}).insertBefore(this.node?this:this[0])}};Raphael.el.tag=function(o,r,q,m){var n=this.paper||this[0].paper;if(n){var n=n.path().attr({fill:"#000",stroke:"#000"}),p=this.getBBox(),l,j,k;switch(this.type){case"text":case"circle":case"ellipse":k=!0;break;default:k=!1}o=o||0;q="number"==typeof q?q:k?p.x+p.width/2:p.x;m="number"==typeof m?m:k?p.y+p.height/2:p.y;r=null==r?5:r;j=0.5522*r;p.height>=2*r?n.attr({path:["M",q,m+r,"a",r,r,0,1,1,0,2*-r,r,r,0,1,1,0,2*r,"m",0,2*-r-3,"a",r+3,r+3,0,1,0,0,2*(r+3),"L",q+r+3,m+p.height/2+3,"l",p.width+6,0,0,-p.height-6,-p.width-6,0,"L",q,m-r-3].join()}):(l=Math.sqrt(Math.pow(r+3,2)-Math.pow(p.height/2+3,2)),n.attr({path:["M",q,m+r,"c",-j,0,-r,j-r,-r,-r,0,-j,r-j,-r,r,-r,j,0,r,r-j,r,r,0,j,j-r,r,-r,r,"M",q+l,m-p.height/2-3,"a",r+3,r+3,0,1,0,0,p.height+6,"l",r+3-l+p.width+6,0,0,-p.height-6,"L",q+l,m-p.height/2-3].join()}));o=360-o;n.rotate(o,q,m);this.attrs?(this.attr(this.attrs.x?"x":"cx",q+r+3+(!k?"text"==this.type?p.width:0:p.width/2)).attr("y",k?m:m-p.height/2),this.rotate(o,q,m),90<o&&270>o&&this.attr(this.attrs.x?"x":"cx",q-r-3-(!k?p.width:p.width/2)).rotate(180,q,m)):90<o&&270>o?(this.translate(q-p.x-p.width-r-3,m-p.y-p.height/2),this.rotate(o-180,p.x+p.width+r+3,p.y+p.height/2)):(this.translate(q-p.x+r+3,m-p.y-p.height/2),this.rotate(o,p.x-r-3,p.y+p.height/2));return n.insertBefore(this.node?this:this[0])}};Raphael.el.drop=function(m,i,h){var k=this.getBBox(),l=this.paper||this[0].paper,n,j;if(l){switch(this.type){case"text":case"circle":case"ellipse":n=!0;break;default:n=!1}m=m||0;i="number"==typeof i?i:n?k.x+k.width/2:k.x;h="number"==typeof h?h:n?k.y+k.height/2:k.y;j=Math.max(k.width,k.height)+Math.min(k.width,k.height);l=l.path(["M",i,h,"l",j,0,"A",0.4*j,0.4*j,0,1,0,i+0.7*j,h-0.7*j,"z"]).attr({fill:"#000",stroke:"none"}).rotate(22.5-m,i,h);m=(m+90)*Math.PI/180;i=i+j*Math.sin(m)-(n?0:k.width/2);m=h+j*Math.cos(m)-(n?0:k.height/2);this.attrs?this.attr(this.attrs.x?"x":"cx",i).attr(this.attrs.y?"y":"cy",m):this.translate(i-k.x,m-k.y);return l.insertBefore(this.node?this:this[0])}};Raphael.el.flag=function(m,i,h){var k=this.paper||this[0].paper;if(k){var k=k.path().attr({fill:"#000",stroke:"#000"}),l=this.getBBox(),n=l.height/2,j;switch(this.type){case"text":case"circle":case"ellipse":j=!0;break;default:j=!1}m=m||0;i="number"==typeof i?i:j?l.x+l.width/2:l.x;h="number"==typeof h?h:j?l.y+l.height/2:l.y;k.attr({path:["M",i,h,"l",n+3,-n-3,l.width+6,0,0,l.height+6,-l.width-6,0,"z"].join()});m=360-m;k.rotate(m,i,h);this.attrs?(this.attr(this.attrs.x?"x":"cx",i+n+3+(!j?"text"==this.type?l.width:0:l.width/2)).attr("y",j?h:h-l.height/2),this.rotate(m,i,h),90<m&&270>m&&this.attr(this.attrs.x?"x":"cx",i-n-3-(!j?l.width:l.width/2)).rotate(180,i,h)):90<m&&270>m?(this.translate(i-l.x-l.width-n-3,h-l.y-l.height/2),this.rotate(m-180,l.x+l.width+n+3,l.y+l.height/2)):(this.translate(i-l.x+n+3,h-l.y-l.height/2),this.rotate(m,l.x-n-3,l.y+l.height/2));return k.insertBefore(this.node?this:this[0])}};Raphael.el.label=function(){var f=this.getBBox(),e=this.paper||this[0].paper,c=Math.min(20,f.width+10,f.height+10)/2;if(e){return e.rect(f.x-c/2,f.y-c/2,f.width+c,f.height+c,c).attr({stroke:"none",fill:"#000"}).insertBefore(this.node?this:this[0])}};Raphael.el.blob=function(w,z,y){var u=this.getBBox(),v=Math.PI/180,x=this.paper||this[0].paper,t,r;if(x){switch(this.type){case"text":case"circle":case"ellipse":t=!0;break;default:t=!1}x=x.path().attr({fill:"#000",stroke:"none"});w=(+w+1?w:45)+90;r=Math.min(u.height,u.width);var z="number"==typeof z?z:t?u.x+u.width/2:u.x,y="number"==typeof y?y:t?u.y+u.height/2:u.y,s=Math.max(u.width+r,25*r/12),q=Math.max(u.height+r,25*r/12);t=z+r*Math.sin((w-22.5)*v);var k=y+r*Math.cos((w-22.5)*v),p=z+r*Math.sin((w+22.5)*v),w=y+r*Math.cos((w+22.5)*v),v=(p-t)/2;r=(w-k)/2;var s=s/2,q=q/2,m=-Math.sqrt(Math.abs(s*s*q*q-s*s*r*r-q*q*v*v)/(s*s*r*r+q*q*v*v));r=m*s*r/q+(p+t)/2;v=m*-q*v/s+(w+k)/2;x.attr({x:r,y:v,path:["M",z,y,"L",p,w,"A",s,q,0,1,1,t,k,"z"].join()});this.translate(r-u.x-u.width/2,v-u.y-u.height/2);return x.insertBefore(this.node?this:this[0])}};Raphael.fn.label=function(h,e,c){var g=this.set(),c=this.text(h,e,c).attr(Raphael.g.txtattr);return g.push(c.label(),c)};Raphael.fn.popup=function(k,h,g,i,j){var l=this.set(),g=this.text(k,h,g).attr(Raphael.g.txtattr);return l.push(g.popup(i,j),g)};Raphael.fn.tag=function(k,h,g,i,j){var l=this.set(),g=this.text(k,h,g).attr(Raphael.g.txtattr);return l.push(g.tag(i,j),g)};Raphael.fn.flag=function(j,g,c,h){var i=this.set(),c=this.text(j,g,c).attr(Raphael.g.txtattr);return i.push(c.flag(h),c)};Raphael.fn.drop=function(j,g,c,h){var i=this.set(),c=this.text(j,g,c).attr(Raphael.g.txtattr);return i.push(c.drop(h),c)};Raphael.fn.blob=function(j,g,c,h){var i=this.set(),c=this.text(j,g,c).attr(Raphael.g.txtattr);return i.push(c.blob(h),c)};Raphael.el.lighter=function(c){var c=c||2,b=[this.attrs.fill,this.attrs.stroke];this.fs=this.fs||[b[0],b[1]];b[0]=Raphael.rgb2hsb(Raphael.getRGB(b[0]).hex);b[1]=Raphael.rgb2hsb(Raphael.getRGB(b[1]).hex);b[0].b=Math.min(b[0].b*c,1);b[0].s/=c;b[1].b=Math.min(b[1].b*c,1);b[1].s/=c;this.attr({fill:"hsb("+[b[0].h,b[0].s,b[0].b]+")",stroke:"hsb("+[b[1].h,b[1].s,b[1].b]+")"});return this};Raphael.el.darker=function(c){var c=c||2,b=[this.attrs.fill,this.attrs.stroke];this.fs=this.fs||[b[0],b[1]];b[0]=Raphael.rgb2hsb(Raphael.getRGB(b[0]).hex);b[1]=Raphael.rgb2hsb(Raphael.getRGB(b[1]).hex);b[0].s=Math.min(b[0].s*c,1);b[0].b/=c;b[1].s=Math.min(b[1].s*c,1);b[1].b/=c;this.attr({fill:"hsb("+[b[0].h,b[0].s,b[0].b]+")",stroke:"hsb("+[b[1].h,b[1].s,b[1].b]+")"});return this};Raphael.el.resetBrightness=function(){this.fs&&(this.attr({fill:this.fs[0],stroke:this.fs[1]}),delete this.fs);return this};(function(){var f=["lighter","darker","resetBrightness"],e="popup tag flag label drop blob".split(" "),c;for(c in e){(function(b){Raphael.st[b]=function(){return Raphael.el[b].apply(this,arguments)}})(e[c])}for(c in f){(function(b){Raphael.st[b]=function(){for(var a=0;a<this.length;a++){this[a][b].apply(this[a],arguments)}return this}})(f[c])}})();Raphael.g={shim:{stroke:"none",fill:"#000","fill-opacity":0},txtattr:{font:"12px Arial, sans-serif",fill:"#fff"},colors:function(){for(var f=[0.6,0.2,0.05,0.1333,0.75,0],e=[],c=0;10>c;c++){c<f.length?e.push("hsb("+f[c]+",.75, .75)"):e.push("hsb("+f[c-f.length]+", 1, .5)")}return e}(),snapEnds:function(m,i,h){function k(b){return 0.25>Math.abs(b-0.5)?~~b+0.5:Math.round(b)}var l=m,n=i;if(l==n){return{from:l,to:n,power:0}}var l=(n-l)/h,j=n=~~l,h=0;if(n){for(;j;){h--,j=~~(l*Math.pow(10,h))/Math.pow(10,h)}h++}else{if(0==l||!isFinite(l)){h=1}else{for(;!n;){h=h||1,n=~~(l*Math.pow(10,h))/Math.pow(10,h),h++}}h&&h--}n=k(i*Math.pow(10,h))/Math.pow(10,h);n<i&&(n=k((i+0.5)*Math.pow(10,h))/Math.pow(10,h));l=k((m-(0<h?0:0.5))*Math.pow(10,h))/Math.pow(10,h);return{from:l,to:n,power:h}},axis:function(Q,T,S,O,P,R,N,L,M,K,F){var K=null==K?2:K,M=M||"t",R=R||10,F=arguments[arguments.length-1],I="|"==M||" "==M?["M",Q+0.5,T,"l",0,0.001]:1==N||3==N?["M",Q+0.5,T,"l",0,-S]:["M",Q,T+0.5,"l",S,0],G=this.snapEnds(O,P,R),E=G.from,A=G.to,H=G.power,z=0,y={font:"11px 'Fontin Sans', Fontin-Sans, sans-serif"},G=F.set(),A=(A-E)/R,J=E,C=0<H?H:0,B=S/R;if(1==+N||3==+N){H=T;for(E=(N-1?1:-1)*(K+3+!!(N-1));H>=T-S;){"-"!=M&&" "!=M&&(I=I.concat(["M",Q-("+"==M||"|"==M?K:2*!(N-1)*K),H+0.5,"l",2*K+1,0])),G.push(F.text(Q+E,H,L&&L[z++]||(Math.round(J)==J?J:+J.toFixed(C))).attr(y).attr({"text-anchor":N-1?"start":"end"})),J+=A,H-=B}Math.round(H+B-(T-S))&&("-"!=M&&" "!=M&&(I=I.concat(["M",Q-("+"==M||"|"==M?K:2*!(N-1)*K),T-S+0.5,"l",2*K+1,0])),G.push(F.text(Q+E,T-S,L&&L[z]||(Math.round(J)==J?J:+J.toFixed(C))).attr(y).attr({"text-anchor":N-1?"start":"end"})))}else{for(var J=E,C=(0<H)*H,E=(N?-1:1)*(K+9+!N),H=Q,B=S/R,D=0,x=0;H<=Q+S;){"-"!=M&&" "!=M&&(I=I.concat(["M",H+0.5,T-("+"==M?K:2*!!N*K),"l",0,2*K+1])),G.push(D=F.text(H,T+E,L&&L[z++]||(Math.round(J)==J?J:+J.toFixed(C))).attr(y)),D=D.getBBox(),x>=D.x-5?G.pop(G.length-1).remove():x=D.x+D.width,J+=A,H+=B}Math.round(H-B-Q-S)&&("-"!=M&&" "!=M&&(I=I.concat(["M",Q+S+0.5,T-("+"==M?K:2*!!N*K),"l",0,2*K+1])),G.push(F.text(Q+S,T+E,L&&L[z]||(Math.round(J)==J?J:+J.toFixed(C))).attr(y)))}I=F.path(I);I.text=G;I.all=F.set([I,G]);I.remove=function(){this.text.remove();this.constructor.prototype.remove.call(this)};return I},labelise:function(f,e,c){return f?(f+"").replace(/(##+(?:\.#+)?)|(%%+(?:\.%+)?)/g,function(b,a,g){if(a){return(+e).toFixed(a.replace(/^#+\.?/g,"").length)}if(g){return(100*e/c).toFixed(g.replace(/^%+\.?/g,"").length)+"%"}}):(+e).toFixed(0)}};
;
/*
 * g.Raphael 0.51 - Charting library, based on Raphal
 *
 * Copyright (c) 2009-2012 Dmitry Baranovskiy (http://g.raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
(function(){function b(K,F,E,H,M,O){function w(s,u,t,r,q){var Q=Math.PI/180,p=s+t*Math.cos(-r*Q),n=s+t*Math.cos(-q*Q),o=s+t/2*Math.cos(-(r+(q-r)/2)*Q),m=u+t*Math.sin(-r*Q),l=u+t*Math.sin(-q*Q),Q=u+t/2*Math.sin(-(r+(q-r)/2)*Q),s=["M",s,u,"L",p,m,"A",t,t,0,+(180<Math.abs(q-r)),1,n,l,"z"];s.middle={x:o,y:Q};return s}var O=O||{},z=[],D=K.set(),P=K.set(),C=K.set(),B=M.length,I=0,G=0,A=0,J=O.maxSlices||100,L=parseFloat(O.minPercent)||1,y=Boolean(L);P.covers=D;if(1==B){C.push(K.circle(F,E,H).attr({fill:O.colors&&O.colors[0]||this.colors[0],stroke:O.stroke||"#fff","stroke-width":null==O.strokewidth?1:O.strokewidth})),D.push(K.circle(F,E,H).attr(this.shim)),G=M[0],M[0]={value:M[0],order:0,valueOf:function(){return this.value}},O.href&&O.href[0]&&D[0].attr({href:O.href[0]}),C[0].middle={x:F,y:E},C[0].mangle=180}else{for(var N=0;N<B;N++){G+=M[N],M[N]={value:M[N],order:N,valueOf:function(){return this.value}}}M.sort(function(f,e){return e.value-f.value});for(N=0;N<B;N++){if(y&&100*M[N]/G<L&&(J=N,y=!1),N>J){y=!1,M[J].value+=M[N],M[J].others=!0,A=M[J].value}}B=Math.min(J+1,M.length);A&&M.splice(B)&&(M[J].others=!0);for(N=0;N<B;N++){A=I-360*M[N]/G/2;N||(I=90-A,A=I-360*M[N]/G/2);if(O.init){var x=w(F,E,1,I,I-360*M[N]/G).join(",")}J=w(F,E,H,I,I-=360*M[N]/G);L=O.matchColors&&!0==O.matchColors?M[N].order:N;L=K.path(O.init?x:J).attr({fill:O.colors&&O.colors[L]||this.colors[L]||"#666",stroke:O.stroke||"#fff","stroke-width":null==O.strokewidth?1:O.strokewidth,"stroke-linejoin":"round"});L.value=M[N];L.middle=J.middle;L.mangle=A;z.push(L);C.push(L);O.init&&L.animate({path:J.join(",")},+O.init-1||1000,">")}for(N=0;N<B;N++){L=K.path(z[N].attr("path")).attr(this.shim),O.href&&O.href[N]&&L.attr({href:O.href[N]}),L.attr=function(){},D.push(L),C.push(L)}}P.hover=function(h,d){for(var d=d||function(){},g=this,f=0;f<B;f++){(function(c,j,i){var e={sector:c,cover:j,cx:F,cy:E,mx:c.middle.x,my:c.middle.y,mangle:c.mangle,r:H,value:M[i],total:G,label:g.labels&&g.labels[i]};j.mouseover(function(){h.call(e)}).mouseout(function(){d.call(e)})})(C[f],D[f],f)}return this};P.each=function(f){for(var d=0;d<B;d++){var e=C[d];f.call({sector:e,cover:D[d],cx:F,cy:E,x:e.middle.x,y:e.middle.y,mangle:e.mangle,r:H,value:M[d],total:G,label:this.labels&&this.labels[d]})}return this};P.click=function(d){for(var f=this,e=0;e<B;e++){(function(c,j,i){var h={sector:c,cover:j,cx:F,cy:E,mx:c.middle.x,my:c.middle.y,mangle:c.mangle,r:H,value:M[i],total:G,label:f.labels&&f.labels[i]};j.click(function(){d.call(h)})})(C[e],D[e],e)}return this};P.inject=function(c){c.insertBefore(D[0])};if(O.legend){I=O.legend;N=O.legendothers;x=O.legendmark;z=O.legendpos;A=F+H+H/5;J=E+10;I=I||[];z=z&&z.toLowerCase&&z.toLowerCase()||"east";x=K[x&&x.toLowerCase()]||"circle";P.labels=K.set();for(L=0;L<B;L++){var y=C[L].attr("fill"),v=M[L].order;M[L].others&&(I[v]=N||"Others");I[v]=this.labelise(I[v],M[L],G);P.labels.push(K.set());P.labels[L].push(K[x](A+5,J,5).attr({fill:y,stroke:"none"}));P.labels[L].push(y=K.text(A+20,J,I[v]||M[v]).attr(this.txtattr).attr({fill:O.legendcolor||"#000","text-anchor":"start"}));D[L].label=P.labels[L];J+=1.2*y.getBBox().height}K=P.labels.getBBox();P.labels.translate.apply(P.labels,{east:[0,-K.height/2],west:[-K.width-2*H-20,-K.height/2],north:[-H-K.width/2,-H-K.height-10],south:[-H-K.width/2,H+10]}[z]);P.push(P.labels)}P.push(C,D);P.series=C;P.covers=D;return P}var a=function(){};a.prototype=Raphael.g;b.prototype=new a;Raphael.fn.piechart=function(h,e,c,g,j){return new b(this,h,e,c,g,j)}})();
;
define("apps/tile/integrations/gauge_view_basic",["jquery","underscore"],function(c,b){function a(g,e,p,r){r=c.extend(true,{},a.defaults,r);var q=this,n={x:e/2,y:p},k=c.extend({},n,{y:n.y+r.needle.yOffset}),j=-90,i=r.logger,f;function o(s){f=Raphael(g,e,p);m(s);var t=h(s,r.needle.background);d(r.needle,t)}function d(t,v){var u=t.radius/Math.sqrt(2),s=["M",k.x-u,k.y-u,"A",t.radius,t.radius,0,1,0,Math.round(k.x+u),Math.round(k.y-u),"L",k.x,k.y-t.radius-t.length,"z"];i.info("Needle path",s.join(" "));q.needle=f.path(s.join(" ")).attr({fill:t.fill,stroke:t.stroke});q.needle.transform(["r",-90,k.x,k.y])}function m(s){f.piechart(n.x,p,p,l(s.sections.length),{colors:["transparent"].concat(b.pluck(s.sections,"color")),stroke:r.backgroundColor,maxSlices:s.length}).transform(["r180",n.x,p])}function h(v,z){var u=Math.PI*z.radius/v.sections.length,t=u/2,s=["M",n.x-z.radius,n.y,"a",z.radius,z.radius,0,1,1,z.radius*2,0],x=Raphael.getPointAtLength(s,u*v.activeIndex+t);i.info("semicircleArc (in blue)",s.join(" "));i.info("pointOnArc",{x:x.x,y:x.y});f.path(s.concat(["z"])).attr({fill:z.fill,stroke:z.stroke});q.angle=Math.round(Raphael.angle(k.x,k.y,x.x,x.y))+j;i.info("angle (in red)",q.angle+"");if(r.debug){var y=Raphael.pathIntersection(["M",k.x,k.y,"L",0,k.y],s)[0],w=["M",x.x,x.y,"L",k.x,k.y,"L",y.x,y.y,"z"];f.path(s).attr({stroke:"#00f"});f.path(w).attr({stroke:"#f00"})}}function l(u){var s=[5],t=function(){s.unshift(5/u)};b.times(u,t);return s}q.render=function(u){i.warn("Begin",{activeIndex:u.activeIndex,count:u.sections.length});i.info("Pivot point",k);var s=c.Deferred();c(g).empty();o(u);if(r.animation.enabled){var t=Raphael.animation({transform:["r"+q.angle,k.x,k.y]},r.animation.duration,r.animation.easing,function(){i.warn("End");s.resolve()}).delay(r.animation.delay);q.needle.animate(t)}else{q.needle.transform(["r"+q.angle,k.x,k.y])}return s.promise()};return q}a.defaults={animation:{delay:1000,duration:1500,easing:"backOut",enabled:true},backgroundColor:"#fff",debug:false,logger:{info:c.noop,warn:c.noop},needle:{background:{fill:"#fff",radius:100,stroke:"#fff"},fill:"#666",length:125,radius:10,stroke:"#000",yOffset:-12}};return a});
;
define("apps/tile/integrations/gauge",["jquery","jive/promise_util","apps/tile/tile","apps/tile/integrations/gauge_view_basic"],function(e,d,b,g){var c=300,a=150;function f(h){h=e.extend(true,{activeIndex:-1,sections:[]},h);return h.sections.length>0&&!!h.sections[h.activeIndex]}return{render:function(){e(".js-tile:has(.js-gauge)").each(function(i,k){var j=e(k).find(".js-gauge")[0],m=e(k).data(),h=m.latestData,l=h?d.success({data:h}):b.fromDOM(k);l.done(function(n){if(f(n.data)){(new g(j,c,a)).render(n.data)}})});e(".j-gauge-msg-toggle").on("click",function(){var h=e(".j-gauge-msg-less").toggle().is(":visible");e(".j-gauge-msg-more").toggle(h)})}}});
;
goog.provide("jive.integration.tiles.viewstyle.gauge");
jive.integration.tiles.viewstyle.gauge=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<header class="j-tile-header">',opt_data.sections&&opt_data.activeIndex&&opt_data.status?'<h4 id="tile-header-'+soy.$$escapeHtml(opt_data.tileInstanceId)+'" class="font-color-meta">Status: <span style="color: '+soy.$$escapeHtml(opt_data.sections[opt_data.activeIndex].color)+';">'+soy.$$escapeHtml(opt_data.status)+"</span></h4>":"","</header><section class=\"j-tile-body j-tile-gauge clearfix\"><div class=\"j-gauge js-gauge\"></div><script>\n                require(['jquery', 'apps/tile/integrations/gauge'], function($, gaugeController) {\n                    $(gaugeController.render.bind(gaugeController));\n                });\n            <\/script>",
opt_data.message?'<div class="j-gauge-msg-less" '+(opt_data.message.split(new RegExp("","")).length<120?' style="display:none"':"")+'><p class="j-gauge-msg">'+soy.$$truncate(soy.$$escapeHtml(opt_data.message),120,true)+" <a href=\"#\" class='j-gauge-msg-toggle'>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2b00"),[]))+'</a></p></div><div class="j-gauge-msg-more" '+(opt_data.message.split(new RegExp("","")).length>=120?' style="display:none"':"")+'><p class="j-gauge-msg">'+soy.$$escapeHtml(opt_data.message)+
" "+(opt_data.message.split(new RegExp("","")).length>=120?"<a href=\"#\" class='j-gauge-msg-toggle'>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2aff"),[]))+"</a>":"")+"</p></div>":"","</section>");if(opt_data.action)jive.integration.tiles.view.footer(opt_data.action,output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.hero");
jive.integration.tiles.viewstyle.hero=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<section id="tile-hero-unit-',soy.$$escapeHtmlAttribute(opt_data.tileInstanceId),'" class="j-tile-body j-tile-hero-unit js-tile-hero-unit">');if(typeof opt_data.contents!="string"&&opt_data.contents.length!=0){var hasOverlay__soy8=opt_data.contents[0].caption.headline||opt_data.contents[0].caption.text||opt_data.action.text?true:false;output.append("<figure>",!hasOverlay__soy8&&
opt_data.action.url?' <a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.action.url))+'"> ':"",'<img class="j-hero-image" alt="',soy.$$escapeHtmlAttribute(opt_data.contents[0].alt),'" src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,opt_data.contents[0].image))),'">',!hasOverlay__soy8&&opt_data.action.url?" </a> ":"",hasOverlay__soy8?'<figcaption class="j-hero-caption '+soy.$$escapeHtmlAttribute(opt_data.contents[0].caption.position)+
'">'+(opt_data.contents[0].caption.headline?'<h1 class="j-hero-headline">'+soy.$$escapeHtml(opt_data.contents[0].caption.headline)+"</h1>":"")+(opt_data.contents[0].caption.text?'<p class="j-hero-captiontext">'+soy.$$escapeHtml(opt_data.contents[0].caption.text)+"</p>":"")+(opt_data.action.text&&opt_data.action.url?'<a class="j-hero-actionlink" href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.action.url))+'">'+soy.$$escapeHtml(opt_data.action.text)+" </a>":opt_data.action.url?'<a class="j-hero-actionlink" href="'+
soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.action.url))+'">Read More </a>':"")+"</figcaption>":"","</figure>")}else output.append('<p class="noContent">',typeof opt_data.contents=="string"?soy.$$escapeHtml(opt_data.contents):"","</p>");output.append("</section>");return opt_sb?"":output.toString()};
;
goog.provide("jive.video.embedded.showandshareplayer");
jive.video.embedded.showandshareplayer=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;var domain__soy3=opt_data.sourceDomain!=null?opt_data.sourceDomain:opt_data.bean.sourceDomain;var videoID__soy4=opt_data.videoId!=null?opt_data.videoId:opt_data.bean.videoID;var color__soy5="transparent";var width__soy6=opt_data.tileWidth!=null?opt_data.tileWidth:opt_data.bean.width;var height__soy7=opt_data.tileHeight!=null?opt_data.tileHeight:opt_data.bean.height;output.append('<body><object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="Embed-1.0-SNAPSHOT',
soy.$$escapeHtmlAttribute(videoID__soy4),'" width="',soy.$$escapeHtmlAttribute(width__soy6),'" height="',soy.$$escapeHtmlAttribute(height__soy7),'"><param name="src" value="',soy.$$escapeHtmlAttribute(domain__soy3),'/vportal/swf/Embed-1.0-SNAPSHOT.swf"/><param name="quality" value="high" /><param name="allowFullScreen" value="true" /><param name="allowNetworking" value="all" /><param name="allowScriptAccess" value="sameDomain" /><param name="bgcolor" value="',soy.$$escapeHtmlAttribute(color__soy5),
'" /><param name="flashVars" value="baseurl=',soy.$$escapeHtmlAttribute(domain__soy3),"/vportal/VideoPlayer.jsp?ccsid=",soy.$$escapeHtmlAttribute(videoID__soy4),'#&play=false&embedurl="/><param name="wmode" value="transparent"/><param name="play" value="true"/><param name="loop" value="false"/><embed src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(domain__soy3)),'/vportal/swf/Embed-1.0-SNAPSHOT.swf" bgcolor="transparent" width="',soy.$$escapeHtmlAttribute(width__soy6),'" height="',soy.$$escapeHtmlAttribute(height__soy7),
'" id="Embed-1.0-SNAPSHOT',soy.$$escapeHtmlAttribute(videoID__soy4),'" name="Embed-1.0-SNAPSHOT',soy.$$escapeHtmlAttribute(videoID__soy4),'" align="middle" play="true" loop="false" flashVars="baseurl=',soy.$$escapeHtmlAttribute(domain__soy3),"/vportal/VideoPlayer.jsp?ccsid=",soy.$$escapeHtmlAttribute(videoID__soy4),'#&play=false&embedurl=" quality="high" allowfullscreen="true" wmode="transparent" allowscriptaccess="sameDomain" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer"/></object></body>');
return opt_sb?"":output.toString()};
;
goog.provide("jive.video.embedded.kalturaplayer");
jive.video.embedded.kalturaplayer=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;var domain__soy3=opt_data.sourceDomain!=null?opt_data.sourceDomain:opt_data.bean.sourceDomain;var videoID__soy4=opt_data.videoId!=null?opt_data.videoId:opt_data.bean.videoID;var partnerID__soy5=opt_data.partnerID!=null?opt_data.partnerID:opt_data.bean.partnerID;var playerID__soy6=opt_data.playerID!=null?opt_data.playerID:opt_data.bean.playerID;var width__soy7=opt_data.tileWidth!=
null?opt_data.tileWidth:opt_data.bean.width;var height__soy8=opt_data.tileHeight!=null?opt_data.tileHeight:opt_data.bean.height;var color__soy9="#FFFFFF";output.append(domain__soy3==""?'<script type="text/javascript" src="https://cdnapisec.kaltura.com/p/'+soy.$$escapeHtmlAttribute(partnerID__soy5)+"/sp/"+soy.$$escapeHtmlAttribute(partnerID__soy5)+"00/embedIframeJs/uiconf_id/"+soy.$$escapeHtmlAttribute(playerID__soy6)+"/partner_id/"+soy.$$escapeHtmlAttribute(partnerID__soy5)+'"><\/script><body><object id="kaltura_player_'+
soy.$$escapeHtmlAttribute(videoID__soy4)+'" name="kaltura_player_'+soy.$$escapeHtmlAttribute(videoID__soy4)+'" type="application/x-shockwave-flash" height="'+soy.$$escapeHtmlAttribute(height__soy8)+'" width="'+soy.$$escapeHtmlAttribute(width__soy7)+'" allowFullScreen="true" allowNetworking="all" allowScriptAccess="always" data="https://cdnapisec.kaltura.com/index.php/kwidget/wid/_'+soy.$$escapeHtmlAttribute(partnerID__soy5)+"/uiconf_id/"+soy.$$escapeHtmlAttribute(playerID__soy6)+"/entry_id/"+soy.$$escapeHtmlAttribute(videoID__soy4)+
'" style="width: '+soy.$$escapeHtmlAttribute(soy.$$filterCssValue(width__soy7))+"px; height: "+soy.$$escapeHtmlAttribute(soy.$$filterCssValue(height__soy8))+'px;" xmlns:media="https://search.yahoo.com/searchmonkey/media/" rel="media:video" resource="https://cdnapisec.kaltura.com/index.php/kwidget/wid/_'+soy.$$escapeHtmlAttribute(partnerID__soy5)+"/uiconf_id/"+soy.$$escapeHtmlAttribute(playerID__soy6)+"/entry_id/"+soy.$$escapeHtmlAttribute(videoID__soy4)+'"><param name="allowFullScreen" value="true" /><param name="allowNetworking" value="all" /><param name="allowScriptAccess" value="always" /><param name="bgcolor" value="'+
soy.$$escapeHtmlAttribute(color__soy9)+'" /><param name="flashVars" value="" /><param name="movie" value="https://cdnapisec.kaltura.com/index.php/kwidget/wid/_'+soy.$$escapeHtmlAttribute(partnerID__soy5)+"/uiconf_id/"+soy.$$escapeHtmlAttribute(playerID__soy6)+"/entry_id/"+soy.$$escapeHtmlAttribute(videoID__soy4)+'" /><\!--You can enter alternate content here. --\></object></body>':'<body><object type="text/html" width="'+soy.$$escapeHtmlAttribute(width__soy7)+'" height="'+soy.$$escapeHtmlAttribute(height__soy8)+
'" style="overflow: hidden" data="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(domain__soy3))+"/embed/secure/iframe/entryId/"+soy.$$escapeHtmlAttribute(videoID__soy4)+'"></object></body>');return opt_sb?"":output.toString()};
;
goog.provide("jive.video.embedded.externalplayertriage");jive.video.embedded.externalplayertriage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.videoProvider=="showandshare")jive.video.embedded.showandshareplayer(opt_data,output);else jive.video.embedded.kalturaplayer(opt_data,output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.iframe");
jive.integration.tiles.viewstyle.iframe=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.title)jive.integration.tiles.view.header(opt_data,output);output.append('<section class="j-tile-body clearfix">');if(opt_data.config&&opt_data.config.videoProvider&&(opt_data.config.videoProvider.match(new RegExp("(showandshare|brightcove|kaltura)",""))||[]).length>0){output.append('<div class="j-tile-embed-block"><div class="j-tile-embed-wrapper">');jive.video.embedded.externalplayertriage(opt_data.config,
output);output.append("</div></div>")}else if(opt_data.contents&&typeof opt_data.contents!="string"){var frameId__soy15=jive.soy.func.randomString();var frameSrc__soy16=(opt_data.contents.url.match(new RegExp("^\\$/",""))||[]).length>0?jive.soy.func.buildSecureSubdomainUrl(opt_data.contents.url.replace(new RegExp("^\\$",""),"")):opt_data.contents.url;var isExternalVideo__soy17=opt_data.config&&opt_data.config.videoProvider&&(opt_data.config.videoProvider.match(new RegExp("(youtube|vimeo)",""))||[]).length>
0;var height__soy18=opt_data.config.tileHeight?opt_data.config.tileHeight:opt_data.height;output.append('<iframe src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(frameSrc__soy16)),'" id="',soy.$$escapeHtmlAttribute(frameId__soy15),'" frameborder="0" allowfullscreen="true" class="j-tile-iframe j-tile-iframe-',soy.$$escapeHtmlAttribute(opt_data.columnWidth?opt_data.columnWidth:opt_data.config.size),!(opt_data.responsive||isExternalVideo__soy17)?" j-tile-iframe-not-responsive":"",'"',height__soy18&&
(height__soy18.match(new RegExp("^[1-9]\\d*$",""))||[]).length>0?'style="height:'+soy.$$escapeHtmlAttribute(soy.$$filterCssValue(height__soy18))+'px;"':"","></iframe>",opt_data.message?'<script type="text/javascript">(function(msg){var frame = document.getElementById("'+soy.$$escapeJsString(frameId__soy15)+'"); var target = frame.src.substring(0,frame.src.indexOf(\'/\', 8)); frame.addEventListener("load", function(){frame.contentWindow.postMessage(msg, target);});})("'+soy.$$escapeJsString(opt_data.message)+
'");<\/script>':"")}else output.append('<p class="noContent">',soy.$$escapeHtml(opt_data.contents),"</p>");output.append(opt_data.description?'<div class="j-contentDescription">'+soy.$$changeNewlineToBr(soy.$$escapeHtml(opt_data.description))+"</div>":"","</section>");if(opt_data.action)jive.integration.tiles.view.footer(opt_data.action,output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.image_grid");
jive.integration.tiles.viewstyle.image_grid=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.view.header(opt_data,output);output.append('<section class="j-image-grid-tile clearfix">');if(opt_data.contents&&typeof opt_data.contents!="string"&&opt_data.contents.length!=0){var itemList9=opt_data.contents;var itemListLen9=itemList9.length;for(var itemIndex9=0;itemIndex9<itemListLen9;itemIndex9++){var itemData9=itemList9[itemIndex9];output.append('<figure class="j-tile-gallery-img"><a href="',
soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,itemData9.url))),'"><img src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,itemData9.image))),'" height="120" width="160" alt="" border="0"></a><figcaption><a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,itemData9.url))),'" class="font-color-white">',soy.$$escapeHtml(itemData9.titleText),"</a></figcaption></figure>")}}else jive.integration.tiles.defaults.noContent(opt_data,
output);output.append("</section>");if(opt_data.action)jive.integration.tiles.view.footer(opt_data.action,output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.link");
jive.integration.tiles.viewstyle.link=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="listItem ',opt_data.jiveIconClasses||opt_data.iconUrl?"showIcon":opt_data.avatar?"showIcon ic24":"noIcon",'">');if(opt_data.action){jive.integration.tiles.view.actionLink(soy.$$augmentMap(opt_data.action,{classes:"js-accordion-link linkText "+(opt_data.avatar?"j-avatar  jiveTT-hover-user":"")+" ",attrs:opt_data.action.userId!=null?'data-userid="'+soy.$$escapeHtml(opt_data.action.userId)+
'"':"",text:(opt_data.jiveIconClasses?'<span class="'+soy.$$escapeHtml(opt_data.jiveIconClasses)+' icn"></span>':"")+(opt_data.avatar?'<img src="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.avatar))+'" class="jive-avatar icn" alt="">':"")+(opt_data.iconUrl?'<img src="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.iconUrl))+'" class="icn" alt="">':"")+soy.$$escapeHtml(opt_data.text),noEscapeText:true}),output);if(opt_data.byline)jive.integration.tiles.viewstyle.byline(opt_data.byline,
output);output.append(opt_data.external?'<span class="j-browse-external-access"><em>'+(opt_data.avatar?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k40fa"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k40f9"),[])))+"</em></span>":"")}else{output.append(opt_data.jiveIconClasses?'<span class="'+soy.$$escapeHtml(opt_data.jiveIconClasses)+' icn"></span>':"",opt_data.avatar?'<img src="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.avatar))+'" class="jive-avatar icn" alt="">':
"",soy.$$escapeHtml(opt_data.text));if(opt_data.byline)jive.integration.tiles.viewstyle.byline(opt_data.byline,output);output.append(opt_data.external?'<span class="j-browse-external-access"><em>'+(opt_data.avatar?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k40fa"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k40f9"),[])))+"</em></span>":"")}output.append("</li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.sectionClasses");jive.integration.tiles.viewstyle.sectionClasses=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append(opt_data.config&&opt_data.config.displayWidth=="WIDE"?"j-tile-body j-tile-list-wide clearfix":opt_data.config&&opt_data.config.displayWidth=="HERO"?"j-tile-body j-tile-list-hero clearfix":"j-tile-body j-tile-list-narrow clearfix");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.ulClasses");jive.integration.tiles.viewstyle.ulClasses=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append(opt_data.config&&(opt_data.config.listStyle&&opt_data.config.listStyle=="peopleList"||opt_data.config.style&&opt_data.config.style=="peopleList")?"peopleList j-icon-list":"contentList j-icon-list");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.listItem");
jive.integration.tiles.viewstyle.listItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="listItem ',opt_data.jiveIconClasses?"showIcon":opt_data.icon?"showIcon ic"+soy.$$escapeHtml(opt_data.iconClass):"noIcon",'">');if(opt_data.action){var param45=new soy.StringBuilder;if(opt_data.icon||opt_data.jiveIconClasses)jive.integration.tiles.viewstyle.icon(opt_data,param45);param45.append(soy.$$escapeHtml(opt_data.text));jive.integration.tiles.view.actionLink(soy.$$augmentMap(opt_data.action,
{classes:"linkText "+(opt_data.linkDescription?"showDescription ":"")+(opt_data.userID?"jiveTT-hover-user ":"")+(opt_data.userIsPartner?"j-partner ":"")+(opt_data.containerID?"jivecontainerTT-hover-container ":""),attrs:(opt_data.userID?'data-userid="'+soy.$$escapeHtml(opt_data.userID)+'" ':"")+(opt_data.containerID?'data-objectid="'+soy.$$escapeHtml(opt_data.containerID)+'" ':"")+(opt_data.containerType?'data-objecttype="'+soy.$$escapeHtml(opt_data.containerType)+'" ':""),text:param45.toString(),
containerUrl:opt_data.action.relativeUrl&&opt_data.place?soy.$$escapeHtml(opt_data.place.objectURL):"",noEscapeText:true}),output)}else{if(opt_data.icon||opt_data.jiveIconClasses)jive.integration.tiles.viewstyle.icon(opt_data,output);output.append(opt_data.url?'<a href="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.url))+'" class="linkText">'+soy.$$filterNoAutoescape(opt_data.text)+"</a>":soy.$$escapeHtml(opt_data.text))}output.append(opt_data.showDescription&&opt_data.linkDescription?
'<p class="linkDescription">'+soy.$$escapeHtml(opt_data.linkDescription)+"</p>":"",opt_data.showDescription&&opt_data.linkMoreDescription?'<p class="linkDescription">'+soy.$$escapeHtml(opt_data.linkMoreDescription)+"</p>":"","</li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.list");
jive.integration.tiles.viewstyle.list=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.view.header(opt_data,output);output.append('<section class="');jive.integration.tiles.viewstyle.sectionClasses(opt_data,output);output.append('">');if(opt_data.contents&&typeof opt_data.contents!="string"&&opt_data.contents.length!=0){var itemList12=opt_data.contents;var itemListLen12=itemList12.length;for(var itemIndex12=0;itemIndex12<itemListLen12;itemIndex12++){var itemData12=
itemList12[itemIndex12];if(itemIndex12==0){output.append('<ul class="');jive.integration.tiles.viewstyle.ulClasses(opt_data,output);output.append('">')}if(typeof itemData12=="string")jive.integration.tiles.viewstyle.listItem(soy.$$augmentMap(itemData12,{text:itemData12,place:opt_data.place}),output);else if(opt_data.config&&opt_data.config.listStyle=="peopleList")jive.integration.tiles.viewstyle.listItem(soy.$$augmentMap(itemData12,{iconClass:(itemData12.action&&itemData12.action.iconSize?soy.$$escapeHtml(itemData12.action.iconSize):
"48")+" jive-avatar",place:opt_data.place,showDescription:true}),output);else jive.integration.tiles.viewstyle.listItem(soy.$$augmentMap(itemData12,{iconClass:itemData12.action&&itemData12.action.iconSize?soy.$$escapeHtml(itemData12.action.iconSize):"16",place:opt_data.place}),output);output.append(itemIndex12==itemListLen12-1?"</ul>":"")}}else if(typeof opt_data.contents=="string")jive.integration.tiles.defaults.noContent(opt_data,output);else output.append('<p class="noContent">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k40b3"),
[])),"</p>");output.append("</section>");if(opt_data.action&&!opt_data.hideAllContentLink)jive.integration.tiles.view.footer(opt_data.action,output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.listItem_2");
jive.integration.tiles.viewstyle.listItem_2=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="listItem ',opt_data.jiveIconClasses?"showIcon":opt_data.icon?"showIcon ic"+soy.$$escapeHtml(opt_data.iconClass):"noIcon",'">');if(opt_data.action){var param45=new soy.StringBuilder;if(opt_data.icon||opt_data.jiveIconClasses)jive.integration.tiles.viewstyle.icon(opt_data,param45);param45.append(soy.$$escapeHtml(opt_data.text));jive.integration.tiles.view.actionLink(soy.$$augmentMap(opt_data.action,
{classes:"linkText "+(opt_data.description?"showDescription ":"")+(opt_data.userID?"jiveTT-hover-user ":"")+(opt_data.userIsPartner?"j-partner ":"")+(opt_data.containerID?"jivecontainerTT-hover-container ":""),attrs:(opt_data.userID?'data-userid="'+soy.$$escapeHtml(opt_data.userID)+'" ':"")+(opt_data.containerID?'data-objectid="'+soy.$$escapeHtml(opt_data.containerID)+'" ':"")+(opt_data.containerType?'data-objecttype="'+soy.$$escapeHtml(opt_data.containerType)+'" ':""),text:param45.toString(),containerUrl:opt_data.action.relativeUrl&&
opt_data.place?soy.$$escapeHtml(opt_data.place.objectURL):"",noEscapeText:true}),output)}else{if(opt_data.icon||opt_data.jiveIconClasses)jive.integration.tiles.viewstyle.icon(opt_data,output);output.append(soy.$$escapeHtml(opt_data.text))}output.append(opt_data.showDescription&&opt_data.description?'<p class="linkDescription">'+soy.$$escapeHtml(opt_data.description)+"</p>":"",opt_data.showDescription&&opt_data.moreDescription?'<p class="linkDescription">'+soy.$$escapeHtml(opt_data.moreDescription)+
"</p>":"","</li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.list_2");
jive.integration.tiles.viewstyle.list_2=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.view.header(opt_data,output);output.append('<section class="');jive.integration.tiles.viewstyle.sectionClasses(opt_data,output);output.append('">');if(opt_data.contents&&typeof opt_data.contents!="string"&&opt_data.contents.length!=0){var itemList12=opt_data.contents;var itemListLen12=itemList12.length;for(var itemIndex12=0;itemIndex12<itemListLen12;itemIndex12++){var itemData12=
itemList12[itemIndex12];if(itemIndex12==0){output.append('<ul class="');jive.integration.tiles.viewstyle.ulClasses(opt_data,output);output.append('">')}if(typeof itemData12=="string")jive.integration.tiles.viewstyle.listItem_2({text:itemData12,place:opt_data.place},output);else if(opt_data.config&&opt_data.config.style&&opt_data.config.style=="peopleList")jive.integration.tiles.viewstyle.listItem_2(soy.$$augmentMap(itemData12,{iconClass:(itemData12.action&&itemData12.action.iconSize?soy.$$escapeHtml(itemData12.action.iconSize):
"48")+" jive-avatar",place:opt_data.place,showDescription:true}),output);else jive.integration.tiles.viewstyle.listItem_2(soy.$$augmentMap(itemData12,{iconClass:itemData12.action&&itemData12.action.iconSize?soy.$$escapeHtml(itemData12.action.iconSize):"16",place:opt_data.place}),output);output.append(itemIndex12==itemListLen12-1?"</ul>":"")}}else output.append('<p class="noContent">',typeof opt_data.contents=="string"?soy.$$escapeHtml(opt_data.contents):"","</p>");output.append("</section>");if(opt_data.action&&
!opt_data.hideAllContentLink)jive.integration.tiles.view.footer(opt_data.action,output);return opt_sb?"":output.toString()};
;
define("apps/tile/integrations/ask_a_question/views/question_view",["jquery","apps/shared/views/abstract_view"],function(b,a){return a.extend(function(c){this.init=function(e,h,g,f){var d=this;b(e).suggestBox({typeAheadOptions:{itemSelector:"li:visible:has('a')"},parseSearchString:function(i){if(i==""&&b(e).trigger("close.suggestBox")){}return i.trim()},processResults:function(k,j,i){var l=k.results.length>=1&&i&&i.trim()!="";return $j.extend(k,{isResults:l})},displayEmptySearch:false,queryFunc:h.search.bind(h),template:function(i){return f($j.extend(i,{placeName:b(e).data("placeName"),action:g}))},popoverOptions:{focusPopover:false,container:b(".js-ask-a-question-popover"),addClass:"j-autocomplete j-ask-a-question-picker"},closeOnBlur:false}).on("selectionChosen",function(k,i,j){d.$input.trigger("close")}).on("close",function(i){i.stopPropagation()})}})});
;
define("apps/tile/integrations/ask_a_question/models/question_source",["apps/shared/models/rest_service"],function(a){return a.extend(function(b,c){var d=this;b.resourceType="askaquestion";b.pluralizedResourceType=b.resourceType;this.init=function e(f){c.init.call(this,f);d.options=f};this.search=function(f){if(!f){f=""}return this.get("",{q:f,containerType:d.options.searchContainerType,containerID:d.options.searchContainerId,wholeCommunityScope:d.options.wholeCommunityScope,numResults:d.options.numResults,displayThreadResults:d.options.displayThreadResults,displayAnsweredQuestionResults:d.options.displayAnsweredQuestionResults,displayDocumentResults:d.options.displayDocumentResults,displayQuestionsOnly:d.options.displayQuestionsOnly,searchSubCommunities:d.options.searchSubCommunities})}})});
;
goog.provide("jive.integration.tiles.viewstyle.questionResults");
jive.integration.tiles.viewstyle.questionResults=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-pop-main j-menu j-quick-menu j-tile-ask-a-question-results">');if(opt_data.isResults){output.append("<ul>");var resultList7=opt_data.results;var resultListLen7=resultList7.length;for(var resultIndex7=0;resultIndex7<resultListLen7;resultIndex7++){var resultData7=resultList7[resultIndex7];output.append('<li><a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(resultData7.objectURL)),
"?q=",soy.$$escapeUri(opt_data.query),'" class="j-result-item"><span class="',soy.$$escapeHtmlAttribute(resultData7.objectCSS),'" /><span class="j-search-result lnk">',soy.$$escapeHtml(resultData7.subject),"</span><em>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2aca"),[resultData7.userDisplayName,(resultData7.created?jive.model.DateUtil.parseISODateTime(resultData7.created):"")?_jive_moment(parseFloat(resultData7.created?jive.model.DateUtil.parseISODateTime(resultData7.created):"")?parseFloat(resultData7.created?
jive.model.DateUtil.parseISODateTime(resultData7.created):""):resultData7.created?jive.model.DateUtil.parseISODateTime(resultData7.created):"").add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("l"):""])),"</em></a></li>")}output.append("</ul>",opt_data.results.length>=5?'<a href="#" class="j-view-all-results js-view-all-results">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3fb5"),[opt_data.placeName]))+"</a>":"",opt_data.action?'<button class="js-ask-it-button j-ask-question-btn" data-action="'+
soy.$$escapeHtmlAttribute(opt_data.action)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3fac"),[]))+"</button>":"")}else output.append('<p class="j-no-results-msg">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3fb2"),[])),'</p><a href="#" class="j-view-all-results js-view-all-results">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3fb4"),[opt_data.placeName])),"</a>",opt_data.action?'<button class="js-ask-it-button j-ask-question-btn" data-action="'+soy.$$escapeHtmlAttribute(opt_data.action)+
'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3fac"),[]))+"</button>":"");output.append("</div>");return opt_sb?"":output.toString()};
;
define("apps/tile/integrations/ask_a_question/main",["apps/tile/integrations/ask_a_question/views/question_view","apps/tile/integrations/ask_a_question/models/question_source","soy!jive.integration.tiles.viewstyle.questionResults"],function(c,b,a){return jive.oo.Class.extend(function(d){d.init=function(){var k=jQuery,h=k("#js-ask-a-question-search");var g=h.data("containerId"),e=h.data("containerType"),f=h.data("maxResults"),j=h.data("action");var i=new b({searchContainerId:g,searchContainerType:e,wholeCommunityScope:(e==14&&g==1),numResults:f,displayThreadResults:false,displayAnsweredQuestionResults:false,displayDocumentResults:false,displayQuestionsOnly:true,searchSubCommunities:true});new c(h,i,j,a);k("body").off(".question").on("click.question","button.js-ask-it-button",function(m){m.preventDefault();var l=h.val();location.href=_jive_base_url+k(this).data("action")+"&containerID="+g+"&containerType="+e+"&subject="+l}).on("click.question",".js-view-all-results",function(l){l.preventDefault();var m=h.val();location.href=window._jive_base_url+k("#js-ask-a-question-search").data("all-results-url")+"&q="+m})}})});
;
goog.provide("jive.integration.tiles.viewstyle.question");
jive.integration.tiles.viewstyle.question=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.view.header(opt_data,output);output.append('<section class="j-tile-body">',opt_data.place?'<span class="j-form"><label for="js-ask-a-question-search" class="j-508-label">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3fad"),[]))+'</label><input id="js-ask-a-question-search" required role="combobox" class="ask-a-question-search"'+(opt_data.action?'data-action="'+
soy.$$escapeHtmlAttribute(opt_data.action)+'"':"")+'data-container-type="'+soy.$$escapeHtmlAttribute(opt_data.place.objectType)+'" data-container-id="'+soy.$$escapeHtmlAttribute(opt_data.place.id)+'" data-max-results="'+soy.$$escapeHtmlAttribute(opt_data.maxNumberOfResults)+'" data-all-results-url="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.allResultsURL))+'" data-object-id="'+soy.$$escapeHtmlAttribute(opt_data.tileInstanceId)+'" '+(opt_data.place.name?'data-place-name="'+soy.$$escapeHtmlAttribute(opt_data.place.name)+
'"':opt_data.place.groupName?'data-place-name="'+soy.$$escapeHtmlAttribute(opt_data.place.groupName)+'"':"")+' type="text" aria-required="true" autocomplete="off" placeholder="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k3fb3"),[]))+'" /></span><div class="js-ask-a-question-popover"></div>':"","</section>");jive.shared.soy.resourceInlineJs({code:"$j(function() {require(['apps/tile/integrations/ask_a_question/main'], function(questionFunction) {var func = new questionFunction();});});"},
output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.rowItem");
jive.integration.tiles.viewstyle.rowItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<tr class="',opt_data.rowIndex%2==1?"odd":"even",'"><td class="key">');if(typeof opt_data.name!="string"){output.append("<span>");jive.integration.tiles.view.actionLink(opt_data.name,output);output.append("</span>")}else output.append("<span>",soy.$$escapeHtml(opt_data.name),"</span>");output.append('</td><td class="value">');if(typeof opt_data.value!="string"){output.append("<span>");
jive.integration.tiles.view.actionLink(opt_data.value,output);output.append("</span>")}else output.append("<span>",opt_data.url?'<a href="'+soy.$$escapeHtml(opt_data.url)+'">'+soy.$$escapeHtml(opt_data.value)+"</a>":soy.$$escapeHtml(opt_data.value),"</span>");output.append("</td></tr>");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.section");
jive.integration.tiles.viewstyle.section=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="listItem ',opt_data.accordion?"showIcon":"noIcon"," ",!opt_data.hide&&opt_data.accordion?"active":"",'"><h5>',opt_data.accordion?'<a href="#" class="trigger"><span class="lnk">'+soy.$$escapeHtml(opt_data.text)+"</span></a>":"<span>"+soy.$$escapeHtml(opt_data.text)+"</span>",opt_data.desc?'<div class="linkDescription font-color-normal">'+soy.$$changeNewlineToBr(soy.$$escapeHtml(opt_data.desc))+
"</div>":"","</h5><div ",opt_data.hide?'style="display:none;"':"",'><ul class="linksDisplay contentList levelTwo j-icon-list">');var itemList34=opt_data.items;var itemListLen34=itemList34.length;for(var itemIndex34=0;itemIndex34<itemListLen34;itemIndex34++){var itemData34=itemList34[itemIndex34];jive.integration.tiles.viewstyle.link(itemData34,output)}if(opt_data.browseFilterURL)jive.integration.tiles.viewstyle.link(soy.$$augmentMap(opt_data.browseFilterURL,{action:opt_data.browseFilterURL,text:opt_data.browseFilterURL.text}),
output);output.append("</ul></div></li>");return opt_sb?"":output.toString()};
;
jive.namespace("GuidedNavigation");define("apps/guided_navigation/helper",["jquery","underscore"],function(d,c){function e(){var f=$j.deparam.querystring();return{id:f.nav,pos:f.pos}}function b(g,f,h){g=a(g,"nav",h);g=a(g,"pos",f);return g}function a(h,f,i){var g=new RegExp("([?|&])"+f+"=.*?(&|#|$)","i");if(h.match(g)){return h.replace(g,"$1"+f+"="+i+"$2")}else{var k="";var j=h.indexOf("?")!==-1?"&":"?";if(h.indexOf("#")!==-1){k=h.replace(/.*#/,"#");h=h.replace(/#.*/,"")}return h+j+f+"="+i+k}}return{getNav:e,processURL:b}});
;
define("apps/tile/integrations/accordion",["jquery","underscore","apps/guided_navigation/helper"],function(f,b,d){var c={animate:false,heightStyle:"content",icons:{header:"jive-icon-glyph icon-arrow-right2 vmicon",activeHeader:"jive-icon-glyph icon-arrow-down2 vmicon"},activate:a};function a(g,h){h.newHeader.closest("li.listItem").addClass("active");h.oldHeader.closest("li.listItem").removeClass("active")}function e(g){return g.find(".guidedNavigation").length>0}return function(i){var h=this;h.tileID=i.tileID.replace("-1-","");var g=f('.js-tile[js-instance-id="'+h.tileID+'"]');g.find(".js-accordion-container").accordion(c);if(e(g)){b.each(g.find(".js-accordion-link"),function(m,l){var k=f(m),n=l+1;var j=d.processURL(k.attr("href"),n,h.tileID);k.attr("href",j)})}}});
;
goog.provide("jive.integration.tiles.viewstyle.sectionlist");
jive.integration.tiles.viewstyle.sectionlist=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.view.header(opt_data,output);var accordion__soy6=String(opt_data.style).toLowerCase()=="accordion";output.append('<section class="j-tile-body j-tile-',soy.$$escapeHtmlAttribute(String(opt_data.style).toLowerCase())," j-tile-list-narrow ",opt_data.config&&opt_data.config.listStyle?soy.$$escapeHtmlAttribute(opt_data.config.listStyle):"",'">',accordion__soy6?"<script>require([ 'apps/tile/integrations/accordion', 'documentReady' ], function(Accordion) {var main = new Accordion({tileID: '"+
soy.$$escapeJsString(opt_data.tileInstanceId)+"'});});<\/script>":"");if(opt_data.content&&typeof opt_data.content!="string"&&opt_data.content.length!=0){output.append('<ul class="',accordion__soy6?"js-accordion-container":""," contentList levelOne col",soy.$$escapeHtmlAttribute(opt_data.content.length),'sections">');var sectionList28=opt_data.content;var sectionListLen28=sectionList28.length;for(var sectionIndex28=0;sectionIndex28<sectionListLen28;sectionIndex28++){var sectionData28=sectionList28[sectionIndex28];
jive.integration.tiles.viewstyle.section(soy.$$augmentMap(sectionData28,{hide:!(sectionIndex28==0)&&accordion__soy6,accordion:accordion__soy6}),output)}output.append("</ul>")}else jive.integration.tiles.defaults.noContent(soy.$$augmentMap(opt_data,{contents:opt_data.content}),output);output.append("</section>");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.table");
jive.integration.tiles.viewstyle.table=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<header class="j-tile-header"><h4 id="tile-header-',soy.$$escapeHtml(opt_data.tileInstanceId),'" class="font-color-meta">',soy.$$escapeHtml(opt_data.title),'</h4></header><section class="j-tile-body j-tile-table">');if(typeof opt_data.contents!="string"&&opt_data.contents.length!=0){output.append("<table>");var itemList11=opt_data.contents;var itemListLen11=itemList11.length;for(var itemIndex11=
0;itemIndex11<itemListLen11;itemIndex11++){var itemData11=itemList11[itemIndex11];jive.integration.tiles.viewstyle.rowItem(soy.$$augmentMap(itemData11,{rowIndex:itemIndex11}),output)}output.append("</table>")}else output.append('<p class="noContent">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2b4d"),[])),"</p>");output.append("</section>");if(opt_data.action)jive.integration.tiles.view.footer(opt_data.action,output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.viewstyle.tileVideoInfo");
jive.integration.tiles.viewstyle.tileVideoInfo=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<div class=\"j-stream-comms-video-info clearfix\" style=\"text-align: center;\"><script>require(['jquery', 'apps/video/video_render_main', 'jive/accessibility'], function($, VideoRenderMain, Accessibility) {var videoRender = new VideoRenderMain(); $('#video-tile-link-",soy.$$escapeJsString(opt_data.tileInstanceId),"').one(\"click\", function(e) {var $this = $(this); Accessibility.pushFocus($this); videoRender.getVideoDataAndRender({'divID' : 'video-tile-link-",
soy.$$escapeJsString(opt_data.tileInstanceId),"', 'videoID' : ",soy.$$escapeJsValue(opt_data.video.videoID),", 'objectType' : ",soy.$$escapeJsValue(opt_data.video.objectType),", 'objectID' : ",soy.$$escapeJsValue(opt_data.video.videoID),', \'isTiny\' : true}); $(this).find(".js-video-preview-content").remove(); e.preventDefault();});});<\/script><a href="#" class="j-tile-video-thumb" id="video-tile-link-',soy.$$escapeHtmlAttribute(opt_data.tileInstanceId),'"><img src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.video.previewImageURL)),
'" width="100%" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k4555"),[])),'" alt="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k4555"),[])),"\"/><div class='j-video-preview-content js-video-preview-content'><span id='video-span-tile-",soy.$$escapeHtmlAttribute(opt_data.tileInstanceId),"' class='js-play-button'>\u25b6</span></div></a></div>");return opt_sb?"":output.toString()};
;
if(typeof(jive)!="undefined"){jive.rte.plugin.videomacro=function(d,a,e,i,b,j,c,h,f){var g=this;c=[{}];this.getName=function(){return d};this.getUrl=function(){return a};this.isButton=function(){return f};this.isEnabled=function(){return h};this.isShowSettings=function(){return i};this.isShowInMacroList=function(){return b};this.getMacroType=function(){return e};this.getAllowedParameters=function(){return c};this.usesCustomBackground=function(){return true};this.refreshPosition=function(k,l,m){g.updatePreviewContentPosition(l,m)};this.updatePreviewContentPosition=function(n,o){var m=jive.ext.x.xPageY(n);var k=jive.ext.x.xPageX(n);if(o){if(o.css("top")!=m){o.css("top",m)}if(o.css("left")!=k){o.css("left",k)}}};this.refresh=function(k,l){var m=k.getHiddenElementFor($j(l).attr("_jivemacro_uid"));if(m==null){return}if(m.data("init")==null){setTimeout(function(n,o,p){return function(){g.displayVideo(n,o,p);g.updatePreviewContentPosition(o,p)}}(k,l,m),328)}else{g.displayVideo(k,l,m)}};this.displayVideo=function(o,q,r){var n=q.getAttribute("_jivemacro_uid");var l=$j(q);var m=l.attr("_id");var k=l.attr("_videoid");if(m&&!k){l.attr("_videoid",m)}var p=q.getAttribute("_imageURL");if(p){$j(q).width(520).height(328).css("background","transparent");r.width(520).height(328).html('<img src="'+p+'"/>')}};this.retrieveInsertionUUID=function(k){return $j(k,"#insertionUUID").attr("id")};this.getEditorWindowHandle=function(){var k;if(typeof(window.parent.editor)=="undefined"){k=window.parent.tinyMCE.activeEditor.getWin().parent}else{k=window.parent}return k};this.doSetResizedDimensions=function(m,o,l,k,n){o.width(n-500>l?n-500:l);o.height(k);$j(m).width(n-500>l?n-500:l);$j(m).height(k);$j(m).attr("src","/images/tiny_mce3/plugins/alignment/img/spacer.gif")}};if(jive.localexchange){jive.localexchange.addListener("renderedContentWithSelector",function(a,b){a.find("div.jive-content-video[data-video-id]").each(function(d,e){var c=$j(e);if(c.attr("data-video-id")&&!c.attr("data-video-rendered")){require(["apps/video/video_render_main"],function(i){Math.trunc=Math.trunc||function(l){return l-l%1};var j=new i(),h=$j(".jive-revision-table"),k=c.attr("id")+"_"+Math.trunc(Math.random()*Math.pow(10,10)),g;c.attr("id",k);if(h.length){g=j.getVideoThumbnailAndRender}else{g=j.getVideoDataAndRender}var f={divID:k,videoID:c.attr("data-video-id"),objectType:c.attr("data-object-type"),objectID:c.attr("data-object-id"),isTiny:true};g(f)});c.attr("data-video-rendered","true")}})})}};
;
goog.provide("jive.integration.tiles.viewstyle.video");
jive.integration.tiles.viewstyle.video=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.integration.tiles.view.header(opt_data,output);output.append('<section class="j-tile-body j-tile-video">');if(typeof opt_data.video=="string")output.append('<p class="noContent">',soy.$$escapeHtml(opt_data.video),"</p>");else jive.integration.tiles.viewstyle.tileVideoInfo(opt_data,output);output.append("</section>");if(opt_data.action)jive.integration.tiles.view.footer(opt_data.action,output);
return opt_sb?"":output.toString()};
;
var CryptoJS=CryptoJS||function(z,d){var f={},h=f.lib={},e=function(){},b=h.Base={extend:function(a){e.prototype=this;var g=new e;a&&g.mixIn(a);g.hasOwnProperty("init")||(g.init=function(){g.$super.init.apply(this,arguments)});g.init.prototype=g;g.$super=this;return g},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var g in a){a.hasOwnProperty(g)&&(this[g]=a[g])}a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},c=h.WordArray=b.extend({init:function(a,g){a=this.words=a||[];this.sigBytes=g!=d?g:4*a.length},toString:function(a){return(a||y).stringify(this)},concat:function(k){var n=this.words,l=k.words,m=this.sigBytes;k=k.sigBytes;this.clamp();if(m%4){for(var p=0;p<k;p++){n[m+p>>>2]|=(l[p>>>2]>>>24-8*(p%4)&255)<<24-8*((m+p)%4)}}else{if(65535<l.length){for(p=0;p<k;p+=4){n[m+p>>>2]=l[p>>>2]}}else{n.push.apply(n,l)}}this.sigBytes+=k;return this},clamp:function(){var a=this.words,g=this.sigBytes;a[g>>>2]&=4294967295<<32-8*(g%4);a.length=z.ceil(g/4)},clone:function(){var a=b.clone.call(this);a.words=this.words.slice(0);return a},random:function(g){for(var l=[],k=0;k<g;k+=4){l.push(4294967296*z.random()|0)}return new c.init(l,g)}}),w=f.enc={},y=w.Hex={stringify:function(l){var m=l.words;l=l.sigBytes;for(var q=[],p=0;p<l;p++){var n=m[p>>>2]>>>24-8*(p%4)&255;q.push((n>>>4).toString(16));q.push((n&15).toString(16))}return q.join("")},parse:function(k){for(var l=k.length,n=[],m=0;m<l;m+=2){n[m>>>3]|=parseInt(k.substr(m,2),16)<<24-4*(m%8)}return new c.init(n,l/2)}},o=w.Latin1={stringify:function(k){var l=k.words;k=k.sigBytes;for(var n=[],m=0;m<k;m++){n.push(String.fromCharCode(l[m>>>2]>>>24-8*(m%4)&255))}return n.join("")},parse:function(k){for(var l=k.length,n=[],m=0;m<l;m++){n[m>>>2]|=(k.charCodeAt(m)&255)<<24-8*(m%4)}return new c.init(n,l)}},x=w.Utf8={stringify:function(a){try{return decodeURIComponent(escape(o.stringify(a)))}catch(k){throw Error("Malformed UTF-8 data")}},parse:function(a){return o.parse(unescape(encodeURIComponent(a)))}},j=h.BufferedBlockAlgorithm=b.extend({reset:function(){this._data=new c.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=x.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(p){var r=this._data,u=r.words,t=r.sigBytes,s=this.blockSize,n=t/(4*s),n=p?z.ceil(n):z.max((n|0)-this._minBufferSize,0);p=n*s;t=z.min(4*p,t);if(p){for(var q=0;q<p;q+=s){this._doProcessBlock(u,q)}q=u.splice(0,p);r.sigBytes-=t}return new c.init(q,t)},clone:function(){var a=b.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});h.Hasher=j.extend({cfg:b.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){j.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(k,l){return(new a.init(l)).finalize(k)}},_createHmacHelper:function(a){return function(k,l){return(new i.HMAC.init(a,l)).finalize(k)}}});var i=f.algo={};return f}(Math);(function(o){function d(r,s,p,u,q,t,n){r=r+(s&p|~s&u)+q+n;return(r<<t|r>>>32-t)+s}function f(r,s,p,u,q,t,n){r=r+(s&u|p&~u)+q+n;return(r<<t|r>>>32-t)+s}function g(r,s,p,u,q,t,n){r=r+(s^p^u)+q+n;return(r<<t|r>>>32-t)+s}function e(r,s,p,u,q,t,n){r=r+(p^(s|~u))+q+n;return(r<<t|r>>>32-t)+s}for(var b=CryptoJS,c=b.lib,i=c.WordArray,k=c.Hasher,c=b.algo,h=[],j=0;64>j;j++){h[j]=4294967296*o.abs(o.sin(j+1))|0}c=c.MD5=k.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(Q,N){for(var V=0;16>V;V++){var P=N+V,n=Q[P];Q[P]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360}var V=this._hash.words,P=Q[N+0],n=Q[N+1],O=Q[N+2],L=Q[N+3],J=Q[N+4],H=Q[N+5],F=Q[N+6],E=Q[N+7],p=Q[N+8],m=Q[N+9],l=Q[N+10],a=Q[N+11],M=Q[N+12],K=Q[N+13],I=Q[N+14],G=Q[N+15],U=V[0],T=V[1],S=V[2],R=V[3],U=d(U,T,S,R,P,7,h[0]),R=d(R,U,T,S,n,12,h[1]),S=d(S,R,U,T,O,17,h[2]),T=d(T,S,R,U,L,22,h[3]),U=d(U,T,S,R,J,7,h[4]),R=d(R,U,T,S,H,12,h[5]),S=d(S,R,U,T,F,17,h[6]),T=d(T,S,R,U,E,22,h[7]),U=d(U,T,S,R,p,7,h[8]),R=d(R,U,T,S,m,12,h[9]),S=d(S,R,U,T,l,17,h[10]),T=d(T,S,R,U,a,22,h[11]),U=d(U,T,S,R,M,7,h[12]),R=d(R,U,T,S,K,12,h[13]),S=d(S,R,U,T,I,17,h[14]),T=d(T,S,R,U,G,22,h[15]),U=f(U,T,S,R,n,5,h[16]),R=f(R,U,T,S,F,9,h[17]),S=f(S,R,U,T,a,14,h[18]),T=f(T,S,R,U,P,20,h[19]),U=f(U,T,S,R,H,5,h[20]),R=f(R,U,T,S,l,9,h[21]),S=f(S,R,U,T,G,14,h[22]),T=f(T,S,R,U,J,20,h[23]),U=f(U,T,S,R,m,5,h[24]),R=f(R,U,T,S,I,9,h[25]),S=f(S,R,U,T,L,14,h[26]),T=f(T,S,R,U,p,20,h[27]),U=f(U,T,S,R,K,5,h[28]),R=f(R,U,T,S,O,9,h[29]),S=f(S,R,U,T,E,14,h[30]),T=f(T,S,R,U,M,20,h[31]),U=g(U,T,S,R,H,4,h[32]),R=g(R,U,T,S,p,11,h[33]),S=g(S,R,U,T,a,16,h[34]),T=g(T,S,R,U,I,23,h[35]),U=g(U,T,S,R,n,4,h[36]),R=g(R,U,T,S,J,11,h[37]),S=g(S,R,U,T,E,16,h[38]),T=g(T,S,R,U,l,23,h[39]),U=g(U,T,S,R,K,4,h[40]),R=g(R,U,T,S,P,11,h[41]),S=g(S,R,U,T,L,16,h[42]),T=g(T,S,R,U,F,23,h[43]),U=g(U,T,S,R,m,4,h[44]),R=g(R,U,T,S,M,11,h[45]),S=g(S,R,U,T,G,16,h[46]),T=g(T,S,R,U,O,23,h[47]),U=e(U,T,S,R,P,6,h[48]),R=e(R,U,T,S,E,10,h[49]),S=e(S,R,U,T,I,15,h[50]),T=e(T,S,R,U,H,21,h[51]),U=e(U,T,S,R,M,6,h[52]),R=e(R,U,T,S,L,10,h[53]),S=e(S,R,U,T,l,15,h[54]),T=e(T,S,R,U,n,21,h[55]),U=e(U,T,S,R,p,6,h[56]),R=e(R,U,T,S,G,10,h[57]),S=e(S,R,U,T,F,15,h[58]),T=e(T,S,R,U,K,21,h[59]),U=e(U,T,S,R,J,6,h[60]),R=e(R,U,T,S,a,10,h[61]),S=e(S,R,U,T,O,15,h[62]),T=e(T,S,R,U,m,21,h[63]);V[0]=V[0]+U|0;V[1]=V[1]+T|0;V[2]=V[2]+S|0;V[3]=V[3]+R|0},_doFinalize:function(){var p=this._data,q=p.words,m=8*this._nDataBytes,r=8*p.sigBytes;q[r>>>5]|=128<<24-r%32;var n=o.floor(m/4294967296);q[(r+64>>>9<<4)+15]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360;q[(r+64>>>9<<4)+14]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360;p.sigBytes=4*(q.length+1);this._process();p=this._hash;q=p.words;for(m=0;4>m;m++){r=q[m],q[m]=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360}return p},clone:function(){var l=k.clone.call(this);l._hash=this._hash.clone();return l}});b.MD5=k._createHelper(c);b.HmacMD5=k._createHmacHelper(c)})(Math);
;
goog.provide("jive.integration.tiles.view.render");
jive.integration.tiles.view.render=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(!opt_data.id)jive.shared.soy.render({templateName:"jive.integration.tiles.viewstyle."+String(opt_data.viewstyle).toLowerCase(),data:soy.$$augmentMap(opt_data.data,{tileInstanceId:"-1-"+opt_data.definition.id,place:opt_data.place,displayWidth:opt_data.definition.displayWidth,editing:opt_data.editing,columnWidth:opt_data.columnWidth}),failGracefully:true},output);else jive.shared.soy.render({templateName:"jive.integration.tiles.viewstyle."+
String(opt_data.viewstyle).toLowerCase(),data:soy.$$augmentMap(opt_data.data,{tileInstanceId:opt_data.id,place:opt_data.place,displayWidth:opt_data.definition.displayWidth,editing:opt_data.editing,columnWidth:opt_data.columnWidth}),failGracefully:true},output);return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.view.tile");
jive.integration.tiles.view.tile=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="js-tile j-tile j-tileType-',soy.$$escapeHtmlAttribute(opt_data.instance.viewstyle),opt_data.editing?" j-tile-editing":"",!(opt_data.features==null?null:opt_data.features.responsive)==true&&opt_data.instance.viewstyle=="custom_view"?" j-tile-"+soy.$$escapeHtmlAttribute(opt_data.instance.viewstyle)+"-not-responsive ":"",'"',opt_data.column!=null&&opt_data.column>=0?' data-column="'+
soy.$$escapeHtmlAttribute(opt_data.column)+'"':"",opt_data.index!=null&&opt_data.index>=0?' data-index="'+soy.$$escapeHtmlAttribute(opt_data.index)+'"':"",opt_data.editing?' data-tile="'+soy.$$escapeHtmlAttribute(JSON.stringify(opt_data.instance).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"))+'"':' data-tile-view="'+soy.$$escapeHtmlAttribute(JSON.stringify({id:opt_data.instance.id,data:opt_data.instance.data,definition:opt_data.instance.definition,
status:opt_data.instance.status}).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"))+'"','role="complementary"',opt_data.instance.data.title?!opt_data.instance.id?'aria-labelledby="tile-header-'+soy.$$escapeHtmlAttribute("-1-"+opt_data.instance.definition.id)+'"':'aria-labelledby="tile-header-'+soy.$$escapeHtmlAttribute(opt_data.instance.id)+'"':"",'tabindex="0"',!opt_data.instance.id?'js-instance-id="'+soy.$$escapeHtmlAttribute(opt_data.instance.definition.id)+
'"':'js-instance-id="'+soy.$$escapeHtmlAttribute(opt_data.instance.id)+'"',">",opt_data.editing?'<div class="j-configMenu j-expandedMenu">'+(String(opt_data.instance.definition.state).toLowerCase()=="disabled"?'<a href="#" class="j-disabled configOpt font-color-notify"><span class="jive-icon-med jive-icon-warn"></span><span class="j-configMenuLabel">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2a7f"),[]))+"</span></a>":"")+(opt_data.maxTiles!=null&&opt_data.maxTiles>1?'<a href="#" class="js-up'+
(opt_data.first?" disabled":"")+' configOpt font-color-normal"><span class="jive-icon-glyph icon-arrow-up"></span><span class="j-configMenuLabel">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20e1"),[]))+'</span></a><a href="#" class="js-down'+(opt_data.last?" disabled":"")+' configOpt font-color-normal"><span class="jive-icon-glyph icon-arrow-down"></span><span class="j-configMenuLabel">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20e0"),[]))+"</span></a>":"")+'<a href="#" class="js-delete configOpt last j-rc4 j-rc-none-left font-color-normal"><span class="jive-icon-glyph icon-remove"></span><span class="j-configMenuLabel">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k203c"),[]))+'</span></a><a href="#" class="js-configure'+(!opt_data.instance.definition.config?" disabled":"")+' j-rc4 j-rc-none-right configOpt font-color-normal"><span class="jive-icon-glyph icon-gear"></span><span class="j-configMenuLabel">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2a47"),[]))+" "+(!opt_data.instance.definition.config?" (disabled)":"")+"</span></a></div>":opt_data.canManage&&opt_data.instance.definition.config&&
opt_data.instance.id?'<div class="j-configMenu normalMode"><a href="'+(opt_data.place?soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,"/"+opt_data.editPage,function(){var map={};var pairs=[["containerType",opt_data.place.objectType],["containerID",opt_data.place.id],["autoConfig",opt_data.instance.id],["pageId",opt_data.templateId]];for(var i=0;i<pairs.length;i+=1)map[pairs[i][0]]=pairs[i][1];return map}()))):"#")+'" class="js-place-edit-settings configOpt font-color-normal last"><span class="jive-icon-glyph icon-gear"></span><span class="j-configMenuLabel">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2a47"),[]))+"</span></a></div>":"");if(opt_data.instance.status&&opt_data.instance.status.level)jive.integration.tiles.view.status(opt_data.instance,output);output.append('<div class="js-tile-body j-tile-display">');if(!opt_data.editing&&String(opt_data.instance.definition.state).toLowerCase()=="disabled")jive.integration.tiles.view.disabled(null,output);else if(opt_data.instance.data)jive.integration.tiles.view.render(soy.$$augmentMap(opt_data.instance,
{place:opt_data.place,editing:opt_data.editing,columnWidth:opt_data.columnWidth}),output);output.append("</div>");if(opt_data.instance.definition.client_id&&opt_data.instance.definition.icons["16"]&&opt_data.instance.definition.productName){output.append('<div class="j-3rdPartyIntegration font-color-meta j-rc4 j-rc-none-top"><img class="jive-icon-med jive-ext-icon-16" src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.instance.definition.icons["16"])),'" role="img" alt=""/>');jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k404e"),
arg0:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.instance.definition.productName),[])),noAutoEscape:true},output);output.append("</div>")}output.append("</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.view.addMarker");jive.integration.tiles.view.addMarker=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append('<a href="#" class="j-add-tile-marker j-js-add-tile-marker font-color-meta-light j-rc6 ',opt_data.columnWidth&&opt_data.columnWidth=="wide"?"js-column-wrap-wide":"",'"  aria-haspopup="true">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2b31"),[])),"</a>");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.tiles.view.list");
jive.integration.tiles.view.list=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var tileInstanceList3=opt_data.instances;var tileInstanceListLen3=tileInstanceList3.length;for(var tileInstanceIndex3=0;tileInstanceIndex3<tileInstanceListLen3;tileInstanceIndex3++){var tileInstanceData3=tileInstanceList3[tileInstanceIndex3];jive.integration.tiles.view.tile({column:opt_data.column,instance:tileInstanceData3,editing:opt_data.editing,canManage:opt_data.canManage,first:tileInstanceIndex3==
0,last:tileInstanceIndex3==opt_data.maxTiles-1,index:tileInstanceIndex3,place:opt_data.place,templateId:opt_data.templateId,editPage:opt_data.editPage,features:tileInstanceData3.definition.view!=null&&tileInstanceData3.viewstyle=="custom_view"?function(uri){var match=/[\?&]features=([^&#]*)/.exec(uri);var features=match==null?[]:match[1].split(",");var result={};for(var i=0;i<features.length;i++){var feature=features[i];var value=true;if(/\(.*\)/.test(feature)){value=feature.substring(feature.indexOf("(")+
1,feature.lastIndexOf(")"));feature=feature.substring(0,feature.indexOf("("))}result[feature]=value}return result}(tileInstanceData3.definition.view):null,columnWidth:opt_data.columnWidth,maxTiles:opt_data.maxTiles},output)}if(opt_data.editing){var unusedInit21=opt_data.instances.length;var unusedLimit21=opt_data.maxTiles;for(var unused21=unusedInit21;unused21<unusedLimit21;unused21++)jive.integration.tiles.view.addMarker(opt_data,output)}return opt_sb?"":output.toString()};
;
goog.provide("jive.place.layout.wideTileLayout");
jive.place.layout.wideTileLayout=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div id="streamAndDatablocks"><div id="datablock-content" class="j-layout j-layout-l clearfix" data-can-manage="',soy.$$escapeHtmlAttribute(opt_data.canManageContainer),'">');jive.place.layout.columnPlaceholder(soy.$$augmentMap(opt_data,{column:0,instances:opt_data.tileColumn0}),output);output.append('<div class="js-column j-place-column-wrap  j-column-wrap-wide  js-column-wrap-wide" data-column="1"><div class="j-place-column">');jive.integration.tiles.view.list(soy.$$augmentMap(opt_data,
{column:1,instances:opt_data.tileColumn1,maxTiles:opt_data.maxWideTiles,canManage:opt_data.canManageContainer,editing:opt_data.customizeNow,place:opt_data.place,templateId:opt_data.template.id,editPage:opt_data.editPage,columnWidth:"wide"}),output);output.append("</div></div>");jive.place.layout.columnPlaceholder(soy.$$augmentMap(opt_data,{column:2,instances:opt_data.tileColumn2}),output);output.append("</div></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.place.layout.narrowTileLayout");
jive.place.layout.narrowTileLayout=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div id="streamAndDatablocks"><div id="datablock-content" class="j-layout j-layout-ml clearfix" data-can-manage="',soy.$$escapeHtmlAttribute(opt_data.canManageContainer),'"><div class="js-column j-place-column-wrap" data-column="0"><div class="j-place-column">');jive.integration.tiles.view.list(soy.$$augmentMap(opt_data,{column:0,instances:opt_data.tileColumn0,maxTiles:opt_data.maxNarrowTiles,
canManage:opt_data.canManageContainer,editing:opt_data.customizeNow,place:opt_data.place,templateId:opt_data.template.id,editPage:opt_data.editPage,columnWidth:"narrow"}),output);output.append("</div></div>");jive.place.layout.columnPlaceholder(soy.$$augmentMap(opt_data,{column:1,instances:opt_data.tileColumn1}),output);jive.place.layout.columnPlaceholder(soy.$$augmentMap(opt_data,{column:2,instances:opt_data.tileColumn2}),output);output.append("</div></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.place.layout.narrowWideTileLayout");
jive.place.layout.narrowWideTileLayout=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div id="streamAndDatablocks"><div id="datablock-content" class="j-layout j-layout-ml clearfix" data-can-manage="',soy.$$escapeHtmlAttribute(opt_data.canManageContainer),'"><div class="js-column j-place-column-wrap" data-column="0"><div class="j-place-column">');jive.integration.tiles.view.list(soy.$$augmentMap(opt_data,{column:0,instances:opt_data.tileColumn0,maxTiles:opt_data.maxNarrowTiles,
canManage:opt_data.canManageContainer,editing:opt_data.customizeNow,place:opt_data.place,templateId:opt_data.template.id,editPage:opt_data.editPage,columnWidth:"narrow"}),output);output.append('</div></div><div class="js-column j-place-column-wrap  j-column-wrap-wide  js-column-wrap-wide" data-column="1"><div class="j-place-column">');jive.integration.tiles.view.list(soy.$$augmentMap(opt_data,{column:1,instances:opt_data.tileColumn1,maxTiles:opt_data.maxWideTiles,canManage:opt_data.canManageContainer,
editing:opt_data.customizeNow,place:opt_data.place,templateId:opt_data.template.id,editPage:opt_data.editPage,columnWidth:"wide"}),output);output.append("</div></div>");jive.place.layout.columnPlaceholder(soy.$$augmentMap(opt_data,{column:2,instances:opt_data.tileColumn2}),output);output.append("</div></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.place.layout.narrowWideNarrowTileLayout");
jive.place.layout.narrowWideNarrowTileLayout=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div id="streamAndDatablocks"><div id="datablock-content" class="j-layout j-layout-sms clearfix" data-can-manage="',soy.$$escapeHtmlAttribute(opt_data.canManageContainer),'"><div class="js-column j-place-column-wrap" data-column="0"><div class="j-place-column">');jive.integration.tiles.view.list(soy.$$augmentMap(opt_data,{column:0,instances:opt_data.tileColumn0,maxTiles:opt_data.maxNwnLayoutNarrowTiles,
canManage:opt_data.canManageContainer,editing:opt_data.customizeNow,place:opt_data.place,templateId:opt_data.template.id,editPage:opt_data.editPage,columnWidth:"narrow"}),output);output.append('</div></div><div class="js-column j-place-column-wrap  j-column-wrap-wide  js-column-wrap-wide" data-column="1"><div class="j-place-column">');jive.integration.tiles.view.list(soy.$$augmentMap(opt_data,{column:1,instances:opt_data.tileColumn1,maxTiles:opt_data.maxWideTiles,canManage:opt_data.canManageContainer,
editing:opt_data.customizeNow,place:opt_data.place,templateId:opt_data.template.id,editPage:opt_data.editPage,columnWidth:"wide"}),output);output.append('</div></div><div class="js-column j-place-column-wrap" data-column="2"><div class="j-place-column">');jive.integration.tiles.view.list(soy.$$augmentMap(opt_data,{column:2,instances:opt_data.tileColumn2,maxTiles:opt_data.maxNwnLayoutNarrowTiles,canManage:opt_data.canManageContainer,editing:opt_data.customizeNow,place:opt_data.place,templateId:opt_data.template.id,
editPage:opt_data.editPage,columnWidth:"narrow"}),output);output.append("</div></div></div></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.place.layout.wideNarrowTileLayout");
jive.place.layout.wideNarrowTileLayout=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div id="streamAndDatablocks"><div id="datablock-content" class="j-layout j-layout-lm clearfix" data-can-manage="',soy.$$escapeHtmlAttribute(opt_data.canManageContainer),'">');jive.place.layout.columnPlaceholder(soy.$$augmentMap(opt_data,{column:0,instances:opt_data.tileColumn0}),output);output.append('<div class="js-column j-place-column-wrap  j-column-wrap-wide  js-column-wrap-wide" data-column="1"><div class="j-place-column">');jive.integration.tiles.view.list(soy.$$augmentMap(opt_data,
{column:1,instances:opt_data.tileColumn1,maxTiles:opt_data.maxWideTiles,canManage:opt_data.canManageContainer,editing:opt_data.customizeNow,place:opt_data.place,templateId:opt_data.template.id,editPage:opt_data.editPage,columnWidth:"wide"}),output);output.append('</div></div><div class="js-column j-place-column-wrap" data-column="2"><div class="j-place-column">');jive.integration.tiles.view.list(soy.$$augmentMap(opt_data,{column:2,instances:opt_data.tileColumn2,maxTiles:opt_data.maxNarrowTiles,canManage:opt_data.canManageContainer,
editing:opt_data.customizeNow,place:opt_data.place,templateId:opt_data.template.id,editPage:opt_data.editPage,columnWidth:"narrow"}),output);output.append("</div></div></div></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.place.layout.columns");
jive.place.layout.columns=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.template.layout=="wide")jive.place.layout.wideTileLayout(opt_data,output);else if(opt_data.template.layout=="narrow")jive.place.layout.narrowTileLayout(opt_data,output);else if(opt_data.template.layout=="narrow_wide")jive.place.layout.narrowWideTileLayout(opt_data,output);else if(opt_data.template.layout=="narrow_wide_narrow")jive.place.layout.narrowWideNarrowTileLayout(opt_data,output);else jive.place.layout.wideNarrowTileLayout(opt_data,
output);return opt_sb?"":output.toString()};
;
goog.provide("jive.tilepage.mobile.homePageDynamicPane");
jive.tilepage.mobile.homePageDynamicPane=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="your-view"><header class="j-act-header"><h1 class="header">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k26c6"),[])),"</h1>",opt_data.canManageContainer?'<div id="tilepage-actions-container" class="j-act-filter-controls"><a class="tile-page-edit-button" href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,"edit-mobile-home.jspa")))+
'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k415e"),[]))+"</a></div>":"","</header>",opt_data.welcomeMessage?'<div class="j-home-welcome-message"><p>'+soy.$$changeNewlineToBr(soy.$$escapeHtml(opt_data.welcomeMessage))+"</p></div>":"");if(!opt_data.template||!opt_data.template.tiles||opt_data.template.tiles.length==0)output.append('<div id="streamAndDatablocks"><div class="j-tile"><div class="j-tile-display"><p class="noContent">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k416b"),
[])),'<br><br><a class="tile-page-edit-button" href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,"edit-your-view.jspa"))),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k416a"),[])),"</a></p></div></div></div>");else jive.place.layout.columns(soy.$$augmentMap(opt_data,{editPage:"edit-mobile-home.jspa"}),output);output.append("</div>",opt_data.canManageContainer?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k25e0"),[]))+
"</p>":"");jive.shared.soy.resourceInlineJs({code:"$j(function() {var tmp = 'asdf'; require(['apps/tile/responsive_tile'], function(updateColumns) {updateColumns();});});"},output);return opt_sb?"":output.toString()};
;
define("jive/responsive",["jquery","underscore","apps/activity_stream/activity_notifier","apps/tile/template","apps/tile/integrations/image_gallery","soy!jive.tilepage.mobile.homePageDynamicPane"],function(g,c,f,a,e,b){var d=function(j,l,k){k=k||{};var m=this;this.$trigger=j;this.$menu=l;this.options=k;this.$trigger.off(".responsive").on("vclick.responsive",function(n){n.preventDefault();m.toggle()})};$j.extend(d.prototype,{isOpened:function(){return this.$menu.hasClass("active")},open:function(){h.hideMenus();this.$menu.addClass("active");if(!this.options.noOverlay){h.showOverlay()}if(this.options.$items){this.options.$items.addClass("mobile-active");g("#j-header-wrap").removeClass("fixed");g(window).scrollTop(0);if(this.options.$items.selector=="#j-spotlight-search"){g("#autosearch").focus()}}},close:function(){this.$menu.removeClass("active");if(!this.options.noOverlay){h.hideOverlay()}if(this.options.$items){this.options.$items.removeClass("mobile-active");g("#j-header-wrap").addClass("fixed")}},toggle:function(){if(this.isOpened()){this.close()}else{this.open()}}});var h={_initialized:false,_currentSize:null,_mediaQueryLists:{},_mediaQueryListListeners:{},_overlayCloseTimeoutId:null,init:function(){var j=location.pathname.split("/").pop().replace(/([a-z])(.*)/i,function(m,l,k){return l.toUpperCase()+k});if(!h._initialized){h._initialized=true;h.registerBreakpoint("only screen and (max-width:40em)","sm");h.registerBreakpoint("only screen and (min-width:40em)","md");if(h["handle"+j+"Page"]){h["handle"+j+"Page"]()}if(this.getCurrentSize()=="sm"){$j.fn.popover.defaults.flip=false}h.bindEvents()}},buildMQLListener:function(j){var k=g("body");return function(m){var o=c.keys(h._mediaQueryLists),n=c.without(o,j),l=c.map(n,function(p){return"j-responsive-"+p});if(m.matches){h._currentSize=j;jive.switchboard.emit("responsive.breakpoint.changed",j);k.removeClass(l.join(" ")).addClass("j-responsive-"+j)}else{k.removeClass("j-responsive-"+j)}}},registerBreakpoint:function(m,k){var j,l;if(window.matchMedia){j=window.matchMedia(m);this._mediaQueryLists[k]=j;this._mediaQueryListListeners[j.media]=l=this.buildMQLListener(k);j.addListener(l);l(j)}},bindEvents:function(){var l=g(".j-pop-main");g("#mob-spotlight-cancel").on("vclick",function(m){m.preventDefault();g(".mobile-tool > a").removeClass("active");g("#j-spotlight-search").removeClass("mobile-active");g("#mobile-overlay").removeClass("active")});if(jive.search&&jive.search.searchParams){jive.search.searchParams.addListener("change",function(){h.accordionMenu.close()})}g("#mobile-overlay").on("vclick",function(m){m.preventDefault();h.hideMenus();g(".mobile-tool > a").removeClass("active")});g(document).on("navbarPopoverLoad",".j-pop-main",function(m){clearTimeout(h._overlayCloseTimeoutId);if(!l.is(m.target)){h.hideMenus();g(".mobile-tool > a").removeClass("active")}if(h.getCurrentSize()==="sm"){h.showOverlay()}g(this).one("close.popoveroverlay",function(n){h._overlayCloseTimeoutId=setTimeout(function(){h.hideOverlay()},100)})});g(document).on("vclick",".j-pop-main a.quick",function(m){h.hideOverlay()});g(document).on("vclick","input[type=submit],button[type=submit]",function(n){var m=g(this);if(/^touch/.test(n.originalEvent.type)){n.originalEvent.preventDefault();m.click()}});g(window).on("blur",function(m){if(h.getCurrentSize()==="sm"){}}).on("focus",function(m){g("#j-header-wrap").show()});if(h.getCurrentSize()==="sm"){var j=function(){if(!String.prototype.endsWith){String.prototype.endsWith=function(y,x){var w=this.toString();if(typeof x!=="number"||!isFinite(x)||Math.floor(x)!==x||x>w.length){x=w.length}x-=y.length;var z=w.indexOf(y,x);return z!==-1&&z===x}}var u=window.location.pathname;var m=(typeof _jive_base_url!="undefined"&&_jive_base_url!="")?_jive_base_url:"";u=u.slice(m.length,u.length);if(u.endsWith(u,"/")){u=u.slice(0,u.length-1)}g("#j-profile-header-avatar-stats *, .j-endorse-count").bind("click",function(){return false});g(".j-homenav-link, .js-select-link").on("vclick",function(x){x.preventDefault();var w=g(this).attr("href");window.location=w});if(g("body").hasClass("j-header-mode-basic")){var s=g("#navCreate");var v=g("#j-satNav-wrap .j-globalNav-li").children();var p=g("#j-satNav-wrap .js-satellite-nav-container").children();g("#j-links .j-globalNav").prepend('<li class="j-nav-create j-nav-cmenu j-globalNav-li js-create-nav-container" aria-haspopup="true"></li>').prepend('<li class="j-globalNav-li j-nav-create j-nav-user j-satNav-user-menu">').prepend('<li class="j-nav-create j-nav-user j-globalNav-li js-satellite-nav-container" aria-haspopup="true"></li>');g("#j-links .j-nav-cmenu").append(s);g("#j-links .j-satNav-user-menu").append(v);g("#j-links .js-satellite-nav-container").append(p);g("#jive-nav-link-create").remove();g("#j-satNav-wrap").remove()}g("#j-header-wrap").addClass("fixed");if(!(g("#navCreate").length)){g(".j-globalNav").addClass("no-create")}if(g("#jive-nav-link-dashboard").length){if((u==="/get-started")||(u==="/moderation")){window.location=m+"/welcome"}}else{if((u==="/get-started")||(u==="/moderation")){window.location=m+"/news"}}var o=g(".js-tile-image-gallery").width();var n=o/300;var q=parseInt(g(".js-tile-image-gallery").height()*n);g(".js-tile-image-gallery .j-slide").width(o);g(".js-tile-image-gallery .js-carousel").height(q);g(".js-tile-image-gallery").addClass("j-loaded");var r=g("#jive-place-link-overview-tab");if(r.length>0&&r.is(".active")){var t=g("#jive-place-link-activity");if(t.length>0){window.location=t[0].href}else{if(u.length>0&&u[u.length-1]==="/"){u=u.substring(0,u.length-1)}window.location=m+u+"/content"}}};j()}g("#mobile-place-menu").on("vclick",function(m){m.preventDefault();g(this).toggleClass("active");g("nav.j-placeNav ul.j-placeMainNav").toggleClass("mobile-active")});g("#jive-place-link-actions").on("vclick",function(m){if(g("#mobile-place-menu").hasClass("active")){g("#mobile-place-menu").toggleClass("active");g("nav.j-placeNav ul.j-placeMainNav").toggleClass("mobile-active")}});f.addListener("activityStream.poll",function(p){var o=p.fullCounts.communications.unreadCount,n=g(".j-badge-hd.j-rc5.j-rc-none-bottom"),m=function(){require(["soy!jive.nav.menu.home.inbox"],function(s){var u=new $j.Deferred();u.then(function t(){n.replaceWith(s({unreadCount:o}))});var q=setInterval(function r(){n=g(".j-badge-hd.j-rc5.j-rc-none-bottom");if(n.length>0){u.resolve();clearInterval(q)}},16)})};g("#j-satNav-indicator").html(jive.welcome.updateIndicator({type:"count",count:o,extraCssClasses:"j-navbadge-count visible-xs"}));if(n.length){m()}else{g(document).on("navbarPopoverLoad updatePopoverHTML",function(q){if(q.target.id==="j-satNav-menu"){n=g(".j-badge-hd.j-rc5.j-rc-none-bottom");c.defer(m)}})}});var k=function(){var m=function(n){if(n==="sm"&&jive.ActivityStream&&jive.ActivityStream.GlobalCommunicationStreamController){jive.ActivityStream.GlobalCommunicationStreamController.changeViewType("full",true)}};jive.switchboard.addListener("responsive.breakpoint.changed",m);m(h._currentSize)};if(jive.ActivityStream&&jive.ActivityStream.GlobalCommunicationStreamController){k()}else{jive.switchboard.addListener("activity.communication.controller.initialized",k)}h.showElems()},handleWelcomePage:function(){var j=g("#jive-body .j-home-welcome-responsive").data("browseId");a.fetchMobileHomePage(j).done(function(n){if(!n){n=g("#jive-body .j-home-welcome-responsive").data("defaultMobileHomePage")}var l=g("#jive-body .j-home-welcome-responsive").data("welcomeMessage");var m=g.extend({},{template:n},{place:{objectType:14,id:1,name:"Jive"}},{canManageContainer:false},{welcomeMessage:l});h.getTileColumns(m,n);var k=g(b(m));g("#jive-body .j-home-welcome-responsive").html(k);if(g(".js-tile-image-gallery-wide, .js-tile-image-gallery-narrow").length){e.initSlick()}if(g("body.j-body-welcome .j-layout-sl nav.j-column-s").length){g("body.j-body-welcome").addClass("not-simple")}jive.util.loadCSS(jive.resource.url({path:"/styles/jive-places.css"}),g.noop,jive.resource.url({path:"/styles/jive.css"}))})},getTileColumns:function(n,q){var p=[],o=[],m=[],l=0,k=0,j=0;if(q&&q.tiles){for(i=0;i<q.tiles.length;i++){switch(q.tiles[i].column){case 0:p[l++]=q.tiles[i];break;case 1:o[k++]=q.tiles[i];break;case 2:m[j++]=q.tiles[i];break}}}g.extend(n,{tileColumn0:p});g.extend(n,{tileColumn1:o});g.extend(n,{tileColumn2:m})},mainMenu:new d(g("#mobile-menu > a"),g("#mobile-menu > a"),{$items:g("#j-globalNav > li.j-globalNav-li.j-ui-elem")}),searchMenu:new d(g("#mobile-search > a"),g("#mobile-search > a"),{$items:g("#j-spotlight-search")}),accordionMenu:new d(g("a#mobile-sidenav-btn"),g("a#mobile-sidenav-btn").parent(),{noOverlay:true}),showOverlay:function(){g("#mobile-overlay").addClass("active")},hideOverlay:function(){if(!(this.mainMenu.isOpened()||this.searchMenu.isOpened()||g("#navCreate").hasClass("active")||g("#j-satNav").hasClass("active"))){g("#mobile-overlay").removeClass("active")}},hideMenus:function(){g(".j-pop .j-pop-main").trigger("close");h.mainMenu.close();h.searchMenu.close();h.accordionMenu.close();g("#j-globalNav > li.j-globalNav-li.j-ui-elem").removeClass("mobile-active");g("body.j-body-home .j-layout-sl nav.j-column-s, body.j-body-home .j-layout-sls nav.j-column-s, body.jive-body-search .j-layout-sl .j-column-s, nav.j-second-nav, body.jive-body-content .j-column-s, #mobile-sidenav-btn").removeClass("active");if(g("#mobile-place-menu").hasClass("active")){g("#mobile-place-menu").toggleClass("active");g("nav.j-placeNav ul.j-placeMainNav").toggleClass("mobile-active")}},getCurrentSize:function(){return this._currentSize},showElems:function(){g("body.j-body-home .j-layout-sl nav.j-column-s").addClass("j-loaded");g("body.j-body-home nav.j-news-menu").addClass("j-loaded");g("body.j-body-home .j-layout-sls nav.j-column-s").addClass("j-loaded");g("body.jive-body-content .j-layout-ls .j-column-s").addClass("j-loaded");g("body.jive-body-search .j-layout-sl .j-column-s").addClass("j-loaded");g("nav.j-second-nav").addClass("j-loaded");g(".j-placeNavWrap").addClass("j-loaded")}};g(document).ready(function(){h.init()});return h});
;
define("ui-modules/spotlight/scripts/main",["jquery","jive/responsive","ui-modules/spotlight/scripts/config","ui-modules/spotlight/scripts/tools","ui-modules/spotlight/scripts/log","ui-modules/spotlight/scripts/visor/ui","ui-modules/spotlight/scripts/browserdb","ui-modules/spotlight/scripts/scheduler"],function(f,h,b,i,e,j,m,g){if(b.userLoggedIn){jive.i18n.batchWarmI18nWildcards("global.group.*");jive.i18n.batchWarmI18nWildcards("global.access.content.type.*")}var c=false,k=null,d=function(){if(c){return}c=true;e.setLevel(b.logLevel);f.ajaxSetup({traditional:true});m.init().then(function(){if(m.enabled){g.start()}j.init()})},a=function(){if(h._currentSize!="sm"){clearTimeout(k);f(window).off("resize",a);setTimeout(d,250)}},l=function(){if(!h._initialized){setTimeout(l,100);return}if(!h.getCurrentSize()){f("body").addClass("j-no-responsive")}if(h.getCurrentSize()=="sm"){f(window).on("resize",a)}else{d()}};return{config:b,init:l}});
;
goog.provide("jive.UserPicker.soy.domainMessage");goog.provide("jive.UserPicker.soy.inputPlaceholder");goog.provide("jive.UserPicker.soy.limitMessage");goog.provide("jive.UserPicker.soy.noUsersMatchMessage");goog.provide("jive.UserPicker.soy.placeholderEmail");goog.provide("jive.UserPicker.soy.placeholderPlace");goog.provide("jive.UserPicker.soy.pleaseEnterEmail");goog.provide("jive.UserPicker.soy.pleaseEnterValidDomain");goog.provide("jive.UserPicker.soy.pleaseEnterValidEmail");goog.provide("jive.UserPicker.soy.renderDocumentViewersAdded");
goog.provide("jive.UserPicker.soy.renderModalBrowseButton");goog.provide("jive.UserPicker.soy.renderModalLoading");goog.provide("jive.UserPicker.soy.renderModalPlaceBrowseButton");goog.provide("jive.UserPicker.soy.renderModalSkillSearchButton");goog.provide("jive.UserPicker.soy.renderSelectedUser");goog.provide("jive.UserPicker.soy.renderSelectedUsersList");goog.provide("jive.UserPicker.soy.renderUserList");goog.provide("jive.UserPicker.soy.renderUserPickerModal");goog.provide("jive.UserPicker.soy.renderedContainer");
goog.provide("jive.UserPicker.soy.renderedUser");goog.provide("jive.UserPicker.soy.search");goog.provide("jive.UserPicker.soy.searching");goog.require("soy");goog.require("soydata");goog.require("soy.StringBuilder");goog.require("jive.shared.displayutil.a11yBoundary");goog.require("jive.shared.displayutil.avatar");goog.require("jive.shared.displayutil.userDisplayNameLink");
jive.UserPicker.soy.renderUserPickerModal=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-modal j-pop" id="user-autocomplete-modal-container" style="display: none;"><header><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k444a"),[])),'</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200f"),[])),'</label><a href="javascript:;" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200f"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4429"),[])),' <span class="j-close-icon j-ui-elem" role="img"></span></a><section id="user-picker-modal-content" class="jive-modal-content j-pop-main jive-modal-content-userpicker">',soy.$$filterNoAutoescape(opt_data.body),"</section></div>");return opt_sb?"":output.toString()};
jive.UserPicker.soy.renderModalBrowseButton=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href="javascript:;" class="jive-chooser-browse j-select-people j-btn-global" title="',opt_data.plural?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k444a"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k444b"),[])),'"><span class="j-508-label">',opt_data.plural?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k444a"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k444b"),
[])),'</span><span class="jive-icon-glyph icon-users"></span></a>');return opt_sb?"":output.toString()};jive.UserPicker.soy.renderModalSkillSearchButton=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href="#" class="jive-chooser-browse j-skill-search-button">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4437"),[])),"</a>");return opt_sb?"":output.toString()};
jive.UserPicker.soy.renderModalPlaceBrowseButton=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href="#" class="jive-choose-browse j-select-place j-btn-global" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3b29"),[])),'"><span class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3b29"),[])),'</span><span class="jive-icon-med jive-icon-group"></span></a>');return opt_sb?"":output.toString()};
jive.UserPicker.soy.renderModalLoading=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<div class='jive-user-modal-loading'>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4424"),[])),"</div>");return opt_sb?"":output.toString()};jive.UserPicker.soy.search=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2144"),[])));return opt_sb?"":output.toString()};
jive.UserPicker.soy.searching=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2148"),[])));return opt_sb?"":output.toString()};jive.UserPicker.soy.renderDocumentViewersAdded=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k442b"),[])),"<br></p>");return opt_sb?"":output.toString()};
jive.UserPicker.soy.renderSelectedUsersList=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.results.userlists.length>0||opt_data.results.users.length>0||opt_data.results.containers.length>0){output.append(opt_data.message?soy.$$filterNoAutoescape(opt_data.message):"",'<ul class="clearfix">');var listList59=opt_data.results.userlists;var listListLen59=listList59.length;for(var listIndex59=0;listIndex59<listListLen59;listIndex59++){var listData59=listList59[listIndex59];
output.append('<li style="display: list-item;" class="connections d" data-list-id="',soy.$$escapeHtml(listData59.id),'"><img width="16" height="16" border="0" alt="',soy.$$escapeHtml(listData59.displayName),'" style="background-color: #',soy.$$escapeHtml(listData59.style),';" src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/9.0.2.8500fd4/","","/images/transparent.png")),'" class="lbl jive-icon-med jive-icon-label-frame"><a class="showConnections" href="javascript:;">',listData59.excluded?
'<span class="excluded">':"",soy.$$escapeHtml(listData59.displayName)," <span>(",soy.$$escapeHtml(listData59.users.length),")</span>",listData59.excluded?"</span>":"","</a>",listData59.displayExternallyVisibleVisualCue?'<span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k296b"),[]))+'"></span>':"","<em>",!opt_data.disabled?" "+(!listData59.excluded?'<a class="remove" href="javascript:;">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4446"),
[]))+"</a>":'<a class="add" href="javascript:;">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k443f"),[]))+"</a>"):"",'</em><div class="js-grouped-users-popover j-grouped-users-popover" id="listContents',soy.$$escapeHtml(listData59.id),'" style="display: none;"><ul class="j-simple-list">');var userList101=listData59.users;var userListLen101=userList101.length;for(var userIndex101=0;userIndex101<userListLen101;userIndex101++){var userData101=userList101[userIndex101];output.append('<li><span class="lnk">');
jive.shared.displayutil.userDisplayNameLink(userData101,output);output.append("</span>",!userData101.entitled?'<span class="jive-icon-sml jive-icon-warn"></span>':"",userData101.prop.isPartner?'<span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k296b"),[]))+'"></span>':"","</li>")}output.append("</ul></div>",!listData59.entitled?'<span class="jive-icon-sml jive-icon-warn"></span>':"","</li>");var userList120=listData59.users;var userListLen120=
userList120.length;for(var userIndex120=0;userIndex120<userListLen120;userIndex120++){var userData120=userList120[userIndex120];jive.UserPicker.soy.renderedUser({user:userData120,relationship:opt_data.relationship,disabled:opt_data.disabled,hidden:true},output)}}var userList128=opt_data.results.users;var userListLen128=userList128.length;for(var userIndex128=0;userIndex128<userListLen128;userIndex128++){var userData128=userList128[userIndex128];jive.UserPicker.soy.renderedUser({user:userData128,relationship:opt_data.relationship,
disabled:opt_data.disabled,hidden:false},output)}var containerList135=opt_data.results.containers;var containerListLen135=containerList135.length;for(var containerIndex135=0;containerIndex135<containerListLen135;containerIndex135++){var containerData135=containerList135[containerIndex135];jive.UserPicker.soy.renderedContainer({container:containerData135,disabled:opt_data.disabled},output)}output.append("</ul>")}return opt_sb?"":output.toString()};
jive.UserPicker.soy.renderedUser=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="',opt_data.user.disabled?"disabled":""," ",!opt_data.user.entitled||!opt_data.user.prop.hasConnection&&opt_data.relationship?"j-warning":"",' js-single-user" data-user-id="',soy.$$escapeHtml(opt_data.user.id),'" data-user-email="',soy.$$escapeHtml(opt_data.user.email),'" data-user-name="',soy.$$escapeHtml(opt_data.user.username),'" data-uib="',soy.$$escapeHtml(JSON.stringify(opt_data.user).replace(/</g,
"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")),'"',opt_data.hidden?' style="display:none;"':"",">");if(!opt_data.user.anonymous&&!opt_data.user.external)jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.user,{size:20,hideLink:true}),output);else output.append('<span class="jive-icon-glyph icon-envelope"></span>');output.append('<span class="',opt_data.user.excluded?"excluded":"",'">',soy.$$escapeHtml(opt_data.user.displayName),"</span>",!opt_data.user.anonymous&&
!opt_data.user.external||opt_data.user.prop.isPartner?opt_data.user.prop.isVisibleToPartner||opt_data.user.displayExternallyVisibleVisualCue||opt_data.user.prop.isPartner?'<span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k296b"),[]))+'"></span>':"":"",!opt_data.disabled&&!opt_data.user.disabled?"<em>"+(!opt_data.user.excluded?'<a class="remove" aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4446"),[]))+" "+soy.$$escapeHtml(opt_data.user.displayName)+
'" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4446"),[]))+" "+soy.$$escapeHtml(opt_data.user.displayName)+'" href="#"><span class="jive-icon-glyph icon-close2"></span></a>':'<a class="add" href="#" aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k443f"),[]))+'"><span class="jive-icon-glyph icon-plus2"></span></a>')+"</em>":"",!opt_data.user.entitled?'<span class="jive-icon-sml jive-icon-warn"></span>':"",opt_data.relationship&&!opt_data.user.prop.hasConnection?
'<span class="jive-icon-sml jive-icon-redalert"></span>':"","</li>");return opt_sb?"":output.toString()};
jive.UserPicker.soy.renderedContainer=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li data-container-id="',soy.$$escapeHtml(opt_data.container.id),'" data-container-type="',soy.$$escapeHtml(opt_data.container.type),'" class="',opt_data.container.alreadyLinkedToPlace?"j-warning":"",'" data-uib="',soy.$$escapeHtml(JSON.stringify(opt_data.container).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")),'"><span class="jive-icon-med ',
soy.$$escapeHtml(opt_data.container.iconCss),'"></span><span>',soy.$$escapeHtml(opt_data.container.subject),"</span>",opt_data.container.prop&&opt_data.container.prop.isVisibleToPartner?'<span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2969"),[]))+'"></span>':"",!opt_data.disabled?"<em>"+(!opt_data.container.excluded?'<a class="remove" href="javascript:;" aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4446"),[]))+'"><span class="jive-icon-glyph icon-close2"></span></a>':
'<a class="add" href="javascript:;" aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k443f"),[]))+'"><span class="jive-icon-glyph icon-plus2"></span></a>')+"</em>":"",opt_data.container.alreadyLinkedToPlace?'<span class="jive-icon-sml jive-icon-warn"></span>':'<span class="jive-icon-sml jive-icon-info"></span>',"</li>");return opt_sb?"":output.toString()};
jive.UserPicker.soy.renderSelectedUser=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.results.users.length>0){output.append('<ul class="jive-chooser-list j-people-list clearfix">');var userList254=opt_data.results.users;var userListLen254=userList254.length;for(var userIndex254=0;userIndex254<userListLen254;userIndex254++){var userData254=userList254[userIndex254];if(userIndex254==0){output.append('<li style="display: list-item;" class="assignee',userData254.disabled?
" disabled":"",!userData254.entitled?" notEntitled ":"",'" data-user-id="',soy.$$escapeHtml(userData254.id),'" data-user-email="',soy.$$escapeHtml(userData254.email),'" data-user-name="',soy.$$escapeHtml(userData254.username),'">');if(!userData254.anonymous&&!userData254.external)jive.shared.displayutil.avatar(soy.$$augmentMap(userData254,{size:20,hideLink:true}),output);else output.append('<span class="jive-icon-glyph icon-envelope"></span>');output.append("<span>",soy.$$escapeHtml(userData254.displayName),
"</span>",!userData254.anonymous&&!userData254.external?userData254.prop.isVisibleToPartner||userData254.prop.isPartner?'<span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k296b"),[]))+'"></span>':"":"",!opt_data.disabled?'<em><a class="remove" href="javascript:;" style="display: inline;" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4442"),[]))+" "+soy.$$escapeHtml(userData254.displayName)+'" aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4442"),
[]))+" "+soy.$$escapeHtml(userData254.displayName)+'"><span class="jive-icon-glyph icon-close2"></span></a></em>':"","</li>")}}output.append("</ul>")}else if(opt_data.results.containers.length>0){var containerList303=opt_data.results.containers;var containerListLen303=containerList303.length;for(var containerIndex303=0;containerIndex303<containerListLen303;containerIndex303++){var containerData303=containerList303[containerIndex303];if(containerIndex303==0)jive.UserPicker.soy.renderedContainer(soy.$$augmentMap(opt_data,
{container:containerData303}),output)}}return opt_sb?"":output.toString()};
jive.UserPicker.soy.renderUserList=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-pop-main j-menu j-quick-menu j-people-find">');jive.shared.displayutil.a11yBoundary({type:"menu"},output);if(opt_data.results.userlists.length>0){output.append('<h4 id="user-picker-label-list-heading" class="j-menu-section-heading font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2e02"),[])),'</h4><ul class="j-label-list j-icon-list j-avatar-list" role="listbox" aria-labelledby="user-picker-label-list-heading">');
var listList318=opt_data.results.userlists;var listListLen318=listList318.length;for(var listIndex318=0;listIndex318<listListLen318;listIndex318++){var listData318=listList318[listIndex318];output.append('<li class="user-autocomplete-item clearfix ',listData318.displayExternallyVisibleVisualCue?"external-access":"",'" role="option"><a href="#" id="userlist_',soy.$$escapeHtml(listData318.id),'" data-list-id="',soy.$$escapeHtml(listData318.id),'"><img width="26" height="26" border="0" alt="',soy.$$escapeHtml(listData318.displayName),
'" style="background-color: #',soy.$$escapeHtml(listData318.style),';" src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/9.0.2.8500fd4/","","/images/transparent.png")),'" class="lbl jive-icon-med jive-icon-label-frame"><span class="lnk">',soy.$$escapeHtml(listData318.displayName),"</span> ",listData318.displayExternallyVisibleVisualCue?'<span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k296b"),[]))+'"></span>':"","<span>(",
soy.$$escapeHtml(listData318.users.length),")</span></a></li>")}output.append("</ul>")}if(opt_data.results.users.length>0){output.append(opt_data.results.userlists.length>0||opt_data.results.containers.length>0?'<h4 id="user-picker-people-list-heading" class="j-menu-section-heading font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k210e"),[]))+"</h4>":"",'<ul class="j-avatar-list j-icon-list" role="listbox"',opt_data.results.userlists.length>0||opt_data.results.containers.length>
0?'aria-labelledby="user-picker-people-list-heading"':"",">");var userList358=opt_data.results.users;var userListLen358=userList358.length;for(var userIndex358=0;userIndex358<userListLen358;userIndex358++){var userData358=userList358[userIndex358];output.append('<li class="user-autocomplete-item clearfix" role="option"><a href="#" id="user_',soy.$$escapeHtml(userData358.id),'" data-user-id="',soy.$$escapeHtml(userData358.id),'" data-user-email="',soy.$$escapeHtml(userData358.email),'" data-user-name="',
soy.$$escapeHtml(userData358.displayName),'" data-user-username="',soy.$$escapeHtml(userData358.username),'">');if(!userData358.anonymous)jive.shared.displayutil.avatar(soy.$$augmentMap(userData358,{size:24,hideLink:true}),output);else output.append('<span class="jive-icon-glyph icon-envelope"></span>');output.append('<span class="lnk ',userData358.anonymous?"user-email":"",'">',soy.$$escapeHtml(userData358.displayName),"</span>");var title__soy384=userData358.prop.title;var department__soy385=userData358.prop.department;
output.append(title__soy384||department__soy385?' <em class="font-color-meta-light">'+(title__soy384&&department__soy385?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k345a"),[title__soy384,department__soy385])):title__soy384?soy.$$escapeHtml(title__soy384):department__soy385?soy.$$escapeHtml(department__soy385):"")+"</em>":"",userData358.displayExternallyVisibleVisualCue||userData358.prop.isPartner?'<span class="font-color-meta-light j-browse-external-access"><em>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k296b"),
[]))+"</em></span>":"","</a></li>")}output.append("</ul>")}if(opt_data.results.containers.length>0){output.append('<h4 id="user-picker-places-list-heading" class="j-menu-section-heading font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2113"),[])),'</h4><ul class="j-icon-list" role="listbox" aria-labelledby="user-picker-place-list-heading">');var containerList410=opt_data.results.containers;var containerListLen410=containerList410.length;for(var containerIndex410=0;containerIndex410<
containerListLen410;containerIndex410++){var containerData410=containerList410[containerIndex410];output.append('<li class="user-autocomplete-item clearfix" role="option"><a href="#" id="container_',soy.$$escapeHtml(containerData410.type),"_",soy.$$escapeHtml(containerData410.id),'" data-container-id="',soy.$$escapeHtml(containerData410.id),'" data-container-type="',soy.$$escapeHtml(containerData410.type),'"><span class="jive-icon-med ',soy.$$escapeHtml(containerData410.iconCss),'"></span><span class="lnk">',
soy.$$escapeHtml(containerData410.subject),"</span> ",containerData410.prop&&containerData410.prop.isVisibleToPartner?'<em class="j-browse-external-access">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2968"),[]))+"</em>":"","</a></li>")}output.append("</ul>")}output.append(opt_data.results.users.length==0&&opt_data.results.userlists.length==0&&opt_data.results.containers.length==0?soy.$$filterNoAutoescape(opt_data.noResultsMessage):"");jive.shared.displayutil.a11yBoundary({type:"menu",
isEnd:true},output);output.append("</div>");return opt_sb?"":output.toString()};
jive.UserPicker.soy.noUsersMatchMessage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.placeAllowed)if(opt_data.emailAllowed){output.append('<p class="font-color-meta empty">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4455"),[])),"</p>");jive.UserPicker.soy.domainMessage(opt_data,output)}else output.append('<p class="font-color-meta empty">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4456"),[])),"</p>");else if(opt_data.emailAllowed){output.append('<p class="font-color-meta empty">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4400"),[])),"</p>");jive.UserPicker.soy.domainMessage(opt_data,output)}else output.append('<p class="font-color-meta empty">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4403"),[])),"</p>");return opt_sb?"":output.toString()};
jive.UserPicker.soy.pleaseEnterEmail=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<p class="font-color-meta empty">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k43ff"),[])),"</p>");return opt_sb?"":output.toString()};
jive.UserPicker.soy.pleaseEnterValidEmail=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<p class="font-color-meta empty">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4405"),[])),"</p>");return opt_sb?"":output.toString()};
jive.UserPicker.soy.pleaseEnterValidDomain=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.trial)output.append('<p class="font-color-normal empty"><span class="jive-icon-sml jive-icon-group-private-glyph"></span><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4404"),[])),"</strong> ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4401"),[])),"</p>");else jive.UserPicker.soy.domainMessage(opt_data,output);return opt_sb?"":output.toString()};
jive.UserPicker.soy.domainMessage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.domains&&opt_data.domains.length>0?'<p class="font-color-meta empty"><strong>'+(opt_data.trial?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k43fe"),[opt_data.domains])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k43fd"),[opt_data.domains])))+"</strong></p>":"");return opt_sb?"":output.toString()};
jive.UserPicker.soy.limitMessage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.limit&&opt_data.limit>0?'<div class="jive-warn-box" aria-live="polite" aria-atomic="true"><div><span class="jive-icon-warn jive-icon-sml"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4402"),[opt_data.limit]))+"</div></div>":"");return opt_sb?"":output.toString()};
jive.UserPicker.soy.inputPlaceholder=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.userAllowed?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k440a"),[])):"",opt_data.userAllowed&&(opt_data.emailAllowed||opt_data.placeAllowed)?", ":"");if(opt_data.emailAllowed){jive.UserPicker.soy.placeholderEmail(soy.$$augmentMap(opt_data,{index:0}),output);output.append(", ");if(opt_data.multiple&&!opt_data.placeAllowed){jive.UserPicker.soy.placeholderEmail(soy.$$augmentMap(opt_data,
{index:1}),output);output.append(", ")}}if(opt_data.placeAllowed){jive.UserPicker.soy.placeholderPlace(opt_data,output);output.append(", ")}output.append(opt_data.userAllowed&&(opt_data.emailAllowed||opt_data.placeAllowed)?"...":"");return opt_sb?"":output.toString()};
jive.UserPicker.soy.placeholderEmail=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.index==0?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4408"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4406"),[])),opt_data.domains&&opt_data.domains.length>opt_data.index?soy.$$escapeHtml(opt_data.domains[opt_data.index]):opt_data.domains&&opt_data.domains.length?soy.$$escapeHtml(opt_data.domains[0]):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4407"),
[])));return opt_sb?"":output.toString()};jive.UserPicker.soy.placeholderPlace=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4409"),[])));return opt_sb?"":output.toString()};
;
if(!jive.contentplace_relationship){jive.contentplace_relationship=(function(){var a;require(["jive/dispatcher"],function(b){b.listen("deleteContentPlaceRel",function(c){require(["apps/contentplace_relationship/main"],function(d){a=a||new d();a.deleteRelationship(c)})});b.listen("deleteContentPlaceRelBreadcrumb",function(c){require(["apps/contentplace_relationship/main"],function(d){a=a||new d();a.deleteRelationship(c,function(){})})})});return{}})()};
;
goog.provide("jive.soy.share.alreadySharedToPlace");goog.provide("jive.soy.share.attachmentLinks");goog.provide("jive.soy.share.control");goog.provide("jive.soy.share.emailLinks");goog.provide("jive.soy.share.extendedShare");goog.provide("jive.soy.share.listWithoutPermission");goog.provide("jive.soy.share.notAbleToShare");goog.provide("jive.soy.share.removeContentPlaceLinkControl");goog.provide("jive.soy.share.removeContentPlaceLinkFailure");goog.provide("jive.soy.share.removeContentPlaceLinkSuccess");
goog.provide("jive.soy.share.secretGroupMessage");goog.provide("jive.soy.share.send_private_msg");goog.provide("jive.soy.share.share");goog.provide("jive.soy.share.shareConfirmation");goog.provide("jive.soy.share.shareToPlaceAccessInfo");goog.provide("jive.soy.share.userWithoutPermission");goog.provide("jive.soy.share.usersNotRelated");goog.require("soy");goog.require("soydata");goog.require("soy.StringBuilder");goog.require("jive.UserPicker.soy.inputPlaceholder");
jive.soy.share.control=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href="#" class="',opt_data.type=="text"?"share-link j-meta-control lnk ":opt_data.type=="largeButton"?"j-social-action ":"",opt_data.classes?soy.$$escapeHtmlAttribute(opt_data.classes):"",'" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k3aa2"),[])),'" data-command="share" data-object-type="',soy.$$escapeHtmlAttribute(opt_data.objectType),'" data-object-id="',soy.$$escapeHtmlAttribute(opt_data.objectId),
'"',opt_data.contentPlaceRelInfo?'data-relationship-id="'+soy.$$escapeHtmlAttribute(opt_data.contentPlaceRelInfo.relationshipID)+'"':"",">",opt_data.icon?"<span"+(opt_data.type=="smallButton"?' class="j-ui-elem"':"")+'><span class="jive-icon-glyph icon-share2"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aa1"),[]))+"</span>":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aa1"),[])),"</a>");return opt_sb?"":output.toString()};
jive.soy.share.share=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-modal j-modal j-pop" id="jive-modal-share"><header><h2>');var shareKey__soy39=new soy.StringBuilder("share.",soy.$$escapeHtml(opt_data.objectType));shareKey__soy39=shareKey__soy39.toString();output.append(shareKey__soy39==jive.i18n.i18nText(jive.i18n.getMsg(shareKey__soy39),[])?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3acb"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(shareKey__soy39),
[])),'</h2></header><label class="j-508-label" id="close-share-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200f"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-share-508" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k200f"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200e"),[])),'  <span class="jive-icon-glyph icon-close-med" role="img"></span></a><section class="jive-modal-content j-pop-main j-invite-modal clearfix"><div id="share-error" class="jive-error-box" style="display:none" aria-live="polite" aria-atomic="true" ></div><form class="j-form">',
opt_data["private"]?'<p class="j-info"><span class="j-info-icon j-ui-elem"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3abf"),[]))+"</p>":"",'<label for="share-users">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ab1"),[]))," (",opt_data.placeSharesEnabled?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k35aa"),[])):opt_data.externalCommunity?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k35a4"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k35a7"),
[])),')</label><div class="j-user-input-typeahead"><input type="text" name="share-users" id="share-users" class="j-autocomplete-input j-user-autocomplete j-autocomplete-jive-chooser-input jive-form-element-text j-ui-elem" autocomplete="on" role="combobox"/></div><div class="ie-zindex-fix j-form-exp font-color-meta-light"><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k358a"),[]))," </strong>");jive.UserPicker.soy.inputPlaceholder({userAllowed:true,emailAllowed:opt_data.externallyShareable,
placeAllowed:opt_data.placeSharesEnabled,domains:opt_data.domains,multiple:true},output);output.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k35a6"),[])),'</p></div><p><label for="jive-send-content-not-message">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aa9"),[]))," <span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aa8"),[])),'</span></label><textarea name="message" class="jive-form-element-textarea font-color-normal" id="jive-send-content-not-message">',
soy.$$filterNoAutoescape(opt_data.message),'</textarea></p><div class="j-pop-row j-last"><button type="submit" id="share-content-submit" name="share-content-submit" class="j-btn-callout">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ac5"),[])),'</button><button type="button" class="close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2003"),[])),"</button></div></form></section></div>");return opt_sb?"":output.toString()};
jive.soy.share.shareConfirmation=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a90"),[])),"</p>");return opt_sb?"":output.toString()};jive.soy.share.secretGroupMessage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ac1"),[])),"</p>");return opt_sb?"":output.toString()};
jive.soy.share.send_private_msg=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("send.private.autoaccess"),[opt_data.objectName])));return opt_sb?"":output.toString()};
jive.soy.share.userWithoutPermission=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="js-share-msg j-tips ',!(opt_data.user.anonymous||opt_data.user.external)&&opt_data.externallyInviteable?" wide":"",'">');if(opt_data.user.anonymous||opt_data.user.external)if(!opt_data.invitationsEnabled)output.append(opt_data.attachmentAvailable?'<p class="j-warn">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a9a"),[]))+"<p>":'<p class="j-warn">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a9e"),
[]))+"<p>");else if(opt_data["private"]&&opt_data.editor){output.append('<p class="j-warn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a9d"),[])),"<p>");jive.soy.share.attachmentLinks(opt_data.user,output)}else if(opt_data.attachmentAvailable){output.append('<p class="j-warn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a9b"),[])),"<p>");jive.soy.share.attachmentLinks(opt_data.user,output)}else{output.append('<p class="j-warn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a9c"),
[])),"<p>");jive.soy.share.emailLinks(opt_data.user,output)}else if(opt_data["private"]&&opt_data.editor)output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ad3"),[])));else if(opt_data.editor&&opt_data.externallyInviteable&&!opt_data.user.partner){output.append('<p class="j-warn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ace"),[])),"</p>");jive.soy.share.extendedShare(opt_data.user,output)}else if(opt_data.attachmentAvailable)output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3acd"),
[])));else output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ad2"),[])));output.append("</div>");return opt_sb?"":output.toString()};
jive.soy.share.attachmentLinks=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<p><a href="#" class="js-notify-user" data-user-identifier="',soy.$$escapeHtmlAttribute(opt_data.email),'" ',opt_data.notified?'style="display:none"':""," >",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a87"),[])),'</a><a href="#" class="js-unnotify-user" data-user-identifier="',soy.$$escapeHtmlAttribute(opt_data.email),'" ',!opt_data.notified?'style="display:none"':""," >",
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a86"),[])),"</a><p>");return opt_sb?"":output.toString()};
jive.soy.share.emailLinks=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<p><a href="#" class="js-notify-user" data-user-identifier="',soy.$$escapeHtmlAttribute(opt_data.email),'" ',opt_data.notified?'style="display:none"':"",">",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a97"),[])),'</a><a href="#" class="js-unnotify-user" data-user-identifier="',soy.$$escapeHtmlAttribute(opt_data.email),'" ',!opt_data.notified?'style="display:none"':"",">",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a96"),
[])),"</a><p>");return opt_sb?"":output.toString()};
jive.soy.share.extendedShare=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-extended-share js-extended-share"><label for="extend-share"><input id="extend-share" type="radio" name="extendShare" value="share" data-user-identifier="',soy.$$escapeHtmlAttribute(opt_data.email),'" ',opt_data.extendedShare||!opt_data.notified?"checked":"","/>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ad1"),[])),'</label><label for="send-pdf"><input id="send-pdf" type="radio" name="extendShare" value="no-share" data-user-identifier="',
soy.$$escapeHtmlAttribute(opt_data.email),'" ',opt_data.notified?"checked":"","/>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3acf"),[])),'</label><input type="button" value="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k3ad0"),[])),'" class="close"></div>');return opt_sb?"":output.toString()};
jive.soy.share.listWithoutPermission=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="js-share-msg j-tips">',opt_data["private"]&&opt_data.editor?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aa5"),[])):opt_data.attachmentAvailable?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aa3"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aa4"),[])),"</div>");return opt_sb?"":output.toString()};
jive.soy.share.usersNotRelated=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<p class="j-warn"><span class="jive-icon-sml jive-icon-redalert"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aaf"),[])),"</p>");return opt_sb?"":output.toString()};
jive.soy.share.notAbleToShare=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="js-share-msg j-tips"><p class="j-warn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3acc"),[])),"<p></div>");return opt_sb?"":output.toString()};
jive.soy.share.shareToPlaceAccessInfo=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="js-share-msg j-tips"><p class="j-info">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ab2"),[])),"<p></div>");return opt_sb?"":output.toString()};
jive.soy.share.alreadySharedToPlace=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="js-share-msg j-tips"><p class="j-warn">',opt_data.place&&opt_data.place.objectTypeName?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3abd"),[opt_data.place.objectTypeName])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ab3"),[])),"<p></div>");return opt_sb?"":output.toString()};
jive.soy.share.removeContentPlaceLinkControl=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href="#" class="js-delete-content-place-rel button lnk" data-command="deleteContentPlaceRel" data-relationship-id="',soy.$$escapeHtmlAttribute(opt_data.contentPlaceRelationship.relationshipID),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aba"),[])),"</a>");return opt_sb?"":output.toString()};
jive.soy.share.removeContentPlaceLinkSuccess=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3abc"),[])),"</span>");return opt_sb?"":output.toString()};jive.soy.share.removeContentPlaceLinkFailure=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3abb"),[])),"</span>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.share.share");
jive.soy.share.share=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-modal j-modal j-pop" id="jive-modal-share"><header><h2>');var shareKey__soy4=new soy.StringBuilder("share.",soy.$$escapeHtml(opt_data.objectType));shareKey__soy4=shareKey__soy4.toString();output.append(shareKey__soy4==jive.i18n.i18nText(jive.i18n.getMsg(shareKey__soy4),[])?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3acb"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(shareKey__soy4),[])),
'</h2></header><label class="j-508-label" id="close-share-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200f"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-share-508" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k200f"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200e"),[])),'  <span class="jive-icon-glyph icon-close-med" role="img"></span></a><section class="jive-modal-content j-pop-main j-invite-modal clearfix"><div id="share-error" class="jive-error-box" style="display:none" aria-live="polite" aria-atomic="true" ></div><form class="j-form">',
opt_data["private"]?'<p class="j-info"><span class="j-info-icon j-ui-elem"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3abf"),[]))+"</p>":"",'<label for="share-users">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ab1"),[]))," (",opt_data.placeSharesEnabled?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k35aa"),[])):opt_data.externalCommunity?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k35a4"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k35a7"),
[])),')</label><div class="j-user-input-typeahead"><input type="text" name="share-users" id="share-users" class="j-autocomplete-input j-user-autocomplete j-autocomplete-jive-chooser-input jive-form-element-text j-ui-elem" autocomplete="on" role="combobox"/></div><div class="ie-zindex-fix j-form-exp font-color-meta-light"><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k358a"),[]))," </strong>");jive.UserPicker.soy.inputPlaceholder({userAllowed:true,emailAllowed:opt_data.externallyShareable,
placeAllowed:opt_data.placeSharesEnabled,domains:opt_data.domains,multiple:true},output);output.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k35a6"),[])),'</p></div><p><label for="jive-send-content-not-message">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aa9"),[]))," <span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aa8"),[])),'</span></label><textarea name="message" class="jive-form-element-textarea font-color-normal" id="jive-send-content-not-message">',
soy.$$filterNoAutoescape(opt_data.message),'</textarea></p><div class="j-pop-row j-last"><button type="submit" id="share-content-submit" name="share-content-submit" class="j-btn-callout">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ac5"),[])),'</button><button type="button" class="close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2003"),[])),"</button></div></form></section></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.share.shareConfirmation");jive.soy.share.shareConfirmation=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a90"),[])),"</p>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.share.secretGroupMessage");jive.soy.share.secretGroupMessage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ac1"),[])),"</p>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.share.usersNotRelated");jive.soy.share.usersNotRelated=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<p class="j-warn"><span class="jive-icon-sml jive-icon-redalert"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aaf"),[])),"</p>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.share.attachmentLinks");
jive.soy.share.attachmentLinks=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<p><a href="#" class="js-notify-user" data-user-identifier="',soy.$$escapeHtmlAttribute(opt_data.email),'" ',opt_data.notified?'style="display:none"':""," >",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a87"),[])),'</a><a href="#" class="js-unnotify-user" data-user-identifier="',soy.$$escapeHtmlAttribute(opt_data.email),'" ',!opt_data.notified?'style="display:none"':""," >",
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a86"),[])),"</a><p>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.share.emailLinks");
jive.soy.share.emailLinks=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<p><a href="#" class="js-notify-user" data-user-identifier="',soy.$$escapeHtmlAttribute(opt_data.email),'" ',opt_data.notified?'style="display:none"':"",">",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a97"),[])),'</a><a href="#" class="js-unnotify-user" data-user-identifier="',soy.$$escapeHtmlAttribute(opt_data.email),'" ',!opt_data.notified?'style="display:none"':"",">",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a96"),
[])),"</a><p>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.share.extendedShare");
jive.soy.share.extendedShare=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-extended-share js-extended-share"><label for="extend-share"><input id="extend-share" type="radio" name="extendShare" value="share" data-user-identifier="',soy.$$escapeHtmlAttribute(opt_data.email),'" ',opt_data.extendedShare||!opt_data.notified?"checked":"","/>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ad1"),[])),'</label><label for="send-pdf"><input id="send-pdf" type="radio" name="extendShare" value="no-share" data-user-identifier="',soy.$$escapeHtmlAttribute(opt_data.email),
'" ',opt_data.notified?"checked":"","/>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3acf"),[])),'</label><input type="button" value="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k3ad0"),[])),'" class="close"></div>');return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.share.userWithoutPermission");
jive.soy.share.userWithoutPermission=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="js-share-msg j-tips ',!(opt_data.user.anonymous||opt_data.user.external)&&opt_data.externallyInviteable?" wide":"",'">');if(opt_data.user.anonymous||opt_data.user.external)if(!opt_data.invitationsEnabled)output.append(opt_data.attachmentAvailable?'<p class="j-warn">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a9a"),[]))+"<p>":'<p class="j-warn">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a9e"),
[]))+"<p>");else if(opt_data["private"]&&opt_data.editor){output.append('<p class="j-warn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a9d"),[])),"<p>");jive.soy.share.attachmentLinks(opt_data.user,output)}else if(opt_data.attachmentAvailable){output.append('<p class="j-warn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a9b"),[])),"<p>");jive.soy.share.attachmentLinks(opt_data.user,output)}else{output.append('<p class="j-warn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a9c"),
[])),"<p>");jive.soy.share.emailLinks(opt_data.user,output)}else if(opt_data["private"]&&opt_data.editor)output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ad3"),[])));else if(opt_data.editor&&opt_data.externallyInviteable&&!opt_data.user.partner){output.append('<p class="j-warn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ace"),[])),"</p>");jive.soy.share.extendedShare(opt_data.user,output)}else if(opt_data.attachmentAvailable)output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3acd"),
[])));else output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ad2"),[])));output.append("</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.share.listWithoutPermission");
jive.soy.share.listWithoutPermission=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="js-share-msg j-tips">',opt_data["private"]&&opt_data.editor?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aa5"),[])):opt_data.attachmentAvailable?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aa3"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aa4"),[])),"</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.share.alreadySharedToPlace");jive.soy.share.alreadySharedToPlace=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="js-share-msg j-tips"><p class="j-warn">',opt_data.place&&opt_data.place.objectTypeName?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3abd"),[opt_data.place.objectTypeName])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ab3"),[])),"<p></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.share.shareToPlaceAccessInfo");jive.soy.share.shareToPlaceAccessInfo=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="js-share-msg j-tips"><p class="j-info">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ab2"),[])),"<p></div>");return opt_sb?"":output.toString()};
;
jive.namespace("ShareApp");define("apps/share/views/share_view",["apps/userpicker/main","apps/shared/controllers/localexchange","soy!jive.error.rest.soy.errorFinding","soy!jive.error.rest.soy.errorUpdating","soy!jive.soy.share.share","soy!jive.soy.share.shareConfirmation","soy!jive.soy.share.secretGroupMessage","soy!jive.soy.share.usersNotRelated","soy!jive.soy.share.userWithoutPermission","soy!jive.soy.share.listWithoutPermission","soy!jive.soy.share.alreadySharedToPlace","soy!jive.soy.share.shareToPlaceAccessInfo","jive/dispatcher","jquery/jquery.lightbox_me"],function(a,f,g,c,i,d,k,l,b,j,e,h,m){jive.ShareApp.ShareView=jive.oo.Class.extend(function(n){jive.conc.observable(this);this.init=function(){this.recipients=[];this.placeRecipients=[];this.options={}};n.submitShare=function(t,p,r,s){var o=this;var q={message:$j("#jive-send-content-not-message").val(),recipients:o.buildRecipientArray(),subject:$j("#jive-send-content-not-subject").val(),placeRecipients:o.buildPlaceRecipientsArray()};q.message=q.message.replace(/</g,"&lt;").replace(/>/g,"&gt;");o.emitP("share",p,t,q).addCallback(function(){$j(d({objectName:s})).message({style:"success"});r.trigger("close");if(o.recipients.some(function(u){return u.id!==window._jive_current_user.ID})){m.dispatch("trial.share.created");m.dispatch("trial.updatePercentComplete")}if(o.placeRecipients.length>0){f.emit("content.place.relationship.share.added",p,t,o.placeRecipients.length)}if(q.recipients.some(function(u){return u.extendedAuthor})){o.showExtendedAuthorBar(p,t)}o.recipients=[];o.placeRecipients=[]}).addErrback(function(v){var u=v?$j("<p>"+v+"</p>"):$j(c({href:window.location}));u.message({showClose:true,style:"error"});r.find("input, button").prop("disabled",false)})};n.isExtendedAuthor=function(o){return this.options.externallyInviteable&&!o.notified&&!o.partner&&!o.external&&!o.entitled&&!(o.prop.matchType==="email")};n.buildRecipientArray=function(){var o=this;this.checkExternalUsers(this.userPicker.getSelectedUsersAndLists(true));return this.recipients.map(function(p){return{identifier:p.id!=-1?p.id:p.email,notified:p.notified,extendedAuthor:o.isExtendedAuthor.call(o,p)}})};n.buildPlaceRecipientsArray=function(){var o=this.userPicker.getSelectedUsersAndLists();this.placeRecipients=o.containers.filter(function(p){return !p.alreadyLinkedToPlace}).map(function(p){return{objectID:p.id,objectType:p.type}});return this.placeRecipients};n.checkExternalUsers=function(p){$j("#jive-include-attach-div").hide();p.users.forEach(function(q){if(q.id==-1||!q.entitled){$j("#jive-include-attach-div").show()}});this.recipients=this.recipients.filter(function(q){return p.users.some(function(r){return r.email===q.email})});var o=this.addedRecipients(p.users);this.recipients=this.recipients.concat(o)};n.addedRecipients=function(p){var o=this;return p.filter(function(q){return !o.recipients.some(function(r){return q.email===r.email})}).map(function(q){return $j.extend({},{notified:(!o.options.externallyInviteable||!o.options.invitationsEnabled)&&!q.partner&&!q.external},q)})};n.recipient=function(o){return this.recipients.filter(function(p){return p.email===o})};n.notifyUser=function(o,p){this.recipient(o).forEach(function(q){q.notified=p});$j(".js-notify-user").toggle();$j(".js-unnotify-user").toggle()};n.extendedAuthor=function(o,p){this.recipient(o).forEach(function(q){q.extendedAuthor=p})};this.openShareModal=function(r,p,q){var o=this;o.emitP("prepareShare",p,r,q).addCallback(function(v){if(!o.open){o.open=true;if(v.invitationsEnabled){o.options.invitationsEnabled=true}if(v.externallyInviteable){o.options.externallyInviteable=true}if(v.placeSharesEnabled){o.options.placeSharesEnabled=true}o.recipients=[];o.placeRecipients=[];if(v.secretGroup&&!v.externallyInviteable){$j(k()).message({showClose:true,style:"error"})}else{var t=$j(i(v));t.lightbox_me({destroyOnClose:true,centered:true,closeClick:false,closeEsc:false,closeFocusSelector:jive.Accessibility.hasStackedFocus()?jive.Accessibility.popFocus():'a[data-command="share"][data-object-id="'+r+'"][data-object-type="'+p+'"]',onLoad:function(){m.dispatch("trial.share.modal.loaded")},onClose:function(){o.cleanupModal()}});t.find("form").submit(function(w){w.preventDefault();$j(this).find("input,button").prop("disabled",true);o.submitShare(r,p,t,v.objectNameCapital)});var s=new a({multiple:true,listAllowed:true,emailAllowed:v.externallyShareable,placeAllowed:v.placeSharesEnabled,browsePlaceAllowed:v.placeSharesEnabled,containerType:containerType,containerID:containerID,message:"",object:{objectID:r,objectType:p},entitlement:"VIEW",$input:$j("#share-users"),canInvitePartners:v.externallyShareable,canInviteJustPartners:false,canInvitePreprovisioned:true,relatedMessage:$j(l()),userMessages:[o.getUserPermissionsMessage(v)],listMessages:[o.getListPermissionsMessage(v)],placeWarnMessages:[o.getAlreadySharedToPlaceMessage(v)],placeInfoMessages:[o.getShareToPlaceAccessMessage(v)],placeholder:" ",existingRelationshipID:q,includeShareContext:true});s.addListener("selectedUsersChanged",function(w){o.checkExternalUsers(w)});o.userPicker=s;var u=$j("body");u.on("click",".js-notify-user",function(w){o.notifyUser($j(this).data("user-identifier"),true);w.preventDefault()});u.on("click",".js-unnotify-user",function(w){o.notifyUser($j(this).data("user-identifier"),false);w.preventDefault()});u.on("change",":checked",function(w){if($j(w.target).val()=="share"){o.extendedAuthor($j(this).data("user-identifier"),true);o.notifyUser($j(this).data("user-identifier"),false)}else{o.extendedAuthor($j(this).data("user-identifier"),false);o.notifyUser($j(this).data("user-identifier"),true)}})}}}).addErrback(function(t){var s=t?$j("<p>"+t+"</p>"):$j(g({href:window.location}));s.message({showClose:true,style:"error"})})};n.cleanupModal=function(){var o=this;$j(".js-userpicker-user-msg").trigger("close");var p=$j("body");p.undelegate(".js-notify-user","click");p.undelegate(".js-unnotify-user","click");o.open=false};n.getUserPermissionsMessage=function(p){var o=this;return{type:"warn",render:function(q){q.notified=o.recipient(q.email).some(function(s){return s.notified});q.extendedAuthor=o.recipient(q.email).some(function(s){return s.extendedAuthor});var r=$j.extend({user:q},p);return b(r)}}};n.getListPermissionsMessage=function(o){return{type:"warn",render:function(){return j(o)}}};n.getShareToPlaceAccessMessage=function(o){return{type:"info",render:function(p){var q=$j.extend({place:p},o);return h(q)}}};n.getAlreadySharedToPlaceMessage=function(o){return{type:"warn",render:function(p){var q=$j.extend({place:p},o);return e(q)}}};n.showExtendedAuthorBar=function(p,o){if($j(".js-ext-invites").is(":visible")){return}require(["soy!jive.extended_invitation.warn_bar","soy!jive.content.comment.rte_message"],function(t,q){var r=$j(".external-access"),s=r.is(":visible"),u=s?r.children():r;u.fadeOut(function(){r.replaceWith(t({warnVisibleToPartner:s,warnAboutExtendedAuthors:true,canRemoveExtendedAuthors:true,objectType:p,objectId:o}))});$j(".js-rte-message").replaceWith(q({externallyVisible:s,extendedAuthors:true,objectType:p,objectId:o}))})}});return jive.ShareApp.ShareView});
;
jive.namespace("ShareApp");define("apps/share/models/share_source",["apps/shared/models/rest_service"],function(a){jive.ShareApp.ShareSource=a.extend(function(b){this.init=function(){this.suppressGenericErrorMessages()};this.save=function(c,g,e){var f=new jive.conc.Promise(),d=this;$j.ajax({type:"POST",url:jive.rest.url("/objects/")+c+"/"+g+"/shares",dataType:"json",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",success:function(h,j,i){if(h){d.merge(e,h)}f.emitSuccess(e)},error:d.errorCallback(f),timeout:30000});return f};this.get=function(c,f){var e=new jive.conc.Promise(),d=this;$j.ajax({type:"GET",url:jive.rest.url("/objects/")+c+"/"+f+"/sharetemplate",dataType:"json",data:{},contentType:"application/json; charset=utf-8",success:function(g,i,h){e.emitSuccess(g)},error:d.errorCallback(e),timeout:30000});return e}});return jive.ShareApp.ShareSource});
;
jive.namespace("ShareApp");define("apps/share/main",["apps/share/models/share_source","apps/share/views/share_view"],function(b,a){jive.ShareApp.Main=jive.oo.Class.extend(function(){this.init=function(e){var d=e||{};var c=d.source||new b();this.view=new a();this.view.addListener("prepareShare",function(g,i,f,h){c.get(g,i).addCallback(h.emitSuccess.bind(h)).addErrback(h.emitError.bind(h))});this.view.addListener("share",function(f,i,g,h){c.save(f,i,g).addCallback(h.emitSuccess.bind(h).aritize(0)).addErrback(h.emitError.bind(h))})};this.showModal=function(e,d,c){this.view.openShareModal(e,d,c)}});return jive.ShareApp.Main});
;
goog.provide("jive.socialgroups.soy.joinConfirmation");goog.provide("jive.socialgroups.soy.leaveConfirmation");goog.provide("jive.socialgroups.soy.leaveGroup");goog.provide("jive.socialgroups.soy.renderError");goog.require("soy");goog.require("soydata");goog.require("soy.StringBuilder");goog.require("jive.error.rest.soy.errorFinding");
jive.socialgroups.soy.leaveGroup=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-modal jive-modal-medium" id="jive-modal-leave-group"><header>',opt_data.pendingApproval?'<h2 class="jive-modal-title jive-modal-title-leave-group">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3980"),[]))+" "+soy.$$escapeHtml(opt_data.groupName)+"</h2>":'<h2 class="jive-modal-title jive-modal-title-leave-group">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3999"),
[]))+" "+soy.$$escapeHtml(opt_data.groupName)+"</h2>",'</header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200f"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200f"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200e"),[])),'  <span class="j-close-icon  j-ui-elem"></span></a><\!-- Manage categories listing --\><section class="jive-modal-content j-modal-content-text jive-modal-leave-group clearfix">',
opt_data.canLeaveSocialGroup?(opt_data.pendingApproval?"<h3>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3990"),[opt_data.groupName]))+"</h3>"+(opt_data.requiresApproval?"<p>"+soy.$$escapeHtml(opt_data.leaveI18n)+"</p>":""):"<h3>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3991"),[opt_data.groupName]))+"</h3>"+(opt_data.requiresApproval?"<p>"+soy.$$escapeHtml(opt_data.leaveI18n)+"</p>":"")+"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3992"),[]))+"</p>")+'<div class="jive-form-buttons"><button type="button" class="j-btn-callout" id="group-leave-submit">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k398e"),[]))+'</button><button type="button" class="jive-modal-close close">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2003"),[]))+"</button></div>":opt_data.onlyOneOwner?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3995"),[]))+"</p><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3996"),[]))+'</p><div class="jive-form-buttons"><button type="button" class="jive-modal-close close">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2003"),
[]))+"</button></div>":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k398f"),[])),"</section></div>");return opt_sb?"":output.toString()};
jive.socialgroups.soy.joinConfirmation=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.pendingApproval?"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k397c"),[]))+"</div>":opt_data.banned?"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k38b1"),[]))+"</div>":"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3982"),[]))+"</div>");return opt_sb?"":output.toString()};
jive.socialgroups.soy.leaveConfirmation=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.pendingApproval?"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k38b7"),[]))+"</div>":"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3994"),[]))+"</div>");return opt_sb?"":output.toString()};
jive.socialgroups.soy.renderError=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;switch(opt_data.code){case 4026:output.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3986"),[])),"</p>");break;case 4008:output.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a23"),[])),"</p>");break;default:if(opt_data.message)output.append("<p>",soy.$$escapeHtml(opt_data.message),"</p>");else jive.error.rest.soy.errorFinding(opt_data,output)}return opt_sb?
"":output.toString()};
;
goog.provide("jive.socialgroups.soy.joinConfirmation");jive.socialgroups.soy.joinConfirmation=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.pendingApproval?"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k397c"),[]))+"</div>":opt_data.banned?"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k38b1"),[]))+"</div>":"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3982"),[]))+"</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.socialgroups.soy.leaveGroup");
jive.socialgroups.soy.leaveGroup=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-modal jive-modal-medium" id="jive-modal-leave-group"><header>',opt_data.pendingApproval?'<h2 class="jive-modal-title jive-modal-title-leave-group">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3980"),[]))+" "+soy.$$escapeHtml(opt_data.groupName)+"</h2>":'<h2 class="jive-modal-title jive-modal-title-leave-group">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3999"),
[]))+" "+soy.$$escapeHtml(opt_data.groupName)+"</h2>",'</header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200f"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200f"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200e"),[])),'  <span class="j-close-icon  j-ui-elem"></span></a><\!-- Manage categories listing --\><section class="jive-modal-content j-modal-content-text jive-modal-leave-group clearfix">',
opt_data.canLeaveSocialGroup?(opt_data.pendingApproval?"<h3>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3990"),[opt_data.groupName]))+"</h3>"+(opt_data.requiresApproval?"<p>"+soy.$$escapeHtml(opt_data.leaveI18n)+"</p>":""):"<h3>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3991"),[opt_data.groupName]))+"</h3>"+(opt_data.requiresApproval?"<p>"+soy.$$escapeHtml(opt_data.leaveI18n)+"</p>":"")+"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3992"),[]))+"</p>")+'<div class="jive-form-buttons"><button type="button" class="j-btn-callout" id="group-leave-submit">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k398e"),[]))+'</button><button type="button" class="jive-modal-close close">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2003"),[]))+"</button></div>":opt_data.onlyOneOwner?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3995"),[]))+"</p><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3996"),[]))+'</p><div class="jive-form-buttons"><button type="button" class="jive-modal-close close">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2003"),
[]))+"</button></div>":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k398f"),[])),"</section></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.socialgroups.soy.leaveConfirmation");jive.socialgroups.soy.leaveConfirmation=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.pendingApproval?"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k38b7"),[]))+"</div>":"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3994"),[]))+"</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.socialgroups.soy.renderError");
jive.socialgroups.soy.renderError=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;switch(opt_data.code){case 4026:output.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3986"),[])),"</p>");break;case 4008:output.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3a23"),[])),"</p>");break;default:if(opt_data.message)output.append("<p>",soy.$$escapeHtml(opt_data.message),"</p>");else jive.error.rest.soy.errorFinding(opt_data,output)}return opt_sb?
"":output.toString()};
;
jive.namespace("MembershipApp");jive.MembershipApp.MembershipView=jive.oo.Class.extend(function(a){var b="browse",d="landing";jive.conc.observable(this);this.init=function(g,i,f){var e=this;this.joinContainer=g;this.leaveContainer=i;this.options=f||{};var h="objectID" in f?d:b;this.isPage=function(j){return h===j};$j(document).ready(function(){if(e.isPage(d)){$j(document).delegate(e.joinContainer,"click",function(j){e.joinGroup($j(this));j.preventDefault()});$j(document).delegate(e.leaveContainer,"click",function(j){e.displayLeaveGroupModal($j(this));j.preventDefault()})}else{$j("body").on("click",".sgroup-join, .sgroup-leave",function(k){k.preventDefault();var j=$j(this);if(j.is(".sgroup-join")){e.joinGroup(j)}else{e.displayLeaveGroupModal(j)}})}})};this.joinGroup=function(f){var e=this;var g=e.determineObjectID(f);e.emitP("join",g).addCallback(function(h){var i=$j.noop;if(e.isPage(d)){if(!h.banned){$j(e.leaveContainer).show();$j(e.joinContainer).hide()}i=function(){if(window.location.href.match(/\?(.*&)?qstep=(\d+)/)&&h.memberToContribute){window.location=c(1)}else{if(e.options.redirectOnJoin){window.location=e.options.redirectOnJoin}else{window.location.reload()}}}}else{$j(f).closest(".j-thumb-back, .j-td-follow-action").find("a.sgroup-leave").show();$j(f).hide()}e.displayMessage(jive.socialgroups.soy.joinConfirmation(h),i);$j("#jive-link-socialgroup-startFollowing").hide();$j("#jive-link-socialgroup-following").show()}).addErrback(function(i,h){console.log("got error message: "+i+" code: "+h);e.displayError(i,h)})};this.displayLeaveGroupModal=function(f){var e=this;var g=e.determineObjectID(f);e.emitP("prepareLeave",g).addCallback(function(j){var h=$j(jive.socialgroups.soy.leaveGroup(j));$j("body").append(h);var i=$j("body").find("#jive-modal-leave-group");i.lightbox_me({closeSelector:".jive-modal-close, .close",destroyOnClose:true});i.find("#group-leave-submit").click(function(){e.leaveGroup(f,j);i.trigger("close")})}).addErrback(function(i,h){e.displayError(i,h)})};this.leaveGroup=function(f,g){var e=this;var h=e.determineObjectID(f);e.emitP("leave",h).addCallback(function(){var i=$j.noop;if(e.isPage(d)){$j(e.joinContainer).show();$j(e.leaveContainer).hide();$j("#jive-link-socialgroup-following").hide();$j("#jive-link-socialgroup-startFollowing").show();i=function(){if(!g.visibleAfterLeaving){window.location=jive.app.url({path:"/groups"})}else{if(g.memberToContribute){window.location=c(-1)}}}}else{$j(f).closest(".j-thumb-back, .j-td-follow-action").find("a.sgroup-join").show();$j(f).hide()}e.displayMessage(jive.socialgroups.soy.leaveConfirmation(g),i)}).addErrback(function(j,i){e.displayError(j,i)})};this.displayMessage=function(e,f){$j("<p />").html(e).message({style:"success",dismissCallback:f||$j.noop})};this.displayError=function(g,f){var e=jive.socialgroups.soy.renderError({message:g,code:f,href:window.location.href});$j(e).message({style:"error",showClose:true})};this.determineObjectID=function(e){var f=this.options.objectID||e.attr("data-objectid")||0;return parseInt(f,10)};function c(e){return window.location.href.replace(/\?(.*&)?qstep=(\d+)/,function(h,f,i){var g=parseInt(i)+e;return"?"+f+"qstep="+g})}this.tearDown=function(){var e=this;if(e.isPage(d)){$j(e.joinContainer).off("click");$j(e.leaveContainer).off("click")}else{$j(".sgroup-join").off("click");$j(".sgroup-leave").off("click")}}});define("apps/socialgroup/membership/views/membership_view",function(){return jive.MembershipApp.MembershipView});
;
jive.namespace("MembershipApp");define("apps/socialgroup/membership/models/membership_source",["apps/shared/models/rest_service"],function(a){jive.MembershipApp.MembershipSource=a.extend(function(b){b.resourceType="socialgroup";this.save=function(e){var f=new jive.conc.Promise(),d=this;var c=$j.deparam.querystring().fromQ;$j.ajax({type:"POST",url:this.RESOURCE_ENDPOINT+"/"+e.objectID+"/members",dataType:"json",data:c,contentType:"application/json; charset=utf-8",success:function(g,i,h){f.emitSuccess(g)},error:function(i,k,j){try{var h=$j.parseJSON(i.responseText);if(h&&h.error&&h.error.message){f.emitError(h.error.message,h.error.code)}}catch(g){f.emitError(null,i&&i.status)}}});return f};this.get=function(e){var f=new jive.conc.Promise(),d=this;var c={};c[this.resourceType]=e;$j.ajax({type:"GET",url:this.RESOURCE_ENDPOINT+"/"+e.objectID+"/memberInfo",dataType:"json",success:function(g,i,h){f.emitSuccess(g)},error:function(i,k,j){try{var h=$j.parseJSON(i.responseText);if(h&&h.error&&h.error.message){f.emitError(h.error.message,h.error.code)}}catch(g){f.emitError(null,i&&i.status)}}});return f};this.destroy=function(c){var d=new jive.conc.Promise();$j.ajax({type:"DELETE",url:this.RESOURCE_ENDPOINT+"/"+c.objectID+"/members",success:function(){d.emitSuccess()},error:function(g){try{var f=$j.parseJSON(g.responseText);if(f&&f.error&&f.error.message){d.emitError(f.error.message,f.error.code)}}catch(e){d.emitError(null,g&&g.status)}}});return d}});return jive.MembershipApp.MembershipSource});
;
jive.namespace("MembershipApp");define("apps/socialgroup/membership/main",function(){jive.MembershipApp.Main=jive.oo.Class.extend(function(a){this.init=function(c){var b=this;this.membershipSource=new jive.MembershipApp.MembershipSource(c);this.membershipView=new jive.MembershipApp.MembershipView("#jive-link-joinSocialGroup,.jive-link-joinSocialGroup","#jive-link-leaveSocialGroup,.jive-link-leaveSocialGroup",c);this.membershipView.addListener("join",function(e,d){b.membershipSource.save({objectID:e}).addCallback(function(f){d.emitSuccess(f);jive.switchboard.emit("sgroup.member.join",f)}).addErrback(function(g,f){console.log("got a err in main.js");d.emitError(g,f)})}).addListener("leave",function(e,d){b.membershipSource.destroy({objectID:e}).addCallback(function(){jive.switchboard.emit("sgroup.member.leave",e);d.emitSuccess()}).addErrback(function(g,f){console.log("got a err in main.js");d.emitError(g,f)})}).addListener("prepareLeave",function(e,d){b.membershipSource.get({objectID:e}).addCallback(function(f){d.emitSuccess(f)}).addErrback(function(g,f){console.log("got a err in main.js");d.emitError(g,f)})})};this.tearDown=function(){this.membershipView.removeListener("join").removeListener("leave").removeListener("prepareLeave").tearDown()}});return jive.MembershipApp.Main});
;
goog.provide("jive.soy.email_notification.common");jive.soy.email_notification.common=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href="#" rel="nofollow"><span class="jive-icon-glyph icon-envelope"></span>',soy.$$escapeHtml(opt_data.message),"</a>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.email_notification.commonInSocialButton");jive.soy.email_notification.commonInSocialButton=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href="#" class="j-social-button j-rc5 j-button-toggle-email-notifications j-ui-elem"><span class="j-ui-elem"><span class="jive-icon-glyph icon-envelope"></span>',soy.$$escapeHtml(opt_data.message),"</span></a>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.email_notification.stop");jive.soy.email_notification.stop=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;switch(opt_data.type){case "common":jive.soy.email_notification.common({message:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3f83"),[]))},output);break;case "socialButton":jive.soy.email_notification.commonInSocialButton({message:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3f83"),[]))},output);break}return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.email_notification.start");jive.soy.email_notification.start=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;switch(opt_data.type){case "common":jive.soy.email_notification.common({message:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3f80"),[]))},output);break;case "socialButton":jive.soy.email_notification.commonInSocialButton({message:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3f80"),[]))},output);break}return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.email_notification.message");
jive.soy.email_notification.message=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;switch(opt_data.type){case "watch":output.append(opt_data.isUser?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k21a9"),[]))+"</p>":"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k21a7"),[]))+"</p>");break;case "unwatch":output.append(opt_data.isUser?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k21aa"),[]))+"</p>":"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k21a8"),
[]))+"</p>");break}return opt_sb?"":output.toString()};
;
jive.namespace("EmailNotification");define("apps/email_notification/model/source",["apps/shared/models/rest_service"],function(a){jive.EmailNotification.Source=a.extend(function(b){b.resourceType="emailwatches";b.pluralizedResourceType=b.resourceType;b.resourceType="emailwatches";this.watch=function(e,c){var d=this.RESOURCE_ENDPOINT+"/watch/"+c+"/"+e;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:d})};this.unwatch=function(e,c){var d=this.RESOURCE_ENDPOINT+"/unwatch/"+c+"/"+e;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:d})}});return jive.EmailNotification.Source});
;
jive.namespace("EmailNotification");jive.EmailNotification.Main=function(e,d,b){var a=new jive.EmailNotification.Source(),c={watch:{newId:"jive-link-thread-unwatch",save:a.watch.bind(a),view:jive.soy.email_notification.stop},unwatch:{newId:"jive-link-thread-watch",save:a.unwatch.bind(a),view:jive.soy.email_notification.start}};$j("#jive-link-thread-watch, #jive-link-thread-unwatch").delegate("a","click",function(g){g.preventDefault();var h=$j(this).closest("#jive-link-thread-watch, #jive-link-thread-unwatch"),f=h.attr("id").split("-").pop();c[f].save(e,d).addCallback(function(){h.attr("id",c[f].newId).html(c[f].view({type:h.attr("data-type")||"common"}));$j(jive.soy.email_notification.message({type:f,isUser:!!b})).message({style:"success"})})})};define("apps/email_notification/main",function(){return jive.EmailNotification.Main});
;
goog.provide("jive.trial.quests.fewerMeetings.tips");
jive.trial.quests.fewerMeetings.tips=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.pageID=="create-discussion"?opt_data.renderLocation=="subject"?'<div class="j-tips inline js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="subject" style="top: -70px;"><div class="d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4302"),[]))+'</h4><p class="font-color-meta">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4303"),[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 80px"></span></div>':opt_data.renderLocation=="body"?'<div class="j-tips inline js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="body" style="top: 120px;"><div class="d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k42fa"),[]))+'</h4><p class="font-color-meta">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k42fb"),[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 80px"></span></div>':opt_data.renderLocation=="publishbar"?'<div class="j-tips inline p-bar js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="publishbar" style="bottom: -30px;"><div class="d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k42fc"),[opt_data.communityName]))+
'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k42fd"),[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="bottom: 35px"></span></div>':opt_data.renderLocation=="post"?'<div class="j-tips inline p-bar js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="post" style="top: -35px;"><div class="d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k42f8"),
[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k42f9"),[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 40px"></span></div>':"":opt_data.pageID=="view-discussion"?opt_data.renderLocation=="share"?'<div class="j-pop js-pop popover js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="share" style="top: 15px; left: -360px; z-index: 100;"><div class="j-tips d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip j-pop-main"><h4 class="font-face-deco">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4300"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4301"),[]))+'</p></div><span class="leftArrow pointer" style="right: -9px; top: 40px;"></span></div>':opt_data.renderLocation=="outcome"?'<div class="j-pop js-pop popover js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="outcome" style="top: 185px; left: -0px; z-index: 100;"><div class="j-tips d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip j-pop-main"><h4 class="font-face-deco">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k42fe"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k42ff"),[]))+'</p></div><span class="belowArrow pointer" style="left: 30px; top: -9px;"></span></div>':opt_data.renderLocation=="share.modal.users"?'<div class="j-tips mtip js-trial-tip" style="position: absolute; top: -205px; left: -155px; visibility: visible; z-index: 100;"><div class="d-tip"><h4 class="font-face-deco font-color-white">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4307"),
[]))+'</h4></div><span class="j-arrow-righthook white j-qarrow" style="left: 60px; bottom: -75px;"></span></div>':opt_data.renderLocation=="share.modal.message"?'<div class="j-tips mtip js-trial-tip" style="position: absolute; top: 50px; width: 135px; left: -235px; visibility: visible; z-index: 100;"><div class="d-tip"><h4 class="font-face-deco font-color-white">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4308"),[]))+'</h4></div><span class="j-arrow-rightess white j-qarrow" style="right: -35px; top: 0"></span></div>':
opt_data.renderLocation=="share.modal.submit"?'<div class="j-tips mtip js-trial-tip" style="position: absolute; top: 270px; width: 240px; left: -55px; visibility: visible; z-index: 100;"><div class="d-tip"><h4 class="font-face-deco font-color-white">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4306"),[]))+'</h4></div><span class="j-arrow-up white j-qarrow" style="left: 77px; top: -30px"></span></div>':opt_data.renderLocation=="answer"?'<div class="j-pop js-pop popover js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="answer" style="position: absolute; top: 30px; left: 320px; visibility: visible; z-index: 100;"><div class="j-tips d-'+
soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip j-pop-main wide"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k42f5"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k42f6"),[]))+'</p><p><span class="j-correct-btn-star j-ui-elem"></span><strong class="font-color-okay">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k42f7"),[]))+'</strong></p></div><span class="rightArrow pointer" style="left: -9px; top: 63px;"></span></div>':
opt_data.renderLocation=="banner"?'<div class="j-pop js-pop popover js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="banner" style="position: absolute; top: 50px; left: 50%; margin-left: -180px; visibility: visible; z-index: 100;"><div class="j-tips d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip j-pop-main"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4309"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k430a"),
[]))+"</p>"+(opt_data.nextQuestID?'<p><strong><a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,"/get-started",{"showQ":opt_data.nextQuestID})))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k430b"),[]))+"</a></strong></p>":'<p><strong><a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,"/home")))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k430c"),[]))+"</a></strong></p>")+
'</div><span class="belowArrow pointer" style="left: 170px; top: -9px;"></span></div>':"":"");return opt_sb?"":output.toString()};
;
goog.provide("jive.trial.quests.lessEmail.tips");
jive.trial.quests.lessEmail.tips=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.pageID=="create-document"?opt_data.renderLocation=="subject"?'<div class="j-tips inline js-trial-tip" data-fromq="LessEmailQuest" data-location="subject" style="top: -5px; visibility: visible; z-index: 100;"><div class="d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k432a"),[]))+
'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k432b"),[]))+'</em></p></div><span class="j-tiparrow-e j-tarrow" style="top: 20px"></span></div>':opt_data.renderLocation=="body"?'<div class="j-tips inline js-trial-tip" data-fromq="LessEmailQuest" data-location="body" style="top: 120px;"><div class="d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4322"),[]))+'</h4><p class="font-color-meta">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4323"),[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 20px"></span></div>':opt_data.renderLocation=="publishbar"?'<div class="j-tips inline p-bar js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="publishbar" style="top: 37px;"><div class="d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4326"),[]))+'</h4><p class="font-color-meta">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4328"),[]))+'</p><p class="font-color-j-highlight"><em>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4329"),[]))+'</em></p></div><span class="j-tiparrow-e j-tarrow" style="top: 50px"></span></div>':opt_data.renderLocation=="post"?'<div class="j-tips inline p-bar js-trial-tip" data-fromq="LessEmailQuest" data-location="post" style="top: -9px;"><div class="d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4320"),[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4321"),[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 20px"></span></div>':"":opt_data.pageID=="view-document"?opt_data.renderLocation=="edit"?'<div class="js-pop j-tips j-pop-main js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="edit" style="left: -220px; top: -9px; visibility: visible; z-index: 100;"><div class="d-'+
soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4324"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4325"),[]))+'</p></div><span class="leftArrow pointer" style="right: -9px; top: 40px;"></span></div>':opt_data.renderLocation=="collaborators"?'<div class="j-pop js-pop popover font-color-normal js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="collaborators" style="position: absolute; top: 25px; left: 270px; visibility: visible; z-index: 100;"><div class="j-tips d-'+
soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip j-pop-main"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4330"),[]))+'</h4><p class="j-qtip-msg">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4331"),[]))+"</p>"+(opt_data.nextQuestID?'<p><a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,"/get-started",{"showQ":opt_data.nextQuestID})))+'"><strong class="font-color-link">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4332"),
[]))+"</strong></a></p>":'<p><a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,"/home")))+'"><strong class="font-color-link">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4333"),[]))+"</strong></a></p>")+'</div><span class="rightArrow pointer" style="left: -9px; top: 60px;"></span></div>':"":opt_data.pageID=="edit-document"?opt_data.renderLocation=="publishbar"?'<div class="j-tips inline p-bar js-trial-tip" data-fromq="LessEmailQuest" data-location="publishbar" style="top: 37px;"><div class="d-'+
soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4327"),[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4328"),[]))+'</p><p class="font-color-j-highlight"><em>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4329"),[]))+'</em></p></div><span class="j-tiparrow-e j-tarrow" style="top: 50px"></span></div>':opt_data.renderLocation=="skip-down"?'<div class="j-tips inline js-pop js-trial-tip" data-fromq="LessEmailQuest" data-location="skip-down" style="top: 65px; left: -220px;"><h4 class="font-face-deco">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k432e"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k432f"),[]))+'</p><span class="j-arrow-skipdown" style="left: -200px; top: 40px;"></span></div>':opt_data.renderLocation=="publishbar-preselect"?'<div class="j-tips inline p-bar js-pop js-trial-tip" data-fromq="LessEmailQuest" data-location="publishbar-preselect" style="bottom: 0;"><div class="d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4326"),[]))+'</h4></div><span class="j-tiparrow-e j-tarrow" style="top: 40px"></span></div>':"":"");return opt_sb?"":output.toString()};
;
goog.provide("jive.trial.quests.stayInTouch.tips");
jive.trial.quests.stayInTouch.tips=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.pageID=="all-activity")if(opt_data.renderLocation=="mb_body")output.append('<div class="j-pop js-pop popover q-statusupdate js-trial-tip" data-fromq="StayInTouchQuest" data-location="mb_body" style="position: absolute; top: 70px; left: -125px; visibility: visible; z-index: 100;"><div class="j-tips d-',soy.$$escapeHtml(opt_data.renderLocation),'-tip j-pop-main"><h4 class="font-face-deco">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4351"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4352"),[])),'</p></div><span class="belowArrow pointer" style="top: -9px; left: 200px;"></span></div>');else if(opt_data.renderLocation=="at_mention_btn"){output.append('<div class="j-pop js-pop popover q-statusupdate js-trial-tip" data-fromq="StayInTouchQuest" data-location="at_mention_btn" style="position: absolute; top: 135px; right: -160px; visibility: visible; z-index: 100;"><div class="j-tips wide d-',
soy.$$escapeHtml(opt_data.renderLocation),'-tip j-pop-main"><h4 class="font-face-deco">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4354"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4355"),[])),"</p><p><em>");jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k4356"),arg0:'<span class="jive-icon-med jive-icon-mention j-quest-mention">@</span>',noAutoEscape:true},output);output.append("</em></p><p><strong>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4357"),
[])),'</strong></p></div><span class="belowArrow pointer" style="right: 165px; top: -10px"></span></div>')}else if(opt_data.renderLocation=="banner_post_mb")output.append('<div class="j-pop js-pop popover js-trial-tip" data-fromq="StayInTouchQuest" data-location="banner" style="position: absolute; top: 50px; left: 50%; margin-left: -180px; visibility: visible; z-index: 100;"><div class="j-tips j-banner-tip d-',soy.$$escapeHtml(opt_data.renderLocation),'-tip j-pop-main"><h4 class="font-face-deco">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4353"),[])),'</h4><p><button class="js-back-to-onb j-btn-callout close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20fc"),[])),'</button></p></div><span class="belowArrow pointer" style="left: 170px; top: -10px;"></span></div>');else if(opt_data.renderLocation=="stream_header"){output.append('<div class="j-pop js-pop popover j-qtip js-trial-tip" data-fromq="StayInTouchQuest" data-location="answer" style="position: fixed; top: 50px; left: 50%; margin-left: -250px; visibility: visible; z-index: 100;"><div class="j-tips wide d-',
soy.$$escapeHtml(opt_data.renderLocation),'-tip j-pop-main"><h4 class="j-qtip-header font-face-deco">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k434c"),[])),"</h4><p>");jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k434d"),arg0:'<span style="background: #e28044; color: #fff; font-weight: bold; -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; padding: 2px 5px; margin: -2px;">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20c7"),[]))+"</span>",
noAutoEscape:true},output);output.append("</p><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k434e"),[])),"</p></div></div>")}else if(opt_data.renderLocation=="banner_post_like")output.append('<div class="j-pop js-pop popover j-qtip js-trial-tip" data-fromq="StayInTouchQuest" data-location="banner" style="position: absolute; top: 50px; left: 50%; margin-left: -180px; visibility: visible; z-index: 100;"><div class="j-tips d-',soy.$$escapeHtml(opt_data.renderLocation),'-tip j-pop-main"><h4 class="font-face-deco">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k434f"),[])),'</h4><p><button class="js-back-to-onb j-btn-callout close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20fc"),[])),'</button></p></div><span class="belowArrow pointer" style="left: 170px; top: -10px;"></span></div>');return opt_sb?"":output.toString()};
;
goog.provide("jive.trial.quests.communityFeedback.tips");
jive.trial.quests.communityFeedback.tips=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.pageID=="create-discussion"?opt_data.renderLocation=="body"?'<div class="j-tips inline js-trial-tip" data-fromq="CommunityFeedbackQuest" data-location="body" style="position: absolute; top: 60px; visibility: visible; z-index: 100;"><div class="d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip"><h4 class="j-qtip-header font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k435a"),
[]))+'</h4><p class="j-qtip-body font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k435b"),[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 25px"></span></div>':"":"");return opt_sb?"":output.toString()};
;
goog.provide("jive.trial.quests.teamwork.tips");
jive.trial.quests.teamwork.tips=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.pageID=="create-group")output.append(opt_data.renderLocation=="group-type"?'<div class="j-tips inline p-bar js-trial-tip" style="top: -30px; visibility: visible; z-index: 100;" data-fromq="WorkBetterAsATeamQuest" ><div class="d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k27eb"),[]))+'</h4><p class="font-color-meta">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k27ec"),[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 50px"></span></div>':"");else if(opt_data.pageID=="places")if(opt_data.renderLocation=="banner")output.append('<div class="j-pop js-pop popover js-trial-tip" style="position: absolute; top: 50px; left: 50%; margin-left: -250px; visibility: visible; z-index: 100;"><div class="j-tips j-pop-main wide"><h4 class="font-face-deco">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k439a"),
[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k439b"),[])),'</p><p class="j-qlinks"><strong><a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,"/get-started",{"showQ":"WorkBetterAsATeamQuest"}))),'" id="quest-complete-continue">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4382"),[])),'</a></strong></p><p><strong><a id="quest-complete-close" href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k43a0"),
[])),"</a></strong></p></div></div>");else{output.append('<div id="js-teamwork-join-tip" class="j-pop js-pop popover js-trial-tip" data-fromq="WorkBetterAsATeamQuest" data-location="upload-link" style="position: absolute; top: 75px; right: 50px; visibility: visible; z-index: 100;"><div class="j-tips d-',soy.$$escapeHtmlAttribute(opt_data.renderLocation),'-tip j-pop-main wide"><h4 class="font-face-deco">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k438e"),[])),'</h4><p class="font-color-meta">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k438f"),[])),"</p><p><strong>");jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k4390"),arg0:'<a href="#" id="js-teamwork-create-group-link">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4383"),[]))+"</a>",noAutoEscape:true},output);output.append("</strong></p></div></div>")}else if(opt_data.pageID=="place")output.append(opt_data.renderLocation=="banner"?'<div class="j-pop js-pop popover js-trial-tip" style="position: absolute; top: 50px; left: 50%; margin-left: -250px; visibility: visible; z-index: 100;"><div class="j-tips j-pop-main wide"><h4 class="font-face-deco">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4378"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4379"),[]))+'</p><p class="j-qlinks"><strong><a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,"/get-started",{"showQ":"WorkBetterAsATeamQuest"})))+'" id="quest-complete-continue">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4382"),[]))+'</a></strong></p><p><strong><a id="quest-complete-close" href="#">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k43a0"),[]))+"</a></strong></p></div></div>":opt_data.renderLocation=="join-link"?opt_data["private"]?'<div id="js-teamwork-join-tip" class="j-pop js-pop popover js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="join-link" style="position: absolute; top: -28px; '+(opt_data["private"]=="ask-to-join"?" left: 530px; ":" left: 490px; ")+' visibility: visible; z-index: 100;"><div class="j-tips d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+
'-tip j-pop-main"><h4 class="font-face-deco">'+(opt_data["private"]=="ask-to-join"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k437c"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k439c"),[])))+"</h4>"+(opt_data["private"]=="ask-to-join"?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k437d"),[]))+"</p>":"")+'</div><span class="rightArrow pointer" style="left: -9px; top: 33px;"></span></div>':'<div id="js-teamwork-join-tip" class="j-pop js-pop popover js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="join-link" style="position: absolute; top: -25px; right: 120px; visibility: visible; z-index: 100;"><div class="j-tips d-'+
soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip j-pop-main"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k439c"),[]))+'</h4></div><span class="leftArrow pointer" style="right: -9px; top: 33px;"></span></div>':opt_data.renderLocation=="actions-link"?'<div class="j-pop js-pop j-qtip popover js-trial-tip" style="position: absolute; top: 48px; left: -130px; visibility: visible; z-index: 100;"><div class="j-tips d-actions-button-tip j-pop-main"><h4 class="font-face-deco">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4374"),[]))+'</h4></div><span class="leftArrow pointer" style="top: 50px;"></span></div>':opt_data.renderLocation=="upload-link"?'<div class="j-pop js-pop j-qtip popover js-trial-tip" style="position: absolute; top: 50px; left: 200px; visibility: visible; z-index: 100;"><div class="j-tips j-pop-main"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4386"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4387"),
[]))+'</p></div><span class="belowArrow pointer" style="left: 168px;"></span></div>':opt_data.renderLocation=="invite-link"?'<div class="j-pop-main j-tips" style="width: 338px"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4399"),[]))+"</h4></div>":opt_data.renderLocation=="invite.modal.users"?'<div class="j-tips mtip js-trial-tip" style="position: absolute; top: -145px; left: -220px; width: 185px; visibility: visible; z-index: 100;"><div class="d-tip"><h4 class="font-face-deco font-color-white">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4397"),[]))+'</h4></div><span class="j-arrow-righthook white j-qarrow" style="left: 115px; bottom: -65px;"></span></div>':opt_data.renderLocation=="invite.modal.message"?'<div class="j-tips mtip js-trial-tip" style="position: absolute; top: 65px; width: 135px; left: -225px; visibility: visible; z-index: 100;"><div class="d-tip"><h4 class="font-face-deco font-color-white">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4398"),[]))+'</h4></div><span class="j-arrow-rightess white j-qarrow" style="right: -25px; top: -20px"></span></div>':
opt_data.renderLocation=="invite.modal.submit"?'<div class="j-tips mtip js-trial-tip" style="position: absolute; top: 270px; width: 240px; left: -55px; visibility: visible; z-index: 100;"><div class="d-tip"><h4 class="font-face-deco font-color-white">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4396"),[]))+'</h4></div><span class="j-arrow-up white j-qarrow" style="left: 80px; top: -25px"></span></div>':"");else if(opt_data.pageID=="upload")output.append(opt_data.renderLocation=="choose-file"?
'<div class="j-tips inline p-bar js-trial-tip" data-fromq="WorkBetterAsATeamQuest" data-location="upload" style="top: 80px;"><div class="d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4388"),[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4389"),[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 25px"></span></div>':opt_data.renderLocation==
"choose-place"?'<div class="j-tips p-bar inline js-trial-tip" data-fromq="WorkBetterAsATeamQuest" data-location="upload" style="top: 0;"><div class="d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k438a"),[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k438b"),[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 25px"></span></div>':opt_data.renderLocation==
"submit"?'<div class="j-tips inline p-bar js-trial-tip" data-fromq="WorkBetterAsATeamQuest" data-location="upload" style="top: -20px;"><div class="d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k438c"),[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k438d"),[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 25px"></span></div>':"");else if(opt_data.pageID==
"view-document")output.append(opt_data.renderLocation=="banner"?'<div class="j-pop js-pop popover js-trial-tip" data-fromq="WorkBetterAsATeamQuest" data-location="banner" style="position: absolute; top: 50px; left: 50%; margin-left: -250px; visibility: visible; z-index: 100;"><div class="j-tips d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip j-pop-main wide"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k439d"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k439e"),
[]))+'</p><p class="j-qlinks"><a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,"/get-started",{"showQ":"WorkBetterAsATeamQuest"})))+'" id="post-upload-tip-continue"><strong>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4382"),[]))+'</strong></a></p><p><a id="post-upload-tip-close" href="#"><strong>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k43a0"),[]))+"</strong></a></p></div></div>":opt_data.renderLocation=="edit"?
'<div class="j-tips js-pop j-pop-main js-trial-tip" data-fromq="WorkBetterAsATeamQuest" data-location="edit"><div class="d-'+soy.$$escapeHtmlAttribute(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4384"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4385"),[]))+'</p></div><span class="leftArrow pointer" style="right: -9px; top: 40px;"></span></div>':"");return opt_sb?"":output.toString()};
;
define("apps/trial/views/trial_tip_helper",["jquery","jive/dispatcher"],function(b,a){return jive.AbstractView.extend(function(c){this.init=function(d){var h=this,f=$j.deparam.querystring(),e=f.fromQ,g=f.qstep||0;h.communityName=d.communityName;if(e=="WorkBetterAsATeamQuest"||e=="HaveFewerMeetingsQuest"||e=="LessEmailQuest"||e=="StayInTouchQuest"||e=="CommunityFeedbackQuest"){h.setupPage(e,g)}};this.setupPage=function(d,f){var e=this;e.emitP("shouldSetupPage",d,f).addCallback(function(g){if(g||(d=="LessEmailQuest"&&f==1)||(d=="WorkBetterAsATeamQuest"&&f==0)){if(!g){e.setupPage(d,parseInt(f,10)+1)}else{if(d=="HaveFewerMeetingsQuest"){if(f==0){e.fewerMeetingsStep0(d,f)}else{if(f==1){e.fewerMeetingsStep1(d)}else{if(f==2){e.fewerMeetingsStep2(d)}}}}else{if(d=="LessEmailQuest"){if(f==0){e.lessEmailStep0(d,f)}else{if(f==1&&g){e.lessEmailStep1(d,f)}else{if((f==1&&!g)||f==2){e.lessEmailStep2()}}}}else{if(d=="StayInTouchQuest"){if(f==0){e.stayInTouchStep0(d)}else{if(f==1){e.stayInTouchStep1(d)}}}else{if(d=="CommunityFeedbackQuest"){e.communityFeedbackTips(d)}else{if(d=="WorkBetterAsATeamQuest"){if(f==1){e.uploadDocumentTips(d,f)}else{if(f==2){e.inviteTips(d,f)}}}}}}}}}})};this.fewerMeetingsStep0=function(e,g){var f=this;if($j("#jive-compose-title").length){var h="create-discussion";$j("body").addClass("j-quest-active");var d=$j("#create-discussion");d.append('<input type="hidden" name="fromQuest" value="'+e+'" />');d.append('<input type="hidden" name="qstep" value="'+g+'" />');d.append('<input type="hidden" name="markAsQuestion" value="true" />');$j("#jive-compose-title").prepend($j(jive.trial.quests.fewerMeetings.tips({pageID:h,renderLocation:"subject"})));$j("div.jive-editor-panel").prepend($j(jive.trial.quests.fewerMeetings.tips({pageID:h,renderLocation:"body"})));$j("#js-all").before($j(jive.trial.quests.fewerMeetings.tips({pageID:h,renderLocation:"publishbar",communityName:f.communityName})));$j("#submitButton").before($j(jive.trial.quests.fewerMeetings.tips({pageID:h,renderLocation:"post"})));$j("#js-all").click();if($j.browser.msie&&$j.browser.version<9){$j("#js-all").change()}}};this.fewerMeetingsStep1=function(d){var e=this;if($j("ul.j-social-actions").length){var f="view-discussion";$j("ul.j-social-actions").before($j(jive.trial.quests.fewerMeetings.tips({pageID:f,renderLocation:"share"})));$j("#jive-replies div.j-thread-post footer").first().before($j(jive.trial.quests.fewerMeetings.tips({pageID:"view-discussion",renderLocation:"outcome"})));a.listen("trial.share.modal.loaded",function(){$j("div.js_lb_overlay").addClass("j-quest-active");$j("#share-users").before($j(jive.trial.quests.fewerMeetings.tips({pageID:f,renderLocation:"share.modal.users"})));$j("#jive-send-content-not-message").before($j(jive.trial.quests.fewerMeetings.tips({pageID:f,renderLocation:"share.modal.message"})));$j("#jive-send-content-not-message").after($j(jive.trial.quests.fewerMeetings.tips({pageID:f,renderLocation:"share.modal.submit"})))});a.listen("trial.share.created",function(){e.closeTip(d);e.emit("clearActiveQuest");e.emitP("getAllQuestProgressData").addCallback(function(k){var g="";for(var j=0,h=k.quests.length;j<h;j++){if(k.quests[j].stepsComplete==0){g=k.quests[j].name+"";break}}var l=$j(jive.trial.quests.fewerMeetings.tips({pageID:f,renderLocation:"banner",nextQuestID:g}));$j("body").prepend(l);$j("body").on("click.afterTip",function(i){if(!$j(i.target).parents(".js-trial-tip").length){$j("div.js-trial-tip").remove();$j("body").off("click.afterTip")}})})})}};this.fewerMeetingsStep2=function(){if($j("div.jive-thread-reply-btn-correct").length){var d="view-discussion";$j("div.jive-thread-reply-btn-correct").first().after($j(jive.trial.quests.fewerMeetings.tips({pageID:d,renderLocation:"answer"})))}};this.lessEmailStep0=function(e,f){if($j("#create-document").length){var h="create-document",g=$j("#create-document");g.append('<input type="hidden" name="fromQuest" value="'+e+'" />');g.append('<input type="hidden" name="qstep" value="'+f+'" />');$j("body").addClass("j-quest-active");var d=$j("#js-people");$j("#jive-compose-title").prepend($j(jive.trial.quests.lessEmail.tips({pageID:h,renderLocation:"subject"})));$j("div.jive-editor-panel").prepend($j(jive.trial.quests.lessEmail.tips({pageID:h,renderLocation:"body"})));d.before($j(jive.trial.quests.lessEmail.tips({pageID:h,renderLocation:"publishbar"})));$j("#submitButton").before($j(jive.trial.quests.lessEmail.tips({pageID:h,renderLocation:"post"})))}};this.lessEmailStep1=function(f,g){if($j("#jive-link-edit2 a").length){var j="view-document";var e=$j("#jive-link-edit2 a");e.attr("href",e.attr("href")+"&fromQ="+f+"&qstep="+g);var i=$j(jive.trial.quests.lessEmail.tips({pageID:j,renderLocation:"edit"}));$j(i).popover({context:e,position:"left",darkPopover:true,destroyOnClose:false,putBack:true,addClass:"j-qtip",closeOnClick:false,nudge:{left:-25},arrowOffset:0})}else{if($j("#edit-document").length){j="edit-document";$j("body").addClass("j-quest-active");var d=$j("#js-people"),h=$j(jive.trial.quests.lessEmail.tips({pageID:j,renderLocation:"skip-down"})),k=$j(jive.trial.quests.lessEmail.tips({pageID:j,renderLocation:"publishbar-preselect"}));$j("#edit-document").prepend(h);d.before(k);d.change(function(){h.remove();k.remove();d.before($j(jive.trial.quests.lessEmail.tips({pageID:j,renderLocation:"publishbar"})));$j("#submitButton").before($j(jive.trial.quests.lessEmail.tips({pageID:"create-document",renderLocation:"post"})))})}}};this.lessEmailStep2=function(){var e=this;if($j("#jive-body-main header span.jive-shared-list").length){var f="view-document";var d=$j("#jive-body-main header span.jive-shared-list");e.emitP("getAllQuestProgressData").addCallback(function(k){var g="";for(var j=0,h=k.quests.length;j<h;j++){if(k.quests[j].stepsComplete==0){g=k.quests[j].name+"";break}}var l=$j(jive.trial.quests.lessEmail.tips({pageID:f,renderLocation:"collaborators",nextQuestID:g}));d.append(l);$j("body").on("click.afterTip",function(i){if(!$j(i.target).parents(".js-trial-tip").length){$j("div.js-trial-tip").remove();$j("body").off("click.afterTip")}})})}};this.stayInTouchStep0=function(e){var d=this;require(["apps/microblogging/status_input_mb_controller"],function(f){var h=f.getMicrobloggingView();if(h){var k="all-activity";f.addListener("submitSuccess",function(){d.closeTip(e);a.dispatch("trial.updatePercentComplete");$j("body").prepend($j(jive.trial.quests.stayInTouch.tips({pageID:k,renderLocation:"banner_post_mb"})));$j("body").on("click.afterTip",function(n){var l=$j(n.target);if(!l.parents(".js-trial-tip").length||l.is(".close")){$j("div.js-trial-tip").remove();$j("body").off("click.afterTip");var m=jive.app.url({path:"/get-started"});window.location=m}})});var j=$j(jive.trial.quests.stayInTouch.tips({pageID:k,renderLocation:"mb_body"})),i=$j("#statusInputs-mb-header-editor");i.prepend(j);var g=$j(jive.trial.quests.stayInTouch.tips({pageID:k,renderLocation:"at_mention_btn"})).hide();i.prepend(g);h.addListener("focus",function(){if(!g.is(":visible")){j.hide();g.show()}}).addListener("cancel",function(){if(g.is(":visible")){j.show();g.hide()}})}})};this.stayInTouchStep1=function(f){var h=this,e=$j("#j-activity-page .j-act-header h1");if(e.length){var i="all-activity";e.after($j(jive.trial.quests.stayInTouch.tips({pageID:i,renderLocation:"stream_header"})));var d=$j('<style type="text/css"> a.jive-acclaim-likelink.like{ background: #e28044; color: #fff !important; font-weight: bold; -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; padding: 2px 5px; margin: -2px;} </style>');d.appendTo("head");var g=function(){jive.localexchange.removeListener("trial.like.created",g);h.closeTip(f);d.remove();h.emit("clearActiveQuest");$j("html, body").animate({scrollTop:0},"fast");$j("body").prepend($j(jive.trial.quests.stayInTouch.tips({pageID:i,renderLocation:"banner_post_like"})));$j("body").on("click.afterTip",function(l){var j=$j(l.target);if(!j.parents(".js-trial-tip").length||j.is(".close")){$j("div.js-trial-tip").remove();$j("body").off("click.afterTip");var k=jive.app.url({path:"/get-started"});window.location=k}})};jive.localexchange.addListener("trial.like.created",g)}};this.communityFeedbackTips=function(g){var f=$j("#create-discussion"),e=$j("#js-all"),d=$j("#js-publishbar-select input[type=radio]");if(f.length){var h="create-discussion";$j("body").addClass("j-quest-active");f.append('<input type="hidden" name="markAsQuestion" value="true" />');f.append('<input type="hidden" name="fromQuest" value="'+g+'" />');e.click();if($j.browser.msie&&$j.browser.version<9){e.change()}d.attr("disabled","disabled");d.each(function(){$j(this).attr("name",$j(this).attr("name")+".disabled")});e.after('<input type="hidden" name="publishBar.visibility" value="all"/>');$j("div.jive-editor-panel").prepend($j(jive.trial.quests.communityFeedback.tips({pageID:h,renderLocation:"body"})))}};this.createSocialGroupTips=function(g,h){var f=this,i;if($j("body.j-body-yourplaces").length){i="places";$j("#jive-body").prepend($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"body"})));var e=jive.app.url({path:"/edit-place.jspa?containerType=700&fromQ="+g+"&qstep=0"});$j("#js-teamwork-create-group-link").attr("href",e);jive.switchboard.addListener("sgroup.member.join",function(){$j("#js-teamwork-join-tip").hide();f.uploadDocumentTips(g,1);a.dispatch("trial.updatePercentComplete")})}else{if($j("#jive-link-joinSocialGroup").length){i="place";var k=false;if(!$j(".j-bigtab-nav").length){k=true}var d=$j("#jive-link-joinSocialGroup").filter(":visible");if(d){if(d.hasClass("j-ask-join")&&k){k="ask-to-join"}else{if(k){k="join"}}d.before($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"join-link","private":k})));jive.switchboard.addListener("sgroup.member.join",function(){$j("#js-teamwork-join-tip").hide();f.uploadDocumentTips(g,1);a.dispatch("trial.updatePercentComplete")})}}else{if($j("#jive-socialgroup-desc").length){i="create-group";$j("div.j-form-advanced").hide();$j("body").addClass("j-quest-active");var j=b("#jive-socialgroup-type-OPEN");setTimeout(function(){var m=$j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"group-type"})),l=j.offset();b("body").prepend(m);m.css({position:"fixed",top:l.top-(m.outerHeight()/2)+"px",left:l.left-m.width()-60+"px","z-index":1002});m.addClass("j-pop");m.children("div").addClass("j-pop-main");m.children("span").css("top",((m.outerHeight()/2)-(m.children("span:first").outerHeight()/2))+"px");b(".js-about-form .j-aboutClose button").one("click",function(){f.closeTip(g)})},600);$j("#jive-socialgroup-template").prepend($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"template"})));$j("#jive-socialgroup-name").prepend($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"group-name"})));$j("#jive-socialgroup-img").prepend($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"group-img"})));$j("input.j-btn-callout").before($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"submit"})))}}}};this.uploadDocumentTips=function(d,e){var g=$j("#jive-place-link-actions"),f,h;if($j("body.j-body-yourplaces").length){f="places";h=$j(jive.trial.quests.teamwork.tips({pageID:f,renderLocation:"banner"}));h.delegate("#quest-complete-close","click",function(i){i.preventDefault();$j("div.js-trial-tip").remove()});$j("body").prepend(h)}else{if(g.length&&!$j("div.js-placeEditBanner").length){this.showUploadFileTip()}else{if(g.length&&$j("div.js-placeEditBanner").length){jive.localexchange.addListener("place.activity.view",this.showUploadFileTip)}else{if(!g.length&&$j("body.j-body-place").length){f="place";h=$j(jive.trial.quests.teamwork.tips({pageID:f,renderLocation:"banner"}));h.delegate("#quest-complete-close","click",function(i){i.preventDefault();$j("div.js-trial-tip").remove()});$j("body").prepend(h)}else{if($j(".jive-create-doc").length){f="upload";$j("body").addClass("j-quest-active");$j(".jive-create-doc").prepend($j(jive.trial.quests.teamwork.tips({pageID:f,renderLocation:"choose-file"})));$j("#js-publishbar-visibility").before($j(jive.trial.quests.teamwork.tips({pageID:f,renderLocation:"choose-place"})));$j("#submitButton").before($j(jive.trial.quests.teamwork.tips({pageID:f,renderLocation:"submit"})))}}}}}};this.showUploadFileTip=function(){jive.localexchange.removeListener("place.activity.view",this.showUploadFileTip);var e="place";var d=b('#j-as-create-menu a[data-ident="nav.bar.create.content.file"]');d.attr("href",d.attr("href")+"&fromQ=WorkBetterAsATeamQuest&qstep=1");var f=$j(jive.trial.quests.teamwork.tips({pageID:e,renderLocation:"upload-link"}));d.after(f)};this.positionTips=function(f){var d=b("#j-placeActions");var e=b("#j-main").offset().left;if(e>0){e=(b(window).innerWidth()-b("#j-main").width())/2}f.css("top",f.position().top+(d.height()/2)+7+"px");f.css("left",d.offset().left-f.width()-e+"px")};this.inviteTips=function(e,g){var f=this;var i=$j("#jive-place-link-actions"),h,j;if(i.length){h="place";var k=$j(jive.trial.quests.teamwork.tips({pageID:h,renderLocation:"actions-link"}));b("#jive-body").prepend(k);f.positionTips(k);var d=function(){k.remove();jive.localexchange.removeListener("actionsMenuToggled",d);var l=b("#jive-place-link-actions-invite");j=$j(jive.trial.quests.teamwork.tips({pageID:h,renderLocation:"invite-link"}));j.popover({context:l,position:"left",darkPopover:true,addClass:"j-q-tip wide",nudge:{top:-5,left:-20},arrowOffset:-5,onLoad:function(){$j("#jive-place-link-actions-invite").one("click",function(){function n(){$j("div.js_lb_overlay").addClass("j-quest-active");$j("#invitees").before($j(jive.trial.quests.teamwork.tips({pageID:h,renderLocation:"invite.modal.users"})));$j("#jive-invite-message-content").before($j(jive.trial.quests.teamwork.tips({pageID:h,renderLocation:"invite.modal.message"})));$j("#jive-invite-message-content").after($j(jive.trial.quests.teamwork.tips({pageID:h,renderLocation:"invite.modal.submit"})));$j("#jive-modal-invite").on("close",function(){a.dispatch("trial.updatePercentComplete")})}var m=setInterval(function(){if($j("#invitees").length){n();clearInterval(m)}},50)})}})};jive.localexchange.addListener("actionsMenuToggled",d)}else{if($j("div.doc-page").length){var f=this;f.emitP("shouldSetupPage",e,g-1).addCallback(function(l){var o="view-document";if(!l){f.closeTip(e);var p=$j(jive.trial.quests.teamwork.tips({pageID:o,renderLocation:"banner"}));p.delegate("#post-upload-tip-close","click",function(q){q.preventDefault();$j("div.js-trial-tip").remove()});$j("body").prepend(p)}else{o="view-document";var m=$j("#jive-link-edit a");m.attr("href",m.attr("href")+"?fromQ="+e+"&qstep="+(g-1));var n=$j(jive.trial.quests.teamwork.tips({pageID:o,renderLocation:"edit"}));$j(n).popover({context:m,position:"left",darkPopover:true,destroyOnClose:false,putBack:true,addClass:"j-qtip",closeOnClick:false})}})}}};this.closeTip=function(f,d){var e="div.js-trial-tip[data-fromq="+f+"]";if(d){e+="[data-location="+d+"]"}var g=$j(e);if(g.length){g.each(function(){var i=$j(this);var h=i.closest("div.js-pop").length;if(h.length){h.trigger("close");h.remove()}else{i.remove()}})}}})});
;
define("apps/shared/models/nested_rest_service",["apps/shared/models/rest_service"],function(a){jive.NestedRestService=a.extend(function(b,c){b.init=function(d){c.init.call(this,d);this.parentType=d.parentType;this.parentID=d.parentID;this.POST_RESOURCE_ENDPOINT=[this.RESOURCE_ENDPOINT,this.parentType,this.parentID].join("/")}});return jive.NestedRestService});
;
jive.namespace("Browse.Content");define("apps/browse/content/model/content_source",["apps/shared/models/rest_service"],function(a){jive.Browse.Content.ItemSource=a.extend(function(b){b.resourceType="content";b.pluralizedResourceType=b.resourceType;b.putOnUpdate=true});return jive.Browse.Content.ItemSource});
;
jive.namespace("Move.Content");jive.Move.Content.MoveContentItemSource=jive.Browse.Content.ItemSource.extend(function(a,b){a.suppressGenericErrorMessages();a.errorCallback=function(e,c){var d=this;return function(k,l,h){var i,g,f;try{i=JSON.parse(k.responseText)}catch(j){}g=i?i.message:null;f=(i&&i.code)?i.code:k.status;if(l!=="error"||k.status>=100){if(g){try{$j("<p>"+g+"</p>").message({style:"error"})}catch(j){if(console&&console.log){console.log(j)}}}else{a.displayError(c())}e.emitError.apply(e,[g,f])}}}});define("apps/movecontent/models/move_content_item_source",function(){return jive.Move.Content.MoveContentItemSource});
;
jive.namespace("Browse.Container");define("apps/browse/container/model/container_source",["apps/shared/models/rest_service"],function(a){jive.Browse.Container.ItemSource=a.extend(function(b){b.resourceType="container";this.getContainerProperty=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.containerType+"/"+d.containerID+"/prop/"+d.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:{}})};this.setContainerProperty=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.containerType+"/"+d.containerID+"/prop/"+d.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:d.propValue})};this.removeContainerProperty=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.containerType+"/"+d.containerID+"/prop/"+d.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"DELETE",{url:c})};this.getSpaceChildren=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.containerID+"/children";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:d})};this.getBreadcrumbBean=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.containerType+"/"+d.containerID+"/breadcrumbs";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:{}})}});return jive.Browse.Container.ItemSource});
;
goog.provide("jive.movecontent.confirm");
jive.movecontent.confirm=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="js-move-confirm-section"><header><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k175d"),[])),'</h2></header><a class="j-modal-close-top close" href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200e"),[])),' <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content jive-modal-content-move clearfix"><h6>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1766"),
[])),'</h6><p><img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/9.0.2.8500fd4/","","/images/transparent.png")),'" alt="" class="',soy.$$escapeHtml(opt_data.content.iconCss),' jive-icon-med" /> ',soy.$$filterNoAutoescape(opt_data.content.subject),"</p><h6>");if(opt_data.targetPersonalContainer)jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k1763"),arg0:'<img src="'+soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/9.0.2.8500fd4/","","/images/transparent.png"))+
'" alt="" class="'+soy.$$escapeHtml(opt_data.content.iconCss)+' jive-icon-med" /> '+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.personalContainerKey),[])),noAutoEscape:"true"},output);else output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1764"),[])));output.append("</h6>",!opt_data.targetPersonalContainer?'<p><img src="'+soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/9.0.2.8500fd4/","","/images/transparent.png"))+'" alt="" class="'+soy.$$escapeHtml(opt_data.targetContainer.iconCss)+
' jive-icon-med" /> '+soy.$$filterNoAutoescape(opt_data.targetContainer.subject)+"</p>":"",opt_data.docWithCollaborators?'<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1768"),[]))+"</span></p>":"",opt_data.restrictedSocialGroup?'<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1769"),[]))+"</span></p>":"",opt_data.hasExtendedAuthors?
'<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1760"),[]))+"</span></p>":"",opt_data.sourceIsExStorage?'<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1761"),[]))+"</span></p>":opt_data.targetIsExStorage?'<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1762"),
[]))+"</span></p>":"",opt_data.hasPlaceLinks?'<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1767"),[]))+"</span></p>":"",'<p class="j-move-notify-streams" ',opt_data.content.archetype!="content"?'style="display:none;"':"",'><input type="checkbox" class="js-move-notify-streams" /> <strong class="j-move-notify-label js-move-notify-toggle">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1765"),[])),'</strong></p><div class="j-form-row"><button class="js-move-confirm j-btn-callout">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k175c"),[])),'</button><button class="js-move-confirm-cancel">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2003"),[])),"</button></div></section></div>");return opt_sb?"":output.toString()};
;
jive.namespace("Move.Content");jive.Move.Content.MoveView=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.Move.Content;a.init=function(){var d=this;c(document).ready(function(){c("#jive-link-move a, a#jive-link-move").click(function(e){d.emit("browse");e.preventDefault()})})};this.confirm=function(f){var d=this;var e=c(".jive-modal");var g=jive.movecontent.confirm(f);d.prevContent=e.children();d.visibleContent=d.prevContent.filter(":visible");d.visibleContent.hide();e.append(g).removeClass("j-container-browse").trigger("resize");e.find(".js-move-notify-toggle").click(function(){var h=e.find(".js-move-notify-streams");h.attr("checked",!h.is(":checked"))});e.find(".js-move-confirm").click(function(h){var i=c(this);i.attr("disabled","disabled");d.emit("moveConfirmed",{targetContainerType:f.targetContainer.type,targetContainerID:f.targetContainer.id,notifyStreams:e.find(".js-move-notify-streams").is(":checked"),failureCallback:function(){i.removeAttr("disabled")}});h.preventDefault()});e.find(".js-move-confirm-cancel, .close").click(function(h){e.find(".js-move-confirm-section").remove();d.visibleContent.show();e.addClass("j-container-browse").trigger("resize");h.preventDefault()});c("body").find(".js_lb_overlay").click(function(h){e.find(".js-move-confirm-section").remove();h.preventDefault()})}});define("apps/movecontent/views/move_view",function(){return jive.Move.Content.MoveView});
;
jive.namespace("Move.Content");jive.Move.Content.CapabilitiesSource=jive.NestedRestService.extend(function(a,b){a.resourceType="capability";a.init=function(c){b.init.call(this,c);this.pluralizedResourceType="capabilities";this.RESOURCE_ENDPOINT=jive.rest.url("/"+["content",this.parentType,this.parentID,this.pluralizedResourceType].join("/"));this.POST_RESOURCE_ENDPOINT=this.RESOURCE_ENDPOINT}});define("apps/movecontent/models/move_content_source",function(){return jive.Move.Content.CapabilitiesSource});
;
jive.namespace("Move.Container");jive.Move.Container.CapabilitiesSource=jive.NestedRestService.extend(function(a,b){a.resourceType="capability";a.init=function(c){b.init.call(this,c);this.pluralizedResourceType="capabilities";this.RESOURCE_ENDPOINT=jive.rest.url("/"+["containers",this.parentType,this.parentID,this.pluralizedResourceType].join("/"));this.POST_RESOURCE_ENDPOINT=this.RESOURCE_ENDPOINT}});define("apps/movecontent/models/move_container_source",function(){return jive.Move.Container.CapabilitiesSource});
;
jive.namespace("Move.Content");jive.Move.Content.Main=jive.oo.Class.extend(function(a){a.init=function(c){var b=this;this.objectType=c.objectType;this.objectID=c.objectID;this.containerType=c.containerType;this.containerID=c.containerID;this.isContainer=c.isContainer||false;this.contentCapabilitiesSource=new jive.Move.Content.CapabilitiesSource({parentID:this.objectID,parentType:this.objectType});this.containerCapabilitiesSource=new jive.Move.Container.CapabilitiesSource({parentID:this.objectID,parentType:this.objectType});this.contentSource=new jive.Move.Content.MoveContentItemSource();this.containerSource=new jive.Browse.Container.ItemSource();this.moveView=new jive.Move.Content.MoveView();this.placePicker=new jive.Placepicker.Main($j.extend({pickerContext:"move"},c));this.moveView.addListener("browse",function(d){b.placePicker.showPicker()});this.moveView.addListener("moveConfirmed",function(d){if(b.isContainer){b.handleConfirmation(b.containerSource,d)}else{b.handleConfirmation(b.contentSource,d)}});this.placePicker.addListener("container",function(d,e){if(b.isContainer){b.handleContainerSelected(b.containerCapabilitiesSource,d)}else{b.handleContainerSelected(b.contentCapabilitiesSource,d)}})};a.handleConfirmation=function(d,c){var b=this;d.save({id:b.objectType+"/"+b.objectID,objectType:c.targetContainerType,objectID:c.targetContainerID,notifyStreams:!!c.notifyStreams}).addCallback(function(e){window.location=jive.app.url({path:e.link+"?prevContainerType="+b.containerType+"&prevContainerID="+b.containerID})}).addErrback(function(e){c.failureCallback()})};a.handleContainerSelected=function(d,c){var b=this;d.findAll({containerType:c.targetContainerType,containerID:c.targetContainerID}).addCallback(function(i){var e=$j("#js-place-link-breadcrumb");var h=false;if(e&&e.length>0){var f=parseInt(e.attr("data-place-link-count"));h=typeof f=="number"&&f>0}var g=$j.extend({hasPlaceLinks:h},i);b.moveView.confirm(g)})}});define("apps/movecontent/main",function(){return jive.Move.Content.Main});
;
goog.provide("jive.movecontent.confirm");goog.provide("jive.movecontent.imports");goog.provide("jive.movecontent.successMessage");goog.require("soy");goog.require("soydata");goog.require("soy.StringBuilder");goog.require("jive.shared.displayutil.containerDisplayNameLink");goog.require("jive.shared.soy.i18nHelper");jive.movecontent.imports=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;return opt_sb?"":output.toString()};
jive.movecontent.successMessage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-success-box" aria-live="polite" aria-atomic="true"><div><span class="jive-icon-med jive-icon-check"></span>');var param9=new soy.StringBuilder;jive.shared.displayutil.containerDisplayNameLink({container:opt_data.prevContainer},param9);var param12=new soy.StringBuilder;jive.shared.displayutil.containerDisplayNameLink(opt_data,param12);jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k176a"),
arg0:soy.$$escapeHtml(opt_data.contentTypeName),arg1:param9.toString(),arg2:param12.toString(),noAutoEscape:"true"},output);output.append("</div></div>");return opt_sb?"":output.toString()};
jive.movecontent.confirm=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="js-move-confirm-section"><header><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k175d"),[])),'</h2></header><a class="j-modal-close-top close" href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200e"),[])),' <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content jive-modal-content-move clearfix"><h6>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1766"),
[])),'</h6><p><img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/9.0.2.8500fd4/","","/images/transparent.png")),'" alt="" class="',soy.$$escapeHtml(opt_data.content.iconCss),' jive-icon-med" /> ',soy.$$filterNoAutoescape(opt_data.content.subject),"</p><h6>");if(opt_data.targetPersonalContainer)jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k1763"),arg0:'<img src="'+soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/9.0.2.8500fd4/","","/images/transparent.png"))+
'" alt="" class="'+soy.$$escapeHtml(opt_data.content.iconCss)+' jive-icon-med" /> '+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.personalContainerKey),[])),noAutoEscape:"true"},output);else output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1764"),[])));output.append("</h6>",!opt_data.targetPersonalContainer?'<p><img src="'+soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/9.0.2.8500fd4/","","/images/transparent.png"))+'" alt="" class="'+soy.$$escapeHtml(opt_data.targetContainer.iconCss)+
' jive-icon-med" /> '+soy.$$filterNoAutoescape(opt_data.targetContainer.subject)+"</p>":"",opt_data.docWithCollaborators?'<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1768"),[]))+"</span></p>":"",opt_data.restrictedSocialGroup?'<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1769"),[]))+"</span></p>":"",opt_data.hasExtendedAuthors?
'<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1760"),[]))+"</span></p>":"",opt_data.sourceIsExStorage?'<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1761"),[]))+"</span></p>":opt_data.targetIsExStorage?'<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1762"),
[]))+"</span></p>":"",opt_data.hasPlaceLinks?'<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1767"),[]))+"</span></p>":"",'<p class="j-move-notify-streams" ',opt_data.content.archetype!="content"?'style="display:none;"':"",'><input type="checkbox" class="js-move-notify-streams" /> <strong class="j-move-notify-label js-move-notify-toggle">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1765"),[])),'</strong></p><div class="j-form-row"><button class="js-move-confirm j-btn-callout">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k175c"),[])),'</button><button class="js-move-confirm-cancel">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2003"),[])),"</button></div></section></div>");return opt_sb?"":output.toString()};
;
jive.namespace("ThreadToDoc");jive.ThreadToDoc.ThreadToDocView=jive.AbstractView.extend(function(a){var b=jQuery;a.init=function(){var c=this;b(document).ready(function(){b("#jive-link-wiki a").click(function(d){c.emit("browse");d.preventDefault()})})};this.maxMessagesExceeded=function(d){var c=this;if(confirm(jive.threadtodoc.maxMessagesExceeded())){c.emit("confirm",d)}};this.displayError=function(c){b("<div>").append(c).message({style:"error"})}});define("apps/threadtodoc/views/threadtodoc_view",function(){return jive.ThreadToDoc.ThreadToDocView});
;
jive.namespace("ThreadToDoc");define("apps/threadtodoc/models/threadtodoc_source",["apps/shared/models/rest_service"],function(a){jive.ThreadToDoc.ThreadToDocSource=a.extend(function(b){b.resourceType="threadconversion";b.suppressGenericErrorMessages()});return jive.ThreadToDoc.ThreadToDocSource});
;
jive.namespace("ThreadToDoc");jive.ThreadToDoc.Main=jive.oo.Class.extend(function(a){a.init=function(c){var b=this;this.objectType=c.objectType;this.objectID=c.objectID;this.personalContainerTitleKey=c.personalContainerTitleKey;this.personalContainerCaptionKey=c.personalContainerCaptionKey;this.searchPlaceholderKey=c.searchPlaceholderKey;this.containerType=c.containerType;this.containerID=c.containerID;this.maxMessages=c.maxMessages;this.threadMessageCount=c.threadMessageCount;this.threadToDocView=new jive.ThreadToDoc.ThreadToDocView();this.threadToDocView.addListener("browse",function(e){if(b.threadMessageCount>b.maxMessages){b.threadToDocView.maxMessagesExceeded(e)}else{var d=new jive.ThreadToDoc.ThreadToDocSource();d.save({threadID:b.objectID,containerType:b.containerType,containerID:b.containerID}).addCallback(function(f){window.location=f}).addErrback(function(g,f){if(f==4004){b.threadToDocView.displayError(g)}else{b.threadToDocView.displayError(jive.error.rest.soy.errorSaving({href:window.location}))}})}})}});define("apps/threadtodoc/main",function(){return jive.ThreadToDoc.Main});
;
goog.provide("jive.threadtodoc.imports");goog.provide("jive.threadtodoc.maxMessagesExceeded");goog.require("soy");goog.require("soydata");goog.require("soy.StringBuilder");jive.threadtodoc.imports=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;return opt_sb?"":output.toString()};
jive.threadtodoc.maxMessagesExceeded=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1f71"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.modalizer.foo");goog.require("soy");goog.require("soydata");goog.require("soy.StringBuilder");jive.modalizer.foo=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.breadcrumb.placeLinkPopoverResults");
jive.shared.breadcrumb.placeLinkPopoverResults=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<ul class="j-icon-list">');if(opt_data.places.length>0){var placeList6=opt_data.places;var placeListLen6=placeList6.length;for(var placeIndex6=0;placeIndex6<placeListLen6;placeIndex6++){var placeData6=placeList6[placeIndex6];output.append('<li class="j-shared-place-link">',placeData6.name?'<a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,placeData6.resources.html.ref)))+
'" class="j-shared-place js-shared-place-link"><span class="jive-icon-big '+soy.$$escapeHtmlAttribute(placeData6.iconCss)+' js-place-link-popover-icon"></span><span class="lnk js-place-link-popover-name">'+soy.$$escapeHtml(placeData6.name)+"</span></a>":"<span>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1784"),[]))+"</span>",placeData6.canDeletePlaceRelationship?'<a href="#" class="js-remove-rel-confirm j-remove-share font-color-meta" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k178e"),
[]))+'"'+soy.$$filterHtmlAttributes(jive.i18n.i18nText(jive.i18n.getMsg("k178e"),[]))+' data-relationship-id="'+soy.$$escapeHtmlAttribute(placeData6.contentPlaceRelationshipID)+'"><span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k178e"),[]))+"</span></a>":"","</li>")}if(opt_data.placeLinkCount-opt_data.places.length>0)switch(opt_data.placeLinkCount-opt_data.places.length){case 0:break;case 1:output.append("<li><span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1783"),[opt_data.placeLinkCount-
opt_data.places.length])),"</span></li>");break;case 2:output.append("<li><span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1786"),[opt_data.placeLinkCount-opt_data.places.length])),"</span></li>");break;case 3:output.append("<li><span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1785"),[opt_data.placeLinkCount-opt_data.places.length])),"</span></li>");break;default:output.append("<li>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1782"),[opt_data.placeLinkCount-
opt_data.places.length])),"</li>")}}else output.append("<li>",opt_data.placeLinkCount==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1788"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1787"),[])),"</li>");output.append("</ul>");return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.breadcrumb.placeLinkPopover");jive.shared.breadcrumb.placeLinkPopover=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span id="js-place-linked-content-container-placeholder"></span><div id="js-place-linked-content-container" class="j-pop-main j-place-linked-content-container js-place-linked-content-container" style="display: none"></div>');return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.breadcrumb.placeLinkBreadcrumb");
jive.shared.breadcrumb.placeLinkBreadcrumb=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.placeLinkCount&&opt_data.placeLinkCount>0&&opt_data.linkedContentType&&opt_data.linkedContentID){output.append(opt_data.legacy?(opt_data.place||opt_data.parents?" "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2112"),[]))+" ":"")+'<a href="#" class="js-place-linked-content-link">'+(opt_data.placeLinkCount==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k177e"),
[opt_data.placeLinkCount])):opt_data.placeLinkCount==2?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1780"),[opt_data.placeLinkCount])):opt_data.placeLinkCount==3?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k177f"),[opt_data.placeLinkCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k177d"),[opt_data.placeLinkCount])))+"</a>":opt_data.userContainer?"<span>"+(opt_data.linkedContentType!=38?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2112"),[])):"")+' <a href="#" class="js-place-linked-content-link">'+
(opt_data.placeLinkCount==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1792"),[opt_data.placeLinkCount])):opt_data.placeLinkCount==2?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1794"),[opt_data.placeLinkCount])):opt_data.placeLinkCount==3?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1793"),[opt_data.placeLinkCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1791"),[opt_data.placeLinkCount])))+"</a>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k210f"),
[]))+"</span>":"<span> "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k177c"),[]))+' <a href="#" class="js-place-linked-content-link">'+(opt_data.placeLinkCount==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1789"),[opt_data.placeLinkCount])):opt_data.placeLinkCount==2?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1790"),[opt_data.placeLinkCount])):opt_data.placeLinkCount==3?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k178f"),[opt_data.placeLinkCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1781"),
[opt_data.placeLinkCount])))+"</a></span>");if(opt_data.renderPopoverContainer)jive.shared.breadcrumb.placeLinkPopover(null,output)}return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.breadcrumb.placeLinkRemoveConfirm");
jive.shared.breadcrumb.placeLinkRemoveConfirm=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-remove-share-confirm">',opt_data.placeLink&&opt_data.placeIconCss&&opt_data.placeName?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k178c"),[]))+'&nbsp;</p><p class="clearfix"><a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.placeLink))+'"><span class="jive-icon-med '+soy.$$escapeHtmlAttribute(opt_data.placeIconCss)+'"></span>'+
soy.$$escapeHtml(opt_data.placeName)+"</a>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k212e"),[]))+"</p>":"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k178a"),[]))+"</p>",'<a href="#" class="js-remove-rel j-remove-rel-confirm j-btn-global" data-relationship-id="',soy.$$escapeHtmlAttribute(opt_data.relationshipID),'" data-command="deleteContentPlaceRelBreadcrumb" >',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k178d"),[])),'</a><a href="#" class="js-remove-rel-cancel j-remove-rel-confirm close j-btn-global">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k178b"),[])),"</a></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.breadcrumb.breadcrumbIntroText");
jive.shared.breadcrumb.breadcrumbIntroText=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.hasRelationships)jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.getMinKey(opt_data.messageKey)),arg0:'<a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.containerUrl))+'"><span class="'+soy.$$escapeHtmlAttribute(opt_data.containerCss)+'"></span>'+soy.$$escapeHtml(opt_data.containerName)+"</a>",noAutoEscape:true},output);else jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.getMinKey(opt_data.messageKey)),
arg0:opt_data.browseFromRootSpace?'<a href="'+(opt_data.browseFilter?soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.browseFilter)):"")+'">':'<a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.containerUrl))+(opt_data.browseFilter?soy.$$escapeHtmlAttribute(opt_data.browseFilter):"")+'">',arg1:"</a>",arg2:'<a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.containerUrl))+'"><span class="'+soy.$$escapeHtmlAttribute(opt_data.containerCss)+'"></span>'+
soy.$$escapeHtml(opt_data.containerName)+"</a>",noAutoEscape:true},output);return opt_sb?"":output.toString()};
;
define("breadcrumb",["jquery","apps/shared/models/core_deferred","apps/shared/controllers/localexchange","soy!jive.shared.breadcrumb.placeLinkPopoverResults","soy!jive.shared.breadcrumb.placeLinkBreadcrumb","soy!jive.shared.breadcrumb.placeLinkRemoveConfirm","soy!jive.shared.breadcrumb.breadcrumbIntroText","soy!jive.shared.displayutil.a11yBoundary"],function(f,b,e,d,h,g,a,c){f(function(){f("#js-place-parents-link").on("click",function(n){n.preventDefault();f("#js-place-parents-container").popover({context:f(this),darkPopover:true,destroyOnClose:false,hoverSelection:true})});function i(){f("#js-place-link-breadcrumb").off("click","a.js-place-linked-content-link")}function m(){f("#js-place-link-breadcrumb").on("click","a.js-place-linked-content-link",function(s){s.preventDefault();var p=f("#js-place-linked-content-container");var r=f("#js-place-link-breadcrumb");var q=r.attr("data-linked-content-type");var o=r.attr("data-linked-content-id");var n=f(this);b.getObject(q,o).then(function(u){var t={contentID:""+u.contentID};return b.runQuery(function(v){return v.jive.corev3.places.getPlacesRelatedToContentCount(t)})}).then(function(t){var u=t.content.count;if(u>0){p.popover({context:n,darkPopover:true,destroyOnClose:false,hoverSelection:true,onLoad:function(){k(p,f("#js-place-link-breadcrumb"),u)},onClose:function(){p.empty()}})}if(u!=parseInt(r.attr("data-place-link-count"))){j(u,false)}})})}m();function k(p,s,n){var r=s||f("#js-place-link-breadcrumb");var q=r.attr("data-linked-content-type");var o=r.attr("data-linked-content-id");b.getObject(q,o).then(function(u){var t={contentID:""+u.contentID};return b.runQuery(function(v){return v.jive.corev3.places.getPlacesRelatedToContent(t)})}).then(b.slurp).then(function(w){var u=p.children("span");if(u.length==0){var x=c({type:"menu"});var t=c({type:"menu",isEnd:true});p.prepend(x).append(t);u=p.children("span")}var v={places:w,placeLinkCount:n};if(u.length>0){f(u[0]).after(d(v))}l(p)},function(){console.log("retrieving related places failed")})}function l(n){n.find("a.js-remove-rel-confirm").on("click",function(v){var o=f(v.target);if(!o.is("a")){o=o.closest("a")}var p=o.attr("data-relationship-id");var s=o.closest("li").find("a.js-shared-place-link");var u;var t;var r;if(s&&s.length>0){u=s.attr("href");t=s.children("span.js-place-link-popover-icon").attr("class");r=s.children("span.js-place-link-popover-name").text()}var q={relationshipID:p,placeLink:u,placeIconCss:t,placeName:r};n.html(g(q));f("#js-place-link-breadcrumb").on("click","#js-place-linked-content-container a.js-remove-rel-cancel",function(){f("#js-place-linked-content-container-placeholder").click()})})}function j(A,z){var t=f("#js-place-link-breadcrumb");var r=t&&t.length>0;if(r){var v=parseInt(t.attr("data-place-link-count"));var n=parseInt(t.attr("data-linked-content-id"));var q=parseInt(t.attr("data-linked-content-type"));if(typeof v=="number"&&typeof n=="number"&&typeof q=="number"){var B="true"===t.attr("data-is-usercontainer");var s="true"===t.attr("data-legacy");var y="true"===t.attr("data-place");var x="true"===t.attr("data-parents");var u={placeLinkCount:A,linkedContentID:n,linkedContentType:q,userContainer:B,legacy:s,place:y,parents:x,renderPopoverContainer:(v==0)};var p;if(v>0){p=f("#js-place-linked-content-container")}t.attr("data-place-link-count",A);i();t=t.html(h(u));m();if(z){if(v>0){p.empty()}if(A>0){k(p,t,A)}else{p.closest("div.js-pop").remove()}}if(!s&&!B&&(v==0&&A>0||A==0&&v>0)){var w=f("#js-breadcrumb-intro");var o={messageKey:A>0?w.attr("data-has-content-rel-intro-key"):w.attr("data-no-content-rel-intro-key"),hasRelationships:A>0,containerName:w.attr("data-container-display-name"),containerUrl:w.attr("data-container-url"),containerCss:w.attr("data-container-icon-css"),browseFilter:w.attr("data-content-browse-filter"),browseFromRootSpace:q==18};w.html(a(o))}}else{location.reload()}}else{location.reload()}}e.addListener("content.place.relationship.delete",function(){var p=f("#js-place-link-breadcrumb");var o=p.attr("data-linked-content-type");var n=p.attr("data-linked-content-id");b.getObject(o,n).then(function(r){var q={contentID:""+r.contentID};return b.runQuery(function(s){return s.jive.corev3.places.getPlacesRelatedToContentCount(q)})}).then(function(q){var r=q.content.count;j(r,true)})});e.addListener("content.place.relationship.share.added",function(n,o){b.getObject(n,o).then(function(q){var p={contentID:""+q.contentID};return b.runQuery(function(r){return r.jive.corev3.places.getPlacesRelatedToContentCount(p)})}).then(function(p){var q=p.content.count;j(q,false)})})})});
;
define("apps/extendedinvitations/models/source",["jquery","underscore","apps/shared/models/core_deferred"],function(c,b,a){return jive.oo.Class.extend(function(e){e.load=function(i){return a.getObject(i.objecttype,i.objectid)};function g(i){var j=i.discussion?"discussion":"rootURI";if(b.isUndefined(i[j])||f(i[j])){return i}return a.runQuery(osapi.jive.corev3.contents.get({id:b.last(i[j].split("/"))}))}function f(k){var j=k.split("/").reverse(),l=j.shift(),i=j.shift();return !/discussion|contents|document/.test(i)}function h(i){return b.sortBy(i,"displayName")}function d(i){b.each(i,function(j){if(j&&j.jive&&j.jive.profile){j.title=b.find(j.jive.profile,function(k){return k.jive_label==="Title"})}return j});return i}this.getAuthors=function(i){return this.load(i).then(g).then(function(j){if(_jive_current_user.partner||_jive_current_user.external){return j.extendedAuthors}else{return a.runAll(b.invoke(j.extendedAuthors,"get")).then(d).then(h)}})};this.removeAuthor=function(i,j){return this.load(i).then(function(k){k.extendedAuthors=b.filter(k.extendedAuthors,function(l){return +l.id!==j});return a.runQuery(k.update)})}})});
;
goog.provide("jive.shared.displayutil.coreApiAvatar");jive.shared.displayutil.coreApiAvatar=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data,{enabled:opt_data.jive.enabled,visible:opt_data.visible||opt_data.jive.visible,username:opt_data.jive.username,partner:opt_data.jive.externalContributor,size:opt_data.size,uri:opt_data.uri}),output);return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.displayutil.coreApiUserDisplayNameLink");jive.shared.displayutil.coreApiUserDisplayNameLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data,{anonymous:false,enabled:opt_data.jive.enabled,username:opt_data.jive.username,visible:opt_data.jive.visible}),output);return opt_sb?"":output.toString()};
;
goog.provide("jive.extended_invitation.showExtendedAuthorsModal");
jive.extended_invitation.showExtendedAuthorsModal=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="js-show-extended-authors j-show-extended-authors"><ul class="j-people-list">');var authorList4=opt_data.authors;var authorListLen4=authorList4.length;for(var authorIndex4=0;authorIndex4<authorListLen4;authorIndex4++){var authorData4=authorList4[authorIndex4];output.append('<li class="clearfix" data-user-id="',soy.$$escapeHtml(authorData4.id),'">');jive.shared.displayutil.coreApiAvatar(soy.$$augmentMap(authorData4,
{size:26}),output);output.append('<span class="j-ext-author">');if(opt_data.removeAuthorLink){output.append("<em>");jive.shared.displayutil.userDisplayNameLink(authorData4,output);output.append("</em>")}else jive.shared.displayutil.coreApiUserDisplayNameLink(authorData4,output);output.append(authorData4.title?'<em class="font-color-meta-light">'+soy.$$escapeHtml(authorData4.title.value)+"</em>":"","</span>",opt_data.removeAuthorLink?'<a href="#" class="j-remove-author font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3adc"),
[]))+"</a>":"","</li>")}output.append("</ul></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.extended_invitation.removeShareInline");
jive.extended_invitation.removeShareInline=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="js-remove-ext-invites j-remove-ext-invites"><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3adb"),[])),'</p><a href="#" class="ok j-btn-global">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3add"),[])),'</a><a href="#" class="cancel j-btn-global">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ada"),[])),"</a></div>");return opt_sb?
"":output.toString()};
;
define("apps/extendedinvitations/views/view",["jquery","underscore","soy!jive.extended_invitation.showExtendedAuthorsModal","soy!jive.extended_invitation.removeShareInline"],function(b,a,d,c){return jive.oo.Class.extend(function(e){jive.conc.observable(this);e.init=function(f){a.extend(this,f)};this.show=function(i,h){if(!h||h.length<=0){return(new b.Deferred()).reject()}var g=this,f=b(i).data("removeAuthors");this.modal=b.parseHTML(d({authors:h,removeAuthorLink:f}));b(this.modal).popover({context:i,hoverSelection:f,onLoad:function(){if(f){b(g.modal).on("click","li",g.showRemoveConfirm.bind(g,i))}}})};e.showRemoveConfirm=function(h,i){var g=this,f=b(i.target).closest("li");$confirm=b(b.parseHTML(c()));f.children().fadeOut(function(){f.append($confirm)});$confirm.on("click","a",function(k,j){if(b(this).hasClass("ok")){g.removeAuthorsHandler.call(g,h,k)}else{j.remove();k.children().fadeIn()}}.curry(f,$confirm));i.preventDefault()};e.removeAuthorsHandler=function(f,g){if(g.siblings("li").length==0){g.remove();b(this.modal).trigger("close")}else{g.remove()}this.emit("removeAuthor",f,g.data("userId"))}})});
;
define("apps/extendedinvitations/main",["jquery","underscore","apps/extendedinvitations/models/source","apps/extendedinvitations/views/view","soy!jive.error.rest.soy.errorFinding","soy!jive.error.rest.soy.errorSaving","soy!jive.content.comment.rte_message"],function(e,c,d,f,g,b,a){jive.oo.Class.extend(function(h){h.init=function(){var i;this.el=".js-extended-authors";this.source=new d();this.view=new f();this.bindEvents()};h.bindEvents=function(){e("body").on("click",this.el,this.showAuthors.bind(this));this.view.addListener("removeAuthor",this.handleRemoveAuthor.bind(this))};h.showAuthors=function(j){var i=this.getObject(e(j.target));this.source.getAuthors(i).then(this.view.show.bind(this.view,j.target)).fail(this.errorHandler.bind(this,g))};h.handleRemoveAuthor=function(l,k){var i=this,j=this.getObject(e(l).closest(this.el));this.source.removeAuthor(j,k).then(function(){return i.source.getAuthors(j)}).then(function(o){if(!o||o.length===0){var n=e(l).closest(".js-ext-invites"),m=e(".js-shared-group-text"),p=m.length>0?n.find(".js-ext-invites-text"):n;p.fadeOut(function(){if(m.length>0){m.fadeIn();n.removeClass("js-ext-invites")}});e(".js-rte-message").replaceWith(a({externallyVisible:m.length>0,extendedAuthors:false,objectType:j.objectType,objectId:j.objectId}))}}).fail(this.errorHandler.bind(this,b))};h.errorHandler=function(i){e(i({href:_jive_base_url})).message({style:"error"})};h.getObject=function(i){return i.data()}})()});
;
goog.provide("jive.content.comment.extendedAuthors");
jive.content.comment.extendedAuthors=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var listText__soy3=new soy.StringBuilder('<a href="#" class="js-extended-authors j-extended-authors" data-objecttype="',soy.$$escapeHtml(opt_data.objectType),'" data-objectid="',soy.$$escapeHtml(opt_data.objectId),'">',opt_data.externallyVisible?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ae9"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ae7"),[])),"</a>");listText__soy3=
listText__soy3.toString();output.append(opt_data.externallyVisible?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ae8"),[new soydata.VERY_UNSAFE.ordainSanitizedHtml(listText__soy3)])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ae6"),[new soydata.VERY_UNSAFE.ordainSanitizedHtml(listText__soy3)])));return opt_sb?"":output.toString()};
;
goog.provide("jive.content.comment.rte_message");
jive.content.comment.rte_message=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-rte-message js-rte-message">');if(opt_data.extendedAuthors||opt_data.externallyVisible){output.append('<span class="jive-icon-med jive-icon-partner"></span><span class="font-color-meta-light j-browse-external-access"><em>');if(opt_data.extendedAuthors)jive.content.comment.extendedAuthors(opt_data,output);else output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k296c"),
[])));output.append("</em></span>")}output.append("</div>");return opt_sb?"":output.toString()};
;
define("apps/shared/models/rest_service",["jquery"],function(a){window.jive.RestService=jive.oo.Class.extend(function(b){b.resourceType="abstract";b.displayGenericErrorMessages=true;b.putOnUpdate=false;b.init=function(d){var c=this;this.pluralizedResourceType=this.pluralizedResourceType||this.resourceType+"s";var e=jive.rest.url("/"+this.pluralizedResourceType);this.RESOURCE_ENDPOINT=(d&&d.forceSecure)?jive.secure(e):e;this.POST_RESOURCE_ENDPOINT=this.RESOURCE_ENDPOINT;this.defaultParams={}};this.suppressGenericErrorMessages=function(){this.displayGenericErrorMessages=false};b.commonAjaxRequest=function(j,e,d,h){var g=this,i,c,f;e=e.toUpperCase();if(e=="POST"){f={contentType:"application/json; charset=utf-8"};c=this.errorSaving}else{if(e=="GET"){c=this.errorFinding}else{if(e=="PUT"){f={contentType:"application/json; charset=utf-8"};c=this.errorUpdating}else{if(e=="DELETE"){c=this.errorDestroying}}}}a.ajax(a.extend({type:e,dataType:"json",success:i||function(k,m,l){g.normalizeID(k);j.emitSuccess(k)},error:this.errorCallback(j,c),timeout:120000},f||{},d));return j};this.save=function(d){this.normalizeID(d);var c=this.saveUrl(d);var e=this.saveMethod(d);return this.commonAjaxRequest(new jive.conc.Promise(),e,{url:c,data:JSON.stringify(this.withoutId(d))},d)};this.get=function(f,e){var c=this.RESOURCE_ENDPOINT+"/"+f,d=jQuery.extend({},this.defaultParams,e||{});return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:d})};this.findAll=function(e){var c=this.RESOURCE_ENDPOINT,d=a.extend({},this.defaultParams,e);return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:d})};this.destroy=function(e){var d=new jive.conc.Promise(),c=this;if(e.hasOwnProperty("id")){e=e.id}a.ajax({type:"DELETE",url:this.RESOURCE_ENDPOINT+"/"+e,success:function(){d.emitSuccess()},error:function(f){c.maybeEmitError(d,c.errorDestroying,[null,f&&f.status])},timeout:30000});return d};b.normalizeID=function(c){var d=c?(c.id||c[this.resourceType+"ID"]):null;if(c&&d){c.id=d}};b.unwrapResponse=function(c){if(Object.keys(c).length===1){return c[Object.keys(c)[0]]}else{return c}};b.errorCallback=function(e,c){var d=this;return function(k,l,h){var i,g,f;try{i=JSON.parse(k.responseText)}catch(j){}g=i?i.message||i.error||null:null;f=(i&&i.code)?i.code:k.status;if(l!=="error"||k.status>=100){d.maybeEmitError(e,c,[g,f])}}};b.maybeEmitError=function(e,c,d){if(this.displayGenericErrorMessages){this.displayError(c())}e.emitError.apply(e,d)};b.displayError=function(c){a(c).message({style:"error"})};b.errorSaving=function(){return jive.error.rest.soy.errorSaving({href:window.location})};b.errorFinding=function(){return jive.error.rest.soy.errorFinding({href:window.location})};b.errorUpdating=function(){return jive.error.rest.soy.errorUpdating({href:window.location})};b.errorDestroying=function(){return jive.error.rest.soy.errorDestroying({href:window.location})};b.withoutId=function(c){var d={};Object.keys(c).forEach(function(e){if(e!="id"){d[e]=c[e]}});return d};b.saveUrl=function(c){if(c.id){return this.RESOURCE_ENDPOINT+"/"+c.id}else{return this.POST_RESOURCE_ENDPOINT}};b.saveMethod=function(c){if(c.id&&this.putOnUpdate){return"PUT"}else{return"POST"}}});return window.jive.RestService});
;
define("apps/shared/models/nested_rest_service",["apps/shared/models/rest_service"],function(a){jive.NestedRestService=a.extend(function(b,c){b.init=function(d){c.init.call(this,d);this.parentType=d.parentType;this.parentID=d.parentID;this.POST_RESOURCE_ENDPOINT=[this.RESOURCE_ENDPOINT,this.parentType,this.parentID].join("/")}});return jive.NestedRestService});
;
jive.namespace("CommentApp");jive.CommentApp.Comment=$Class.extend({init:function(b){var a=this;Object.keys(b).forEach(function(c){if(c!="outcome"){a[c]=b[c]}})}});define("apps/comment_app/models/comment",function(){return jive.CommentApp.Comment});
;
jive.namespace("SharedViews");define("apps/shared/views/rte_view",function(){jive.SharedViews.RteView=$Class.extend({init:function(a,b){this._preferredMode=window.preferredMode||b.preferredMode||"advanced";this._container=$j(a);this._formActionContainer=(b.formActionContainer)?$j(b.formActionContainer):this._container;this._rteDisabledBrowser=b.rteDisabledBrowser;this._resourceID=b.resourceID;this._resourceType=b.resourceType;this._isAnonymous=b.isAnonymous;this._templateName=b.templateName||"rte-template";this._bodyContent=b.bodyContent;this._settingsID=b.settingsID||"mini";this._i18n=b.i18n;this.images_enabled=b.imagesEnabled;var c=this;$j(document).ready(function(){c._render();if(!c._rteDisabledBrowser){c._createRTE()}c._addListeners()})},remove:function(){if(!this._rteDisabledBrowser){if(this._rte){this._rte.destroy()}window.editor.clear("wysiwygtext");jive.rte.multiRTE=jive.rte.multiRTE.filter(function(a){return a!="wysiwygtext"})}this._container.find("form").remove();$j(window).unbind("unload",this._unloadCallback);this.emit("remove")},val:function(a){if(a){this._rte.setHTML(a);return this}else{return this._getContentBody()}},setPreviewButtonText:function(a){this._container.find("[name=preview]").val(a)},focus:function(){this._rte.tinymceFocus()},_initEditor:function(){this._currentMode="advanced";var a=this;var b=new jive.rte.RTEListener();b.doneTogglingMode=function(){if(a._currentMode=="advanced"){a._currentMode="rawhtml"}else{a._currentMode="advanced"}a._refreshLinks();a.emit("toggle",a._currentMode)};this._rte.addListener(b);if(this._preferredMode=="rawhtml"){this._rte.toggleEditorMode("wysiwygtext")}else{if(tinymce.isIE){this._rte.toggleEditorMode();this._rte.toggleEditorMode()}}},_initRTE:function(){var a=this;if(this._rte.isTextOnly()){$j("#wysiwyg-panel").removeClass("loading");this._preferredMode="rawhtml";this._currentMode="rawhtml";return}this._initEditor();this._refreshLinks();setTimeout(function(){a.focus()},0);this.emit("ready")},_createRTE:function(){var b=this;var a={images_enabled:this.images_enabled||false};this._rte=new jive.rte.RTE(jiveControl,"wysiwygtext",this._settingsID,a);window.editor.put("wysiwygtext",this._rte);jive.rte.multiRTE.push("wysiwygtext");var c=new jive.rte.RTEListener();c.initFinished=function(d){b._initRTE()};this._rte.addListener(c)},_getContentBody:function(){if(!this._rteDisabledBrowser){return this._rte.getHTML()}else{return this._container.find("textarea:visible").val()}},_getValues:function(){return{body:this._getContentBody()}},_postHandler:function(){this.emit("post",this._getValues());return false},_addListeners:function(){var a=this;this._formActionContainer.find("[name=post]").click(function(){return a._postHandler()}).end().find("[name=preview]").click(function(){a.emit("preview",a._getValues());return false}).end().find("[name=cancel]").click(function(){a.emit("cancel",a._getValues());a._unload();return false});this._container.find(".toggle_preferred_mode").click(function(){var b=a._currentMode;$j.post(jive.rest.url("/wikiText/preferredEditorMode/"+b)).then(function(){a._preferredMode=b;window.preferredMode=b;a._refreshLinks()});return false}).end().find(".toggle_html").click(function(){a._rte.toggleEditorMode("wysiwygtext");return false});this._unloadCallback=this._unload.bind(this);$j(window).bind("unload",this._unloadCallback)},_unload:(function(){}),_template:(function(){var b={};return function a(f,e){var c=/^[\w\-]+$/.test(f)?b[f]=b[f]||a(document.getElementById(f).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+f.replace(/[\r\t\n]/g," ").replace(/(^|%>)(.+?)(<%|$)/,function(g,h,i,j){return h+d(i)+j}).split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("'")+"');}return p.join('');");return e?c(e):c;function d(g){return g.replace("'","&apos;").replace("\\","\\\\")}}})(),_render:function(){this._container.append(this._template(this._templateName,{body:this._bodyContent}))},_refreshLinks:function(){this._container.find(".toggle_html").toggle(this._currentMode=="rawhtml");this._container.find(".toggle_preferred_mode").toggle(this._preferredMode!=this._currentMode)}});jive.conc.observable(jive.SharedViews.RteView.prototype);return jive.SharedViews.RteView});
;
goog.provide("jive.shared.formwaiting.formWaitingOverlay");jive.shared.formwaiting.formWaitingOverlay=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-js-form-disable jive-form-waiting-disable"><div class="',soy.$$escapeHtml(opt_data.bgCssClass),'"></div></div>');return opt_sb?"":output.toString()};
;
jive.namespace("shared");jive.shared.FormWaitingView=$Class.extend({init:function(a,b){this._$container=$j(a);b=b||{};if(b.containerPadding){this._containerPadding=b.containerPadding}else{this._containerPadding=this._$container.css("padding-left")==null?0:Number(this._$container.css("padding-left").replace("px",""))}this._buttonSelector=b.buttonSelector||"input[type=button], input[type=submit]";this._bgCssClass=b.bgCssClass||"jive-form-waiting-disable-bg"},disableForm:function(){var e=new jive.loader.LoaderView({size:"big"});if(this._$container.find(".jive-js-form-disable").length==0){var c={width:this._$container.innerWidth(),height:this._$container.innerHeight(),left:0,top:0};var d=$j(jive.shared.formwaiting.formWaitingOverlay({bgCssClass:this._bgCssClass}));for(var b in c){d.css(b,c[b]+"px")}d.prependTo(this._$container);var a=e.getContent();e.appendTo(d);a.css("left",(c.width/2-a.width()/2)+"px");a.css("top",(c.height/2-a.height()/2)+"px");this._$container.find(this._buttonSelector).prop("disabled",true)}},enableForm:function(){this._$container.find(".jive-js-form-disable").remove();this._$container.find(this._buttonSelector).prop("disabled",false)},isFormEnabled:function(){return this._$container.find(".jive-js-form-disable").length==0}});define("apps/shared/views/form_waiting_view",function(){return jive.shared.FormWaitingView});
;
goog.provide("jive.CommentApp.soy.outcomeAttachmentMenu");
jive.CommentApp.soy.outcomeAttachmentMenu=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-reply-outcome-action-container js-reply-outcome-action-container" style="display: none;"><a href="#" class="font-color-meta js-reply-outcome-button">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k293d"),[])),' <span class="j-ui-elem j-action-down-arrow"></span></a><div class="js-reply-outcome-badge-container" styles="display: none;"></div></div>');return opt_sb?
"":output.toString()};
;
goog.provide("jive.DiscussionApp.soy.renderReply");goog.provide("jive.DiscussionApp.soy.replyErrorMessage");
jive.DiscussionApp.soy.renderReply=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="addReply jive-js-addReply" style="display:none"><div msgID="',soy.$$escapeHtml(opt_data.messageID),'" class="jive-thread-reply-indent0 jive-reply-add-inline"><div class="jive-thread-reply-indent-shadow"><div class="jive-thread-reply jive-thread-reply-self clearfix"><div class="jive-thread-reply-inline">',opt_data.moderated?'<div id="jive-moderation-box" class="jive-content-moderation-box"><span class="jive-icon-med jive-icon-warn"></span>'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k25fc"),[]))+"</div>":"",'<strong class="font-color-meta">',soy.$$escapeHtml(opt_data.i18n.forumThrdReplyTo),' <span class="replyToName">',soy.$$escapeHtml(opt_data.userName),'</span> <img src="');jive.resource.url({path:"/images/inline-reply-arrow.png"},output);output.append('" alt=""></strong>',opt_data.externallyVisible=="true"?"":"",opt_data.anonymous?'<div class="jive-comment-post-anonymous"><div><input id="reply-author" name="replyGuestName" type="text" required aria-required="true"><label for="reply-author">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20e3"),[]))+'<span class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1208"),[]))+'</span></label></div><div><input id="comment-email" name="replyGuestEmail" type="email" required aria-required="true"><label for="comment-email">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2059"),[]))+'<span class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1209"),[]))+"</span></label></div></div>":
"",'<a class="font-color-meta advEditor" href="javascript:void(0);">',soy.$$escapeHtml(opt_data.i18n.advEditor),"</a>");jive.CommentApp.soy.outcomeAttachmentMenu(null,output);output.append('<p class="jive-discussion-post"></p></div></div></div></div></li>');return opt_sb?"":output.toString()};
jive.DiscussionApp.soy.replyErrorMessage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.key),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.forumThrdNameRequiredText");jive.i18n.keys.forumThrdNameRequiredText=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1f7f"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.forumThrdEmailRequiredText");jive.i18n.keys.forumThrdEmailRequiredText=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1f78"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.postErrPlsEnterBodyText");jive.i18n.keys.postErrPlsEnterBodyText=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2c61"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.globalUnsavedChangesText");jive.i18n.keys.globalUnsavedChangesText=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k218c"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.forumPostSaveAndEditText");jive.i18n.keys.forumPostSaveAndEditText=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1f61"),[])));return opt_sb?"":output.toString()};
;
var form2js=(function(){function e(m,l,n,k,p){if(typeof n=="undefined"||n==null){n=true}if(typeof l=="undefined"||l==null){l="."}if(arguments.length<5){p=false}m=typeof m=="string"?document.getElementById(m):m;var q=[],j,o=0;if(m.constructor==Array||(typeof NodeList!="undefined"&&m.constructor==NodeList)){while(j=m[o++]){q=q.concat(d(j,k,p))}}else{q=d(m,k,p)}return b(q,n,l)}function b(s,A,C){var p={},q={},y,x,w,v,u,r,n,t,o,m,z,D,B;for(y=0;y<s.length;y++){u=s[y].value;if(A&&(u===""||u===null)){continue}D=s[y].name;B=D.split(C);r=[];n=p;t="";for(x=0;x<B.length;x++){z=B[x].split("][");if(z.length>1){for(w=0;w<z.length;w++){if(w==0){z[w]=z[w]+"]"}else{if(w==z.length-1){z[w]="["+z[w]}else{z[w]="["+z[w]+"]"}}m=z[w].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i);if(m){for(v=1;v<m.length;v++){if(m[v]){r.push(m[v])}}}else{r.push(z[w])}}}else{r=r.concat(z)}}for(x=0;x<r.length;x++){z=r[x];if(z.indexOf("[]")>-1&&x==r.length-1){o=z.substr(0,z.indexOf("["));t+=o;if(!n[o]){n[o]=[]}n[o].push(u)}else{if(z.indexOf("[")>-1){o=z.substr(0,z.indexOf("["));m=z.replace(/(^([a-z_]+)?\[)|(\]$)/gi,"");t+="_"+o+"_"+m;if(!q[t]){q[t]={}}if(o!=""&&!n[o]){n[o]=[]}if(x==r.length-1){if(o==""){n.push(u);q[t][m]=n[n.length-1]}else{n[o].push(u);q[t][m]=n[o][n[o].length-1]}}else{if(!q[t][m]){if((/^[a-z_]+\[?/i).test(r[x+1])){n[o].push({})}else{n[o].push([])}q[t][m]=n[o][n[o].length-1]}}n=q[t][m]}else{t+=z;if(x<r.length-1){if(!n[z]){n[z]={}}n=n[z]}else{n[z]=u}}}}}return p}function d(k,j,l){var i=a(k,j,l);return i.length>0?i:g(k,j,l)}function g(k,j,m){var i=[],l=k.firstChild;while(l){i=i.concat(a(l,j,m));l=l.nextSibling}return i}function a(l,j,n){var k,m,i,o=f(l,n);k=j&&j(l);if(k&&k.name){i=[k]}else{if(o!=""&&l.nodeName.match(/INPUT|TEXTAREA/i)){m=c(l);i=[{name:o,value:m}]}else{if(o!=""&&l.nodeName.match(/SELECT/i)){m=c(l);i=[{name:o.replace(/\[\]$/,""),value:m}]}else{i=g(l,j,n)}}}return i}function f(i,j){if(i.name&&i.name!=""){return i.name}else{if(j&&i.id&&i.id!=""){return i.id}else{return""}}}function c(i){if(i.disabled){return null}switch(i.nodeName){case"INPUT":case"TEXTAREA":switch(i.type.toLowerCase()){case"radio":case"checkbox":if(i.checked&&i.value==="true"){return true}if(!i.checked&&i.value==="true"){return false}if(i.checked){return i.value}break;case"button":case"reset":case"submit":case"image":return"";break;default:return i.value;break}break;case"SELECT":return h(i);break;default:break}return null}function h(o){var k=o.multiple,j=[],n,p,m;if(!k){return o.value}for(n=o.getElementsByTagName("option"),p=0,m=n.length;p<m;p++){if(n[p].selected){j.push(n[p].value)}}return j}return e})();var js2form=(function(){var f=/^\[\d+?\]/,j=/^[a-zA-Z_][a-zA-Z_0-9]+/,l=/\[[0-9]+?\]$/,g=/(.*)(\[)([0-9]*)(\])$/,k=/\[([0-9]+)\]\[([0-9]+)\]/g,d=/INPUT|TEXTAREA/i;function h(q,s,m,u,p){if(arguments.length<3){m="."}if(arguments.length<4){u=null}if(arguments.length<5){p=false}var o,r;o=i(s);r=a(q,p,m,{},false);for(var t=0;t<o.length;t++){var v=o[t].name,n=o[t].value;if(typeof r[v]!="undefined"){b(r[v],n)}else{if(typeof r[v.replace(l,"[]")]!="undefined"){b(r[v.replace(l,"[]")],n)}}}}function b(q,p){var o,n,m;if(q instanceof Array){for(n=0;n<q.length;n++){if(q[n].value==p){if(q[n].checked!=true){$j(q[n]).click()}}}}else{if(d.test(q.nodeName)){$j(q).val(p)}else{if(/SELECT/i.test(q.nodeName)){o=q.getElementsByTagName("option");for(n=0,m=o.length;n<m;n++){if(o[n].value==p){o[n].selected=true;if(q.multiple){break}}else{if(!q.multiple){o[n].selected=false}}}}}}}function a(q,p,n,v,r){if(arguments.length<4){v={}}var A={},w=q.firstChild,m,o,y,u,t,s,z;while(w){m="";if(w.name&&w.name!=""){m=w.name}else{if(p&&w.id&&w.id!=""){m=w.id}}if(m==""){var x=a(w,p,n,v,r);for(y in x){if(typeof A[y]=="undefined"){A[y]=x[y]}else{for(u=0;u<x[y].length;u++){A[y].push(x[y][u])}}}}else{if(/SELECT/i.test(w.nodeName)){for(t=0,z=w.getElementsByTagName("option"),s=z.length;t<s;t++){if(r){z[t].selected=false}o=e(m,n,v);A[o]=w}}else{if(/INPUT/i.test(w.nodeName)&&/CHECKBOX|RADIO/i.test(w.type)){if(r){w.checked=false}o=e(m,n,v);o=o.replace(l,"[]");if(!A[o]){A[o]=[]}A[o].push(w)}else{if(r){w.value=""}o=e(m,n,v);A[o]=w}}}w=w.nextSibling}return A}function e(o,p,u){var v=[],n=o.split(p),s,r,q,m,w,t;o=o.replace(k,"[$1].[$2]");for(t=0;t<n.length;t++){s=n[t];v.push(s);r=s.match(g);if(r!=null){q=v.join(p);m=q.replace(g,"$3");q=q.replace(g,"$1");if(typeof(u[q])=="undefined"){u[q]={lastIndex:-1,indexes:{}}}if(m==""||typeof u[q].indexes[m]=="undefined"){u[q].lastIndex++;u[q].indexes[m]=u[q].lastIndex}w=u[q].indexes[m];v[v.length-1]=s.replace(g,"$1$2"+w+"$4")}}q=v.join(p);q=q.replace("].[","][");return q}function i(q,o){var m=[],p,n;if(arguments.length==1){o=0}if(q==null){m=[{name:"",value:null}]}else{if(typeof q=="string"||typeof q=="number"||typeof q=="date"||typeof q=="boolean"){m=[{name:"",value:q}]}else{if(q instanceof Array){for(p=0;p<q.length;p++){n="["+p+"]";m=m.concat(c(q[p],n,o+1))}}else{for(p in q){n=p;m=m.concat(c(q[p],n,o+1))}}}}return m}function c(n,q,p){var t;var m=[],o=i(n,p+1),r,s;for(r=0;r<o.length;r++){t=q;if(f.test(o[r].name)){t+=o[r].name}else{if(j.test(o[r].name)){t+="."+o[r].name}}s={name:t,value:o[r].value};m.push(s)}return m}return h})();(function(a){a.fn.toObject=function(c){var b=[],d={mode:"first",delimiter:".",skipEmpty:true,nodeCallback:null,useIdIfEmptyName:false};if(c){a.extend(d,c)}switch(d.mode){case"first":return form2js(this.get(0),d.delimiter,d.skipEmpty,d.nodeCallback,d.useIdIfEmptyName);break;case"all":this.each(function(){b.push(form2js(this,d.delimiter,d.skipEmpty,d.nodeCallback,d.useIdIfEmptyName))});return b;break;case"combine":return form2js(Array.prototype.slice.call(this),d.delimiter,d.skipEmpty,d.nodeCallback,d.useIdIfEmptyName);break}}})(jQuery);
;
define("apps/shared/models/location_state",function(){if(jive.LocationState&&jive.locationState){return jive.locationState}jive.LocationState=jive.oo.Class.extend(function(a){var b=jQuery;jive.conc.observable(this);a.defaults={supportPushState:true,supportFragment:true};a.init=function(c){var f=b.extend({},this.defaults,c||{}),e=location.href,g=this;this.location=e;this.description="";this.manuallyUpdatingHash=false;this.supportPushState=f.supportPushState&&!!(window.history&&window.history.pushState);this.supportFragment=f.supportFragment;var d=[this.supportPushState?"popstate":null,this.supportFragment?"hashchange":null].filter(function(h){return !!h}).join(" ");b(window).bind(d,function(i){var h=location.href;if(g.afterInit||h!==e){g.location=h;if(!g.manuallyUpdatingHash){g.emitChange(g.current(),g.description,h)}g.manuallyUpdatingHash=false}})};this.get=function(c){return this.current()[c]};this.getState=function(){return this.current()};this.getEphemeralState=function(){return b.deparam.fragment()};a.getPermaState=function(){return b.deparam.querystring()};this.pushState=function(e,c){var d=b.extend(this.current(),e);Object.keys(e).forEach(function(f){if(typeof e[f]=="undefined"||(b.isArray(e[f])&&e[f].length<1)){delete d[f]}});this.setState(d,c)};this.setState=function(g,f,e){var d=this.lastLocation;this.location=this.supportPushState?this.newLocation(g,e):this.newFragment(g,e);this.description=f||"";this.emitChange(g,f,this.location);if(this.location!==d){if(this.supportPushState){try{history.pushState(this.current(),this.description,this.location)}catch(c){window.location=this.location}}else{if(this.supportFragment){this.updateLocationHash(this.location)}}}};this.watchParam=function(d,e){var c=this.getState()[d];this.addListener("change",function(i,h,g){var f=i[d];if(f!==c){e(f,i,h,g);c=f}})};a.current=function(){var e=this.location.match(/\?/)?b.deparam.querystring(this.location):{},d=this.location.match(/#/)?b.deparam.fragment(this.location):{};var f=b.extend({},e,d);var c={};Object.keys(f).forEach(function(g){if(f[g]!==""){c[g]=f[g]}});return c};a.newLocation=function(e,c){var d;if(!c){d=location.href.split(/[?#]/)[0]}else{if(c.slice(0,_jive_base_url.length)===_jive_base_url||c.match(/^[a-z]+:/i)){d=c}else{d=jive.app.url({path:"/"+c.replace(/^\//,"")})}}return b.param.querystring(d,e)};a.newFragment=function(g,e){var c={},f=b.deparam.querystring(),h;h=location.href.split("#")[0];if(e){g.nPLoc=e}Object.keys(f).forEach(function(i){if(typeof g[i]==="undefined"||(b.isArray(g[i])&&g[i].length<1)){c[i]=""}});Object.keys(g).forEach(function(i){if(f[i]!==String(g[i])){c[i]=g[i]}});var d=b.param.fragment(h,c);if(/#[^=&]+=$/.test(d)){d=d.substring(0,d.length-1)}return d};a.emitChange=function(e,d,c){if(c!==this.lastLocation){this.emit("change",e,d,c);this.lastLocation=c;this.afterInit=true}else{this.emit("noChange",e,d,c)}};a.updateLocationHash=function(d){var c=this;function e(){c.preserveScrollPosition(d.split("#")[1],function(){c.manuallyUpdatingHash=true;location.href=d})}if(b.browser.msie&&b.browser.version<8){(this.locationHashTimeouts||[]).forEach(function(f){clearTimeout(f)});this.locationHashTimeouts=[];this.locationHashTimeouts.push(setTimeout(function(){c.locationHashTimeouts.push(setTimeout(e,100))},100))}else{e()}};a.preserveScrollPosition=function(c,e){var d;if(c){d=b(window).scrollTop();e();b(window).scrollTop(d)}else{e()}}});jive.locationState=new jive.LocationState();return jive.locationState});
;
goog.provide("jive.content.draftRecoverButtonLabel");
jive.content.draftRecoverButtonLabel=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span aria-hidden="true" class="j-508-label" id="draft-recover-label-',soy.$$escapeHtml(opt_data.id),'">');jive.shared.soy.i18nHelper({i18nKey:opt_data.subject?soy.$$escapeHtml("k1a24"):soy.$$escapeHtml("k1a25"),arg0:soy.$$escapeHtml(opt_data.modificationDate?_jive_moment(parseFloat(opt_data.modificationDate)?parseFloat(opt_data.modificationDate):opt_data.modificationDate).add(_jive_timezoneoffset*
60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("ll"):""),arg1:soy.$$escapeHtml(function(word,limit){var bits,i;if("string"!==typeof word)return"";bits=word.split("");if(bits.length>limit){for(i=bits.length-1;i>-1;--i)if(i>limit)bits.length=i;else if(" "===bits[i]){bits.length=i;break}bits.push("...")}return bits.join("")}(opt_data.subject,70))},output);output.append("</span>");return opt_sb?"":output.toString()};
;
goog.provide("jive.content.draftDeleteButtonLabel");
jive.content.draftDeleteButtonLabel=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span aria-hidden="true" class="j-508-label" id="draft-delete-label-',soy.$$escapeHtml(opt_data.id),'">');jive.shared.soy.i18nHelper({i18nKey:opt_data.subject?soy.$$escapeHtml("k1a20"):soy.$$escapeHtml("k1a21"),arg0:soy.$$escapeHtml(opt_data.modificationDate?_jive_moment(parseFloat(opt_data.modificationDate)?parseFloat(opt_data.modificationDate):opt_data.modificationDate).add(_jive_timezoneoffset*
60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("ll"):""),arg1:soy.$$escapeHtml(function(word,limit){var bits,i;if("string"!==typeof word)return"";bits=word.split("");if(bits.length>limit){for(i=bits.length-1;i>-1;--i)if(i>limit)bits.length=i;else if(" "===bits[i]){bits.length=i;break}bits.push("...")}return bits.join("")}(opt_data.subject,70))},output);output.append("</span>");return opt_sb?"":output.toString()};
;
goog.provide("jive.content.draft");
jive.content.draft=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-draft" id="draft-',soy.$$escapeHtml(opt_data.id),'"><dl><dt>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1a27"),[])),"</dt><dd>",soy.$$escapeHtml((opt_data.modificationDate?jive.model.DateUtil.parseISODateTime(opt_data.modificationDate):"")?_jive_moment(parseFloat(opt_data.modificationDate?jive.model.DateUtil.parseISODateTime(opt_data.modificationDate):"")?parseFloat(opt_data.modificationDate?
jive.model.DateUtil.parseISODateTime(opt_data.modificationDate):""):opt_data.modificationDate?jive.model.DateUtil.parseISODateTime(opt_data.modificationDate):"").add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("ll"):""),"</dd>",opt_data.subject?"<dt>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2161"),[]))+"</dt><dd>"+soy.$$escapeHtml(function(word,limit){var bits,i;if("string"!==typeof word)return"";bits=word.split("");if(bits.length>limit){for(i=
bits.length-1;i>-1;--i)if(i>limit)bits.length=i;else if(" "===bits[i]){bits.length=i;break}bits.push("...")}return bits.join("")}(opt_data.subject,70))+"</dd>":"",'</dl><button id="draft-recover-button-',soy.$$escapeHtml(opt_data.id),'" class="jive-description use-draft" aria-labelledby="draft-recover-label-',soy.$$escapeHtml(opt_data.id),'" role="button">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1a23"),[])),"</button>");jive.content.draftRecoverButtonLabel(opt_data,output);output.append('<button id="draft-delete-button-',
soy.$$escapeHtml(opt_data.id),'" class="jive-description destroy-draft" aria-labelledby="draft-delete-label-',soy.$$escapeHtml(opt_data.id),'" role="button">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1a1f"),[])),"</button>");jive.content.draftDeleteButtonLabel(opt_data,output);output.append("</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.content.drafts");
jive.content.drafts=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div id="autosave-prompt" class="jive-warn-box" role="alert" aria-live="polite" aria-atomic="true" tabindex="0"><div><p><span class="jive-icon-med jive-icon-warn"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1a22"),[])),"</p>");var draftList6=opt_data.drafts;var draftListLen6=draftList6.length;for(var draftIndex6=0;draftIndex6<draftListLen6;draftIndex6++){var draftData6=draftList6[draftIndex6];
jive.content.draft(draftData6,output)}output.append("</div></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.content.draftlastsaved");jive.content.draftlastsaved=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span class="last-saved">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1a26"),[opt_data.date?_jive_moment(parseFloat(opt_data.date)?parseFloat(opt_data.date):opt_data.date).add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("LT"):""])),"</span>");return opt_sb?"":output.toString()};
;
jive.namespace("draft");define("apps/content/draft/view",["jquery","underscore","apps/shared/views/abstract_view","apps/shared/models/location_state","apps/shared/controllers/switchboard","soy!jive.content.drafts","soy!jive.content.draftlastsaved"],function(e,a,c,g,d,b,f){return c.extend(function(i,k){var l=jQuery,h;var j=false;this.init=function(n){var p;k.init.call(this,n);this.options=l.extend({pushStateEnabled:true},n);h=this;h.locationState=g;h.timeoutId=null;h.rte=h.options.rte;var o=h.getContent();var m=h.serializeForm();o.data("autosave",m);h.emit("display");tinyMCE.activeEditor.onChange.add(function(){h.setActive(true)});p=tinyMCE.activeEditor.onNodeChange.add(function(){h.setActive(true)});tinyMCE.activeEditor.onKeyPress.add(function(){h.setActive(true)});tinyMCE.activeEditor.onClick.add(function(){h.setActive(true)});l(":input").change(function(){h.setActive(true)});l(window).on("beforeunload",function(){h.setActive(false);h.removeFromWorkingDrafts(o.find("#draftID").attr("value"))});l('.j-comment-form input[name="post"]:visible, #submitButton').on("click",function(){if(tinyMCE.activeEditor){tinyMCE.activeEditor.onNodeChange.remove(p)}h.setActive(false)});l('.jive-form-button-cancel, input[name="cancel"]:visible').on("click",function(){tinyMCE.activeEditor.onNodeChange.remove(p);h.setActive(false);h.removeFromWorkingDrafts(o.find("#draftID").attr("value"))});d.addListener("draft.destroy",function(q){h.destroy(q)});h.setActive(true)};this.pause=function(){h.setActive(true)};this.unpause=function(){h.setActive(false)};this.setActive=function(m){h.isActive=m;clearTimeout(h.timeoutId);if(m){h.timeoutId=setTimeout(h.checkIsActive,h.options.interval*1000)}};this.checkIsActive=function(){if(h.isActive){h.save();h.setActive(false)}};this.save=function(){var q=false;var o=function(u,t){if(t==4026||t==403){j=true}};var m=h.serializeForm();if(m.body.length===0){return}var p=h.getContent();var n=p.data("autosave");var s=p.data("lastAttempt");if(s){q=m.body==s.body&&m.subject==s.subject&&JSON.stringify(m.properties)==JSON.stringify(s.properties)}var r=m.body!=n.body||m.subject!=n.subject||JSON.stringify(m.properties)!=JSON.stringify(n.properties);if(!q){j=false}p.data("lastAttempt",m);if(r&&!j){if(n.id){m.id=n.id;h.emitP("save",m,o)}else{h.emitP("create",m,o)}}};i.serializeForm=function(){var n={};var o=h.getContent();var q=o.toObject({mode:"all"})[0];var m=a.find(o.serializeArray(),{name:"publishBar.visibility"});n.objectType=h.options.objectType;n.draftObjectType=h.options.draftObjectType;n.draftObjectID=h.options.draftObjectID;n.subject=l("#"+h.options.subject).val();var p=h.getRTE();if(p&&p.isSpellChecking()){n.body=""}else{n.body=p?p.getHTML():""}n.properties={};l.each(h.options.properties,function(s,r){n.properties[r]=q[r]});l.extend(n.properties.publishBar,{visibility:m&&m.value});return n};i.getRTE=function(){return h.rte?h.rte:window.editor.get(h.options.editorId)};this.saved=function(o,t){try{var s=h.getContent();s.data("autosave",o);h.addToWorkingDrafts(o.id);if(h.options.pushStateEnabled){h.updatePushState(o.id)}h.updateFormDraftID(s,o.id);var p=new Date();var r=l(f({date:p}));var n=l(h.getRTE().getBelowEditorArea());var m=n.find(".last-saved");if(m.length){m.replaceWith(r)}else{r.hide().appendTo(n).fadeIn();h.getRTE().autoReposition()}t.emitSuccess(o)}catch(q){if(t){t.emitError(q)}}};this.display=function(r){var n=h.locationState.getState().draftID;if(n){var q=false;l.each(r,function(t,s){if(s.id==n){h.emit("restore",s);q=true}});if(q){return}}var o=[];l.each(r,function(t,s){if(!h.isWorkingDraft(s.id)){o.push(s)}});if(o.length===0){return}var p=h.getContent();var m=l(b({drafts:o}));m.find(".jive-draft").each(function(s){l(this).data("draft",o[s])});m.hide().insertBefore(p).fadeIn();m.on("click",".use-draft",function(u){var t=l(u.target).closest(".jive-draft");var s=t.data("draft");h.emit("restore",s);d.emit("draft.destroy",s.id)});m.on("click",".destroy-draft",function(u){var t=l(u.target).closest(".jive-draft");var s=t.data("draft");h.emit("destroy",s.id);d.emit("draft.destroy",s.id)});m.focus()};this.restore=function(n){var m=h.getContent();js2form(m[0],n.properties);h.getRTE().setHTML(n.body);l("#"+h.options.subject).val(n.subject);m.trigger("restore",n);h.addToWorkingDrafts(n.id);h.updateFormDraftID(m,n.id);m.data("autosave",n);l("#autosave-prompt").fadeOut(function(){l(this).safeRemove()});if(h.options.pushStateEnabled){h.updatePushState(n.id)}};this.destroy=function(q){var m=l("#autosave-prompt");if(m.length===0){return}var o=l("#draft-"+q);if(o.length===0){return}var p=m.find(".jive-draft").length>1;var n=p?o:m;n.fadeOut(function(){l(this).safeRemove()})};i.updateFormDraftID=function(n,o){var m=n.find("input#draftID");if(m.length===0){m=l("<input />",{id:"draftID",name:"draftID",type:"hidden"});m.appendTo(n)}m.val(o)};i.updatePushState=function(m){h.locationState.pushState({draftID:m})};i.addToWorkingDrafts=function(n){var m=h.getWorkingDrafts();if(!h.isWorkingDraft(n)){m.push(n)}if(typeof(localStorage)!="undefined"){localStorage.setItem("workingDrafts",m)}};i.removeFromWorkingDrafts=function(n){var m=h.getWorkingDrafts();m.splice(m.indexOf(String(n)),1);if(typeof(localStorage)!="undefined"){localStorage.setItem("workingDrafts",m)}};i.isWorkingDraft=function(m){return l.inArray(String(m),h.getWorkingDrafts())>-1};i.getWorkingDrafts=function(){if(typeof(localStorage)=="undefined"){return[]}var m=localStorage.getItem("workingDrafts");return m?m.split(","):[]}})});
;
jive.namespace("draft");define("apps/content/draft/source",["apps/shared/models/rest_service"],function(a){jive.draft.Model=a.extend(function(b){b.resourceType="draft";b.pluralizedResourceType=b.resourceType;this.save=function(c){return this.commonAjaxRequest(new jive.conc.Promise(),"PUT",{url:this.RESOURCE_ENDPOINT+"/"+c.id,contentType:"application/json; charset=utf-8",data:JSON.stringify(c)})};this.create=function(c){return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:this.RESOURCE_ENDPOINT,contentType:"application/json; charset=utf-8",data:JSON.stringify(c)})};this.display=function(c){return this.get(c)}});return jive.draft.Model});
;
jive.namespace("draft");define("apps/content/draft/main",["apps/content/draft/view"],function(a){jive.draft.Main=jive.oo.Class.extend(function(b){this.init=function(c){b.main=this;this.options=$j.extend({enabled:true,interval:10,keepaliveInterval:90,objectType:null,draftObjectType:null,draftObjectID:null,editorId:null,subject:null,images:[],properties:[],confirmationMessage:jive.i18n.keys.globalUnsavedChangesText(),saveMessage:jive.i18n.keys.forumPostSaveAndEditText(),savedMessage:jive.i18n.keys.forumPostSaveAndEditText()},c);c=this.options;this.view=new a(c);this.model=new jive.draft.Model(c);this.view.addListener("keepalive",function(d){var e=b.main.model.get("");e.addListener("error",function(g,f){if(f==403){window.clearInterval(d)}})});this.view.addListener("display",function(d){var e=c.objectType+"/"+c.draftObjectType+"/"+c.draftObjectID;b.main.model.display(e).addCallback(function(f){b.main.view.display(f)})});this.view.addListener("create",function(e,d,f){b.main.model.create(e).addCallback(function(g){b.main.view.saved(g,f)}).addErrback(function(){f.emitError()}).addListener("error",d)});this.view.addListener("save",function(e,d,f){b.main.model.save(e).addCallback(function(g){b.main.view.saved(g,f)}).addErrback(function(){f.emitError()}).addListener("error",d)});this.view.addListener("restore",function(d){b.main.view.restore(d)});this.view.addListener("destroy",function(d){b.main.model.destroy(d).addCallback(function(e){b.main.view.destroy(d)})})};this.pause=function(){b.main.view.pause()};this.unpause=function(){b.main.view.unpause()}});return jive.draft.Main});
;
jive.namespace("CommentApp");define("apps/comment_app/views/form_view",function(){jive.CommentApp.FormView=jive.oo.Class.extend(function(a,b){jive.conc.observable(this);this.init=function(c,d){this._parentCommentID=d.parentCommentID;this._commentMode=d.commentMode;if(!this._postBlock){this._postBlock=$j("#jive-comment-post-block")}this._itemAuthorID="comment-author";this._itemBodyID="commentBody";this._itemEmailID="comment-email";this._itemURLID="comment-url";this._container=$j(c);this._initFormWaitingView(d.i18n);this.rteView=null;this.options=d;this._render()};this.getParentCommentID=function(){return this._parentCommentID};a._initFormWaitingView=function(c){this._formWaitingView=new jive.shared.FormWaitingView(this._container.parents(".jive-js-addReply"),{containerPadding:0})};a.focus=function(){if(this._isAnonymous){$j("#"+this._itemAuthorID).focus()}else{b.focus.call(this)}};a._getValues=function(){return{body:this.rteView.getHTML(),mobileEditor:this.rteView.isMobileOnly(),name:$j("#"+this._itemAuthorID).val(),email:$j("#"+this._itemEmailID).val(),url:$j("#"+this._itemURLID).val(),parentCommentID:this._parentCommentID,commentMode:this._commentMode,outcome:this._container.find(".js-outcome-attachment").data("outcomeType")}};a._postHandler=function(){var c=this;if(c._validateComment()){c._formWaitingView.disableForm();c.emitP("post",c._getValues()).addCallback(function(){c._formWaitingView.enableForm()}).addErrback(function(){c._formWaitingView.enableForm()})}return false};a._validateComment=function(){var c=this._getValues();if(this.options.isAnonymous&&$def(c.name)&&$j.trim(c.name)===""){$j("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:jive.i18n.keys.forumThrdNameRequiredText()})}).message({style:"error"});return false}else{if(this.options.isAnonymous&&$def(c.email)&&$j.trim(c.email)===""){$j("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:jive.i18n.keys.forumThrdEmailRequiredText()})}).message({style:"error"});return false}else{if($j.trim(c.body)===""){$j("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:jive.i18n.keys.postErrPlsEnterBodyText()})}).message({style:"error"});return false}else{return true}}}};a._initFormControls=function(d,c){};a._isEdit=function(){return false};a._render=function(){var e=this._template();var j="wysiwyg_id_"+jive.CommentApp.FormView.id;jive.CommentApp.FormView.id++;e.find("textarea").attr("id",j);this._container.append(e);this._initFormControls(this._container,j);var h=this;var c=new jive.rte.EntitlementService({objectID:h.options.resourceID,objectType:h.options.resourceType,entitlement:"VIEW"});var g=new jive.rte.ImageService({objectId:-1,objectType:-1,containerId:h.options.containerID,containerType:h.options.containerType});var f=$j("#"+j).closest("form");var d=new jive.rte.FormService({$form:f,formSubmitHandler:function(){return h._postHandler()}});var i=$j.extend({$element:$j("#"+j),isEditing:this._isEdit,pinToolbar:false,body_class:"tiny_mce_content jive-widget-formattedtext j-comment-rte",onReady:function(){if(h.options.rteOptions.onReady){h.options.rteOptions.onReady()}jive.conc.nextTick(function(){h.rteView.focus()});if(!h.options.isAnonymous){var k={selector:f,objectType:105,draftObjectType:h.options.resourceType,draftObjectID:h.options.resourceID,editorId:j,pushStateEnabled:false,keepAliveEnabled:h.options.keepAliveEnabled};new jive.draft.Main(k)}},services:{imageService:g,formService:d,entitlementService:c}},this.options.rteOptions);this.rteView=new jive.rte.RTEWrap(i);this._container.find("form").find("[name=cancel]").on("vclick",function(k){h.emit("cancel",h._getValues());k.preventDefault()})};a._template=function(){return $j("<div></div>").html(this._postBlock.html())};this.remove=function(){var c=this.rteView.getID();if(this.rteView){this.rteView.killYourself();this.rteView.destroy()}window.editor.clear(c);jive.rte.multiRTE=jive.rte.multiRTE.filter(function(d){return d!=c});this._container.find("form").parent().html("");$j(window).unbind("unload",this._unloadCallback);this.emit("remove")}});jive.CommentApp.FormView.id=0;return jive.CommentApp.FormView});
;
jive.namespace("CommentApp");jive.CommentApp.EditFormView=jive.CommentApp.FormView.extend(function(a,b){this.init=function(c,d){this._id=d.id;this._postBlock=$j("#jive-comment-edit-block");b.init.call(this,c,d)};a._initFormWaitingView=function(c){this._formWaitingView=new jive.shared.FormWaitingView($j(this._container).parents(".jive-comment-content"),{containerPadding:0})};a._initFormControls=function(h,g){var d=h.find(".jive-comment-rte-source").val();var c=h.find("[name=commentGuestName]").val();var f=h.find("[name=commentGuestEmail]").val();var e=h.find("[name=commentGuestUrl]").val();if(c||f||e){h.find(".jive-comment-rte-source").val();h.find(".jive-comment-post-anonymous [name=name]").val(c);h.find(".jive-comment-post-anonymous [name=email]").val(f);h.find(".jive-comment-post-anonymous [name=url]").val(e);h.find(".jive-comment-post-anonymous").show()}else{h.find(".jive-comment-post-anonymous").hide()}$j("#"+g).val(d)};a._isEdit=function(){return true};a._getValues=function(){return{body:this.rteView.getHTML(),mobileEditor:this.rteView.isMobileOnly(),name:this._container.find("[name=name]").val(),email:this._container.find("[name=email]").val(),url:this._container.find("[name=url]").val(),id:this._id}}});define("apps/comment_app/views/edit_form_view",function(){return jive.CommentApp.EditFormView});
;
jive.namespace("CommentApp");jive.CommentApp.CommentView=function(k,p){jive.conc.observable(this);var m=p.id,h=$j(k),d=p.isThreaded,o=p.i18n,g=this;function e(){h.fadeOut(function(){$j(this).remove()});this.emit("remove",m);return this}function n(q){h.find("[class*=comment-preview]").html(q).fadeIn()}function l(){return h}function i(){h.find(".jive-comment-meta:first, #comment-body-"+m+", .js-comment-footer").hide();h.find(".jive-comment-meta:first").after('<p class="jive-js-edit-title j-editing-comment jive-comment-meta font-color-meta-light">'+o.cmntEditingTitle+"</p>")}function j(){h.find(".jive-comment-meta:first, #comment-body-"+m+", .js-comment-footer").show();h.find(".jive-js-edit-title").remove()}function f(){return m}function c(){return h.find(".jive-username-link:first").text()}function a(q){var r;if(d){r=h.find("ul.jive-comment:first");if(r.length===0){r=$j("<ul/>",{"class":"jive-comment clearfix jive-comment-threaded jive-comment-indent-1"});h.append(r)}r.append(q)}else{h.parent().append(q)}}function b(){var q=h.parents().addBack().filter("ul.jive-comment").toArray();return q.slice(1).reduce(function(s,r){return s+parseInt($j(r).css("margin-left"),10)},0)}this.remove=e;this.displayPreview=n;this.getDOMElement=l;this.getCommentID=f;this.username=c;this.showCommentEdit=i;this.hideCommentEdit=j;this.append=a;this.indent=b};define("apps/comment_app/views/comment_view",function(){return jive.CommentApp.CommentView});
;
jive.namespace("DiscussionApp");jive.DiscussionApp.Discussion=jive.CommentApp.Comment.extend({getFieldProps:function(){var b={};for(var a in this){if(!$j.isFunction(this[a])&&a!="outcome"){b[a]=this[a]}}return b}});define("apps/discussion_app/models/discussion",function(){return jive.DiscussionApp.Discussion});
;
jive.namespace("DiscussionApp");define("apps/discussion_app/models/discussion_rest_source",["apps/shared/models/rest_service"],function(a){jive.DiscussionApp.DiscussionRestSource=a.extend(function(b){b.resourceType="message";b.pluralizedResourceType=b.resourceType;this.createMessage=function(h){var e=this.RESOURCE_ENDPOINT+"/"+h.forumThreadID+"/"+h.ID,d=h.name,c=h.email;delete h.name;delete h.email;var f=$j.deparam.querystring().fromQ?$j.deparam.querystring().fromQ:$j.deparam.fragment().fromQ;if(f){h.fromQuest=f}var g=JSON.stringify(h);if(d){e+="/guest";g={messageBean:h,guestUserName:d,guestUserEmail:c};g=JSON.stringify(g)}return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:e,data:g})}});return jive.DiscussionApp.DiscussionRestSource});
;
jive.namespace("DiscussionApp");jive.DiscussionApp.DiscussionView=function(g){jive.conc.observable(this);var e=$j(g),c=this;function b(){e.fadeOut(function(){$j(this).remove()});c.emit("remove",c.messageID);return c}function d(h){e.find("[class*=discussion-preview]").html(h).fadeIn()}function f(){return e}function a(){var h=e.parents().addBack().filter("li.reply").toArray();return h.slice(1).reduce(function(j,i){var k=$j(i);return j+parseInt(k.css("margin-left"),10)+parseInt(k.css("padding-left"),10)},0)}this.remove=b;this.displayPreview=d;this.getDOMElement=f;this.indent=a;(function(i){var h=e.find("a.discussionAdd");i.entityDescriptor={objectId:h.attr("data-messageID"),objectType:h.attr("data-object-type")};i.messageID=h.attr("data-messageID");i.username=h.attr("data-discussionusername");i.userid=h.attr("data-discussionuserid");i.isReply=(h.attr("data-isReply")||"").toLowerCase()==="true";i.replySubject=h.attr("data-replySubject");i.isAnonymous=(h.attr("data-isAnonymous")||"").toLowerCase()==="true";i.advEditorLnk=h.attr("data-advEditorLnk");i.keepAliveEnabled=h.attr("data-keepAliveEnabled").toLowerCase()==="true"})(this)};define("apps/discussion_app/views/discussion_view",function(){return jive.DiscussionApp.DiscussionView});
;
goog.provide("jive.DiscussionApp.soy.renderReply");
jive.DiscussionApp.soy.renderReply=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="addReply jive-js-addReply" style="display:none"><div msgID="',soy.$$escapeHtml(opt_data.messageID),'" class="jive-thread-reply-indent0 jive-reply-add-inline"><div class="jive-thread-reply-indent-shadow"><div class="jive-thread-reply jive-thread-reply-self clearfix"><div class="jive-thread-reply-inline">',opt_data.moderated?'<div id="jive-moderation-box" class="jive-content-moderation-box"><span class="jive-icon-med jive-icon-warn"></span>'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k25fc"),[]))+"</div>":"",'<strong class="font-color-meta">',soy.$$escapeHtml(opt_data.i18n.forumThrdReplyTo),' <span class="replyToName">',soy.$$escapeHtml(opt_data.userName),'</span> <img src="');jive.resource.url({path:"/images/inline-reply-arrow.png"},output);output.append('" alt=""></strong>',opt_data.externallyVisible=="true"?"":"",opt_data.anonymous?'<div class="jive-comment-post-anonymous"><div><input id="reply-author" name="replyGuestName" type="text" required aria-required="true"><label for="reply-author">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20e3"),[]))+'<span class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1208"),[]))+'</span></label></div><div><input id="comment-email" name="replyGuestEmail" type="email" required aria-required="true"><label for="comment-email">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2059"),[]))+'<span class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1209"),[]))+"</span></label></div></div>":
"",'<a class="font-color-meta advEditor" href="javascript:void(0);">',soy.$$escapeHtml(opt_data.i18n.advEditor),"</a>");jive.CommentApp.soy.outcomeAttachmentMenu(null,output);output.append('<p class="jive-discussion-post"></p></div></div></div></div></li>');return opt_sb?"":output.toString()};
;
goog.provide("jive.CommentApp.soy.outcomeAttachment");
jive.CommentApp.soy.outcomeAttachment=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k15fd"),[]))," ");jive.outcomes.badge.badgeRaw({tagName:"span",outcomeType:String(opt_data.outcomeType.name).toLowerCase(),embedded:true},output);output.append('<a href="#" class="j-remove-outcome js-remove-outcome" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2136"),[])),'"><span class="jive-icon-sml jive-glyph-remove"></span><span class="j-508-label"></span></a></span>');
return opt_sb?"":output.toString()};
;
define("apps/outcomes/replyOutcomeView",["jquery","apps/shared/controllers/localexchange","apps/outcomes/outcomesMain"],function(e,b){function a(g){g.preventDefault();var h=e(this).closest(".js-reply-outcome-action-container");h.find("a.js-reply-outcome-button").show();h.find(".js-reply-outcome-badge-container").hide().children().remove();h.closest(".jive-js-addReply").find(".js-outcome-attachment").removeData("outcomeType").val("")}function f(i,g){g.find("a.js-reply-outcome-button").hide();var h=jive.CommentApp.soy.outcomeAttachment({outcomeType:i});g.find(".js-reply-outcome-badge-container").show().html(h);g.find(".js-remove-outcome").on("click",a);g.find(".js-outcome-attachment").data("outcomeType",i).val(i.name.toLowerCase())}function c(g){return b.emitP("outcome.getDescendantOutcomeTypesForCreate",g)}function d(g,h){return c(h).then(function(i){if(i.length>0){g.find(".js-reply-outcome-action-container").show();g.find(".js-reply-outcome-button").on("click",function(k){k.preventDefault();var l=[];e.each(i,function(m,n){l.push({labelSuffix:n.name.toLowerCase()+".post",actionData:JSON.stringify(n),event:"attachOutcome"})});var j={context:e(this),hoverSelection:true,returnPopover:true};e(jive.outcomes.action.actionMenu({outcomes:l,actions:[]})).on("click","a.js-actionItem",function(n){var o=e(this);var m=o.data("actionData");f(m,g);n.preventDefault();j.closeFunc()}).popover(j)})}})}return d});
;
jive.namespace("DiscussionApp");define("apps/discussion_app/views/discussion_list_view",["jquery","apps/outcomes/replyOutcomeView","apps/shared/controllers/localexchange","apps/shared/views/rte_quote_source"],function(d,b,a,c){jive.DiscussionApp.DiscussionListView=function(x,i){jive.conc.observable(this);var o=this;var g,u,h=this,t=i.i18n,D=0,F,s=1,z=!i.isFinalized||window.location.hash.length>0;function H(){if(window.location.hash){d.scrollTo("a[name='"+window.location.hash.substring(1)+"']")}a.removeListener("heightChanged",H)}a.addListener("heightChanged",H);a.addListener("outcome.expandCollapsedComments",function(){z=true;A()});a.addListener("outcome.collapseComments",function(){z=false;A()});this._getValues=function(){var O={};g.find("[name='mobileEditor'],[name='containerType'],[name='container'],[name='thread'],[name='reply'],[name='message'],[name='postedFromGUIEditor'],[name='subject'],[name^='message.post'],[name='inlinePost'],[name='imageFile']").each(function(){var Q=d(this).attr("name");if((Q in O)){var P=O[Q];O[Q]=[];if(d.isArray(P)){d.each(P,function(R,S){O[Q].push(S)})}else{O[Q].push(P)}O[Q].push(d(this).val())}else{O[Q]=d(this).val()}});var N=g.find("[name='ansQuestion']:checked");if(N.length>0){O.ansQuestion=N.val()}O.outcome=g.find(".js-outcome-attachment").data("outcomeType");return d.extend(O,{body:u.getHTML()})};function M(){return d("<div></div>").html(d("#rte-template").html())}function C(P,S){if(u){console.log("reusing RTE",u);u.setHTML("");u.focus()}else{var T="wysiwygtext"+s;++s;P.append(M());P.find("textarea").attr("id",T);var O=new jive.rte.EntitlementService({objectID:i.resourceID,objectType:i.resourceType,entitlement:"VIEW"});var R=new jive.rte.ImageService({objectId:-1,objectType:-1,containerId:i.containerID,containerType:i.containerType});var Q=new jive.rte.FormService({$form:d("#"+T).closest("form"),formSubmitHandler:function(){l();var Y=d.ajaxSettings.traditional;d.ajaxSettings.traditional=true;var Z=d("#reply-author");var X=Z.val();var W=d("#comment-email");var V=W.val();var aa=o._getValues();if(Z.length>0&&d.trim(X)===""){d("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:jive.i18n.keys.forumThrdNameRequiredText()})}).message({style:"error"});return false}else{if(W.length>0&&d.trim(V)===""){d("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:jive.i18n.keys.forumThrdEmailRequiredText()})}).message({style:"error"});return false}else{if(d.trim(aa.body)===""){d("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:jive.i18n.keys.postErrPlsEnterBodyText()})}).message({style:"error"});return false}else{aa=d.extend(aa,{name:X,email:V})}}}o._formWaitingView.disableForm();h.emit("saveDiscussion",aa,function(){o._formWaitingView.enableForm();d.ajaxSettings.traditional=Y});return false}});var N=d("#reply-author").length>0;var U=d.extend({$element:d("#"+T),isEditing:false,minHeight:242,pinToolbar:false,body_class:"tiny_mce_content jive-widget-formattedtext j-comment-rte",onReady:function(){if(i.rteOptions.onReady){i.rteOptions.onReady()}jive.conc.nextTick(function(){u.focus()});if(!N){var V={selector:g,objectType:105,draftObjectType:i.resourceType,draftObjectID:i.resourceID,editorId:T,pushStateEnabled:false,keepAliveEnabled:S.keepAliveEnabled};new jive.draft.Main(V)}},services:{imageService:R,formService:Q,entitlementService:O}},i.rteOptions);u=new jive.rte.RTEWrap(U);g=U.$element.parents("form");g.find(".jive-form-button-cancel").click(function(){y();u.destroy();u=null});j(S)}g.find("[name=message]").val(S.parentDiscussionID);b(P.closest(".jive-js-addReply"),{type:i.resourceType,id:i.resourceID});d("#"+T).focus();h.emit("formReady",{discussionId:S.resourceID,parentMessageId:S.parentDiscussionID,isReply:S.isReply})}function j(N){o._advEditorLnk=N.advEditorLnk;J().click(function(){f();return false})}function J(){return F.parent().find(".advEditor")}function f(){var N=u.getHTML();if(N!=null&&N.length>0){N="&unsanitaryBody="+encodeURIComponent(N)}o._formWaitingView.disableForm();jive.util.createAndSubmitDynamicForm({url:o._advEditorLnk+N,method:"post"})}function G(N){y();z=true;var O=A();c.trigger("quote:set",N.entityDescriptor);var P=d.extend({parentDiscussionID:N.messageID,advEditorLnk:N.advEditorLnk,isReply:N.isReply,replySubject:N.replySubject,userName:N.username,keepAliveEnabled:N.keepAliveEnabled},i);O.then(function(){var Q=v(N);C(Q,P)})}function L(O){var N=d(O).closest(".jive-thread-message, .j-thread-post, #jive-thread-reply-footer");if(N.length>0){return new jive.DiscussionApp.DiscussionView(N)}else{return null}}function w(){d(".jive-thread-reply-hidden").closest(".reply").css("background-position","left -55px");A();d("#jive-unroll-replies").off("click").on("click",function(N){N.preventDefault();z=true;A()})}function r(){e();w()}function e(){d("#jive-thread-messages-container").off().on("click",".discussionAdd",function(){var N=L(this);G(N);return false})}function n(N){F.find(".jive-js-addReply #post-error-table > #post-error-subject").html(N).show().parent().slideDown()}function E(){n(jive.i18n.sub(t.globalLoginRequired,'<a href="'+encodeURI(window.location).replace(/#.*$/,"")+'">',"</a>"))}function l(){F.find(".jive-js-addReply #post-error-table").slideUp().find("#post-error-subject").html("").hide()}function k(O,N){d("#success-moderation-edit").html('<div><span class="jive-icon-med jive-icon-warn"></span>'+O+"</div>").fadeIn("normal",function(){if(N){d.scrollTo(d("#success-moderation-edit"),"slow",{offset:{top:-20,left:0}})}})}function q(){d("#success-moderation-edit").hide()}function K(N){var P=!N.isReply?F.find("ul.jive-discussion-replies:first > li:last"):N.getDOMElement().closest("li.reply");var Q=true;if(P.length===0&&!N.isReply){P=d('<ul class="jive-discussion-replies jive-discussion-flat jive-discussion-indent-0"/>');F.append(P);Q=false}var O;if(i.isThreaded&&N.isReply){O=P.find("ul.jive-discussion-replies:first > li:last");if(O.length==0){O=d('<ul class="jive-discussion-replies jive-discussion-flat jive-discussion-indent-1"/>');P.append(O);return O}else{return O.parent()}}else{O=Q?P.parent():P;return O}}function v(N){var P=F.find(".jive-js-addReply");if(P.length>0){P.remove();if(u){u.destroy();u=null}}P=d(jive.DiscussionApp.soy.renderReply({userName:N.username,messageID:N.messageID,i18n:t,anonymous:i.isAnonymous,moderated:i.isModerated}));K(N).append(P);var O=N.indent();d(".addReply").css("margin-left",-O+"px");o._formWaitingView=new jive.shared.FormWaitingView(F.find(".jive-js-addReply"),{i18n:i.i18n,containerPadding:O,bgCssClass:"jive-form-waiting-disable-bg-discusssions"});P.fadeIn("fast");d.scrollTo(P,"slow",{offset:{top:-40,left:0}});return P.find(".jive-discussion-post")}function y(){var N=F.find(".jive-js-addReply");var O=N.parent();N.fadeOut("fast",function(){if(O.children().length==0){O.hide()}})}function I(O){u.destroy();u=null;var N=F.find(".jive-content-rating").detach();N.find("script").remove();d.ajax({url:_jive_base_url+"/inline-message.jspa?message="+O.id,async:false,success:function(P){F.closest(".j-column-wrap-l").replaceWith(d(P.trim()));F=d("#jive-thread-messages-container");e();jive.localexchange.emit("renderedContent",F)}});F.find(".jive-content-rating").replaceWith(N);w()}function m(O){O=O||d("<p>").html(i.i18n.postSuccessText);var N=D<=0;k(O.html(),N);D+=1}function B(){z=true;A().then(function(){d("a.localScroll").first().click()})}function p(P){var O=d("#thread-message-"+P+", .js-tlo.js-ed-1-"+P).first(),N=null;if(O.length){N=new jive.DiscussionApp.DiscussionView(O)}G(N)}function A(){if(!!window.location.hash){z=true}if(z){if($j("#jive-rolled-up-replies").is(":visible")){$j("#jive-rolled-up-replies").fadeOut(150,function(){$j("#jive-replies").fadeIn(200)})}}else{if(!$j("#jive-rolled-up-replies").is(":visible")){$j("#jive-replies").fadeOut(200,function(){$j("#jive-rolled-up-replies").fadeIn(150)})}}return d("#jive-rolled-up-replies, #jive-replies").promise()}this.displayError=n;this.displayLoginError=E;this.displaySuccess=k;this.hideSuccess=q;this.scrollToLatestMsg=B;this.redisplayReplies=I;this.displayModeratedMessage=m;this.createReplyTo=p;d(document).ready(function(){F=d(x);r()})};return jive.DiscussionApp.DiscussionListView});
;
goog.provide("jive.discussions.soy.qUnmarkAsCorrect");
jive.discussions.soy.qUnmarkAsCorrect=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<\!-- Unmark as correct --\><div class="jive-thread-reply-btn-correct-unmark jive-reply-unmark',opt_data.question.bridged?"-bridged":"",'" style="display: inline-block;"><a href="#" class="font-color-normal">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.unmarkAsCorrectAnswer),[])),"</a></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.discussions.soy.qMarkAsCorrect");jive.discussions.soy.qMarkAsCorrect=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.question.correctScenarioEnabled?'<div class="jive-thread-reply-btn-correct"><a href="#"><span class="j-correct-btn-star j-ui-elem"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.correctAnswer),[]))+"</a></div>":"");return opt_sb?"":output.toString()};
;
goog.provide("jive.discussions.soy.qCorrectAnswer");jive.discussions.soy.qCorrectAnswer=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span class="thisCorrect" style=""><span class="jive-icon-med jive-icon-discussion-okay"></span><span class="jive-thread-reply-message-correct-label font-color-okay">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.correctAnswer),[])),"</span></span>");return opt_sb?"":output.toString()};
;
goog.provide("jive.discussions.soy.qQuestionNotAnswered");
jive.discussions.soy.qQuestionNotAnswered=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<p class="jive-answer-type jive-answer-type-notanswered font-color-meta" style="">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.questionNotAnswered),[new soydata.VERY_UNSAFE.ordainSanitizedHtml('<strong class="font-color-danger">'),new soydata.VERY_UNSAFE.ordainSanitizedHtml("</strong>")])),opt_data.question.displayMarkAsAssumedAnswered?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.markQuestionAsAssumedAnswered),
[new soydata.VERY_UNSAFE.ordainSanitizedHtml('<em style=""><a href="#">'),opt_data.i18n.leftParen,opt_data.i18n.rightParen,new soydata.VERY_UNSAFE.ordainSanitizedHtml("</a></em>")])):"","</p>");return opt_sb?"":output.toString()};
;
goog.provide("jive.discussions.soy.qQuestionAssumedAnswered");
jive.discussions.soy.qQuestionAssumedAnswered=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<p class="jive-answer-type jive-answer-type-assumedanswered font-color-meta" style="">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.questionAssumedAnswered),[new soydata.VERY_UNSAFE.ordainSanitizedHtml("<strong>"),new soydata.VERY_UNSAFE.ordainSanitizedHtml("</strong>")])),"</p>");return opt_sb?"":output.toString()};
;
goog.provide("jive.discussions.soy.qQuestionResolved");
jive.discussions.soy.qQuestionResolved=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<p class="jive-answer-type jive-answer-type-answered font-color-meta" style="">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.questionAnswered),[new soydata.VERY_UNSAFE.ordainSanitizedHtml('<strong class="font-color-okay">'),new soydata.VERY_UNSAFE.ordainSanitizedHtml("</strong>")])),"</p>");return opt_sb?"":output.toString()};
;
goog.provide("jive.discussions.soy.qDisplayQuestionStateMessage");
jive.discussions.soy.qDisplayQuestionStateMessage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.question.questionState==opt_data.questionStateEnum.open)jive.discussions.soy.qQuestionNotAnswered(opt_data,output);else if(opt_data.question.questionState==opt_data.questionStateEnum.assumed_resolved)jive.discussions.soy.qQuestionAssumedAnswered(opt_data,output);else if(opt_data.question.questionState==opt_data.questionStateEnum.resolved)jive.discussions.soy.qQuestionResolved(opt_data,output);
return opt_sb?"":output.toString()};
;
goog.provide("jive.discussions.soy.qDisplayInlineCorrectAnswer");
jive.discussions.soy.qDisplayInlineCorrectAnswer=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-inline-correct-answer" class="j-rc3">');if(opt_data.question.correctAnswer){output.append('<header class="j-author-block"><span class="j-avatar-container">');jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.question.correctAnswer.user,{size:32}),output);output.append('</span><div class="j-author-info"><strong class="font-color-okay j-line1">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.correctAnswer),
[])),' </strong><span class="font-color-meta j-line2">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.byWord),[]))," ");jive.shared.displayutil.userDisplayNameLink(opt_data.question.correctAnswer.user,output);output.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.onWord),[]))," ",soy.$$escapeHtml(opt_data.question.correctAnswer.modificationDate),"</span></div></header><section>",soy.$$filterNoAutoescape(opt_data.question.correctAnswerHtml),"</section><footer>");
jive.outcomes.helpful.displayHelpfulCounts({objectType:opt_data.question.correctAnswer.objectType,objectId:opt_data.question.correctAnswer.ID,helpfulCount:opt_data.question.correctAnswer.helpfulCount,overallCount:opt_data.question.correctAnswer.helpfulCount+opt_data.question.correctAnswer.unhelpfulCount,displayOverall:opt_data.question.correctAnswer.unhelpfulEnabled},output);output.append('<strong><a href="',opt_data.question.correctAnswer.useFullURL?soy.$$escapeHtml(opt_data.question.correctAnswer.url):
"#"+soy.$$escapeHtml(opt_data.question.correctAnswer.ID),'" class="jive-inline-correct-answer-context-link ',!opt_data.question.correctAnswer.useFullURL?"localScroll":"",'"><span class="jive-icon-sml jive-icon-arrow-generic-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.seeAnswerInContext),[])),"</a></strong></footer>")}else output.append('<span class="font-color-meta"> ',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1f80"),[]))," </span>");output.append("</div>");
return opt_sb?"":output.toString()};
;
goog.provide("jive.discussions.soy.qDisplayInlineAnswers");jive.discussions.soy.qDisplayInlineAnswers=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-answer-rollup"><\!-- Embedded Correct Answer --\>');if(opt_data.question.questionState==opt_data.questionStateEnum.resolved)jive.discussions.soy.qDisplayInlineCorrectAnswer(opt_data,output);output.append("</div>");return opt_sb?"":output.toString()};
;
define("apps/discussion_app/views/question_view",["jive/dispatcher","lib/jiverscripts/src/conc/observable","lib/jiverscripts/src/conc/promise","soy!jive.discussions.soy.qUnmarkAsCorrect","soy!jive.discussions.soy.qMarkAsCorrect","soy!jive.discussions.soy.qCorrectAnswer","soy!jive.discussions.soy.qDisplayQuestionStateMessage","soy!jive.discussions.soy.qDisplayInlineAnswers"],function(c,h,f,d,g,b,e,a){jive.DiscussionApp.QuestionView=jive.oo.Class.extend(function(i){var j={open:"open",resolved:"resolved",assumed_resolved:"assumed_resolved"};h(this);this.init=function(l){var k=this;k.options=l||{};k.i18n=l.i18n||{}};this.getAndRenderQuestion=function(l){var k=this;k.emitP("question.get",l).addCallback(function(m){k.renderQuestion(m)})};this.renderQuestion=function(l){var k=this;k.renderQuestionStateMessage(l);k.renderInlineAnswers(l);k.renderResponses(l)};this.renderResponses=function(l){var k=this;$j(".js-thread-post-wrapper").each(function(){k.renderReply($j(this),l)})};this.renderReply=function(k,l){var n=$j(k).closest("li").data("objectId");var m=parseInt(n,10);this.renderReplyDetails(k,m,l);this.renderAnswerButtons($j(k).find("section"),m,l)};this.renderAnswerButtons=function(q,o,l){var k=this;if(l.canManageQuestionState){var n=$j(q).closest(".j-thread-post").find("header");var m=n.find(".j-dotted-star");var p=$j(q).find(".jive-thread-reply-btn");if(n.find(".j-dotted-star").length==0){n.append('<span class="j-dotted-star j-ui-elem"/>')}if(p.length==0){$j(q.append($j("<div>").addClass("jive-thread-reply-btn clearfix")));p=$j(q).find(".jive-thread-reply-btn")}p.empty();m.unbind();if(l.correctAnswer&&l.questionState=="resolved"&&o==l.correctAnswer.ID){p.append(d({question:l,i18n:k.i18n}));p.find(".jive-thread-reply-btn-correct-unmark").click(function(){k.emitP("question.correct.unmark",l.threadId,o).addCallback(function(r){k.renderQuestion(r);jive.localexchange.emit("discussions.correct_answer.unmarked",l);return false})})}else{if(l.questionState!="resolved"){p.append(g({question:l,i18n:k.i18n}));p.find(".jive-thread-reply-btn-correct").click(function(){k.emitP("question.correct.mark",l.threadId,o).addCallback(function(r){k.renderQuestion(r);jive.localexchange.emit("discussions.correct_answer.marked",l);return false}).addErrback(function(s){var r=JSON.parse(s.responseText).message;$j("<p>"+r+"</p>").message({style:"error"})});return false})}}}};this.renderReplyDetails=function(l,n,m){var k=this;var o=$j(l).closest(".js-thread-post-wrapper");if(m.correctAnswer&&m.questionState=="resolved"&&n==m.correctAnswer.ID){if(!o.is(".j-correct")){o.addClass("j-correct");$j(l).find("header h6").prepend(b({question:m,i18n:k.i18n}));if($j(l).find(".j-correct-star").length<1){$j(l).find("header").append('<a class="j-star j-correct-star j-ui-elem"></a>');$j(l).find(".j-star").addClass("popped")}}}else{o.removeClass("j-correct");o.find(".thisCorrect").remove();o.find(".j-star").remove()}};this.renderQuestionStateMessage=function(l){var k=this;if(l.questionState=="open"){$j(".jive-answer-type-answered").remove();$j(".jive-answer-type-assumedanswered").remove()}else{if(l.questionState=="assumedResolved"){$j(".jive-answer-type-answered").remove();$j(".jive-answer-type-notanswered").remove()}else{$j(".jive-answer-type-assumedanswered").remove();$j(".jive-answer-type-notanswered").remove()}}if(!$j(".js-original-header").find(".jive-answer-type-notanswered").length&&!$j(".js-original-header").find(".jive-answer-type-answered").length){$j(".js-original-header h1").after(e({question:l,questionStateEnum:j,i18n:k.i18n}))}if(l.questionState=="open"){$j(".jive-answer-type-notanswered").find("em").find("a").click(function(){k.emitP("question.assumed_answered.mark",l.threadId).addCallback(function(m){k.renderQuestionStateMessage(m);return false})})}};this.renderInlineAnswers=function(l){var k=this;$j("div.j-answer-rollup").remove();if(!l.threaded){k.processMessageLinksForFlatView(l)}var m=$j(a({question:l,questionStateEnum:j,i18n:k.i18n,currentUserPartner:_jive_current_user.partner}));$j(".j-original-message").append(m);jive.localexchange.emit("renderedContent",m)};i.processMessageLinksForFlatView=function(l){var k=this;if(l.correctAnswer&&!k.messageOnPage(l.correctAnswer.ID)){l.correctAnswer.useFullURL=true}};i.messageOnPage=function(k){return($j("a[name='"+k+"']").length>0)}});return jive.DiscussionApp.QuestionView});
;
jive.namespace("DiscussionApp");define("apps/discussion_app/question_main",["apps/discussion_app/models/question_source","apps/discussion_app/views/question_view","apps/shared/controllers/localexchange","apps/shared/controllers/switchboard"],function(a,b){jive.DiscussionApp.QuestionMain=jive.oo.Class.extend(function(){this.init=function(e){var d=e||{};this.model=new a(d);this.view=new b(d);var c=this;this.view.addListener("question.get",function(g,f){c.model.getQuestion(g).addCallback(f.emitSuccess.bind(f)).addErrback(f.emitError.bind(f))});this.view.addListener("question.assumed_answered.mark",function(g,f){c.model.markAssumedAnswered(g).addCallback(f.emitSuccess.bind(f)).addErrback(f.emitError.bind(f))});this.view.addListener("question.correct.mark",function(h,f,g){c.model.markCorrect(h,f).addCallback(g.emitSuccess.bind(g)).addErrback(g.emitError.bind(g))});this.view.addListener("question.correct.unmark",function(h,f,g){c.model.unmarkCorrect(h,f).addCallback(g.emitSuccess.bind(g)).addErrback(g.emitError.bind(g))})};this.getAndRenderQuestion=function(d){var c=this;c.view.getAndRenderQuestion(d)}});return jive.DiscussionApp.QuestionMain});
;
jive.namespace("DiscussionApp");define("apps/discussion_app/main",["apps/discussion_app/views/discussion_list_view","apps/discussion_app/question_main"],function(a,b){jive.DiscussionApp.Main=function(r){var o=r.resourceID,f=r.resourceType,l=r.resourceVersionID,j=r.listAction,n=r.isModerated,i=r.isThreaded,g=r.sort||"datedesc",q=r.i18n,d,c,e,m,p,k="#jive-thread-messages-container";var h=this;c=new jive.DiscussionApp.DiscussionRestSource(r);e=new a(k,r);p=new jive.Modalizer.Main({});jive.localexchange.addListener("reply.message.edit",function(s){window.location=r.editAction+"?id="+s.id}).addListener("reply.message.delete",function(t,v,w,s){var u=r.deleteAction+"&message="+t.id;p.modalize(u,s)}).addListener("reply.message.create",function(s){e.createReplyTo(s.id)}).addListener("outcome.helpfulCreated",function(){if(r.question){m.getAndRenderQuestion(r.resourceID)}}).addListener("outcome.helpfulDeleted",function(s){if(r.question){m.getAndRenderQuestion(r.resourceID)}});e.addListener("saveDiscussion",function(w,t){var u=new jive.DiscussionApp.Discussion(w),s=this,v=w.outcome;c.createMessage({forumThreadID:u.thread,ID:u.message,subject:u.subject,body:u.body,name:u.name,email:u.email}).addCallback(function(z){e.redisplayReplies(z.content);if(m){m.getAndRenderQuestion(o)}if(v){jive.localexchange.emit("outcome.doAction","outcome.post",{type:z.content.objectType,id:z.content.id},v,$j())}e.scrollToLatestMsg();var A=$j("div#jive-thread-reply-footer");var x=$j("a#jive-link-thread-following");var y=$j("a#jive-link-thread-startFollowing");if(A.exists()){setTimeout(function(){jive.Accessibility.focusIn(A)},100)}else{if(x.exists()){setTimeout(function(){x.focus()},100)}else{if(y.exists()){setTimeout(function(){y.focus()},100)}}}if(z.moderated){e.displayModeratedMessage()}}).addErrback(function(y,x){e.displayError(y);e._formWaitingView.enableForm()})});e.addListener("formReady",function(){});if(r.question){m=new b(r);$j(document).ready(function(){m.getAndRenderQuestion(r.resourceID)})}$j(document).ready(function(){require(["jive.rte"],$j.noop)});this.addDiscussionListViewListener=function(s,t){e.addListener(s,t)}};return jive.DiscussionApp.Main});
;
goog.provide("jive.content.draft");goog.provide("jive.content.draftDeleteButtonLabel");goog.provide("jive.content.draftRecoverButtonLabel");goog.provide("jive.content.draftlastsaved");goog.provide("jive.content.drafts");goog.require("soy");goog.require("soydata");goog.require("soy.StringBuilder");goog.require("jive.shared.soy.i18nHelper");
jive.content.drafts=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div id="autosave-prompt" class="jive-warn-box" role="alert" aria-live="polite" aria-atomic="true" tabindex="0"><div><p><span class="jive-icon-med jive-icon-warn"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1a22"),[])),"</p>");var draftList6=opt_data.drafts;var draftListLen6=draftList6.length;for(var draftIndex6=0;draftIndex6<draftListLen6;draftIndex6++){var draftData6=draftList6[draftIndex6];
jive.content.draft(draftData6,output)}output.append("</div></div>");return opt_sb?"":output.toString()};
jive.content.draftlastsaved=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span class="last-saved">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1a26"),[opt_data.date?_jive_moment(parseFloat(opt_data.date)?parseFloat(opt_data.date):opt_data.date).add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("LT"):""])),"</span>");return opt_sb?"":output.toString()};
jive.content.draft=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-draft" id="draft-',soy.$$escapeHtml(opt_data.id),'"><dl><dt>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1a27"),[])),"</dt><dd>",soy.$$escapeHtml((opt_data.modificationDate?jive.model.DateUtil.parseISODateTime(opt_data.modificationDate):"")?_jive_moment(parseFloat(opt_data.modificationDate?jive.model.DateUtil.parseISODateTime(opt_data.modificationDate):"")?parseFloat(opt_data.modificationDate?
jive.model.DateUtil.parseISODateTime(opt_data.modificationDate):""):opt_data.modificationDate?jive.model.DateUtil.parseISODateTime(opt_data.modificationDate):"").add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("ll"):""),"</dd>",opt_data.subject?"<dt>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2161"),[]))+"</dt><dd>"+soy.$$escapeHtml(function(word,limit){var bits,i;if("string"!==typeof word)return"";bits=word.split("");if(bits.length>limit){for(i=
bits.length-1;i>-1;--i)if(i>limit)bits.length=i;else if(" "===bits[i]){bits.length=i;break}bits.push("...")}return bits.join("")}(opt_data.subject,70))+"</dd>":"",'</dl><button id="draft-recover-button-',soy.$$escapeHtml(opt_data.id),'" class="jive-description use-draft" aria-labelledby="draft-recover-label-',soy.$$escapeHtml(opt_data.id),'" role="button">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1a23"),[])),"</button>");jive.content.draftRecoverButtonLabel(opt_data,output);output.append('<button id="draft-delete-button-',
soy.$$escapeHtml(opt_data.id),'" class="jive-description destroy-draft" aria-labelledby="draft-delete-label-',soy.$$escapeHtml(opt_data.id),'" role="button">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1a1f"),[])),"</button>");jive.content.draftDeleteButtonLabel(opt_data,output);output.append("</div>");return opt_sb?"":output.toString()};
jive.content.draftRecoverButtonLabel=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span aria-hidden="true" class="j-508-label" id="draft-recover-label-',soy.$$escapeHtml(opt_data.id),'">');jive.shared.soy.i18nHelper({i18nKey:opt_data.subject?soy.$$escapeHtml("k1a24"):soy.$$escapeHtml("k1a25"),arg0:soy.$$escapeHtml(opt_data.modificationDate?_jive_moment(parseFloat(opt_data.modificationDate)?parseFloat(opt_data.modificationDate):opt_data.modificationDate).add(_jive_timezoneoffset*
60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("ll"):""),arg1:soy.$$escapeHtml(function(word,limit){var bits,i;if("string"!==typeof word)return"";bits=word.split("");if(bits.length>limit){for(i=bits.length-1;i>-1;--i)if(i>limit)bits.length=i;else if(" "===bits[i]){bits.length=i;break}bits.push("...")}return bits.join("")}(opt_data.subject,70))},output);output.append("</span>");return opt_sb?"":output.toString()};
jive.content.draftDeleteButtonLabel=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span aria-hidden="true" class="j-508-label" id="draft-delete-label-',soy.$$escapeHtml(opt_data.id),'">');jive.shared.soy.i18nHelper({i18nKey:opt_data.subject?soy.$$escapeHtml("k1a20"):soy.$$escapeHtml("k1a21"),arg0:soy.$$escapeHtml(opt_data.modificationDate?_jive_moment(parseFloat(opt_data.modificationDate)?parseFloat(opt_data.modificationDate):opt_data.modificationDate).add(_jive_timezoneoffset*
60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("ll"):""),arg1:soy.$$escapeHtml(function(word,limit){var bits,i;if("string"!==typeof word)return"";bits=word.split("");if(bits.length>limit){for(i=bits.length-1;i>-1;--i)if(i>limit)bits.length=i;else if(" "===bits[i]){bits.length=i;break}bits.push("...")}return bits.join("")}(opt_data.subject,70))},output);output.append("</span>");return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.displayutil.a11yBoundary");goog.provide("jive.shared.displayutil.anonymousAvatar");goog.provide("jive.shared.displayutil.avatar");goog.provide("jive.shared.displayutil.avatarImage");goog.provide("jive.shared.displayutil.avatarLink");goog.provide("jive.shared.displayutil.cardError");goog.provide("jive.shared.displayutil.cardLoading");goog.provide("jive.shared.displayutil.close");goog.provide("jive.shared.displayutil.commaItemList");goog.provide("jive.shared.displayutil.containerDisplayNameLink");
goog.provide("jive.shared.displayutil.coreApiAvatar");goog.provide("jive.shared.displayutil.coreApiUserDisplayName");goog.provide("jive.shared.displayutil.coreApiUserDisplayNameLink");goog.provide("jive.shared.displayutil.groupTypeIcon");goog.provide("jive.shared.displayutil.icon");goog.provide("jive.shared.displayutil.infoBox");goog.provide("jive.shared.displayutil.itemList");goog.provide("jive.shared.displayutil.itemListMore");goog.provide("jive.shared.displayutil.messagePopup");goog.provide("jive.shared.displayutil.plainItemList");
goog.provide("jive.shared.displayutil.remoteUserDisplayNameLink");goog.provide("jive.shared.displayutil.renderAttachmentLink");goog.provide("jive.shared.displayutil.renderGuestDisplayName");goog.provide("jive.shared.displayutil.renderIconElement");goog.provide("jive.shared.displayutil.renderIconElementAttrs");goog.provide("jive.shared.displayutil.userDisplayName");goog.provide("jive.shared.displayutil.userDisplayNameLink");goog.provide("jive.shared.displayutil.userRoleBadgeImage");goog.require("soy");
goog.require("soydata");goog.require("soy.StringBuilder");goog.require("jive.shared.file.fileTypeIconClass");
jive.shared.displayutil.avatar=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var src__soy3=new soy.StringBuilder(opt_data.href?soy.$$escapeHtml(opt_data.href):!opt_data.enabled||!opt_data.visible?"/images/jive-avatar-disabled.png":opt_data.prop&&opt_data.prop.integrationUserInfo&&opt_data.prop.integrationUserInfo.avatar&&!opt_data.forceAvatarID?soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,opt_data.prop.integrationUserInfo.avatar)):opt_data.anonymous?"/people/guest/avatar/"+
soy.$$escapeHtml(opt_data.size)+".png":opt_data.username&&opt_data.avatarID?soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,"/people/"+encodeURIComponent(opt_data.username)+"/avatar/"+opt_data.size+".png",{"a":opt_data.avatarID})):opt_data.username?soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,"/people/"+encodeURIComponent(opt_data.username)+"/avatar/"+opt_data.size+".png")):"/images/jive-avatar-default.png");src__soy3=src__soy3.toString();if(!opt_data.imageOnly&&
!(opt_data.prop&&opt_data.prop.integrationUserInfo)){var param27=new soy.StringBuilder;jive.shared.displayutil.avatarImage(soy.$$augmentMap(opt_data,{src:src__soy3}),param27);jive.shared.displayutil.avatarLink(soy.$$augmentMap(opt_data,{displayName:opt_data.displayName,content:param27.toString()}),output)}else jive.shared.displayutil.avatarImage(soy.$$augmentMap(opt_data,{src:src__soy3}),output);return opt_sb?"":output.toString()};
jive.shared.displayutil.coreApiAvatar=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data,{enabled:opt_data.jive.enabled,visible:opt_data.visible||opt_data.jive.visible,username:opt_data.jive.username,partner:opt_data.jive.externalContributor,size:opt_data.size,uri:opt_data.uri}),output);return opt_sb?"":output.toString()};
jive.shared.displayutil.anonymousAvatar=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.shared.displayutil.avatar({anonymous:true,enabled:true,partner:false,username:"guest",id:0,ID:0,displayName:"",visible:true,prop:null,avatarID:0,size:opt_data.size},output);return opt_sb?"":output.toString()};
jive.shared.displayutil.avatarLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var extraParams___soy56=opt_data.extraParams!=null?opt_data.extraParams:{};var params__soy57=opt_data.trackingID?soy.$$augmentMap({sr:opt_data.trackingID},extraParams___soy56):opt_data.extraParams;var shouldShowUrl__soy58=opt_data.prop&&opt_data.prop.integrationUserInfo&&!opt_data.prop.integrationUserInfo.overrideUrl?true:false;output.append(!opt_data.anonymous&&opt_data.visible?(!opt_data.hideLink&&
!shouldShowUrl__soy58?"<a "+(opt_data.prop&&opt_data.prop.integrationUserInfo?'href="'+soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,opt_data.prop.integrationUserInfo.overrideUrl,params__soy57))+'"':'href="'+soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,"/people/"+encodeURIComponent(opt_data.username),params__soy57))+'"')+'aria-label="'+soy.$$escapeHtml(opt_data.displayName)+'" class="j-avatar '+(opt_data.extraClass?soy.$$escapeHtml(opt_data.extraClass)+
" ":"")+(!opt_data.hideTooltip&&!(opt_data.prop&&opt_data.prop.integrationUserInfo)?" jiveTT-hover-user":"")+(!opt_data.hidePartnerBadge&&!opt_data.currentUserPartner&&opt_data.partner&&opt_data.size>=32?" j-partner":"")+'"'+(!(opt_data.prop&&opt_data.prop.integrationUserInfo)?'data-userId="'+(opt_data.ID?soy.$$escapeHtml(opt_data.ID):soy.$$escapeHtml(opt_data.id))+'"':"")+(opt_data.prop&&opt_data.prop.presence&&!(opt_data.prop&&opt_data.prop.integrationUserInfo)?' data-online="'+soy.$$escapeHtml(opt_data.prop.presence.online)+
'" data-presence="'+soy.$$escapeHtml(opt_data.prop.presence.jsObject)+'" data-externalId="'+(opt_data.prop.presence.userExternalID?soy.$$escapeHtml(opt_data.prop.presence.userExternalID):"")+'"'+(opt_data.avatarID?' data-avatarId="'+soy.$$escapeHtml(opt_data.avatarID)+'"':"")+(opt_data.username&&!(opt_data.prop&&opt_data.prop.integrationUserInfo)?'  data-username="'+soy.$$escapeHtml(encodeURIComponent(opt_data.username))+'"':""):"")+(opt_data.uri?' data-uri="'+soy.$$escapeHtml(opt_data.uri)+'"':"")+
">":"")+(opt_data.content?soy.$$filterNoAutoescape(opt_data.content):"")+(opt_data.enabled?(!opt_data.hidePartnerBadge&&!opt_data.currentUserPartner&&opt_data.partner&&opt_data.size>=32?'<span class="jive-icon-med jive-icon-partner" aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k296b"),[]))+'"></span>':"")+(opt_data.showDisplayName?soy.$$escapeHtml(opt_data.displayName):""):"")+(!opt_data.hideLink&&shouldShowUrl__soy58==false?"</a>":""):opt_data.content?soy.$$filterNoAutoescape(opt_data.content):
"");return opt_sb?"":output.toString()};
jive.shared.displayutil.avatarImage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<img class="jive-avatar" src="',soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,opt_data.src)),'"',opt_data.avatarID?' data-avatarId="'+soy.$$escapeHtml(opt_data.avatarID)+'"':"",opt_data.username?' data-username="'+soy.$$escapeHtml(encodeURIComponent(opt_data.username))+'"':"",!opt_data.hideHeight?' height="'+soy.$$escapeHtml(opt_data.size)+'" data-height="'+
soy.$$escapeHtml(opt_data.size)+'"':"",'width="',soy.$$escapeHtml(opt_data.size),'"',opt_data.storeSizeData?' data-size="'+soy.$$escapeHtml(opt_data.size)+'"':"",!opt_data.anonymous&&opt_data.visible&&opt_data.enabled?' data-random="'+soy.$$escapeHtml(jive.soy.func.randomString())+'"':"",opt_data.style?' style="'+soy.$$escapeHtml(opt_data.style)+'"':"",'alt="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k29ba"),[])),'"',opt_data.displayName?' alt="'+soy.$$escapeHtml(opt_data.displayName)+
'" title="'+soy.$$escapeHtml(opt_data.displayName)+'"':""," />");return opt_sb?"":output.toString()};
jive.shared.displayutil.icon=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.type=="url")output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2067"),[])),'" role=img class="jive-icon-',soy.$$escapeHtml(opt_data.size),' jive-icon-external-site"></span>');else if(opt_data.type=="favorite")output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1ff8"),[])),'" role="img" class="jive-icon-',soy.$$escapeHtml(opt_data.size),
' jive-icon-bookmark"></span>');else if(opt_data.type=="post")output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1ff1"),[])),'" role="img" class="jive-icon-',soy.$$escapeHtml(opt_data.size),' jive-icon-blog"></span>');else if(opt_data.type=="update")output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k215c"),[])),'" role="img" class="jive-icon-',soy.$$escapeHtml(opt_data.size),' jive-icon-status"></span>');else if(opt_data.type==
"dm")output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20d5"),[])),'" role="img" class="jive-icon-',soy.$$escapeHtml(opt_data.size),' jive-icon-direct-message"></span>');else if(opt_data.type=="comment")output.append(opt_data.rootType?opt_data.rootType=="post"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-blog-comment"></span>':opt_data.rootType==
"update"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-status-comment"></span>':opt_data.rootType=="entry"||opt_data.rootType=="file"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-comment"></span>':opt_data.rootType=="dm"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),
[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-direct-message"></span>':opt_data.rootType!="comment"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+" jive-icon-"+soy.$$escapeHtml(opt_data.rootType)+'-comment"></span>':"":opt_data.parentContent&&opt_data.parentContent.type?opt_data.parentContent.type=="post"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),
[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-blog-comment"></span>':opt_data.parentContent.type=="update"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-status-comment"></span>':opt_data.parentContent.type=="entry"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+
' jive-icon-comment"></span>':opt_data.parentContent.type=="dm"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-direct-message"></span>':opt_data.parentContent.type!="comment"?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+" jive-icon-"+soy.$$escapeHtml(opt_data.parentContent.type)+
'-comment"></span>':"":'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-comment"></span>');else if(opt_data.type=="discussion"||opt_data.type=="message")output.append(opt_data.answer?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2047"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-discussion-correct"></span>':opt_data.helpful?
'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2047"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-discussion-helpful"></span>':opt_data.question?'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2047"),[]))+'" role="img" class="jive-icon-'+soy.$$escapeHtml(opt_data.size)+' jive-icon-discussion-question"></span>':'<span aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2047"),[]))+'" role="img" class="jive-icon-'+
soy.$$escapeHtml(opt_data.size)+' jive-icon-discussion"></span>');else if(opt_data.type=="file"){output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2190"),[])),'" class="');if(opt_data.iconCss)output.append("jive-icon-",soy.$$escapeHtml(opt_data.size)," ",soy.$$escapeHtml(opt_data.iconCss));else jive.shared.file.fileTypeIconClass({extension:opt_data.extension,size:opt_data.size,defaultIcon:"jive-icon-document-upload"},output);output.append('"></span>')}else if(opt_data.type==
"person"&&opt_data.jive)if(opt_data.size=="sml")jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data,{username:opt_data.jive.username,size:12,enabled:true,visible:true}),output);else if(opt_data.size=="med")jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data,{username:opt_data.jive.username,size:16,enabled:true,visible:true}),output);else if(opt_data.size=="big")jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data,{username:opt_data.jive.username,size:25,enabled:true,visible:true}),output);
else jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data,{username:opt_data.jive.username,size:opt_data.size,enabled:true,visible:true}),output);else if(opt_data.type=="userregistration")output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2129"),[])),'" role="img" class="jive-icon-med jive-icon-profile"></span>');else if(opt_data.type=="extStreamActivity")output.append('<img aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k43c1"),[])),
'" role="img" class="jive-icon-',soy.$$escapeHtml(opt_data.size),'" alt="" src="',soy.$$escapeHtml(opt_data.productIcon),'"></img>');else if(opt_data.type=="interaction"||opt_data.type=="collaboration")output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2015"),[])),'" role="img" class="jive-icon-',soy.$$escapeHtml(opt_data.size),' jive-icon-direct-message"></span>');else if(opt_data.type=="profileimage")output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2990"),
[])),'" role="img" class="jive-icon-',soy.$$escapeHtml(opt_data.size),' jive-icon-photo"></span>');else if(opt_data.type)output.append('<span aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("global.access.content.type."+opt_data.type)),[])),'" role="img" class="jive-icon-',soy.$$escapeHtml(opt_data.size)," jive-icon-",soy.$$escapeHtml(opt_data.type),'"></span>');return opt_sb?"":output.toString()};
jive.shared.displayutil.cardError=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1e30"),[])));return opt_sb?"":output.toString()};
jive.shared.displayutil.cardLoading=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-card-loading"><strong class="jive-tooltip2-loading">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20ca"),[])),"</strong></div>");return opt_sb?"":output.toString()};
jive.shared.displayutil.userDisplayNameLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var extraParams___soy411=opt_data.extraParams!=null?opt_data.extraParams:{};var params__soy412=opt_data.trackingID?soy.$$augmentMap({sr:opt_data.trackingID},extraParams___soy411):opt_data.extraParams;output.append(opt_data.displayName?!opt_data.anonymous?opt_data.prop&&opt_data.prop.integrationUserInfo&&!opt_data.prop.integrationUserInfo.overrideUrl?'<span class="jive-username-span jive-username-link jive-integration-user '+
(!opt_data.enabled?" jive-user-disabled":"")+" "+(opt_data.extraCss?" "+soy.$$escapeHtml(opt_data.extraCss):"")+'" '+(opt_data.renderInvisible?'style="display:none;"':"")+">"+(opt_data.displayNameOverride?soy.$$escapeHtml(opt_data.displayNameOverride):soy.$$escapeHtml(opt_data.displayName))+"</span>":opt_data.visible?"<a "+(opt_data.prop&&opt_data.prop.integrationUserInfo?'href="'+soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,opt_data.prop.integrationUserInfo.overrideUrl,params__soy412))+
'" class="jive-username-link ':'href="'+soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,"/people/"+encodeURIComponent(opt_data.username),params__soy412))+'" data-username="'+soy.$$escapeHtml(opt_data.username)+'" data-avatarId="'+soy.$$escapeHtml(opt_data.avatarID)+'" data-userId="'+soy.$$escapeHtml(opt_data.id)+'" '+(opt_data.prop&&opt_data.prop.presence&&opt_data.prop.presence.jsObject?'data-online="'+soy.$$escapeHtml(opt_data.prop.presence.online)+'" data-presence="'+soy.$$escapeHtml(opt_data.prop.presence.jsObject)+
'" data-externalId="'+(opt_data.prop.presence.userExternalID?soy.$$escapeHtml(opt_data.prop.presence.userExternalID):"")+'" ':"")+'class="jive-username-link '+(!opt_data.hideTooltip?" jiveTT-hover-user":"")+" ")+(!opt_data.enabled?" jive-user-disabled":"")+" "+(opt_data.extraCss?" "+soy.$$escapeHtml(opt_data.extraCss):"")+'" '+(opt_data.renderInvisible?'style="display:none;"':"")+">"+(opt_data.displayNameOverride?soy.$$escapeHtml(opt_data.displayNameOverride):soy.$$escapeHtml(opt_data.displayName))+
"</a>":'<span class="jive-username-span jive-username-link '+(!opt_data.enabled?" jive-user-disabled":"")+" "+(opt_data.extraCss?" "+soy.$$escapeHtml(opt_data.extraCss):"")+'" '+(opt_data.renderInvisible?'style="display:none;"':"")+">"+(opt_data.displayNameOverride?soy.$$escapeHtml(opt_data.displayNameOverride):soy.$$escapeHtml(opt_data.displayName))+"</span>":'<em class="guest">'+soy.$$escapeHtml(opt_data.displayName)+"</em>":"");return opt_sb?"":output.toString()};
jive.shared.displayutil.coreApiUserDisplayNameLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data,{anonymous:false,enabled:opt_data.jive.enabled,username:opt_data.jive.username,visible:opt_data.jive.visible}),output);return opt_sb?"":output.toString()};
jive.shared.displayutil.remoteUserDisplayNameLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span><img src="',soy.$$escapeHtml(opt_data.avatarUrl),'" width="48" height="48" alt="" class="jive-avatar" /></span><h5>',soy.$$escapeHtml(opt_data.userDisplayName),'</h5><span class="jive-note-user-status">',soy.$$escapeHtml(opt_data.userStatus),'</span><ul class="jive-profile-tt-fields">',opt_data.userPhone?"<li><strong>Phone Number:</strong> "+soy.$$escapeHtml(opt_data.userPhone)+
"</li>":"",opt_data.userEmail?'<li><strong>Email:</strong> <a href="mailto:'+soy.$$escapeHtml(opt_data.userEmail)+'">'+soy.$$escapeHtml(opt_data.userEmail)+"</a></li>":"","</ul>");var extraParams___soy545=opt_data.extraParams!=null?opt_data.extraParams:{};output.append('<p><a href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.profileUrl,extraParams___soy545)),'">View ',soy.$$escapeHtml(opt_data.userDisplayName),"'s profile</a></p>");return opt_sb?"":output.toString()};
jive.shared.displayutil.userDisplayName=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.displayName?!opt_data.anonymous?soy.$$escapeHtml(opt_data.displayName):'<em class="guest">'+soy.$$escapeHtml(opt_data.displayName)+"</em>":"");return opt_sb?"":output.toString()};
jive.shared.displayutil.coreApiUserDisplayName=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.shared.displayutil.userDisplayName(soy.$$augmentMap(opt_data,{anonymous:opt_data.jive.anonymous}),output);return opt_sb?"":output.toString()};
jive.shared.displayutil.renderGuestDisplayName=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.message.displayName?soy.$$escapeHtml(opt_data.message.displayName):opt_data.message.username?soy.$$escapeHtml(opt_data.message.username):opt_data.message.userEmail?soy.$$escapeHtml(opt_data.message.userEmail):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2091"),[])));return opt_sb?"":output.toString()};
jive.shared.displayutil.containerDisplayNameLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.container.jiveObjectURL)),'" class="font-color-meta j-container ',!opt_data.hideTooltip?" jivecontainerTT-hover-container":"",'" data-objectId="',soy.$$escapeHtml(opt_data.container.id),'" data-objectType="',soy.$$escapeHtml(opt_data.container.type),'">',opt_data.container.typeSocialGroup?
soy.$$filterNoAutoescape(opt_data.container.name):opt_data.container.typeUserContainer&&opt_data.container.typeWallEntry?soy.$$filterNoAutoescape(jive.i18n.i18nText(jive.i18n.getMsg("k1d5"),[opt_data.container.userDisplayName])):opt_data.container.typeUserContainer?soy.$$filterNoAutoescape(opt_data.container.userDisplayName):soy.$$filterNoAutoescape(opt_data.container.name),"</a>");return opt_sb?"":output.toString()};
jive.shared.displayutil.groupTypeIcon=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.size?opt_data.size=="med"?"<span aria-label='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("global.group."+opt_data.typeName)),[]))+"' role='img' class=\"jive-icon-med jive-icon-group-"+soy.$$escapeHtml(opt_data.typeName)+'"></span>':opt_data.size=="big"||opt_data.size=="large"?"<span aria-label='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("global.group."+
opt_data.typeName)),[]))+"' role='img' class=\"jive-icon-big jive-icon-group-"+soy.$$escapeHtml(opt_data.typeName)+'"></span>':"<span aria-label='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("global.group."+opt_data.typeName)),[]))+"' role='img' class=\"jive-icon-sml jive-icon-group-"+soy.$$escapeHtml(opt_data.typeName)+'"></span>':"");return opt_sb?"":output.toString()};
jive.shared.displayutil.renderIconElement=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;switch(opt_data.icon.tag){case "img":output.append("<img ");jive.shared.displayutil.renderIconElementAttrs(opt_data.icon,output);output.append("/>");break;case "span":output.append("<span ");jive.shared.displayutil.renderIconElementAttrs({attributeNames:opt_data.icon.attributeNames,attributes:opt_data.icon.attributes,extraAttributes:opt_data.extraAttributes},output);output.append("></span>");
break;case "div":output.append("<div ");jive.shared.displayutil.renderIconElementAttrs(opt_data.icon,output);output.append("></div>");break}return opt_sb?"":output.toString()};
jive.shared.displayutil.renderIconElementAttrs=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var nameList640=opt_data.attributeNames;var nameListLen640=nameList640.length;for(var nameIndex640=0;nameIndex640<nameListLen640;nameIndex640++){var nameData640=nameList640[nameIndex640];output.append(soy.$$escapeHtml(nameData640),'="',soy.$$escapeHtml(opt_data.attributes[nameData640]),opt_data.extraAttributes?" "+soy.$$escapeHtml(opt_data.extraAttributes):"",'" ')}return opt_sb?"":output.toString()};
jive.shared.displayutil.renderAttachmentLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.object.meta&&opt_data.object.meta.length>0&&opt_data.object.meta[0].fullImageUrl?'<a href="'+soy.$$escapeHtml(opt_data.object.meta[0].fullImageUrl)+'" class="jive-icon-med jive-icon-photo" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2f5a"),[]))+'" aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2f5a"),[]))+'"></a>':"");return opt_sb?
"":output.toString()};
jive.shared.displayutil.messagePopup=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-alert-container" role="alert" aria-live="polite" aria-atomic="true"><div class="j-alert j-rc5 j-alert-',soy.$$escapeHtml(opt_data.style)," clearfix ",opt_data.showClose?"j-alert-withbutton":"",'"><span class="j-js-alert-message"></span>');if(opt_data.showClose){output.append('<a href="#" class="j-js-message-popup-close-button j-close-button" ',!opt_data.showCloseAria?
'aria-hidden="true"':"",'><span class="j-508-label">');if(opt_data.closeTitle)output.append(soy.$$escapeHtml(opt_data.closeTitle));else jive.shared.displayutil.close(null,output);output.append('</span><span class="jive-icon-med jive-glyph-delete-white"></span></a>')}output.append("</div></div>");return opt_sb?"":output.toString()};
jive.shared.displayutil.infoBox=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-info-box"><div><span class="jive-icon-med jive-icon-info"></span><strong>',soy.$$escapeHtml(opt_data.message),"</strong></div></div>");return opt_sb?"":output.toString()};jive.shared.displayutil.close=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200e"),[])));return opt_sb?"":output.toString()};
jive.shared.displayutil.a11yBoundary=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span class="j-508-label a11y-boundary">',opt_data.type=="menu"?opt_data.isEnd?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4"),[])):opt_data.isEnd?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1"),[])),"</span>");return opt_sb?"":output.toString()};
jive.shared.displayutil.itemList=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span class="j-item-list js-item-list',opt_data.classNames?" "+soy.$$escapeHtml(opt_data.classNames):"","\" data-items='",soy.$$escapeHtml(JSON.stringify(opt_data.items).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")),"'>");if(!opt_data.items||opt_data.items.length==0);else if(opt_data.items.length<4)jive.shared.displayutil.plainItemList(opt_data,
output);else if(opt_data.items.length==4)output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k232c"),[opt_data.items[0],opt_data.items[1],opt_data.items[2],opt_data.items[3]])));else{output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k232e"),[opt_data.items[0],opt_data.items[1],opt_data.items[2]]))," <",soy.$$escapeHtml(opt_data.tagName?opt_data.tagName:"a")," ");if(opt_data.useTitle){output.append('title="');jive.shared.displayutil.plainItemList({items:opt_data.items.slice(3)},
output);output.append('" ')}output.append('class="j-item-list-more js-item-list-more',opt_data.moreClassNames?" "+soy.$$escapeHtml(opt_data.moreClassNames):"",opt_data.expandable?" js-item-list-showMore":"",'"',!opt_data.tagName?' href="#"':"",">",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2332"),[opt_data.items.length-3])),"</",soy.$$escapeHtml(opt_data.tagName?opt_data.tagName:"a"),">")}output.append("</span>");return opt_sb?"":output.toString()};
jive.shared.displayutil.itemListMore=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.shared.displayutil.plainItemList(opt_data,output);output.append(' <a href="#" class="j-item-list-showFewer js-item-list-showFewer">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2333"),[])),"</a>");return opt_sb?"":output.toString()};
jive.shared.displayutil.plainItemList=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(!opt_data.items||opt_data.items.length==0);else if(opt_data.items.length==1)output.append(soy.$$escapeHtml(opt_data.items[0]));else if(opt_data.items.length==2)output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k232a"),[opt_data.items[0],opt_data.items[1]])));else if(opt_data.items.length==3)output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k232b"),[opt_data.items[0],
opt_data.items[1],opt_data.items[2]])));else{jive.shared.displayutil.commaItemList({items:opt_data.items.slice(0,-3)},output);output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k232d"),[]))," ");jive.shared.displayutil.plainItemList({items:opt_data.items.slice(-3)},output)}return opt_sb?"":output.toString()};
jive.shared.displayutil.commaItemList=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var itemList770=opt_data.items;var itemListLen770=itemList770.length;for(var itemIndex770=0;itemIndex770<itemListLen770;itemIndex770++){var itemData770=itemList770[itemIndex770];output.append(itemIndex770==0?soy.$$escapeHtml(itemData770):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k232d"),[]))+" "+soy.$$escapeHtml(itemData770))}return opt_sb?"":output.toString()};
jive.shared.displayutil.userRoleBadgeImage=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append(opt_data.groupBadgeUri&&opt_data.groupBadgeRoleName?'<img src="'+soy.$$escapeHtml(opt_data.groupBadgeUri)+'" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("rolebadge."+String(opt_data.groupBadgeRoleName).toLowerCase())),[]))+'" alt="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("rolebadge."+
String(opt_data.groupBadgeRoleName).toLowerCase())),[]))+'" height="16" width="16" class="j-role-badge">':"");return opt_sb?"":output.toString()};
;
goog.provide("jive.discussions.soy.qCorrectAnswer");goog.provide("jive.discussions.soy.qDisplayInlineAnswers");goog.provide("jive.discussions.soy.qDisplayInlineCorrectAnswer");goog.provide("jive.discussions.soy.qDisplayQuestionStateMessage");goog.provide("jive.discussions.soy.qMarkAsCorrect");goog.provide("jive.discussions.soy.qQuestionAssumedAnswered");goog.provide("jive.discussions.soy.qQuestionNotAnswered");goog.provide("jive.discussions.soy.qQuestionResolved");goog.provide("jive.discussions.soy.qUnmarkAsCorrect");
goog.require("soy");goog.require("soydata");goog.require("soy.StringBuilder");goog.require("jive.outcomes.helpful.displayHelpfulCounts");goog.require("jive.shared.displayutil.avatar");goog.require("jive.shared.displayutil.userDisplayNameLink");
jive.discussions.soy.qDisplayQuestionStateMessage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.question.questionState==opt_data.questionStateEnum.open)jive.discussions.soy.qQuestionNotAnswered(opt_data,output);else if(opt_data.question.questionState==opt_data.questionStateEnum.assumed_resolved)jive.discussions.soy.qQuestionAssumedAnswered(opt_data,output);else if(opt_data.question.questionState==opt_data.questionStateEnum.resolved)jive.discussions.soy.qQuestionResolved(opt_data,
output);return opt_sb?"":output.toString()};
jive.discussions.soy.qQuestionNotAnswered=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<p class="jive-answer-type jive-answer-type-notanswered font-color-meta" style="">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.questionNotAnswered),[new soydata.VERY_UNSAFE.ordainSanitizedHtml('<strong class="font-color-danger">'),new soydata.VERY_UNSAFE.ordainSanitizedHtml("</strong>")])),opt_data.question.displayMarkAsAssumedAnswered?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.markQuestionAsAssumedAnswered),
[new soydata.VERY_UNSAFE.ordainSanitizedHtml('<em style=""><a href="#">'),opt_data.i18n.leftParen,opt_data.i18n.rightParen,new soydata.VERY_UNSAFE.ordainSanitizedHtml("</a></em>")])):"","</p>");return opt_sb?"":output.toString()};
jive.discussions.soy.qQuestionAssumedAnswered=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<p class="jive-answer-type jive-answer-type-assumedanswered font-color-meta" style="">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.questionAssumedAnswered),[new soydata.VERY_UNSAFE.ordainSanitizedHtml("<strong>"),new soydata.VERY_UNSAFE.ordainSanitizedHtml("</strong>")])),"</p>");return opt_sb?"":output.toString()};
jive.discussions.soy.qQuestionResolved=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<p class="jive-answer-type jive-answer-type-answered font-color-meta" style="">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.questionAnswered),[new soydata.VERY_UNSAFE.ordainSanitizedHtml('<strong class="font-color-okay">'),new soydata.VERY_UNSAFE.ordainSanitizedHtml("</strong>")])),"</p>");return opt_sb?"":output.toString()};
jive.discussions.soy.qMarkAsCorrect=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.question.correctScenarioEnabled?'<div class="jive-thread-reply-btn-correct"><a href="#"><span class="j-correct-btn-star j-ui-elem"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.correctAnswer),[]))+"</a></div>":"");return opt_sb?"":output.toString()};
jive.discussions.soy.qUnmarkAsCorrect=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<\!-- Unmark as correct --\><div class="jive-thread-reply-btn-correct-unmark jive-reply-unmark',opt_data.question.bridged?"-bridged":"",'" style="display: inline-block;"><a href="#" class="font-color-normal">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.unmarkAsCorrectAnswer),[])),"</a></div>");return opt_sb?"":output.toString()};
jive.discussions.soy.qCorrectAnswer=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span class="thisCorrect" style=""><span class="jive-icon-med jive-icon-discussion-okay"></span><span class="jive-thread-reply-message-correct-label font-color-okay">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.correctAnswer),[])),"</span></span>");return opt_sb?"":output.toString()};
jive.discussions.soy.qDisplayInlineAnswers=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-answer-rollup"><\!-- Embedded Correct Answer --\>');if(opt_data.question.questionState==opt_data.questionStateEnum.resolved)jive.discussions.soy.qDisplayInlineCorrectAnswer(opt_data,output);output.append("</div>");return opt_sb?"":output.toString()};
jive.discussions.soy.qDisplayInlineCorrectAnswer=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-inline-correct-answer" class="j-rc3">');if(opt_data.question.correctAnswer){output.append('<header class="j-author-block"><span class="j-avatar-container">');jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.question.correctAnswer.user,{size:32}),output);output.append('</span><div class="j-author-info"><strong class="font-color-okay j-line1">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.correctAnswer),
[])),' </strong><span class="font-color-meta j-line2">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.byWord),[]))," ");jive.shared.displayutil.userDisplayNameLink(opt_data.question.correctAnswer.user,output);output.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.onWord),[]))," ",soy.$$escapeHtml(opt_data.question.correctAnswer.modificationDate),"</span></div></header><section>",soy.$$filterNoAutoescape(opt_data.question.correctAnswerHtml),"</section><footer>");
jive.outcomes.helpful.displayHelpfulCounts({objectType:opt_data.question.correctAnswer.objectType,objectId:opt_data.question.correctAnswer.ID,helpfulCount:opt_data.question.correctAnswer.helpfulCount,overallCount:opt_data.question.correctAnswer.helpfulCount+opt_data.question.correctAnswer.unhelpfulCount,displayOverall:opt_data.question.correctAnswer.unhelpfulEnabled},output);output.append('<strong><a href="',opt_data.question.correctAnswer.useFullURL?soy.$$escapeHtml(opt_data.question.correctAnswer.url):
"#"+soy.$$escapeHtml(opt_data.question.correctAnswer.ID),'" class="jive-inline-correct-answer-context-link ',!opt_data.question.correctAnswer.useFullURL?"localScroll":"",'"><span class="jive-icon-sml jive-icon-arrow-generic-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.seeAnswerInContext),[])),"</a></strong></footer>")}else output.append('<span class="font-color-meta"> ',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1f80"),[]))," </span>");output.append("</div>");
return opt_sb?"":output.toString()};
;
goog.provide("jive.DiscussionApp.soy.renderReply");goog.provide("jive.DiscussionApp.soy.replyErrorMessage");goog.provide("jive.DiscussionApp.soy.rteMsgQuote");goog.require("soy");goog.require("soydata");goog.require("soy.StringBuilder");goog.require("jive.CommentApp.soy.outcomeAttachmentMenu");goog.require("jive.resource.url");goog.require("jive.shared.soy.i18nHelper");
jive.DiscussionApp.soy.renderReply=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="addReply jive-js-addReply" style="display:none"><div msgID="',soy.$$escapeHtml(opt_data.messageID),'" class="jive-thread-reply-indent0 jive-reply-add-inline"><div class="jive-thread-reply-indent-shadow"><div class="jive-thread-reply jive-thread-reply-self clearfix"><div class="jive-thread-reply-inline">',opt_data.moderated?'<div id="jive-moderation-box" class="jive-content-moderation-box"><span class="jive-icon-med jive-icon-warn"></span>'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k25fc"),[]))+"</div>":"",'<strong class="font-color-meta">',soy.$$escapeHtml(opt_data.i18n.forumThrdReplyTo),' <span class="replyToName">',soy.$$escapeHtml(opt_data.userName),'</span> <img src="');jive.resource.url({path:"/images/inline-reply-arrow.png"},output);output.append('" alt=""></strong>',opt_data.externallyVisible=="true"?"":"",opt_data.anonymous?'<div class="jive-comment-post-anonymous"><div><input id="reply-author" name="replyGuestName" type="text" required aria-required="true"><label for="reply-author">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20e3"),[]))+'<span class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1208"),[]))+'</span></label></div><div><input id="comment-email" name="replyGuestEmail" type="email" required aria-required="true"><label for="comment-email">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2059"),[]))+'<span class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1209"),[]))+"</span></label></div></div>":
"",'<a class="font-color-meta advEditor" href="javascript:void(0);">',soy.$$escapeHtml(opt_data.i18n.advEditor),"</a>");jive.CommentApp.soy.outcomeAttachmentMenu(null,output);output.append('<p class="jive-discussion-post"></p></div></div></div></div></li>');return opt_sb?"":output.toString()};
jive.DiscussionApp.soy.replyErrorMessage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.key),[])));return opt_sb?"":output.toString()};
jive.DiscussionApp.soy.rteMsgQuote=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-rendered-content"><blockquote class="jive-quote"><span class="jive-quote-header">');if(opt_data.isAnonymous)output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2c69"),[])));else{output.append("<span>");jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k2c8e"),arg0:'<a href="'+soy.$$escapeHtml(opt_data.author.resources.html.ref)+'" data-object-id="'+
soy.$$escapeHtml(opt_data.author.id)+'" data-object-type="'+soy.$$escapeHtml(opt_data.author.type)+'"></a>',noAutoEscape:"true"},output);output.append("</span>")}output.append("</span><br/><br/>",soy.$$filterNoAutoescape(opt_data.msgBody),"</blockquote></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.formwaiting.formWaitingOverlay");goog.require("soy");goog.require("soydata");goog.require("soy.StringBuilder");jive.shared.formwaiting.formWaitingOverlay=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-js-form-disable jive-form-waiting-disable"><div class="',soy.$$escapeHtml(opt_data.bgCssClass),'"></div></div>');return opt_sb?"":output.toString()};
;
define("apps/shared/models/deferred_rest_service",["jquery"],function(a){return jive.oo.Class.extend(function(b){b.resourceType="abstract";b.displayGenericErrorMessages=true;b.putOnUpdate=false;b.init=function(d){var c=this;this.pluralizedResourceType=this.pluralizedResourceType||this.resourceType+"s";var e=jive.rest.url("/"+this.pluralizedResourceType);this.RESOURCE_ENDPOINT=(d&&d.forceSecure)?jive.secure(e):e;this.POST_RESOURCE_ENDPOINT=this.RESOURCE_ENDPOINT;this.defaultParams={}};this.suppressGenericErrorMessages=function(){this.displayGenericErrorMessages=false};b.commonAjaxRequest=function(j,e,d,h){var g=this,i,c,f;e=e.toUpperCase();if(e=="POST"){f={contentType:"application/json; charset=utf-8"};c=this.errorSaving}else{if(e=="GET"){c=this.errorFinding}else{if(e=="PUT"){f={contentType:"application/json; charset=utf-8"};c=this.errorUpdating}else{if(e=="DELETE"){c=this.errorDestroying}}}}a.ajax(a.extend({type:e,dataType:"json",success:i||function(k,m,l){g.normalizeID(k);j.resolve(k)},error:this.errorCallback(j,c),timeout:30000},f||{},d));return j};this.save=function(d){this.normalizeID(d);var c=this.saveUrl(d);var e=this.saveMethod(d);return this.commonAjaxRequest(new a.Deferred(),e,{url:c,data:JSON.stringify(this.withoutId(d))},d)};this.get=function(f,e){var c=this.RESOURCE_ENDPOINT+"/"+f,d=jQuery.extend({},this.defaultParams,e||{});return this.commonAjaxRequest(new a.Deferred(),"GET",{url:c,data:d})};this.findAll=function(e){var c=this.RESOURCE_ENDPOINT,d=a.extend({},this.defaultParams,e);return this.commonAjaxRequest(new a.Deferred(),"GET",{url:c,data:d})};this.destroy=function(e){var d=new a.Deferred(),c=this;if(e.hasOwnProperty("id")){e=e.id}a.ajax({type:"DELETE",url:this.RESOURCE_ENDPOINT+"/"+e,success:function(){d.emitSuccess()},error:function(f){c.maybeEmitError(d,c.errorDestroying,[null,f&&f.status])},timeout:30000});return d};b.normalizeID=function(c){var d=c?(c.id||c[this.resourceType+"ID"]):null;if(c&&d){c.id=d}};b.unwrapResponse=function(c){if(Object.keys(c).length===1){return c[Object.keys(c)[0]]}else{return c}};b.errorCallback=function(e,c){var d=this;return function(k,l,h){var i,g,f;try{i=JSON.parse(k.responseText)}catch(j){}g=i?i.message:null;f=(i&&i.code)?i.code:k.status;if(l!=="error"||k.status>=100){d.maybeEmitError(e,c,[g,f])}}};b.maybeEmitError=function(e,c,d){if(this.displayGenericErrorMessages){this.displayError(c())}e.reject.apply(e,d)};b.displayError=function(c){a(c).message({style:"error"})};b.errorSaving=function(){return jive.error.rest.soy.errorSaving({href:window.location})};b.errorFinding=function(){return jive.error.rest.soy.errorFinding({href:window.location})};b.errorUpdating=function(){return jive.error.rest.soy.errorUpdating({href:window.location})};b.errorDestroying=function(){return jive.error.rest.soy.errorDestroying({href:window.location})};b.withoutId=function(c){var d={};Object.keys(c).forEach(function(e){if(e!="id"){d[e]=c[e]}});return d};b.saveUrl=function(c){if(c.id){return this.RESOURCE_ENDPOINT+"/"+c.id}else{return this.POST_RESOURCE_ENDPOINT}};b.saveMethod=function(c){if(c.id&&this.putOnUpdate){return"PUT"}else{return"POST"}}})});
;
jive.namespace("GuidedNavigation");define("apps/guided_navigation/models/source",["jquery","underscore","apps/shared/models/deferred_rest_service"],function(d,a,c){var b=c.extend(function(e){this.init=function(){this.RESOURCE_ENDPOINT=jive.app.url({path:"/api/core/v3/tiles/"})};this.fetch=function(g){var f=this.RESOURCE_ENDPOINT+g+"/";return this.commonAjaxRequest(new d.Deferred(),"GET",{url:f})}});return b});
;
goog.provide("jive.guided_navigation.link");
jive.guided_navigation.link=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.action?'<a href="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.action.url))+'" class="j-guided-nav-link">'+(opt_data.navIconPrefix?'<span class="jive-icon-glyph icon-angle-left"></span> ':"")+(opt_data.jiveIconClasses?'<span class="'+soy.$$escapeHtml(opt_data.jiveIconClasses)+'"></span>':"")+'<span class="lnk">'+soy.$$escapeHtml(opt_data.text)+"</span>"+
(opt_data.navIconPostfix?' <span class="jive-icon-glyph icon-angle-right"></span>':"")+"</a>":(opt_data.jiveIconClasses?'<span class="'+soy.$$escapeHtml(opt_data.jiveIconClasses)+'"></span>':"")+soy.$$escapeHtml(opt_data.text));return opt_sb?"":output.toString()};
;
goog.provide("jive.guided_navigation.header");jive.guided_navigation.header=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.guided_navigation.link(soy.$$augmentMap(opt_data.parent,{jiveIconClasses:false}),output);output.append(" / ",soy.$$escapeHtml(opt_data.tileName));return opt_sb?"":output.toString()};
;
goog.provide("jive.guided_navigation.back");jive.guided_navigation.back=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.guided_navigation.link(soy.$$augmentMap(opt_data,{text:jive.i18n.i18nText(jive.i18n.getMsg("k21c3"),[opt_data.text]),jiveIconClasses:false}),output);return opt_sb?"":output.toString()};
;
goog.provide("jive.guided_navigation.section");
jive.guided_navigation.section=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<h4 class="font-color-meta">',soy.$$escapeHtml(opt_data.text),'</h4><ul class="j-icon-list">');var itemList6=opt_data.items;var itemListLen6=itemList6.length;for(var itemIndex6=0;itemIndex6<itemListLen6;itemIndex6++){var itemData6=itemList6[itemIndex6];output.append("<li ",itemData6.isCurrent?'class="j-selected font-color-normal j-current"':"",">");jive.guided_navigation.link(itemData6,
output);output.append("</li>")}output.append("</ul>");return opt_sb?"":output.toString()};
;
goog.provide("jive.guided_navigation.menu");
jive.guided_navigation.menu=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-menu j-guided-nav-menu j-quick-menu j-pop-main js-guided-navigation-menu" style="display: none;">');var sectionList4=opt_data.content;var sectionListLen4=sectionList4.length;for(var sectionIndex4=0;sectionIndex4<sectionListLen4;sectionIndex4++){var sectionData4=sectionList4[sectionIndex4];jive.guided_navigation.section(sectionData4,output)}output.append("</div>");return opt_sb?
"":output.toString()};
;
goog.provide("jive.guided_navigation.navbar");
jive.guided_navigation.navbar=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="prev">');if(opt_data.prev)jive.guided_navigation.link(soy.$$augmentMap(opt_data.prev,{navIconPrefix:true}),output);else jive.guided_navigation.back(soy.$$augmentMap(opt_data.parent,{navIconPrefix:true}),output);output.append('</div><div class="js-menu-action j-gNav-menu">');jive.guided_navigation.menu(opt_data,output);output.append("<a href='#' class='js-list j-guided-nav-link'><span class=\"lnk\">",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k21c4"),
[opt_data.position,opt_data.count])),'</span><span class="j-nav-more jive-icon-glyph icon-arrow-down2"></span></a></div><div class="next">');if(opt_data.next)jive.guided_navigation.link(soy.$$augmentMap(opt_data.next,{navIconPostfix:true}),output);else jive.guided_navigation.back(soy.$$augmentMap(opt_data.parent,{navIconPostfix:true}),output);output.append("</div>");return opt_sb?"":output.toString()};
;
define("apps/guided_navigation/views/view",["jquery","underscore","soy!jive.guided_navigation.header","soy!jive.guided_navigation.navbar"],function(c,b,e,a){function d(g){var f=this;this.options=g;this.$el=g.$el;f.render=function(h){if(this.options.pos<1||this.options.pos>h.aggregate.length){return}this.data=h;this.addHeader();this.addNavBar();this.bindHandlers();this.$el.show()};f.bindHandlers=function(){this.$el.on("click.guided_nav",".js-menu-action",this.showMenu)};f.addHeader=function(){var h=e({parent:this.data.parent,tileName:this.data.title});this.$el.find(".js-header").append(h)};f.addNavBar=function(){var k=this.data.aggregate;var l=parseInt(this.options.pos),i=l-1;var j={parent:this.data.parent,count:k.length,position:l,content:this.data.content,next:i+1<k.length?k[i+1]:false,prev:i-1>=0?k[i-1]:false};var h=a(j);this.$el.find(".js-navbar").append(h)};f.showMenu=function(h){h.preventDefault();c(".js-guided-navigation-menu").popover({context:c(this),darkPopover:true,destroyOnClose:false,hoverSelection:true})}}return d});
;
jive.namespace("GuidedNavigation");define("apps/guided_navigation/main",["jquery","underscore","apps/guided_navigation/models/source","apps/guided_navigation/views/view","apps/guided_navigation/helper"],function(c,a,e,d,b){jive.GuidedNavigation.Main=jive.oo.Class.extend(function(f){f.init=function(h){var g=this;this.options=h=a.extend({$el:c(".js-guided-nav")},b.getNav());if(!h.id||!h.pos){return}this.model=new e();this.view=new d(h);this.model.fetch(h.id).done(function(i){var j=g.processTile(i);g.view.render(j)}).fail(function(){console.log("failed to retrieve navigation bar for ID: "+h.tileID)})};f.processTile=function(i){var g=this;var j=1;var h=[];a.each(i.data.content,function(k){a.each(k.items,function(l){l.isCurrent=(g.options.pos==j);if(l.action){l.action.url=b.processURL(l.action.url,j,i.id)}h.push(l);j++})});return a.extend({aggregate:h},i.data)}});return jive.GuidedNavigation.Main});
;
jive.namespace("MoreLikeThisApp");jive.MoreLikeThisApp.MoreLikeThisSource=function(){var c=jive.rest.url("/morelikethis");function b(d){if(typeof d=="function"){d={success:d}}return d}function a(d,h,g,f){f=b(f);var e=c+"/"+d+"/"+h+"/type/"+d+"?numResults="+g;$j.ajax({type:"GET",url:e,dataType:"json",success:function(i){if(typeof f.success=="function"){f.success.call(i,i.morelikethisresultobject)}},error:function(i){if(typeof f.error=="function"){f.error.call(i)}}});return this}this.getMoreLike=a};define("apps/morelikethis/model/morelikethis_source",function(){return jive.MoreLikeThisApp.MoreLikeThisSource});
;
jive.namespace("MoreLikeThisApp");jive.MoreLikeThisApp.MoreLikeThisView=function(i,j){var c=j.noContentMessage,g=j.errorMessage,e="#"+i;function b(l){var k="";if(l.length>0){k+='<ul class="j-icon-list">';l.forEach(function(m){var n;if(a(m.objectType)){n=jive.shared.displayutil.containerDisplayNameLink({container:f(m)})}else{n='<a href="'+_jive_base_url+m.objectURL+'"><span class="'+m.objectClass+'"></span>'+m.subject+"</a>"}k+="<li>"+n+"</li>"});k+="</ul>"}else{k="<p>"+c+"</p>"}$j(e).empty().append(k)}var h=[3,2020,14,600,700];function f(k){return{jiveObjectURL:k.objectURL,id:k.ID,type:k.objectType,name:'<span class="'+k.objectClass+'"></span>'+k.subject}}function a(k){return $j.inArray(k,h)!=-1}function d(){$j(e).empty().append("<p>"+g+"</p>")}this.setContent=b;this.displayError=d};define("apps/morelikethis/views/morelikethis_view",function(){return jive.MoreLikeThisApp.MoreLikeThisView});
;
jive.namespace("MoreLikeThisApp");jive.MoreLikeThisApp.Main=function(d){var b=d.objectType,h=d.objectID,a=d.containerID,e=d.numResults||5,g,f;function c(){f.getMoreLike(b,h,e,{success:function(i){g.setContent(i)},error:function(){g.displayError()}})}g=new jive.MoreLikeThisApp.MoreLikeThisView(a,{noContentMessage:d.noContentMessage,errorMessage:d.errorMessage});f=new jive.MoreLikeThisApp.MoreLikeThisSource();$j(document).ready(function(){c()})};define("apps/morelikethis/main",function(){return jive.MoreLikeThisApp.Main});
;
goog.provide("jive.apps.alerts.renderDevError");
jive.apps.alerts.renderDevError=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<p><a href='javascript:;' onclick=\"$j('#j-dev-err-msg-",soy.$$escapeHtml(opt_data.appId),'\').show();">Click here for more info</a></p><div id="j-dev-err-msg-',soy.$$escapeHtml(opt_data.appId),'" class="j-app-error-message"  style="display:none"><p>',soy.$$escapeHtml(opt_data.errorMessage),"</p><a href='javascript:;' onclick=\"$j('#j-dev-err-msg-",soy.$$escapeHtml(opt_data.appId),"').hide();\">Hide this message</a></div>");
return opt_sb?"":output.toString()};
;
goog.provide("jive.apps.alerts.renderAppHalt");
jive.apps.alerts.renderAppHalt=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;switch(opt_data.code){case 401:output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke53"),[])),'</p><button class="j-error-msg-configure-credentials-app-btn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke54"),[])),"</button></div>");break;case 10404:output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke5b"),
[])),"</p>");if(opt_data.errorMessage)jive.apps.alerts.renderDevError(opt_data,output);output.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke5c"),[])),'</p><button class="j-error-msg-refresh-app-btn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke5a"),[])),"</button></div>");break;case 10500:output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke49"),[])),"</p>");if(!opt_data.fromExtension){output.append("<ul><li><strong>",
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke4a"),[])),"</strong> ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke4b"),[])),"</li></ul>");if(opt_data.errorMessage)jive.apps.alerts.renderDevError(opt_data,output);output.append('<button class="j-error-msg-delete-app-btn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke4d"),[])),'</button><button class="j-error-msg-refresh-app-btn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke5a"),[])),"</button>")}output.append("</div>");
break;case 6E3:output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke4c"),[])),"</p>");if(opt_data.message)jive.apps.alerts.renderDevError({appId:opt_data.appId,errorMessage:opt_data.message},output);output.append('<button class="j-error-msg-refresh-app-btn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke5a"),[])),"</button></div>");break;case 1E3:output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span>',
opt_data.modifier&&opt_data.modifier=="configurationError"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke36"),[])):"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke50"),[]))+'</p><button class="j-error-msg-configure-app-btn">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke51"),[]))+"</button>","</div>");break;case 1010:output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span>',opt_data.modifier&&opt_data.modifier=="configurationError"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke36"),
[])):"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke52"),[]))+'</p><button class="j-error-msg-configure-app-btn">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke51"),[]))+"</button>","</div>");break;case 2010:output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("kdf7"),[])),"</p><ul><li><strong>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("kdf9"),[])),"</strong> ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("kdfa"),
[])),'</li></ul><p><a class="j-launch-market-faq" href="javascript:;">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("kdfd"),[])),'</a>.</p><button class="j-error-msg-delete-app-btn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke4d"),[])),"</button></div>");break;case 2020:output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("kdfe"),[opt_data.creator])),"</p><ul><li><strong>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke00"),
[])),"</strong> ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke01"),[])),'</li></ul><p><a class="j-launch-market-faq" href="javascript:;">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke04"),[])),'</a>.</p><button class="j-error-msg-delete-app-btn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke4d"),[])),"</button></div>");break;case 2040:output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke0b"),
[])),'</p><button class="j-error-msg-remove-subscription-expired-app-btn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke83"),[])),"</button></div>");break;case 2050:output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke0a"),[])),"</p>",opt_data.message?"<p><b>"+soy.$$escapeHtml(opt_data.message)+"</b></p>":"",!opt_data.fromExtension?'<div><button class="j-error-msg-delete-app-btn">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke4d"),
[]))+'</button><button class="j-error-msg-app-more-info-btn">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke4f"),[]))+"</button></div>":"","</div>");break;case 2060:output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><h3>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke55"),[])),'</h3><div class="j-oauth-grant"><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke59"),[])),'</p><button class="j-error-msg-grant-oauth-access-btn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke57"),
[])),'</button></div><div class="j-oauth-authorize"><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke56"),[])),'</p><button class="j-error-msg-granted-oauth-access-btn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke58"),[])),'</button><button class="j-error-msg-oauth-approved-btn" style="display:none"></button></div></div>');break;case 5010:output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke0e"),
[])),'</p><button class="j-error-msg-remove-throttle-violation-btn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke09"),[])),"</button></div>");break;case 5020:output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke08"),[])),'</p><button class="j-error-msg-delete-app-btn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke05"),[])),'</button><button class="j-error-msg-purchase-app-btn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke07"),
[])),"</button></div>");break;default:output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke18"),[])),"(",soy.$$escapeHtml(opt_data.code),")</p>",opt_data.message?"<p>"+soy.$$escapeHtml(opt_data.message)+"</p>":"");if(opt_data.errorMessage)jive.apps.alerts.renderDevError(opt_data,output);output.append("</div>")}return opt_sb?"":output.toString()};
;
define("jive/app/configure/views/validate",["jquery"],function(a){return jive.AbstractView.extend(function(b){this.init=function(d,c,e){this.serviceBlock=d;this.errorOptions=c;this.invalidFields=e};this.work=function(){var c=this;this.serviceBlock.find(".j-service-error").removeClass("j-service-error");var d=this.serviceBlock.find("INPUT.j-service-radio:visible");if(d.filter(":checked").length==0){this.errorOptions.missing_endpoint=true;d.each(function(){c.invalidFields.push(this)})}this.serviceBlock.find("INPUT.j-service-credential:visible").each(function(){var e=a.trim(a(this).val());a(this).val(e);if(!e){c.errorOptions.missing_credential=true;c.invalidFields.push(this)}});this.serviceBlock.find("textarea.j-service-credential:visible").each(function(){var e=a.trim(a(this).val());a(this).val(e);if(!e){c.errorOptions.missing_credential=true;c.invalidFields.push(this)}})}})});
;
goog.provide("jive.apps.configure.renderAppDataErrorMessage");
jive.apps.configure.renderAppDataErrorMessage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var messageKeyList3=opt_data.messageKeys;var messageKeyListLen3=messageKeyList3.length;for(var messageKeyIndex3=0;messageKeyIndex3<messageKeyListLen3;messageKeyIndex3++){var messageKeyData3=messageKeyList3[messageKeyIndex3];output.append('<span class="error-message">');switch(messageKeyData3){case "configure.success":output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke43"),[])));
break;case "configure.cancel":output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke2d"),[])));break;case "configure.cancel.not.changed":output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke2e"),[])));break;case "configure.noneed":output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke3a"),[])));break;case "credentials.cancel":output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke2f"),[])));break;case "credentials.success":output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke32"),
[])));break;case "credentials.fail":output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke30"),[])));break;case "missing.endpoint":output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke35"),[])));break;case "missing.credential":output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke34"),[])));break;case "permissions.acceptance":output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke63"),[])));break;case "install.error":output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke62"),
[])));break;default:output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1e30"),[])))}output.append("</span>")}return opt_sb?"":output.toString()};
;
define("jive/app/configure/views/error",["jquery"],function(a){return jive.oo.Class.extend(function(b){b.init=function(){};this.clear=function(){a("#jive-modal-app-configure-feedback").hide()};this.render=function(d){if(d==null){return}var c=[];if(d.missing_endpoint){c.push("missing.endpoint")}if(d.missing_credential){c.push("missing.credential")}if(c.length==0){c.push("error.general")}if(c.length<1){this.clear();return}try{a("#jive-modal-app-configure-feedback").show().html(jive.apps.configure.renderAppDataErrorMessage(c))}catch(f){}};this.fieldsToVisualMarkers=function(c){return(a(c).map(function(){var d=a(this);return d.hasClass("j-service-radio")?d.parent()[0]:this})).addClass("j-service-error")}})});
;
goog.provide("jive.apps.container.renderMessage");jive.apps.container.renderMessage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<span>",soy.$$escapeHtml(opt_data.message),"</span>");return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.appframeworkAppConfigureSuccess");jive.i18n.keys.appframeworkAppConfigureSuccess=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke43"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.appframeworkAppConfigureFailure");jive.i18n.keys.appframeworkAppConfigureFailure=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke36"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.apps.container.blockingAlertView");
jive.apps.container.blockingAlertView=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div id="app-blocking-alert-container" class="j-app-modal-content j-pop-main j-app-alert"><div id="app-blocking-alert-detail"></div><div class="j-modal-footer"><button id="j-app-blocking-alert-submit" type="submit" class="j-btn-callout">Submit</button><button id="j-app-blocking-alert-cancel" type="submit" class="j-btn-global">Cancel</button></div></div>');return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.appframeworkAppDevelopmentRefresh");jive.i18n.keys.appframeworkAppDevelopmentRefresh=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke45"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.appframeworkAppConfigureCancel");jive.i18n.keys.appframeworkAppConfigureCancel=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke2d"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.errorGeneral");jive.i18n.keys.errorGeneral=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1e30"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.apps.configure.renderConfigureAppNotNeeded");jive.apps.configure.renderConfigureAppNotNeeded=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<section class="clearfix"><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke3e"),[])),"</p></section>");return opt_sb?"":output.toString()};
;
goog.provide("jive.apps.configure.renderServicesSection");
jive.apps.configure.renderServicesSection=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<section class="app-services-section"><h3 class="j-app-config-header font-color-normal">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke41"),[])),'</h3><ul class="ul-sections">');var serviceList6=opt_data.configureAppView.serviceView;var serviceListLen6=serviceList6.length;for(var serviceIndex6=0;serviceIndex6<serviceListLen6;serviceIndex6++){var serviceData6=serviceList6[serviceIndex6];
if(opt_data.configureAppView.configured&&serviceData6.serviceOptionView.length<2||!opt_data.configureAppView.configured&&serviceData6.selected)output.append('<li class="j-service-block-alert" data-serviceid="',soy.$$escapeHtml(serviceData6.selectedService.serviceID),'" data-alias="',soy.$$escapeHtml(serviceData6.selectedService.alias),'"><p><img alt="" src="',soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,"/images/jaf/j-icon-service-generic.png")),'" class="jaf-icon-svc" > ',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke2b"),[])),"&nbsp;<b>",soy.$$escapeHtml(serviceData6.name),"</b>&nbsp;",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke29"),[])),"</p></li>");else{output.append('<li class="j-service-block-alert"><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke27"),[])),"&nbsp;",soy.$$escapeHtml(serviceData6.serviceOptionView.length),"&nbsp;",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke28"),[])),"&nbsp; <b>",soy.$$escapeHtml(serviceData6.name),
"</b>.&nbsp;",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke2a"),[])),"</p><div>");var serviceOptionViewList35=serviceData6.serviceOptionView;var serviceOptionViewListLen35=serviceOptionViewList35.length;for(var serviceOptionViewIndex35=0;serviceOptionViewIndex35<serviceOptionViewListLen35;serviceOptionViewIndex35++){var serviceOptionViewData35=serviceOptionViewList35[serviceOptionViewIndex35];output.append('<p class="j-form-row"><input type="radio" name="service-',soy.$$escapeHtml(serviceOptionViewData35.optionGroupID),
'" value="',soy.$$escapeHtml(serviceOptionViewData35.serviceID),'" class="j-service-radio" data-serviceid="',soy.$$escapeHtml(serviceOptionViewData35.serviceID),'" data-alias="',soy.$$escapeHtml(serviceOptionViewData35.alias),'" data-optionid="',soy.$$escapeHtml(serviceOptionViewData35.optionID),'" data-optiongroupid="',soy.$$escapeHtml(serviceOptionViewData35.optionGroupID),'" id="j-service-',soy.$$escapeHtml(serviceOptionViewData35.optionID),'"',serviceData6.selectedService&&serviceData6.selectedService.serviceID==
serviceOptionViewData35.serviceID?" checked":"",'><label for="j-service-',soy.$$escapeHtml(serviceOptionViewData35.optionID),'"><img alt="" src="',soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,"/images/jaf/j-icon-service-generic.png")),'" class="jaf-icon-svc" > ',soy.$$escapeHtml(serviceOptionViewData35.name),"</label></p>")}output.append("</div></li>")}}output.append("</ul></section>");return opt_sb?"":output.toString()};
;
goog.provide("jive.apps.configure.renderConfigureApp");
jive.apps.configure.renderConfigureApp=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<section class="clearfix">');if(opt_data.configureAppView.cannotConfigure)output.append('<div class="jaf-cannot-configure j-rc4"><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke36"),[])),"</p></div>");else{output.append('<div id="jive-modal-app-configure-feedback" style="display:none; color:red;"></div>');if(opt_data.configureAppView.requiresServices)jive.apps.configure.renderServicesSection(opt_data,output)}output.append("</section>");
return opt_sb?"":output.toString()};
;
define("jive/app/configure/views/serviceblocks",["jquery"],function(a){return jive.AbstractView.extend(function(b){this.init=function(){this.blocks=a(".app-services-section .j-service-block-alert")};this.validate=function(c){return c(this.blocks)};this.get_services=function(){var c=[];this.blocks.each(function(){var e=a(this).attr("data-serviceid");if(e){c.push({serviceID:e,alias:a(this).attr("data-alias")})}else{var d=a(this).find("input.j-service-radio:checked");if(d){c.push({serviceID:d.attr("data-serviceid"),alias:d.attr("data-alias")})}}});return c}})});
;
define("jive/app/configure/views/configure_view",["jquery","jive/app/configure/views/serviceblocks","jive/app/configure/views/validate","jive/app/configure/views/error"],function(c,a,d,b){return jive.AbstractView.extend(function(e){this.init=function(g,h,f){this.instanceAppID=g.instanceAppID;this.configSetupData=h;this.configSetupData.app=g;if(h.requiresServices){this.content=c(jive.apps.configure.renderConfigureApp({configureAppView:h}));f.html("");f.append(this.content);c("#app-config-save").focus();this.bindClickEvents()}else{this.content=c(jive.apps.configure.renderConfigureAppNotNeeded());f.html("");f.append(this.content)}};e.bindClickEvents=function(){var f=this;var g=this.content;f.emit("app.service.wire.cancel",{callback:function(){f.emit("app.cancel_configuration")}});f.emit("app.service.wire.submit",{callback:function(){var h=new a();var j=h.validate(f.validate);if(j){var i=h.get_services();f.emit("app.save_configuration",i)}}});g.find(".j-service-radio").each(function(){var h=c(this).attr("data-optiongroupid");var i=c(this).attr("data-optionid");c(this).click(function(){c(".j-service-credentials[data-optiongroupid="+h+"]").hide();c(".j-service-credentials[data-optionid="+i+"]").show()})})};e.validate=function(g){var i=new b();i.clear();var f={};var h=[];g.find(".j-service-error").removeClass("j-service-error");g.each(function(){var j=new d(c(this),f,h);j.work()});if(h.length){i.render(f);i.fieldsToVisualMarkers(h)}return h.length==0}})});
;
define("jive/app/configure/models/configure_model",["jquery"],function(a){return jive.oo.Class.extend(function(b){jive.conc.observable(this);b.init=function(){};this.persist_configuration=function(c){var d=this;a.ajax({type:"PUT",url:jive.api.apps("instances/"),data:JSON.stringify(c),contentType:"application/json",dataType:"json",success:function(e){d.emit("app.configure.success")},error:function(e){d.emit("app.configure.failed")}})};this.get_configuration_data=function(e){var c=this;var d=jive.api.apps("instances/"+e+"/config_setup");a.getJSON(d,function(f){c.emit("app.got.configure.data",f)})}})});
;
define("jive/app/configure/main",["jive/app/configure/views/configure_view","jive/app/configure/models/configure_model"],function(a,b){return jive.oo.Class.extend(function(c){jive.conc.observable(this);c.init=function(e){var d=this;var f=e.app;this.domTarget=e.domTarget;this.instanceAppID=f.instanceAppID;this.model=new b();this.model.addListener("app.got.configure.data",function(g){d.configureView=new a(f,g,d.domTarget);d.configureView.addListener("app.save_configuration",function(i){var h={instanceAppID:d.instanceAppID,services:i};d.model.persist_configuration(h)});d.configureView.addListener("app.cancel_configuration",function(){d.emit("app.configure.cancel",d.instanceAppID)});d.configureView.addListener("app.service.wire.submit",function(h){d.emit("app.service.wire.submit",h)});d.configureView.addListener("app.service.wire.cancel",function(h){d.emit("app.service.wire.cancel",h)})});this.model.get_configuration_data(this.instanceAppID);this.model.addListener("app.configure.success",function(){d.emit("app.configure.success",d.instanceAppID)});this.model.addListener("app.configure.failed",function(){d.emit("app.configure.failed",d.instanceAppID)})}})});
;
define("jive/app/placepicker/main",function(){return jive.oo.Class.extend(function(a){a.init=function(c){var b=this;this.personalContainerTitleKey=c.personalContainerTitleKey;this.personalContainerCaptionKey=c.personalContainerCaptionKey;this.searchPlaceholderKey=c.searchPlaceholderKey;this.closeOnSelect=true;var d={closeOnSelect:this.closeOnSelect,filterGroup:"appPlacePicker",personalContainerTitleKey:b.personalContainerTitleKey,personalContainerCaptionKey:b.personalContainerCaptionKey,searchPlaceholderKey:b.searchPlaceholderKey,containerType:c.containerType,pickerContext:"app",filterByContainer:(c.containerType)?true:false,objectType:c.contentType};if(c.contentType!=38){d.allowedContainerIds=c.containerType}this.placePicker=new jive.Placepicker.Main(d)};this.showPicker=function(c){var b=this;b.placePicker.showPicker();b.placePicker.addListener("container",function(d){c(d);b.placePicker.removeListener("container")})}})});
;
define("jive/app/alert/views/blocking_alert_view",["jquery"],function(a){return jive.oo.Class.extend(function(b){jive.conc.observable(this);b.init=function(c){this.app=c};this.applyBlockingAlert=function(c,e){var d=this.prepareBlockingAlertHtml(this.app,e);a(c).append(d);return d};b.prepareBlockingAlertHtml=function(e,i){var d;var g=this;var k=e.id;var f="";var j=null;if(i){switch(i.code){case 1000:case 1010:if(e.configurationError){f="configurationError"}d=function(l,m){m.find(".j-error-msg-configure-app-btn").click(function(){g.emit("app.block",{type:"app.launch.config",app:e})})};break;case 2010:d=function(l,m){m.find(".j-error-msg-remove-banned-app-btn").click(function(){g.emit("app.block",{type:"app.remove.banned",app:e})});m.find(".j-error-msg-delete-app-btn").click(function(){g.emit("app.block",{type:"app.delete",app:e})});m.find(".j-launch-market-faq").click(function(){j=window.open(window._jive_base_url+"/apps/market/marketfaq/"+e.appUUID,"marketfaq","resizable=yes,scrollbars=yes");if(j){j.focus()}})};break;case 2020:d=function(l,m){m.find(".j-error-msg-remove-blacklisted-app-btn").click(function(){g.emit("app.block",{type:"app.remove.blacklisted",app:e})});m.find(".j-error-msg-delete-app-btn").click(function(){g.emit("app.block",{type:"app.delete",app:e})});m.find(".j-launch-market-faq").click(function(){j=window.open(window._jive_base_url+"/apps/market/marketfaq/"+e.appUUID,"marketfaq","resizable=yes,scrollbars=yes");if(j){j.focus()}})};break;case 2040:d=function(l,m){m.find(".j-error-msg-remove-subscription-expired-app-btn").click(function(){g.emit("app.block",{type:"app.launch.account",app:e})});m.find(".j-visit-app-market-link").click(function(){j=window.open(window._jive_base_url+"/apps/market/marketfaq/"+e.appUUID,"marketfaq","resizable=yes,scrollbars=yes");if(j){j.focus()}})};break;case 2050:d=function(l,m){m.find(".j-error-msg-app-more-info-btn").click(function(){j=window.open(window._jive_base_url+"/apps/market/marketfaq/"+e.appUUID,"marketfaq","resizable=yes,scrollbars=yes");if(j){j.focus()}});m.find(".j-error-msg-delete-app-btn").click(function(){g.emit("app.block",{type:"app.delete",app:e})})};break;case 5010:d=function(l,m){m.find(".j-error-msg-remove-throttle-violation-btn").click(function(){g.emit("app.block",{type:"app.remove.throttle.violation",app:e})});m.find(".j-why-apps-may-be-suspended").click(function(){j=window.open(window._jive_base_url+"/apps/market/marketfaq/"+e.appUUID,"marketfaq","resizable=yes,scrollbars=yes");if(j){j.focus()}})};break;case 5020:d=function(l,m){m.find(".j-error-msg-delete-app-btn").click(function(){g.emit("app.block",{type:"app.delete",app:e})});m.find(".j-error-msg-purchase-app-btn").click(function(){g.emit("app.block",{type:"app.launch.market",app:e})})};break;case 10404:d=function(l,m){m.find(".j-error-msg-refresh-app-btn").click(function(){g.emit("app.block",{type:"app.refresh",app:e})})};break;case 10500:d=function(l,m){m.find(".j-error-msg-delete-app-btn").click(function(){g.emit("app.block",{type:"app.delete",app:e})});m.find(".j-error-msg-refresh-app-btn").click(function(){g.emit("app.block",{type:"app.refresh",app:e})})};break;case 6000:break}}if(!d){d=function(l,m){m.find(".j-error-msg-refresh-app-btn").click(function(){g.emit("app.block",{type:"app.refresh",app:e})})}}var h={code:i.code,modifier:f,message:i.message,creator:i.creator,errorMessage:i.errorMessage,fromExtension:i.fromExtension,iconSrc:e.iconSrc,appTitle:e.title};var c=a(jive.apps.alerts.renderAppHalt(h));d(this,c);return c}})});
;
define("jive/app/alert/main",["jive/app/alert/views/blocking_alert_view"],function(a){return jive.oo.Class.extend(function(b){jive.conc.observable(this);b.init=function(d,c){this.app=d;this.targetDomElement=c;this.blockingAlerts=this.app.blockingAlerts};this.hasBlockingAlerts=function(){return this.blockingAlerts.length>0};this.getApp=function(){return this.app};this.getActiveAlert=function(){return this.hasBlockingAlerts?this.blockingAlerts[0]:false};this.applyBlock=function(e,h,g){h=h||this.app;e=e?e:this.targetDomElement;if(!e){return}g=g||this.getActiveAlert();if(!g){return}var d=this;var c=new a(h);var f=c.applyBlockingAlert(e,g);c.addListener("app.block",function(i){d.emit("app.block",i)});return f};this.routeActionClicks=function(h,i,d,g,f){if(h.type=="app.launch.config"){i(this)}else{if(h.type=="app.launch.market"||h.type=="launch.market.app.profile"){window.location=window._jive_base_url+"/apps/market/marketapp/"+h.app.appUUID}else{if(h.type=="launch.market.faq"){var e=window.open(window._jive_base_url+"/apps/market/marketfaq/"+h.app.appUUID,"marketfaq","resizable=yes,scrollbars=yes");if(e){e.focus()}}else{if(h.type=="app.launch.account"){window.location=window._jive_base_url+"/apps/market/marketuser/"+h.app.appUUID}else{var c=function(){};var j=function(){};if(h.type=="app.remove.banned"||h.type=="app.remove.blacklisted"||h.type=="app.delete"||h.type=="app.hide"){c=d;j=g}f.emit(h.type,h.app,c,j)}}}}}})});
;
goog.provide("jive.autosearch.contentItemDetail");
jive.autosearch.contentItemDetail=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.shared.displayutil.icon(soy.$$augmentMap(opt_data.item,{size:"med"}),output);output.append(opt_data.item.subject?'<span class="result-title lnk">'+soy.$$escapeHtml(opt_data.item.subject).replace(/&amp;#160;/g,"&#160;").replace(/&amp;#nbsp;/g,"&#160;").replace(/&amp;/g,"&")+'</span><span class="j-508-label">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k233a"),[jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("global.access.content.type."+
opt_data.item.type)),[])]))+"</span>":opt_data.item.parentContent&&opt_data.item.parentContent.name?'<span class="result-title lnk">'+soy.$$escapeHtml(opt_data.item.parentContent.name)+'</span><span class="j-508-label">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k233a"),[jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("global.access.content.type."+opt_data.item.parentContent.type)),[])]))+"</span>":"",opt_data.item.author?' <em class="font-color-normal">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k34aa"),
[opt_data.item.author.displayName,opt_data.item.updatedDate?_jive_moment(parseFloat(opt_data.item.updatedDate)?parseFloat(opt_data.item.updatedDate):opt_data.item.updatedDate).add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("ll"):""]))+"</em>":"",opt_data.item.displayExternalAccess?'<span class="j-browse-external-access"><em>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2968"),[]))+"</em></span>":"");return opt_sb?"":output.toString()};
;
goog.provide("jive.autosearch.contentItem");
jive.autosearch.contentItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a class="j-result-bookmark ',opt_data.item.promotedResult?"j-search-promoted-result-container":"",'"');if(opt_data.item.resources&&opt_data.item.resources.html)if(opt_data.item.uuid&&opt_data.item.index)if((opt_data.item.resources.html.ref.match(new RegExp("#",""))||[]).length>0){var parts__soy14=opt_data.item.resources.html.ref.split(new RegExp("#",""));output.append('href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(parts__soy14[0])),
"?sr=search&searchId=",soy.$$escapeUri(opt_data.item.uuid),"&searchIndex=",soy.$$escapeUri(opt_data.item.index),parts__soy14.length>1?"#"+soy.$$escapeHtmlAttribute(parts__soy14[1]):"",'">')}else output.append('href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.item.resources.html.ref)),"?sr=search&searchId=",soy.$$escapeUri(opt_data.item.uuid),"&searchIndex=",soy.$$escapeUri(opt_data.item.index),'">');else output.append('href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.item.resources.html.ref)),
'">');else output.append(">");output.append(opt_data.item.promotedResult?'<span class="j-search-promoted-result-label">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3438"),[]))+"</span>":"");if(opt_data.item.type=="favorite"){output.append('<span data-id="',soy.$$escapeHtmlAttribute(opt_data.item.id),'" class="j-remove-mark jive-icon-glyph icon-bookmark" data-component="button" data-command="remove"></span>');if(opt_data.item.favoriteObject.type=="url")jive.autosearch.contentItemDetail(opt_data,
output);else jive.autosearch.contentItemDetail({item:opt_data.item.favoriteObject},output)}else jive.autosearch.contentItemDetail(opt_data,output);output.append("</a>");return opt_sb?"":output.toString()};
;
goog.provide("jive.autosearch.peopleItem");
jive.autosearch.peopleItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.item.resources.html.ref)),'">');jive.shared.displayutil.avatar({enabled:true,username:opt_data.item.jive.username,id:null,displayName:opt_data.item.displayName,visible:true,prop:null,avatarID:opt_data.item.thumbnailId,size:24,hideTooltip:true,hideLink:true},output);output.append(opt_data.item.mentionName?'<span class="result-title lnk">'+
soy.$$escapeHtml(opt_data.item.mentionName)+"</span>":'<span class="result-title lnk">'+soy.$$escapeHtml(opt_data.item.displayName)+"</span>",'<span class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2195"),[])),"</span>",opt_data.item.title||opt_data.item.department?' <em class="font-color-normal">'+(opt_data.item.title&&opt_data.item.department?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k345a"),[opt_data.item.title,opt_data.item.department])):opt_data.item.title?
soy.$$escapeHtml(opt_data.item.title):opt_data.item.department?soy.$$escapeHtml(opt_data.item.department):"")+"</em>":"",opt_data.item.displayExternalContributor?'<span class="font-color-meta-light j-browse-external-access"><em>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k296b"),[]))+"</em></span>":"","</a>");return opt_sb?"":output.toString()};
;
goog.provide("jive.autosearch.placeItem");
jive.autosearch.placeItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.item.resources&&opt_data.item.resources.html){if(opt_data.item.uuid&&opt_data.item.index)if((opt_data.item.resources.html.ref.match(new RegExp("#",""))||[]).length>0){var parts__soy9=opt_data.item.resources.html.ref.split(new RegExp("#",""));output.append('<a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(parts__soy9[0])),"?sr=search&searchId=",soy.$$escapeUri(opt_data.item.uuid),"&searchIndex=",
soy.$$escapeUri(opt_data.item.index),parts__soy9.length>1?"#"+soy.$$escapeHtmlAttribute(parts__soy9[1]):"",'">')}else output.append('<a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.item.resources.html.ref)),"?sr=search&searchId=",soy.$$escapeUri(opt_data.item.uuid),"&searchIndex=",soy.$$escapeUri(opt_data.item.index),'">');else output.append('<a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.item.resources.html.ref)),'">');output.append(opt_data.item.type==
"page"&&opt_data.item.parentPlace?'<span class="jive-icon-med jive-icon-'+soy.$$escapeHtmlAttribute(opt_data.item.parentPlace.type)+'"></span><span class="result-title lnk">'+soy.$$escapeHtml(opt_data.item.parentPlace.name)+"&nbsp;-&nbsp;"+soy.$$escapeHtml(opt_data.item.name)+"</span>":'<span class="jive-icon-med jive-icon-'+soy.$$escapeHtmlAttribute(opt_data.item.type)+'"></span><span class="result-title lnk">'+soy.$$escapeHtml(opt_data.item.name)+"</span>",'<span class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k233a"),
[jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("global."+opt_data.item.type)),[])])),"</span>",opt_data.item.displayExternalAccess?'<span class="font-color-meta-light j-browse-external-access"><em>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2968"),[]))+"</em></span>":"","</a>")}return opt_sb?"":output.toString()};
;
goog.provide("jive.autosearch.resultList");
jive.autosearch.resultList=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var itemList3=opt_data.list;var itemListLen3=itemList3.length;for(var itemIndex3=0;itemIndex3<itemListLen3;itemIndex3++){var itemData3=itemList3[itemIndex3];output.append('<li data-component="listitem" class="j-listitem ',opt_data.max&&itemIndex3>=opt_data.max?"j-inactive":""," ",opt_data.type=="people"?"j-listitem-people":"",'" role="option" data-type="',soy.$$escapeHtmlAttribute(itemData3.type),'" data-id="',
soy.$$escapeHtmlAttribute(itemData3.id),'">');switch(opt_data.type){case "content":jive.autosearch.contentItem({item:itemData3},output);break;case "people":jive.autosearch.peopleItem({item:itemData3},output);break;case "places":jive.autosearch.placeItem({item:itemData3},output);break}output.append("</li>")}return opt_sb?"":output.toString()};
;
goog.provide("jive.autosearch.showMoreAccessibleLabel");
jive.autosearch.showMoreAccessibleLabel=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span class="j-508-label lnk" id="',soy.$$escapeHtmlAttribute(opt_data.type),'-show-more-label">',opt_data.type=="places"?opt_data.numMoreResults==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k348b"),[opt_data.numMoreResults])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k348a"),[opt_data.numMoreResults])):opt_data.type=="people"?opt_data.numMoreResults==1?
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3489"),[opt_data.numMoreResults])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3488"),[opt_data.numMoreResults])):opt_data.numMoreResults==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3487"),[opt_data.numMoreResults])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3486"),[opt_data.numMoreResults])),"</span>");return opt_sb?"":output.toString()};
;
goog.provide("jive.autosearch.resultSection");
jive.autosearch.resultSection=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<ul aria-labelledby="header_',soy.$$escapeHtmlAttribute(opt_data.type),'" aria-live="polite" role="listbox" class="',opt_data.type=="people"?"j-avatar-list ":"",'j-icon-list">');jive.autosearch.resultList(opt_data,output);output.append(opt_data.view=="bookmarks"?'<li class="j-listitem moreResults font-color-meta" data-component="listitem" role="option"><a class="more all noIcon" href="'+soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,
"/bookmarks"))+'"><span class="lnk">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k340d"),[]))+'</span><span class="jive-icon-glyph icon-arrow-right2 inlineIcon"></span></a></li>':opt_data.view=="all"||opt_data.view=="filtered"?'<li class="j-listitem moreResults'+(opt_data.max&&opt_data.list.length>opt_data.max?" j-inactive":"")+' font-color-meta" data-component="listitem" role="option"><a class="more all noIcon" href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,
"/search.jspa")))+"?q="+soy.$$escapeUri(opt_data.searchTerm)+"&facet="+soy.$$escapeUri(opt_data.type)+(opt_data.view=="filtered"?"&"+soy.$$escapeUri(opt_data.filterType)+"="+soy.$$escapeUri(opt_data.filter):"")+'" ><span class="lnk">'+(opt_data.type=="places"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3462"),[]))+(opt_data.filterDisplayName?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k345e"),[opt_data.filterDisplayName])):""):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("search.results.all."+
opt_data.type+".link")),[]))+(opt_data.filterDisplayName?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k345e"),[opt_data.filterDisplayName])):""))+'</span><span class="jive-icon-glyph icon-arrow-right2 inlineIcon"></span></a></li>':opt_data.view=="recent"?'<li class="j-listitem moreResults'+(opt_data.max&&opt_data.list.length>opt_data.max?" j-inactive":"")+' font-color-meta" data-component="listitem" role="option"><a class="more all noIcon" href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,
"/"+opt_data.type)))+"?filterID=historyarchetype%5B"+(opt_data.type=="places"?"containers":soy.$$escapeUri(opt_data.type))+'%5D" ><span class="lnk">'+(opt_data.type=="places"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3412"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("search.history.recent."+opt_data.type+".link")),[])))+'</span><span class="jive-icon-glyph icon-arrow-right2 inlineIcon"></span></a></li>':"");if(opt_data.view!="bookmarks"&&opt_data.max&&
opt_data.list.length>opt_data.max){output.append('<li class="j-listitem moreResults font-color-meta" data-component="listitem" role="option"><a href="#" class="more noIcon" data-component="button" data-command="more"><span role="presentation" aria-hidden="true" class="lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3485"),[opt_data.list.length-opt_data.max])),'</span><span role="img" class="jive-icon-glyph icon-arrow-down2 inlineIcon" aria-hidden="true"></span>');jive.autosearch.showMoreAccessibleLabel({type:opt_data.type,
numMoreResults:opt_data.list.length-opt_data.max},output);output.append("</a></li>")}output.append("</ul>");return opt_sb?"":output.toString()};
;
define("jive/app/core_container/views/appscontainer_view",["jive/app/configure/main","jive/app/placepicker/main","jive/app/alert/main","osapi"],function(a,d,c,b){return jive.AbstractView.extend(function(e){jive.conc.observable(this);var f={};this.getEmbeddedContext=function(g){return f[g]};this.setEmbeddedContext=function(g,h){f[g]=h};this.deleteEmbeddedContext=function(g){delete f[g]};this.prepareMarketContext=function(g){f["market-app"]={target:{type:"embed"},jive:g};return{embeddedID:"market-app"}};this.init=function(g,h){this.commonContainer=g;this.options=h;this.bounds={maxWidth:1200,maxHeight:1200,minWidth:350,minHeight:150};this.addListener("app.apply.alert",this.handleAppAlert)};this.render=function(){};this.handleAppsMarketInstall=function(){};this.renderApp_=function(g,i,m,k){var p=this;if(!g){return}var j=new c(i,$j(g.el_));if(j.hasBlockingAlerts()){p.emit("app.apply.alert",j)}else{var h=this.createRenderParams_(i);var l=i.appURL;var n=m||function(){};var o=k||{};this.commonContainer.navigateGadget(g,l,o,h,n)}};this.renderAppEE_=function(j,m,k,i,g){var h=new c(m,j);if(h.hasBlockingAlerts()){this.emit("app.apply.alert",h);return false}else{var l=m.appURL||"";this.getAppFeatures(l,function(o){if(o.error){var n={};i(n,{error:o.error});return}this.renderAppEE_impl(j,m,k,o,i,g)});return true}};this.renderAppEE_impl=function(n,j,l,g,o,m){l=l||{};var i=this.isOpenSocialFeatureRequired("2.5",(g||{}),"embedded-experiences");var p=e.constructEEDataModel(j,l);if(i){l=e.constructOpenSocialEEContext(l);if(!!l.appContext){p.context=l.appContext}}var h=this.createRenderParams_(j);var q=o||function(){};var r=m||{};var k={};k[b.container.ee.RenderParam.GADGET_RENDER_PARAMS]=h;k[b.container.ee.RenderParam.GADGET_VIEW_PARAMS]=r;this.commonContainer.ee.navigate(n,p,k,q,l.containerContext)};e.constructOpenSocialEEContext=function(h){var g={};if(h.jive&&h.jive.content){g.containerContext={};g.containerContext[b.container.ee.Context.ASSOCIATED_CONTEXT]={};g.containerContext[b.container.ee.Context.ASSOCIATED_CONTEXT]=h.jive.content}if(h&&h.target&&h.target.context){g.appContext=h.target.context}return g};e.constructEEDataModel=function(m,k){var l=m.appURL;var h=m.view;var j={};j.gadget=l;j.context=k;if(k&&(k.target||k.display)){var i=k.display||{};var g=k.target||{};if(g.type&&g.type==="embed"){g.type=b.container.ee.TargetType.GADGET}j[b.container.ee.DataModel.PREFERRED_EXPERIENCE]={display:i,target:g};if(k.target&&!k.target.hasOwnProperty("view")){k.target.view=m.view}}return j};this.computeAppDimensions=function(l,h){var k;if(h){k=h.replace(".","_")}var g=(k&&l.heightByView&&l.heightByView[k])||l.height||l.actionHeight;var j=(k&&l.widthByView&&l.widthByView[k])||l.width||l.actionWidth;var i=false;if(g===9999&&j===9999){i=true}return{height:g,width:j,isMaximum:i}};e.createRenderParams_=function(k){var h=b.container.RenderParam;var j={};var g=k.view;j[h.VIEW]=g;var i=this.computeAppDimensions(k,g);j[h.HEIGHT]=i.height;j[h.WIDTH]=i.width;j[h.USER_PREFS]=k.userPrefs;if(!window.__JAF_DEBUG){j[h.NO_CACHE]=k.hasOwnProperty(h.NO_CACHE)?k.nocache:false}return j};this.getRealTitle=function(i,h){var g="";if((i.title||h)&&i.actionLabel){g=(h?h:i.title)+" : "+i.actionLabel}else{if(i.title||h){g=h?h:i.title}else{if(i.actionLabel){g=i.actionLabel}}}return g};this.getAppFeatures=function(h,i){var g=this;this.commonContainer.preloadGadget(h,function(j){if(!j[h]||j[h].error){i.call(g,{error:j[h].error})}else{var k={};var l=j[h].modulePrefs;if(l&&l.features){k=l.features}i.call(g,k)}})};this.isOpenSocialFeatureRequired=function(h,l,m){var j="opensocial-"+h;var k=l[j]||null;if(k&&k.required){return true}if(m){var g=l[m]||null;if(g&&g.params.specificationVersion){var i=g.params.specificationVersion;i=$j.trim(i.toString());if(i.length>h.length){i=i.substring(0,h.length)}if(i===h){return true}}}return false};this.sendNotification=function(h){h=h||{};var i=h.message;var g=h.severity||"info";if(typeof(i)!="undefined"){$j("<p/>").text(i).message({style:g})}};this.setTitle=function(){};this.maximizeApp=function(){};this.reload=function(){};this.closeApp=function(){};this.resizeContainerHeight=function(){};this.resizeContainerWidth=function(){};this.requestNavigateTo=function(){};this.scrollIntoView=function(){};this.handleAppAlert=function(g){};this.initPlacePicker=function(g,i){var h=new d(g);h.showPicker(i)};this.initUserPicker=function(h,k){var j={multiple:false};h=$j.extend(j,h);var i=new jive.UserPicker.SelectPeopleView();var g=function(l){i.close();k(l)};i.setOptions(h).addListener("select",g).open()};this.initUnifiedPicker=function(g,h){require(["apps/autosearch/lightbox"],function(i){new i(g).addListener("chosen",function(j){h({type:j.type,id:j.id,ref:j.resources.self.ref})}).addListener("cancel",function(){h()})})};this.invokeCredentials=function(){};this.destroyCredentials=function(){};this.invokeSettings=function(){};this.destroySettings=function(){};this.closeModal=function(g){};this.setModalTitle=function(g){e.setWhichModalTitle();whichTitle.text(g)};e.setWhichModalTitle=function(){var g=".js-app-title-main";var h=$j(".js-app-title > *");whichTitle=g?h.filter(g):null};this.refresh=function(){this.emit("app.reload");this.displayRefreshMsg(true)};this.displayRefreshMsg=function(g,k){var h=g?"info":"error";var j=g?jive.i18n.keys.appframeworkAppDevelopmentRefresh():jive.i18n.keys.errorGeneral();var i=jive.apps.container.renderMessage({message:j});this.sendNotification({message:i,severity:h})};this.handleConfigurationDialog=function(i,j){var h=this;var l=i.getApp();var g=$j(jive.apps.container.blockingAlertView());if(l.configurationError){g.find("#j-app-blocking-alert-submit").hide();g.find("#j-app-blocking-alert-cancel").addClass("j-btn-callout")}var k=new a({app:l,domTarget:g.find("#app-blocking-alert-detail")});k.addListener("app.service.wire.cancel",function(m){$j("#j-app-blocking-alert-cancel").click(function(){var n=jive.apps.container.renderMessage({message:jive.i18n.keys.appframeworkAppConfigureCancel()});h.sendNotification({severity:"warn",message:n});$j(".j-modal-close-top").click()})});k.addListener("app.service.wire.submit",function(m){$j("#j-app-blocking-alert-submit").click(m.callback)});k.addListener("app.configure.success",function(){var m=jive.apps.container.renderMessage({message:jive.i18n.keys.appframeworkAppConfigureSuccess()});h.sendNotification({severity:"info",message:m});if(j&&j.configureCallback){j.configureCallback(true)}h.emit("app.reload",false)});k.addListener("app.configure.failed",function(){var m=jive.apps.container.renderMessage({message:jive.i18n.keys.appframeworkAppConfigureFailure()});h.sendNotification({severity:"error",message:m});if(j&&j.configureCallback){j.configureCallback(false)}});$j("#j-app-modal-parent iframe").css({display:"none"});$j("#j-app-modal-parent").append(g)};this.resizeModal=function(g,i,h){};this.restoreChromeNav=function(){};this.hideChromeNav=function(){};this.getRenderedApp=function(){};this.getMaximumHeight=function(){};this.getMaximumWidth=function(){};this.boundedHeight=function(g){g=(g+"").match(/\d+/)[0]/1;var h=Math.min(Math.max(g,this.bounds.minHeight),this.bounds.maxHeight);return h};this.boundedWidth=function(g){g=(g+"").match(/\d+/)[0]/1;var h=Math.min(Math.max(g,this.bounds.minWidth),this.bounds.maxWidth);return h};e.delayedRunner=function(i,h,g){var k=new Date().getTime();var j=window.setInterval(function(){var l=new Date().getTime();if(l-k>1500||g()){i();window.clearInterval(j)}},h)};e.recenter=function(j,h){h=!($j.browser.msie&&$j.browser.version<9)&&h;var g=j.height();var i=j.width();j.css({position:"fixed",top:"50%",marginTop:j.outerHeight()/-2,left:"50%",marginLeft:j.outerWidth()/-2});if(h){j.animate({marginLeft:i/-2,marginTop:g/-2},{duration:300,queue:false})}else{j.css({marginLeft:i/-2,marginTop:g/-2},{duration:300,queue:false})}}})});
;
goog.provide("jive.apps.container.appModalHeader");jive.apps.container.appModalHeader=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<header><h2><img alt="" class="j-app-fav-icon" src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.app.favIconSrc)),'" /> <span class="js-app-title"><span class="js-app-title-main"></span></span></h2></header>');return opt_sb?"":output.toString()};
;
goog.provide("jive.apps.container.canvasConfigurationModal");
jive.apps.container.canvasConfigurationModal=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-modal j-app-modal j-pop js-app-chrome" id="jive-canvas-modal">');jive.apps.container.appModalHeader(opt_data,output);output.append('<label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200f"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k200f"),
[])),'"><span class="j-close-icon j-ui-elem" role="img"></span></a><div id="j-app-modal-parent" class="jive-modal-content j-pop-main"></div></div>');return opt_sb?"":output.toString()};
;
function JiveSiteData(b,c,a){return{mvcView:b,app:c,view:c.view,viewParams:a,getAppView:function(){return this.view},getActionInfo:function(){return this.actionInfo},setActionInfo:function(d){this.actionInfo=d},getGadgetMetaData:function(){return this.gadgetInfo},setGadgetMetaData:function(d){this.gadgetInfo=d},getEEContext:function(){return this.context},setEEContext:function(d){this.context=d;if(d&&d.target&&d.target.view){this.view=d.target.view}},getSelection:function(){return this.selection},setSelection:function(d){this.selection=d},getLaunchContext:function(){return this.launchContext}}}JiveSiteData.get=function(b){var a=b[osapi.container.GadgetSite.RPC_ARG_KEY];return a.jiveData};
;
define("jive/app/core_container/navigate_app",function(){return jive.oo.Class.extend(function(a){var d={};var c=/(\/apps\/)([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})/;var b=/(\/apps\/)([a-zA-Z0-9\/\-._]{1,120})/;this.init=function(e){};this.setCanvasToken=function(e){d=e};this.getCanvasToken=function(){return d};this.getCanvasAppInfoFromUrl=function(f){var g=f||window.location.pathname;var e=c.exec(g);if(e!==null){return e[2]}e=b.exec(g);if(e!=null){return e[2]}return null};this.addActionQueueItemToViewParams=function(f){var h=(typeof(f)!=="undefined"&&f!==null)?f:{};var g=/&aq=([1-9]\d*)/.exec(window.location.search+" "+window.location.hash);if(g){var e=g[1];h.jive_aq=e}return h}})});
;
jive.namespace("Apps");jive.Apps.RteArtifacts=jive.oo.Class.extend(function(b){var i=CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/skins/default/img/progress.gif";var f=450;var h="OpenSocial/2.5";var g="legacy";this.init=function(){};b.showMessage=function(l,k){$j("<p/>").html(l).message({style:k})};this.buildArtifactMarkup=function(v,z){var m=v?v[osapi.container.GadgetSite.RPC_ARG_KEY]:null;var o=m.jiveData.app;var y=z.artifactJson;var r=z.rteBound;b.makeArtifactURLsAbsolute(y,o,z.suppressImageUpload);var t=b.normalizeArtifact(y);var l=t.icon;var q=t.previewImage;var x=l||q;if(console){console.log("imageUrl",x)}var u=this;var s=function(K,H){if(!K){v.callback({error:"No artifactJson metadata was provided"});return}var I=m.getActiveSiteHolder().getGadgetInfo();var C=I.modulePrefs.features.actions;var A;if(C&&C.params&&C.params["action-contributions"]){var F=C.params["action-contributions"];for(var E=0;E<F.length;++E){var M=F[E].replace(/\n/mg,"");var D=M.match(/id="(.+?)"/);A=D?D[1]:null;if(A&&A==z.actionId){break}}}if(!A){v.callback({error:"App does not define action "+z.actionId});return}if(!m){u.showMessage("Error occured, app site missing");v.callback({error:"Application framework error"});return}var N=m.jiveData;var J=u.createArtifact({ed:document,appUUID:N.app.appUUID,appInstanceUUID:N.app.appInstanceUUID,data:K,rteBound:r});var G=$j(J);var L=G.wrap("<span></span>").parent().html();if($j.browser.msie){if($j.browser.version<9){L=L.replace(/<\w[^>]*>/g,function(O){return O.replace(/(\w+=)([-.\w]+)/g,'$1"$2"')});L=L.replace(/(<IMG((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\s*>)/g,"$1</IMG>")}else{var B=function(O,P){var Q=G.attr(P);if(Q){var R=Q.replace(/\"/g,"&quot;");O=O.replace(P+"='"+Q+"'",P+'="'+R+'"')}return O};L=B(L,"_context")}}v.callback({markup:L,error:H})};if(z.suppressImageUpload||!x){s(y);return}var n=l?b.uploadArtifactIcon(l,o.appInstanceUUID):undefined;var p=q?b.uploadArtifactImage(q):undefined;var k=n||p;if(!k){var w="Error uploading iconUrl or previewImage.";u.showMessage(w);if(console){console.log(w)}s(y,w);return}k.addCallback(function(A){A=A||x;if(l){b.updateIcon(y,A)}else{b.updatePreviewImage(y,A)}s(y)}).addErrback(function(A){var B="Could not upload "+x;u.showMessage(B);if(console){console.log(B,A)}s(y,B)})};b.isProxiedUrl=function(k){return k.startsWith(gadgets.io.getProxyUrl().split("?")[0])};b.makeRelativeAppResourceUrl=function(k,m){var l=m.appURL?m.appURL.match(/.*\//)[0]:"";if(k.match(/^http/)===null&&k.match(/^\/\//)===null){return l+k}return null};this.makeArtifactURLsAbsolute=function(t,l,m,s){var q=function(v){if(s&&/^(\/\w+)?\/gadgets\/(js|concat|proxy)\?/.exec(v)){return s+v}else{var u=b.makeRelativeAppResourceUrl(v,l);if(u){return u}else{if(v.match(/^\/\//)){if(typeof gadgets!="undefined"){var y=gadgets.io.getProxyUrl();var x=y.match(/^https?:(\/\/.+)\?/);if(x&&x.length>1){x[1]=x[1].substring(0,2)+".*"+x[1].substring(2);if(v.match("^"+x[1])){var w=v.match(/url=(.+)&?/);if(w&&w.length>1){return w[1]}}}}}}}};var p=b.normalizeArtifact(t);var o=p.previewImage;if(o){var k=/^(\/\w+)?\/resources\/add-ons\/[0-9a-f-]{36}\/[0-9a-f]{8,16}\//.exec(o);if(!k){o=q(o)||o;if(!m&&!b.isProxiedUrl(o)){var n={};if(s){n.host=s.substring(s.indexOf("//")+2)}o=gadgets.io.getProxyUrl(o,n)}}b.updatePreviewImage(t,o)}var r=p.icon;if(r){var k=false;if(s&&m===null&&typeof m==="object"){m=!!/^(\/\w+)?\/gadgets\/proxy\?/.exec(r);k=/^(\/\w+)?\/resources\/add-ons\/[0-9a-f-]{36}\/[0-9a-f]{8,16}\//.exec(r)}if(!k){r=q(r)||r;if(!m&&!b.isProxiedUrl(r)){var n={};if(s){n.host=s.substring(s.indexOf("//")+2)}r=gadgets.io.getProxyUrl(r,n)}}b.updateIcon(t,r)}if(console){console.log(t)}};b.updatePreviewImage=function(l,k){if(b.deduceArtifactFormatType(l)==h){l.previewImage=k}else{l.display.previewImage=k}};b.updateIcon=function(k,l){if(b.deduceArtifactFormatType(k)==h){k.preferredExperience.display.icon=l}else{k.display.icon=l}};b.deduceArtifactFormatType=function(k){return k.preferredExperience?h:g};b.normalizeArtifact=function(l){var p=b.deduceArtifactFormatType(l);if(p==h){var o=l.preferredExperience;var k=o.target.type;k=k==="gadget"?"embed":k;o.display=o.display||{};o.target=o.target||{};var n=o.display.type;var m=n=="image"?o.display.altText:o.display.label;return{hasPreviewImage:n=="image"&&l.previewImage,hasIcon:n=="text"&&Boolean(o.display.icon),linkType:k||"none",label:m||l.actionLabel,icon:o.display.icon,previewImage:l.previewImage,url:l.url,view:o.target.view,context:l.context,artifactFormatType:p}}else{l.display=l.display||{};l.target=l.target||{};return{hasPreviewImage:l.display.type=="image",hasIcon:l.display.type=="text"&&Boolean(l.display.icon),linkType:l.target.type||"none",label:l.display.label||l.actionLabel,icon:l.display.icon,previewImage:l.display.previewImage,url:l.target.url,view:l.target.view,context:l.target.context,artifactFormatType:p}}};b.extractFileName=function(k){return b.isProxiedUrl(k)?k.match(/.*\%2F(.+)/)[1]:k.match(/.*\/(.+)/)[1]};this.createArtifact=function(m){var x=m.rte,p=m.ed,D=m.appUUID,E=m.actionId,J=m.data,C=m.editedContentBean,n=m.appInstanceUUID,k=m.rteBound;var q=x||k;var G=q?function(M){return"__"+M}:function(M){return"_"+M};J=J||{};J.actionLabel=m.actionLabel;var s=b.normalizeArtifact(J);var u=s.hasPreviewImage;var B=s.hasIcon;var A=s.linkType;var v=s.label;var H=s.icon;var z=s.previewImage;var o=s.url;var y=s.view;var l=s.context;var L=x?p.getDoc():p;var r=$j(L.createElement("a"));r.attr("jivemacro","appEmbeddedView");r.attr("__jive_macro_name","appEmbeddedView");r.attr("href",A=="url"?o:"javascript:;");if(x){if(u){var F=(C&&C.attachmentConfigActionBean)?C.attachmentConfigActionBean.canAttach:true;var I=b.extractFileName(z);var w=$j(p.dom.create("img")).attr("src",i).attr("alt",I);r.append(w);var t=$j(p.dom.create("img")).attr("src",z).attr("alt",I).addClass("jiveImage").hide();r.append(t);t.load(function(){t.unbind();j(t);w.unbind().remove();t.show();jive.conc.nextTick(function(){if(F&&e(t)){c(t,x,p).addCallback(function(M){z=M.attr("src");r.attr("__previewImage",z)})}})});r.addClass("jive-link-app-preview")}else{if(B){var F=(C&&C.attachmentConfigActionBean)?C.attachmentConfigActionBean.canAttach:true;r.text(v);r.css("background-image","url('"+H+"')");r.addClass("jive-link-app-icon");r.attr("__icon",H);var I=b.extractFileName(H);var t=$j(p.dom.create("img")).attr("src",H).attr("alt",I).hide();jive.conc.nextTick(function(){if(F&&e(t)){d(t,x,p,n).addCallback(function(M){H=M.attr("src");r.attr("__icon",H);r.css("background-image","url('"+H+"')")})}});r.append($j(p.dom.create("span")).addClass("j-ui-elem").addClass("j-app-link"))}else{r.text(v);r.addClass("jive-link-app");r.append($j(x?p.dom.create("span"):L.createElement("span")).addClass("j-ui-elem").addClass("j-app-link"))}}}else{if(u){var I=b.extractFileName(z);r.attr(G("previewImage"),z);r.addClass("jive-link-app-preview");var K=$j(L.createElement("img"));K.attr("src",z).attr("alt",I).addClass("jiveImage");r.append(K)}else{if(B){r.text(v);if(!$j.browser.msie){r.css("background-image","url('"+H+"')")}r.addClass("jive-link-app-icon");r.attr(G("icon"),H);r.append($j(L.createElement("span")).addClass("j-ui-elem").addClass("j-app-link"))}else{r.text(v);r.addClass("jive-link-app");r.append($j(L.createElement("span")).addClass("j-ui-elem").addClass("j-app-link"))}}}if(v){r.attr("title",v)}r.attr(G("appUUID"),D);r.attr(G("action_id"),E);if(A=="embed"){r.attr(G("view"),y||"embedded");r.attr(G("context"),JSON.stringify(l||{}))}if(o){r.attr(G("url"),o)}r.attr("modifiedTitle","true");r.addClass("jive_macro");r.addClass("jive_macro_appEmbeddedView");return r[0]};this.parseSelectionContextFromArtifact=function(n){var m=n.attr("__context");var t=n.attr("__view");var l=n.attr("__url");var o=n.attr("__previewImage")?"image":"text";var u=n.attr("__title");var p=n.attr("__previewImage");var v=n.text().trim()||"";var s=n.attr("__icon");var r=null;switch(o){case"image":r={type:"image",previewImage:p};if(u){r.label=u}break;case"text":r={type:"text",label:v};if(s){r.icon=s}break}var k=(m||t)?"embed":"url";var q=null;switch(k){case"embed":q={type:"embed",view:t||"embedded"};if(m){q.context=JSON.parse(m)}if(l){q.url=l}break;case"url":q={type:"url",url:l||""};break}return{display:r,target:q}};this.uploadArtifactIcon=function(l,k){var m=b.extractFileName(l);var n=jive.api.apps("instances/"+k+"/attach_image")+"?name="+m;return a(n,l)};this.uploadArtifactImage=function(k){var l=b.extractFileName(k);var m=jive.rest.url("/rteImages")+"?name="+l+"&objectId=-1&objectType=-1";return a(m,k)};function j(m){var k=m.width();if(k>f){var n=f/k;var l=Math.round(n*k);m.attr("width",l)}}function e(m){var k=m.attr("src");if(k.match(/^\/[^\/]/)){return 0}var l="(https?:)?//"+location.hostname+(location.port?":"+location.port:"");if(!k.match("^"+l)){return true}return b.isProxiedUrl(k)?1:0}function d(n,m,l,k){var o=jive.api.apps("instances/"+k+"/attach_image");return c(n,m,l,o)}function c(k,l,r,p){var m=l.getImageService();var s=k.attr("alt");var t=k.attr("src");function o(){if(console){console.log("Image REST request failed for %s",s,arguments)}k.remove()}var n=new jive.conc.Promise();var u=l.getFormService();var q=u.setFormEnabled(false,r.getLang("jiveimage.please_wait"));m.createFromImageSrc(s,b.isProxiedUrl(t)?t:encodeURI(t),p).addCallback(function(v){k.load(function(){var w=$j(this);w.css({width:w.width()+"px",height:w.height()+"px","max-width":"","max-height":""})});k.attr("src",v.url);jive.conc.nextTick(function(){r.nodeChanged()});n.emitSuccess(k)}).addErrback(function(){o();n.emitError()}).always(function(){u.setFormEnabled(q)});return n}function a(o,k){var n=new jive.conc.Promise();var l={url:o,contentType:"application/x-www-form-urlencoded",processData:false,data:"url="+b.isProxiedUrl(k)?k:encodeURIComponent(k)};var m={contentType:"application/json; charset=utf-8"};$j.ajax($j.extend({type:"POST",dataType:"json",success:function(p,r,q){if(!p||!p.url){n.emitError()}else{n.emitSuccess(p.url)}},error:function(p){n.emitError(p)},timeout:30000},m,l));return n}});define("jive/app/rte/artifacts",["gadgets"],function(a){return jive.Apps.RteArtifacts});
;
goog.provide("jive.i18n.keys.globalAjaxError");jive.i18n.keys.globalAjaxError=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1fd7"),[])));return opt_sb?"":output.toString()};
;
define("apps/activity_stream/models/rtc_source",["jquery","underscore","lib/jiverscripts/src/oo/class","apps/shared/models/core_deferred"],function(d,c,b,a){return b.extend(function(e){e.init=function(f){if(f&&f.collabID){this.collabID=f.collabID;this.rtcEnabled=f.rtcEnabled;this.collabDeferred=this.getCollaboration(this.collabID)}};this.getCollaboration=function(f){return a.runQuery(function(g){return g.jive.corev3.collaborations.get({uri:"/collaborations/"+f})})};this.getInteractions=function(g){var f=this;return f.collabDeferred.then(function(h){return a.runQuery(h.getInteractions(g)).then(function(i){c.each(i,function(j){c.extend(j.author,j.author.jive);j.author.entitled=true;j.collabID=f.collabID;j.rtcEnabled=f.rtcEnabled});return i})})};this.updateSubject=function(h){var g=this,f={subject:h};return g.collabDeferred.then(function(i){return a.runQuery(i.setSubject(f))})};this.createInteraction=function(h){var g=this;var f={content:{text:h}};return g.collabDeferred.then(function(i){return a.runQuery(i.createInteraction(f)).then(function(j){c.extend(j.author,j.author.jive);j.author.entitled=true;j.collabID=g.collabID;j.rtcEnabled=g.rtcEnabled;return j})})};this.createCollaboration=function(g,i,h){var f=this;return a.runQuery(function(j){return j.jive.corev3.collaborations.create({participants:g,subject:h})}).then(function(j){f.collabDeferred=d.when(j);f.createInteraction("<body>"+i+"</body>")})};this.addCollaborators=function(h,j,i){var f=this,g=j.split(",").map(function(k){return{id:k}});return f.collabDeferred.then(function(k){return a.runQuery(k.addParticipant({participants:g}))}).then(function(k){return k.participants.map(function(l){return c.find(i,function(m){return m.id==l.id})})})};this.leaveCollaboration=function(){var f=this;return f.collabDeferred.then(function(){return a.runQuery(function(g){return g.jive.corev3.collaborations.removeParticipants({userID:window._jive_current_user.ID,uri:"/collaborations/"+f.collabID+"/participants/"+window._jive_current_user.ID})})})};this.deleteDM=function(f){return this.remove(jive.rest.corev3.url("/dms/"+f))};this.deleteComment=function(f){return this.remove(jive.rest.corev3.url("/comments/"+f))};this.remove=function(g){function f(){d("<p />").html(jive.i18n.keys.globalAjaxError()).message({style:"error"})}return d.ajax(g,{type:"DELETE",error:f})}})});
;
goog.provide("jive.i18n.keys.tinymceJivementionSecretGroup");jive.i18n.keys.tinymceJivementionSecretGroup=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4238"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.tinymceJivementionRestrictedContent");jive.i18n.keys.tinymceJivementionRestrictedContent=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4237"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.wall.charLenErrors");jive.wall.charLenErrors=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.error?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k45c9"),[opt_data.numChars])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k45ca"),[opt_data.numChars])));return opt_sb?"":output.toString()};
;
goog.provide("jive.wall.submitErrors");jive.wall.submitErrors=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.key=="over"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k45f2"),[])):opt_data.key=="noplaceselected"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4601"),[])):opt_data.key=="none"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k45f1"),[])):soy.$$escapeHtml(opt_data.key));return opt_sb?"":output.toString()};
;
goog.provide("jive.statusinput.attachments.renderCommonAttachment");
jive.statusinput.attachments.renderCommonAttachment=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<li",opt_data.attachment.id?' id="'+opt_data.attachment.id+'"':"",opt_data.containerClass?' class="'+soy.$$escapeHtml(opt_data.containerClass)+'"':"",'><a href="',soy.$$escapeHtml(opt_data.linkUrl),'" ',opt_data.attachment.originalURL?'jiveOriginalURL="'+soy.$$escapeHtml(opt_data.attachment.originalURL)+'"':"",'style="display: block;',opt_data.attachment.thumbnailWidth?
"width: "+soy.$$escapeHtml(opt_data.attachment.thumbnailWidth)+"px;":"",opt_data.attachment.thumbnailHeight?"height:"+soy.$$escapeHtml(opt_data.attachment.thumbnailHeight)+"px;":"",'" class="j-attach-anchor"><img src="',soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,opt_data.attachment.imageThumbnailUrl)),'" ',opt_data.attachment.thumbnailWidth?'width="'+soy.$$escapeHtml(opt_data.attachment.thumbnailWidth)+'"':""," ",opt_data.attachment.thumbnailHeight?'height="'+soy.$$escapeHtml(opt_data.attachment.thumbnailHeight)+
'"':"",' alt="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1fe9"),[])),'"/></a>',opt_data.removable?'<a href="javascript:void(0);" class="j-remove-attachment">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2136"),[]))+"</a>":"","</li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.statusinput.attachments.renderLinkThumbnails");
jive.statusinput.attachments.renderLinkThumbnails=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-thumbnails j-rc3">',opt_data.removable?'<div class="j-controls">'+(parseInt(opt_data.attachment.properties.thumbnailCount,10)>1?'<a class="left j-preview-choose" aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k45b6"),[]))+'" href="#"><span class="jive-icon-glyph icon-arrow-left2"></span></a><a class="right j-preview-choose" aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k45b5"),
[]))+'" href="#"><span class="jive-icon-glyph icon-arrow-right2"></span></a>':"")+'<a class="no-thumb" aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k45b7"),[]))+'" href="#"><span class="jive-icon-glyph icon-close-med"></span></a></div>':"",'<ul class="j-thumbnails-viewport">',opt_data.attachment.properties.thumbnailID_1?'<li class="j-thumbnail '+(opt_data.removable?"selected":"")+'"><a href="'+soy.$$filterNoAutoescape(opt_data.attachment.properties.linkURL)+'"><img '+(opt_data.attachment.properties.title?
'title="'+soy.$$escapeHtml(opt_data.attachment.properties.title)+'"':"")+'src="'+soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,opt_data.attachment.properties.thumbnailURL_1))+'" data-image-id="'+soy.$$escapeHtml(opt_data.attachment.properties.thumbnailID_1)+'" alt=""/></a></li>':"",opt_data.attachment.properties.thumbnailID_2?'<li class="j-thumbnail"><a href="'+soy.$$filterNoAutoescape(opt_data.attachment.properties.linkURL)+'"><img '+(opt_data.attachment.properties.title?
'title="'+soy.$$escapeHtml(opt_data.attachment.properties.title)+'"':"")+'src="'+soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,opt_data.attachment.properties.thumbnailURL_2))+'" data-image-id="'+soy.$$escapeHtml(opt_data.attachment.properties.thumbnailID_2)+'" alt=""/></a></li>':"",opt_data.attachment.properties.thumbnailID_3?'<li class="j-thumbnail"><a href="'+soy.$$filterNoAutoescape(opt_data.attachment.properties.linkURL)+'"><img '+(opt_data.attachment.properties.title?
'title="'+soy.$$escapeHtml(opt_data.attachment.properties.title)+'"':"")+'src="'+soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,opt_data.attachment.properties.thumbnailURL_3))+'" data-image-id="'+soy.$$escapeHtml(opt_data.attachment.properties.thumbnailID_3)+'" alt=""/></a></li>':"","</ul></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.statusinput.attachments.renderLinkAttachment");
jive.statusinput.attachments.renderLinkAttachment=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="js-attached-link j-attached-link clearfix"',opt_data.attachment.id?' id="'+opt_data.attachment.id+'"':"",' style="display:block">',opt_data.removable?'<div class="j-preview-header">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k45b4"),[]))+'<a  href="javascript:void(0);" class="j-remove-attachment j-close font-color-meta-light" aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k45b8"),
[]))+'"><span class="jive-icon-glyph icon-close-med"></span></a></div>':"",'<div class="j-simple">');if(opt_data.attachment.properties.type=="video"&&opt_data.attachment.properties.html)output.append('<div class="j-video">',soy.$$filterNoAutoescape(opt_data.attachment.properties.html),"</div>");else if(opt_data.attachment.properties.type=="photo"&&opt_data.attachment.properties.imageURL)output.append('<div class="j-image"><img src="',soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,
opt_data.attachment.properties.imageURL)),'" alt=""/></div>');else if(opt_data.attachment.properties.thumbnailCount)jive.statusinput.attachments.renderLinkThumbnails(opt_data,output);output.append('<div class="j-details"><a class="j-title" href="',soy.$$escapeHtml(opt_data.attachment.properties.linkURL),'">',opt_data.attachment.properties.title?soy.$$escapeHtml(opt_data.attachment.properties.title):soy.$$filterNoAutoescape(opt_data.attachment.properties.linkURL),"</a>",opt_data.attachment.properties.description?
'<p class="j-description">'+soy.$$escapeHtml(opt_data.attachment.properties.description)+"</p>":"",opt_data.attachment.properties.providerURL&&opt_data.attachment.properties.providerDisplay?'<span class="j-meta"><a class="j-provider" href="'+soy.$$escapeHtml(opt_data.attachment.properties.providerURL)+'">'+soy.$$escapeHtml(opt_data.attachment.properties.providerDisplay)+"</a></span>":"","</div></div></li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.statusinput.attachments.renderAttachment");
jive.statusinput.attachments.renderAttachment=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;switch(opt_data.attachment.objectType){case 102:jive.statusinput.attachments.renderCommonAttachment(soy.$$augmentMap(opt_data,{linkUrl:soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,opt_data.entry.jiveObjectURL)),containerClass:"j-attached-document"}),output);break;case 111:if(!opt_data.hideFirstImage&&(!opt_data.attachment.properties||!opt_data.attachment.properties.hidden))jive.statusinput.attachments.renderCommonAttachment(soy.$$augmentMap(opt_data,
{linkUrl:soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,opt_data.attachment.fullImageUrl)),containerClass:"j-attached-image"}),output);break;case 801:if(opt_data.attachment.properties.linkURL)jive.statusinput.attachments.renderLinkAttachment(opt_data,output);else if(opt_data.attachment.properties.videoURL)output.append('<li class="j-attached-video" ',opt_data.attachment.id?'id="'+opt_data.attachment.id+'"':"",'><a rel="fb" href="',soy.$$filterNoAutoescape(opt_data.attachment.properties.videoURL),
'" style="width: ',soy.$$escapeHtml(opt_data.attachment.properties.thumbnailWidth),"px; height: ",soy.$$escapeHtml(opt_data.attachment.properties.thumbnailHeight),'px" class="j-attach-anchor j-attach-video"><img src="',soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,opt_data.attachment.properties.thumbnailURL)),'" width="',soy.$$escapeHtml(opt_data.attachment.properties.thumbnailWidth),'" height="',soy.$$escapeHtml(opt_data.attachment.properties.thumbnailHeight),'" alt="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1fe9"),
[])),'" /><span class="j-icon-play" style="display: none; position: absolute; left: ',soy.$$escapeHtml((parseInt(opt_data.attachment.properties.thumbnailWidth,10)+12-40)/2),'px; top: 20px; "></span></a>',opt_data.removable?'<a href="javascript:void(0);" class="j-remove-attachment">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2136"),[]))+"</a>":"","</li>");break}return opt_sb?"":output.toString()};
;
goog.provide("jive.statusinput.attachments.renderAttachments");
jive.statusinput.attachments.renderAttachments=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.entry.meta){output.append('<a  class="j-attachment-arrow j-attachment-arrow-left clearfix" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k45b1"),[])),'" aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k45b1"),[])),'" href="javascript:void(0);"><span class="jive-icon-link-back"></span></a><ul class="j-attached-items clearfix">');var attachmentList10=
opt_data.entry.meta;var attachmentListLen10=attachmentList10.length;for(var attachmentIndex10=0;attachmentIndex10<attachmentListLen10;attachmentIndex10++){var attachmentData10=attachmentList10[attachmentIndex10];if(opt_data.entry.collabObjectType=="109016030")jive.statusinput.attachments.renderAttachment(soy.$$augmentMap(opt_data,{attachment:attachmentData10,hideFirstImage:false}),output);else jive.statusinput.attachments.renderAttachment(soy.$$augmentMap(opt_data,{attachment:attachmentData10,hideFirstImage:opt_data.hideFirstImage&&
attachmentIndex10==0}),output)}output.append(opt_data.removable?"<li class='j-attached-loading'></li>":"",'</ul><a class="j-attachment-arrow j-attachment-arrow-right clearfix" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k45b2"),[])),'" aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k45b2"),[])),'" href="javascript:void(0);"><span class="jive-icon-link-forward"></span></a>')}return opt_sb?"":output.toString()};
;
goog.provide("jive.statusinput.containers.renderAttachmentsContainer");
jive.statusinput.containers.renderAttachmentsContainer=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append("<div ",opt_data.id?'id="'+opt_data.id+'" ':"",'class="jive-js-attachment-container j-attachment-container clearfix" ',opt_data.visible?'style="display:block"':"",">");if(opt_data.entry&&opt_data.entry.meta)jive.statusinput.attachments.renderAttachments(opt_data,output);output.append("</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.statusinput.containers.microbloggingStatusInputSuccess");
jive.statusinput.containers.microbloggingStatusInputSuccess=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div id="j-js-mb-success" class="j-mb-success-msg j-rc4"><header class="font-color-new">',opt_data.entry.status!="AWAITING_MODERATION"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1cf6"),[opt_data.entry.containerName])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4604"),[opt_data.entry.containerName])),'<a href="javascript:void(0)" class="j-js-mb-success-dismiss j-mb-dismiss" aria-label="',
soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("kac3"),[])),'"><span class="jive-icon-sml jive-glyph-remove"></span></a></header><p>',soy.$$filterNoAutoescape(opt_data.entry.message),"</p><p>");if(opt_data.entry&&opt_data.entry.meta&&opt_data.entry.meta.length>0){jive.statusinput.containers.renderAttachmentsContainer({id:"attachmentContainer-success",entry:opt_data.entry,visible:true},output);jive.shared.soy.resourceInlineJs({code:"require(['apps/microblogging/views/attachment_view'],function(AttachmentView){var attachmentView = new AttachmentView({selector:'#attachmentContainer-success'}); attachmentView.postRender();});"},
output)}output.append("</p><div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.statusinput.containers.microbloggingStatusInputLastUpdate");
jive.statusinput.containers.microbloggingStatusInputLastUpdate=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<strong>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1cf4"),[])),"</strong> ",soy.$$filterNoAutoescape(opt_data.latestStatusUpdate.text),' <strong><a href="',soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,opt_data.latestStatusUpdate.url)),'" class="j-comment-count j-inline-link font-color-meta-light" aria-label="',opt_data.latestStatusUpdate.commentcount==
1?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k201c"),[opt_data.latestStatusUpdate.commentcount])):soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k2019"),[opt_data.latestStatusUpdate.commentcount])),'"><span class="jive-icon-sml jive-glyph-comment"></span>',soy.$$escapeHtml(opt_data.latestStatusUpdate.commentcount),"</a></strong>");return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.weFormAddimage");jive.i18n.keys.weFormAddimage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k45ec"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.publishbar.userWithoutPermission");jive.publishbar.userWithoutPermission=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-tips">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k18a0"),[])),"</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.publishbar.listWithoutPermission");jive.publishbar.listWithoutPermission=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-tips">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k189f"),[])),"</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.publishbar.visibility");
jive.publishbar.visibility=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.showVisibility?'<span id="'+(opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"")+"js-visibility-"+soy.$$escapeHtml(opt_data.visibility)+'" class="js-visibility-option">'+(opt_data.placeVisibility?(opt_data.preInputNameKey&&opt_data.preInputNameKey!=""?'<label for="'+(opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"")+'js-publishbar-place-input">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey(opt_data.preInputNameKey)),
[]))+"</label>":"")+'  <span class="j-publish-input-row"><input type="text" id="'+(opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"")+'js-publishbar-place-input" class="j-publish-input-entry" autocomplete="off" role="combobox"'+(opt_data.communityFeatureVisible?'placeholder="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3139"),[]))+'" aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3139"),[]))+'"':'placeholder="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3136"),
[]))+'" aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3136"),[]))+'"')+"/>"+(opt_data.inputBrowse?'<a href="#trigger_modal" id="'+(opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"")+'js-publishbar-place-browse">'+(opt_data.communityFeatureVisible?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3138"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3135"),[])))+"</a>":"")+'</span><div id="'+(opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):
"")+'js-publishbar-place-results" class="j-pop j-autocomplete" style="display: none;"></div>':opt_data.peopleVisibility?'<span><input type="text" id="'+(opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"")+'js-publishbar-users" name="publishBar.users" class="j-autocomplete-input j-user-autocomplete j-ui-elem" role="combobox" placeHolder="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3137"),[]))+'" aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3137"),[]))+
'"/></span>':opt_data.allVisibility&&opt_data.personalBlog?opt_data.personalBlog.id>0?soy.$$escapeHtml(opt_data.personalBlog.name):'<span id="js-publishbar-createblog-default">'+soy.$$escapeHtml(opt_data.personalBlog.name)+'   <a href="#" class="font-color-meta" id="js-publishbar-createblog-change">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3134"),[]))+'</a></span><span id="js-publishbar-createblog" style="display:none;"><label for="personal-blog-name-id" class="j-508-label" aria-hidden="true"></label><input id="personal-blog-name-id" type="text" name="publishBar.personalBlogName" value="'+
soy.$$escapeHtml(opt_data.personalBlog.name)+'"/></span>':"")+"</span>":"");return opt_sb?"":output.toString()};
;
goog.provide("jive.publishbar.creatorVisibilityInfo");
jive.publishbar.creatorVisibilityInfo=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<input type="hidden" id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-container-objecttype" name="publishBar.container.objectType" value="',soy.$$escapeHtml(opt_data.visibilityBean.placeItemBean.type),'"/><input type="hidden" id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-container-id" name="publishBar.container.objectID" value="',soy.$$escapeHtml(opt_data.visibilityBean.placeItemBean.id),
'"/>',opt_data.includeVisibilityValue?'<input type="hidden" name="publishBar.visibility" value="'+soy.$$escapeHtml(opt_data.visibilityBean.visibility)+'"/>':"");return opt_sb?"":output.toString()};
;
goog.provide("jive.integration.storage.render_container_exstorage_info");
jive.integration.storage.render_container_exstorage_info=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<div>",opt_data.exStorageInfo.iconUrl?'<span class="jive-icon-med" style="margin-top: 3px"><img src="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.exStorageInfo.iconUrl))+'" alt=""></span>':"","<span ",opt_data.exStorageInfo.iconUrl?' style="margin-left: -5px;" ':""," >");jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k1ea7"),
arg0:opt_data.exStorageInfo.externalUrl?'<a href="#" onclick="window.open(\''+soy.$$escapeHtml(opt_data.exStorageInfo.externalUrl)+"')\">"+soy.$$escapeHtml(opt_data.exStorageInfo.displayName)+"</a>":soy.$$escapeHtml(opt_data.exStorageInfo.displayName),arg1:opt_data.exStorageInfo.externalUrl?'<a href="#" onclick="window.open(\''+soy.$$escapeHtml(opt_data.exStorageInfo.externalUrl)+"')\">"+soy.$$escapeHtml(opt_data.exStorageInfo.displayName)+"</a>":soy.$$escapeHtml(opt_data.exStorageInfo.displayName),
noAutoEscape:"true"},output);output.append("</span></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.publishbar.placeView");
jive.publishbar.placeView=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<section ",opt_data.placeChangeable?"":'style="display:none;"','><input type="hidden" id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'j-publishbar-place-type" name="publishBar.container.objectType" value="',soy.$$escapeHtml(opt_data.type),'" /><input type="hidden" id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'j-publishbar-place-id" name="publishBar.container.objectID" value="',
soy.$$escapeHtml(opt_data.id),'"/><div class="j-place-info clearfix" data-object-type="',soy.$$escapeHtml(opt_data.type),'" data-object-id="',soy.$$escapeHtml(opt_data.id),'">',opt_data.preInputNameKey&&opt_data.preInputNameKey!=""?'<label for="'+(opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"")+'js-publishbar-place-input">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey(opt_data.preInputNameKey)),[]))+"</label>":"","  <div>");if(!opt_data.placeRenderType||opt_data.placeRenderType==
"standard"){output.append('<span class="',soy.$$escapeHtml(opt_data.iconCss),' jive-icon-med"></span>',opt_data.prop.placeImage&&opt_data.prop.placeImage.urlMedium?'<img src="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.prop.placeImage.urlMedium))+'" alt="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2a36"),[]))+'" width="60"/>':"",'<div class="j-place-view-info j-js-place-view-info"><strong><span class="js-header-text">',soy.$$escapeHtml(opt_data.subject),"</span></strong>  ",
opt_data.prop.perms.allowedToMove?'<a href="#" id="'+(opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"")+'js-publishbar-changePlace" class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2007"),[]))+' <span class="j-508-label" aria-hidden="true">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4601"),[]))+"</span></a>":"",opt_data.prop.parentInfo?'<p class="j-browse-content-location font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20a0"),
[]))+' <a href="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.prop.parentInfo.link))+'" class="font-color-meta-light jivecontainerTT-hover-container" data-objectId="'+soy.$$escapeHtml(opt_data.prop.parentInfo.id)+'" data-objectType="'+soy.$$escapeHtml(opt_data.prop.parentInfo.type)+'" target="_blank">'+soy.$$escapeHtml(opt_data.prop.parentInfo.subject)+"</a></p>":"",opt_data.prop.socialGroupInfo||opt_data.prop.isVisibleToPartner?'<p class="j-browse-content-location font-color-meta-light">'+
(opt_data.prop.socialGroupInfo?"<span class=\"jive-icon-sml role='img' jive-icon-group-"+soy.$$escapeHtml(opt_data.prop.socialGroupInfo.typeName)+'-glyph" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("browse.info.sgroup."+opt_data.prop.socialGroupInfo.typeName)),[]))+'"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("browse.info.sgroup."+opt_data.prop.socialGroupInfo.typeName)),[])):"")+(opt_data.prop.socialGroupInfo&&opt_data.prop.isVisibleToPartner?
", ":"")+(opt_data.prop.isVisibleToPartner?'<span class="font-color-meta-light j-browse-external-access"> <em>('+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2968"),[]))+")</em></span>":"")+"</p>":"");if(opt_data.prop.placeCustom)jive.shared.soy.render({templateName:opt_data.prop.placeCustom.templateName,data:function(){var map={};var pairs=[["props",opt_data.prop.placeCustom.props]];for(var i=0;i<pairs.length;i+=1)map[pairs[i][0]]=pairs[i][1];return map}(),failGracefully:false},output);
if(opt_data.showExStorageInfo&&opt_data.prop.exStorageInfo)jive.integration.storage.render_container_exstorage_info({exStorageInfo:opt_data.prop.exStorageInfo},output);output.append('<p class="j-publish-bar-acclaim-container j-js-publish-bar-acclaim-container">');if(opt_data.prop.followInfo){var param126=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:opt_data.prop.followInfo&&opt_data.prop.followInfo.numFollowers?soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers):"0",type:"showfollowcount"},
param126);jive.eae.acclaim.count({command:"showFollowers",count:opt_data.prop.followInfo&&opt_data.prop.followInfo.numFollowers?soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers):"0",objectId:opt_data.id,objectType:opt_data.type,text:opt_data.prop.followInfo&&opt_data.prop.followInfo.numFollowers?opt_data.prop.followInfo.numFollowers==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k149f"),[opt_data.prop.followInfo.numFollowers])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k149e"),
[opt_data.prop.followInfo.numFollowers])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k149e"),[0])),accessibilityLinkLabel:param126.toString()},output)}output.append("<br/>");if(opt_data.prop.socialGroupInfo){var param160=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:opt_data.prop.socialGroupInfo?soy.$$escapeHtml(opt_data.prop.socialGroupInfo.numMembers):"0",type:"showmembercount"},param160);jive.eae.acclaim.count({command:"showMembers",count:opt_data.prop.socialGroupInfo?
soy.$$escapeHtml(opt_data.prop.socialGroupInfo.numMembers):"0",objectId:opt_data.id,objectType:opt_data.type,text:(opt_data.prop.socialGroupInfo&&opt_data.prop.socialGroupInfo.numMembers?soy.$$escapeHtml(opt_data.prop.socialGroupInfo.numMembers):"0")+" "+(opt_data.prop.socialGroupInfo.numMembers==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14b8"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14b7"),[]))),accessibilityLinkLabel:param160.toString()},output);output.append(" (");
var param186=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:opt_data.prop.socialGroupInfo?soy.$$escapeHtml(opt_data.prop.socialGroupInfo.numMembers):"0",type:"showmembercount"},param186);jive.eae.acclaim.count({command:"showExternalContributorMembers",count:opt_data.prop.socialGroupInfo?soy.$$escapeHtml(opt_data.prop.socialGroupInfo.numPartners):"0",objectId:opt_data.id,objectType:opt_data.type,text:opt_data.prop.socialGroupInfo.numPartners==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14b2"),
[opt_data.prop.socialGroupInfo.numPartners])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14b1"),[opt_data.prop.socialGroupInfo.numPartners])),accessibilityLinkLabel:param186.toString()},output);output.append(")")}output.append("</p></div>")}else output.append(opt_data.iconCss?'<span class="'+soy.$$escapeHtml(opt_data.iconCss)+' jive-icon-med"></span>':"","<div><strong>",opt_data.preInputNameKey&&opt_data.preInputNameKey!=""?'<span class="j-508-label">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey(opt_data.preInputNameKey)),
[]))+"</span>":"",'<span class="js-header-text" tabindex="0">',soy.$$escapeHtml(opt_data.subject),"</span></strong></div>",opt_data.prop.isVisibleToPartner?' <span class="font-color-meta-light j-browse-external-access"> <em>('+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2968"),[]))+")</em></span>":"","  ",opt_data.prop.perms.allowedToMove?'<a href="#" id="'+(opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"")+'js-publishbar-changePlace" class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2007"),
[]))+' <span class="j-508-label">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4601"),[]))+"</span></a>":"");output.append("</div></div></section>");return opt_sb?"":output.toString()};
;
goog.provide("jive.tags.autocomplete.tags");
jive.tags.autocomplete.tags=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append('<div id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",' jive-compose-tags-form" class="j-tag-form"><label for="js-tag-input',opt_data.identifier?" "+soy.$$escapeHtml(opt_data.identifier):"",'j">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3130"),[])),' <span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k312f"),[])),
"</span></label>");jive.tags.autocomplete.tagInput(opt_data,output);output.append("</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.publishbar.tagSets");
jive.publishbar.tagSets=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.placeCategories&&opt_data.placeCategories.length>0){output.append('<div id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-tagsets"><input type="hidden" name="publishBar.categories" id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'j-publishbar-categories" value="" /><div id="jive-compose-categories" class="clearfix" role="group"><label></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2004"),
[])),'<span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1573"),[])),"</span></label><table><tr><td>");var placeCategoryList18=opt_data.placeCategories;var placeCategoryListLen18=placeCategoryList18.length;for(var placeCategoryIndex18=0;placeCategoryIndex18<placeCategoryListLen18;placeCategoryIndex18++){var placeCategoryData18=placeCategoryList18[placeCategoryIndex18];output.append(!(placeCategoryIndex18==0)&&placeCategoryIndex18%opt_data.categoriesPerColumn==0?
"</td><td>":"",'<div><span class="jive-category-wrap"><input type="checkbox" id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"","j-category_",soy.$$escapeHtml(placeCategoryData18.id),'" class="j-category-input" value="',soy.$$escapeHtml(placeCategoryData18.id),'" ',opt_data.categories&&opt_data.categories.indexOf(placeCategoryData18.id)>-1?'checked="checked"':"",' data-tags="');var tagList35=placeCategoryData18.tags;var tagListLen35=tagList35.length;for(var tagIndex35=0;tagIndex35<
tagListLen35;tagIndex35++){var tagData35=tagList35[tagIndex35];output.append(soy.$$escapeHtml(tagData35),!(tagIndex35==tagListLen35-1)?", ":"")}output.append('" role="checkbox" /><label for="j-category_',soy.$$escapeHtml(placeCategoryData18.id),'" class="font-color-normal"><i class="jive-icon-glyph icon-categories"></i><span class="j-catname">',soy.$$escapeHtml(placeCategoryData18.name),"</span></label></span></div>")}output.append('</td></tr></table></div><content tag="jiveTooltip"><div id="jiveTT-note-suggest" class="jive-tooltip-help notedefault snp-mouseoffset"><div id="jive-note-category-suggestion-body"><strong>',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1572"),[])),"</strong><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k159c"),[])),'&nbsp;<strong id="jive-note-category-tags"></strong></p></div></div></content></div>')}return opt_sb?"":output.toString()};
;
goog.provide("jive.publishbar.organize");jive.publishbar.organize=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.showTags){jive.tags.autocomplete.tags(opt_data,output);if(opt_data.showCategories)jive.publishbar.tagSets(opt_data,output)}return opt_sb?"":output.toString()};
;
goog.provide("jive.publishbar.authorPolicyOption");
jive.publishbar.authorPolicyOption=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<li ",opt_data.hidden?'style="display: none;"':"",'><input type="radio" id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"","js-publishbar-docAuthorPolicy-",soy.$$escapeHtml(opt_data.value),'" name="publishBar.authorPolicy" value="',soy.$$escapeHtml(opt_data.value),'" ',opt_data.hidden?'disabled="disabled" ':"",opt_data.selected?'checked="checked"':"",' role="radio"/><label for="',
opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"","js-publishbar-docAuthorPolicy-",soy.$$escapeHtml(opt_data.value),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey(opt_data.nameKey)),[])),"</label></li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.publishbar.documentAuthors");
jive.publishbar.documentAuthors=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="j-rc5"><input type="checkbox" name="publishBar.docAuthorsOption" id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-docAuthorsOption" ',!opt_data.defaultAuthorPolicySelected||opt_data.forceAuthorList?' checked="checked"':"",' role="checkbox" value="true"/><input type="hidden" name="publishBar.defaultAuthorshipPolicy" id="',opt_data.identifier?
soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-docDefaultAuthorshipPolicy"  value="',soy.$$escapeHtml(opt_data.defaultAuthorPolicy),'"/><label for="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-docAuthorsOption">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey(opt_data.authorPolicyNameKey)),[])),' <span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey(opt_data.authorPolicyDescriptionKey)),
[])),'</span></label><div id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-docAuthorDetails" class="j-advanced-details"><ul role="radiogroup">');var authorPolicyOptionList30=opt_data.authorPolicyOptions;var authorPolicyOptionListLen30=authorPolicyOptionList30.length;for(var authorPolicyOptionIndex30=0;authorPolicyOptionIndex30<authorPolicyOptionListLen30;authorPolicyOptionIndex30++){var authorPolicyOptionData30=authorPolicyOptionList30[authorPolicyOptionIndex30];jive.publishbar.authorPolicyOption(soy.$$augmentMap(authorPolicyOptionData30,
{selected:opt_data.authorPolicy==authorPolicyOptionData30.value,identifier:opt_data.identifier}),output)}output.append('</ul><div id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-docAuthors-multiple" class="j-publishbar-people-block" ',!opt_data.authorPolicyMultiple?'style="display:none;"':"",'><label for="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-docAuthors" class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3109"),
[])),'</label><input type="text" id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-docAuthors" name="publishBar.authors" class="j-autocomplete-input j-user-autocomplete j-ui-elem" role="combobox"/></div></div></li>');return opt_sb?"":output.toString()};
;
goog.provide("jive.publishbar.documentApprovers");
jive.publishbar.documentApprovers=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="j-rc5"><div class="clearfix"><input type="checkbox" name="publishBar.docApproversOption" id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-docApproversOption" ',opt_data.approvers&&opt_data.approvers.length>0?'checked="checked"':"",' role="checkbox" /><label for="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-docApproversOption">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3103"),[])),'</label></div><div id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-docApproversDetails" class="j-publishbar-people-block" ',!(opt_data.approvers&&opt_data.approvers.length>0)?'style="display: none;"':"",">");if(opt_data.placeApprovers&&opt_data.placeApprovers.length>0){output.append('<div class="j-place-approvers"><span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k188b"),[])),'</span><div class="jive-chooser-list j-result-list"><ul class="clearfix">');
var placeApproverList31=opt_data.placeApprovers;var placeApproverListLen31=placeApproverList31.length;for(var placeApproverIndex31=0;placeApproverIndex31<placeApproverListLen31;placeApproverIndex31++){var placeApproverData31=placeApproverList31[placeApproverIndex31];output.append("<li>");jive.shared.displayutil.userDisplayNameLink(placeApproverData31,output);output.append("</li>")}output.append('</ul></div></div><label for="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-docApprovers">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3102"),[])),"</label><br/>")}output.append('<input type="text" id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-docApprovers" name="publishBar.approvers" class="j-autocomplete-input j-user-autocomplete j-ui-elem" role="combobox" aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3102"),[])),'"/></div></li>');return opt_sb?"":output.toString()};
;
goog.provide("jive.publishbar.commentOption");
jive.publishbar.commentOption=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<li ",opt_data.hidden?'style="display: none;"':"",'><input type="radio" id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"","js-publishbar-",soy.$$escapeHtml(opt_data.id),'" name="publishBar.commentStatus" value="',soy.$$escapeHtml(opt_data.value),'"',opt_data.selected?'checked="checked"':"",' role="radio" /><label for="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):
"","js-publishbar-",soy.$$escapeHtml(opt_data.id),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey(opt_data.nameKey)),[])),"</label></li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.publishbar.commentOptions");
jive.publishbar.commentOptions=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="j-rc5"><input type="checkbox" name="publishBar.commentOption" id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-commentOption" ',opt_data.restrictComments?'checked="checked"':"",' role="checkbox" /><label for="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-commentOption">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3110"),
[])),'</label><div id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-commentOptionDetails" class="j-advanced-details" ',!opt_data.showAdditionalCommentOptions||!opt_data.restrictComments?'style="display: none;"':"",'><ul role="radiogroup">');var commentStatusOptionList26=opt_data.commentStatusOptions;var commentStatusOptionListLen26=commentStatusOptionList26.length;for(var commentStatusOptionIndex26=0;commentStatusOptionIndex26<commentStatusOptionListLen26;commentStatusOptionIndex26++){var commentStatusOptionData26=
commentStatusOptionList26[commentStatusOptionIndex26];jive.publishbar.commentOption(soy.$$augmentMap(commentStatusOptionData26,{selected:opt_data.commentStatus==commentStatusOptionData26.value,identifier:opt_data.identifier}),output)}output.append("</ul></div></li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.publishbar.blogPostPublishDate");
jive.publishbar.blogPostPublishDate=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="j-rc5"><input type="checkbox" name="publishBar.blogPublishOption" id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"","js-publishbar-blogPublishOption\" value='true' ",opt_data.selectedDate?'checked="checked"':"",' role="checkbox" /><label for="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-blogPublishOption">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k310e"),
[])),'</label><div id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-blogPublishDetails" ',!opt_data.selectedDate?'style="display: none;"':"",'><span class="publishAtDateTimePicker"/><input type="text" id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'publishDate" name="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishBar.publishDate.selectedDate"),[])),'" aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2032"),[])),
'" class="j-time-picker j-form-datepicker" autocomplete="off" value="" required /></span> ');jive.shared.soy.resourceInlineJs({code:"jQuery(document).ready(function() {define(['apps/shared/views/date_picker_view'], function(DatePickerView) {var datePicker = new DatePickerView({ locale: \""+soy.$$escapeHtml(opt_data.locale)+"\" }); datePicker.addDatePicker('#"+(opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"")+"publishDate');});});"},output);output.append('<select name="publishBar.publishDate.selectedHour" aria-label="',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2098"),[])),'">');if(true==opt_data.is24HrTime)for(var hour48=0;hour48<24;hour48++)output.append('<option value="',soy.$$escapeHtml(hour48),'"',hour48==opt_data.selectedHour?' selected="true"':"",">",soy.$$escapeHtml(hour48),"</option>");else for(var hour59=1;hour59<13;hour59++)output.append('<option value="',soy.$$escapeHtml(hour59),'"',hour59==opt_data.selectedHour?' selected="true"':"",">",soy.$$escapeHtml(hour59),"</option>");output.append('</select><select name="publishBar.publishDate.selectedMinute" aria-label="',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20d8"),[])),'">');for(var minute72=0;minute72<60;minute72++)output.append('<option value="',soy.$$escapeHtml(minute72),'"',minute72==opt_data.selectedMinute?' selected="true"':"",">",minute72<10?"0":"",soy.$$escapeHtml(minute72),"</option>");output.append("</select>");if(true!=opt_data.is24HrTime){output.append('<select name="publishBar.publishDate.selectedPeriod" aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k210f"),[])),
'">');var periodList91=opt_data.periods;var periodListLen91=periodList91.length;for(var periodIndex91=0;periodIndex91<periodListLen91;periodIndex91++){var periodData91=periodList91[periodIndex91];output.append('<option value="',soy.$$escapeHtml(periodData91),'"',periodData91==opt_data.selectedPeriod?' selected="true"':"",">",soy.$$escapeHtml(periodData91),"</option>")}output.append("</select>")}output.append("</li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.polls.voteStartImmediatelyOption");
jive.polls.voteStartImmediatelyOption=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li><input type="radio" name="activeMode" value="',soy.$$escapeHtml(opt_data.optionBean.value),'" id="',soy.$$escapeHtml(opt_data.optionBean.id),'"',opt_data.optionBean.id==opt_data.activeBean.id?' checked="checked" ':"",' /><label for="',soy.$$escapeHtml(opt_data.optionBean.id),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2c3c"),[])),"</label></li>");return opt_sb?
"":output.toString()};
;
goog.provide("jive.polls.voteStartLaterOption");
jive.polls.voteStartLaterOption=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li><input type="radio" name="activeMode" value="',soy.$$escapeHtml(opt_data.optionBean.value),'" id="',soy.$$escapeHtml(opt_data.optionBean.id),'"',opt_data.optionBean.id==opt_data.activeBean.id?' checked="checked" ':"",' /><label for="',soy.$$escapeHtml(opt_data.optionBean.id),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2c3b"),[])),' </label><span class="activeDatePicker" ',
opt_data.optionBean.id!=opt_data.activeBean.id?'style="display:none;"':"",">");jive.shared.form.datepicker({id:"activeDate",name:"activeDate",value:opt_data.optionBean.date?opt_data.optionBean.date:"",initialize:false,futureOnly:true},output);if(opt_data.optionBean.date)jive.shared.soy.resourceInlineJs({code:'$j(function() {$j("#activeDate").attr("value", "'+soy.$$escapeHtml(opt_data.optionBean.date)+'");});'},output);output.append("</span></li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.polls.voteStart");
jive.polls.voteStart=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div id="jive-poll-active" class="j-form-row jive-poll-exp clearfix"><label>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2c3e"),[])),'<span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2c3d"),[])),"</span></label><ul>");var optionList8=opt_data.voteStartOptions;var optionListLen8=optionList8.length;for(var optionIndex8=0;optionIndex8<optionListLen8;optionIndex8++){var optionData8=
optionList8[optionIndex8];jive.shared.soy.render({templateName:optionData8.optionTemplate,data:function(){var map={};var pairs=[["optionBean",optionData8.id==opt_data.voteStartBean.id?opt_data.voteStartBean:optionData8],["activeBean",opt_data.voteStartBean]];for(var i=0;i<pairs.length;i+=1)map[pairs[i][0]]=pairs[i][1];return map}(),failGracefully:false},output)}output.append("</ul></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.polls.voteEndsNowOption");
jive.polls.voteEndsNowOption=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li><input type="radio" name="endsMode" value="',soy.$$escapeHtml(opt_data.optionBean.value),'" id="',soy.$$escapeHtml(opt_data.optionBean.id),'"',opt_data.optionBean.id==opt_data.activeBean.id?' checked="checked" ':"",' /><label for="',soy.$$escapeHtml(opt_data.optionBean.id),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2c0d"),[])),'<span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2c0c"),
[])),"</span></label></li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.polls.voteEndsNeverOption");
jive.polls.voteEndsNeverOption=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li><input type="radio" name="endsMode" value="',soy.$$escapeHtml(opt_data.optionBean.value),'" id="',soy.$$escapeHtml(opt_data.optionBean.id),'"',opt_data.optionBean.id==opt_data.activeBean.id?' checked="checked" ':"",' /><label for="',soy.$$escapeHtml(opt_data.optionBean.id),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2c0e"),[])),"</label></li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.polls.voteEndsRelativeOption");
jive.polls.voteEndsRelativeOption=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li><input type="radio" name="endsMode" value="',soy.$$escapeHtml(opt_data.optionBean.value),'" id="',soy.$$escapeHtml(opt_data.optionBean.id),'" aria-labelledby="',soy.$$escapeHtml(opt_data.optionBean.id),'-label"',opt_data.optionBean.id==opt_data.activeBean.id?' checked="checked" ':"",' /><label id="',soy.$$escapeHtml(opt_data.optionBean.id),'-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2bd5"),
[new soydata.VERY_UNSAFE.ordainSanitizedHtml('<input type="text" name="endsDays" id="endsDays" size="3" value="14" class="autoWidth"/>')])),"</label></li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.polls.voteEndsLaterOption");
jive.polls.voteEndsLaterOption=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li><input type="radio" name="endsMode" value="',soy.$$escapeHtml(opt_data.optionBean.value),'" id="',soy.$$escapeHtml(opt_data.optionBean.id),'"',opt_data.optionBean.id==opt_data.activeBean.id?' checked="checked" ':"",' /><label for="',soy.$$escapeHtml(opt_data.optionBean.id),'" id="endLatr">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2bd6"),[])),' </label><span class="expiresDatePicker" ',
opt_data.optionBean.id!=opt_data.activeBean.id?'style="display:none;"':"",">");jive.shared.form.datepicker({id:"endsDate",name:"endsDate",value:"",initialize:false},output);if(opt_data.optionBean.date)jive.shared.soy.resourceInlineJs({code:'$j(function() {$j("#endsDate").attr("value", "'+soy.$$escapeHtml(opt_data.optionBean.date)+'");});'},output);output.append("</span></li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.polls.voteEnd");
jive.polls.voteEnd=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div id="jive-poll-end" class="j-form-row jive-poll-exp clearfix"><label>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2c3a"),[])),'<span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2c39"),[])),"</span></label><ul>");var optionList8=opt_data.voteEndOptions;var optionListLen8=optionList8.length;for(var optionIndex8=0;optionIndex8<optionListLen8;optionIndex8++){var optionData8=
optionList8[optionIndex8];jive.shared.soy.render({templateName:optionData8.optionTemplate,data:function(){var map={};var pairs=[["optionBean",optionData8.id==opt_data.voteEndBean.id?opt_data.voteEndBean:optionData8],["activeBean",opt_data.voteEndBean]];for(var i=0;i<pairs.length;i+=1)map[pairs[i][0]]=pairs[i][1];return map}(),failGracefully:false},output)}output.append("</ul></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.publishbar.pollOptions");
jive.publishbar.pollOptions=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="j-rc5"><input type="checkbox" name="publishBar.pollVoteOptions" id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-pollVoteOptions" value="true" ',!opt_data.defaultOptions?'checked="checked"':"",' role="checkbox" /><label for="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-pollVoteOptions">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k312e"),
[])),'</label><div id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-pollVoteDetails" ',opt_data.defaultOptions?'style="display: none;"':"",">");jive.polls.voteStart(opt_data,output);jive.polls.voteEnd({voteEndOptions:opt_data.voteEndsOptions,voteEndBean:opt_data.voteEndsBean},output);output.append("</div></li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.publishbar.collaborationOptions");
jive.publishbar.collaborationOptions=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.showOptionsLink){output.append('<label><a href="#" id="',opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-collab-link">',opt_data.expandAdvancedOptions?'<span class="jive-icon-glyph icon-arrow-down2"></span>':'<span class="jive-icon-glyph icon-arrow-right2"></span>',"<strong>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k310f"),[])),'</strong></a></label><ul class="j-advanced-options" id="',
opt_data.identifier?soy.$$escapeHtml(opt_data.identifier):"",'js-publishbar-collab"',!opt_data.expandAdvancedOptions?' style="display: none;"':"",' role="group" >');if(opt_data.showAuthors){jive.publishbar.documentAuthors(soy.$$augmentMap(opt_data.authorsBean,{identifier:opt_data.identifier}),output);if(opt_data.showApprovers)jive.publishbar.documentApprovers(soy.$$augmentMap(opt_data.approversBean,{identifier:opt_data.identifier}),output)}if(opt_data.showCommentOptions)jive.publishbar.commentOptions(soy.$$augmentMap(opt_data.commentOptionsBean,
{identifier:opt_data.identifier}),output);if(opt_data.showBlogPostPublishDate)jive.publishbar.blogPostPublishDate(soy.$$augmentMap(opt_data.blogPostPublishDateBean,{identifier:opt_data.identifier}),output);if(opt_data.showPollOptions)jive.publishbar.pollOptions(soy.$$augmentMap(opt_data.pollOptionsBean,{identifier:opt_data.identifier}),output);output.append("</ul>")}return opt_sb?"":output.toString()};
;
goog.provide("jive.publishbar.guestInvited");jive.publishbar.guestInvited=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-tips">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3115"),[])),"</div>");return opt_sb?"":output.toString()};
;
function PublishBarTagSetSupport(b,e,a,d){var c=this;this.tagInput=$j(b);this.categoriesId=e;this.identifier=a;this.tagSets=[];this.suggestCategories=function(f){if(this.tagSets.length>0){if(!f){f=this.tagInput.val().toLowerCase().split(",")}$j(this.tagSets).each(function(){var g=this;var h=g.tags;var i=true;$j(f).each(function(j,k){if($j.trim(k)!=""){if($j.inArray(k,h)!=-1){i=false;return false}}});if(i){c.undoHighlight($j("#"+(c.identifier||"")+"j-category_"+g.id))}else{c.doHighlight($j("#"+(c.identifier||"")+"j-category_"+g.id))}})}};this.doHighlight=function(f){$j(f).closest("span").find("img").show();$j(f).closest("span").addClass("jive-category-highlight")};this.undoHighlight=function(f){$j(f).closest("span").removeClass("jive-category-highlight");$j(f).closest("span").find("label").find("img").hide()};this.updateTagSets=function(){var f=[];$j("#jive-compose-categories").find(".j-category-input").each(function(){var g=$j(this);if(g.prop("checked")){f.push(g.val())}});$j("#"+this.categoriesId).val(f.join(","))};$j("#jive-compose-categories").find(".j-category-input").each(function(){c.tagSets.push({id:$j(this).val(),tags:_.map($j(this).attr("data-tags").split(","),function(f){return f.trim()})})});$j("#jive-compose-categories").find(".j-category-input").click(function(){c.updateTagSets()});this.suggestCategories();this.updateTagSets();$j("#jive-compose-categories img.tooltip").tooltip({of:$j("#jive-compose-categories img.tooltip"),position:"left top",at:"right top",collision:"none flip"}).on("show",function(g){$j("p#tooltip").css({"z-index":100});var f=$j(this).closest("span").find("input").data("tags");$j(g.relatedTarget).find("#jive-note-category-tags").html(f)})};
;
goog.provide("jive.publishbar.containerLink");
jive.publishbar.containerLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.writableByUser?'<a href="#" data-objecttype="'+soy.$$escapeHtml(opt_data.type)+'" data-objectid="'+soy.$$escapeHtml(opt_data.id)+'" class="'+(opt_data.extraCssClass?soy.$$escapeHtml(opt_data.extraCssClass):"")+" js-target-container"+(opt_data.props&&opt_data.props.isVisibleToPartner?" j-external-access":"")+'">':'<span class="j-place-unavailable">',opt_data.noIcon?"":'<span class="'+
(opt_data.writableByUser?soy.$$escapeHtml(opt_data.iconCss)+" jive-icon-"+(opt_data.iconSize?soy.$$escapeHtml(opt_data.iconSize):"med"):"jive-icon-sml jive-icon-place-unavailable")+'"></span>','<span class="',!opt_data.writableByUser?"jive-container-unavailable-text":"lnk"," js-container-title ",opt_data.overrideNameCssClass?soy.$$escapeHtml(opt_data.overrideNameCssClass):"",'" ',!opt_data.writableByUser?'title="'+(opt_data.type==2020?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2aa1"),
[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2aa0"),[])))+'"':"",">",soy.$$escapeHtml(opt_data.subject),"</span>",opt_data.props&&opt_data.props.isVisibleToPartner?'<span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2968"),[]))+'"></span>':"",opt_data.writableByUser?"</a>":"</span>",opt_data.caption?' <span class="j-container-caption font-color-meta">'+soy.$$escapeHtml(opt_data.caption)+"</span>":"");return opt_sb?"":output.toString()};
;
goog.provide("jive.publishbar.containerList");
jive.publishbar.containerList=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-places-list"><ul class="j-autocomplete-results j-icon-list" role="listbox">');var containerList4=opt_data.containers;var containerListLen4=containerList4.length;if(containerListLen4>0)for(var containerIndex4=0;containerIndex4<containerListLen4;containerIndex4++){var containerData4=containerList4[containerIndex4];output.append('<li role="option">');jive.publishbar.containerLink(soy.$$augmentMap(containerData4,
{contentType:opt_data.contentType,iconSize:"med",upload:opt_data.upload,writableByUser:containerData4.prop&&containerData4.prop.perms&&containerData4.prop.perms.allowedToContribute&&containerData4.prop.perms.allowedToMove,props:containerData4.prop}),output);output.append("</li>")}else output.append(!opt_data.renderType||opt_data.renderType=="standard"?'<li role="option">'+(opt_data.emptyKey?'<p class="font-color-meta j-empty">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey(opt_data.emptyKey)),
[]))+"</p>":'<p class="font-color-meta j-empty">'+(opt_data.communityFeatureVisible?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3129"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3111"),[])))+"</p>")+"</li>":"");if(opt_data.renderType&&opt_data.renderType=="quick"){if(opt_data.showCommunityOption){output.append('<li role="option">');jive.publishbar.containerLink({subject:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3116"),[opt_data.communityName])),type:opt_data.userContainerDescriptor.objectType,
id:opt_data.userContainerDescriptor.id,iconCss:"",iconSize:"",noIcon:true,writableByUser:true,overrideNameCssClass:"js-container-title-override"},output);output.append("</li>")}output.append('<li role="option">');jive.publishbar.containerLink({subject:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k312b"),[])),type:-1,id:-1,iconCss:"",iconSize:"",noIcon:true,extraCssClass:"suggestBrowseAllPlaces",writableByUser:true},output);output.append("</li>")}output.append("</ul></div>");return opt_sb?
"":output.toString()};
;
goog.provide("jive.publishbar.placeSearchResults");
jive.publishbar.placeSearchResults=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-pop-main j-menu j-quick-menu">');if(opt_data.suggested&&opt_data.containers.length==0&&opt_data.renderType=="standard")output.append(!opt_data.renderType||opt_data.renderType=="standard"?'<div class="j-actions"><strong>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k312d"),[]))+"</strong></div>"+(opt_data.communityFeatureVisible?'<p class="j-noresults">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k312c"),
[]))+"</p>":'<p class="j-noresults">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3113"),[]))+"</p>"):"");else{output.append(!opt_data.renderType||opt_data.renderType=="standard"?'<p class="j-actions">'+(opt_data.suggested?opt_data.communityFeatureVisible?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k312d"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3114"),[])):opt_data.communityFeatureVisible?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k312a"),[])):
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3112"),[])))+"</p>":"");jive.publishbar.containerList(opt_data,output)}output.append("</div>");return opt_sb?"":output.toString()};
;
jive.namespace("PublishBar");jive.PublishBar.PlaceView=jive.oo.Class.extend(function(a){jive.conc.observable(this);this.init=function(d,e,h,f,c){var b=this;this.$input=$j(d);this.$browse=$j(h);this.$input.suggestBox({typeAheadOptions:{itemSelector:"li:visible:has('a')"},queryFunc:function g(i){if(!i||i.trim()==""){return b.emitP("suggest")}else{return b.emitP("search",i)}},processResults:function(l,k,j){var i=!j||j.trim()=="";return $j.extend({suggested:i,communityFeatureVisible:jive.global.communityFeatureVisible},l)},template:function(i){return jive.publishbar.placeSearchResults($j.extend({renderType:f,showCommunityOption:c},i))},displayEmptySearch:true,popoverOptions:{flip:false,addClass:"j-autocomplete j-placePicker"}}).on("selectionChosen",function(k,j,i){i=i.find("a");b.selectPlace(i.data("objecttype"),i.data("objectid"),f,i.find("span.js-container-title-override").text());b.$input.trigger("close")}).on("focusWaitFinished",function(){b.$input.trigger("keystroke")}).on("close",function(i){i.stopPropagation()});b.$browse.click(function(i){b.emit("browse");i.preventDefault()})};this.selectPlace=function(e,b,d,c){this.emit("selectPlace",e,b,d,c)}});define("apps/publish_bar/views/place_view",function(){return jive.PublishBar.PlaceView});
;
jive.namespace("PublishBar");define("apps/publish_bar/models/search_places_source",["apps/shared/models/rest_service","jquery"],function(a,b){jive.PublishBar.SearchPlacesSource=a.extend(function(d,e){d.resourceType="container";d.init=function(g){e.init.call(this,g);this.RESOURCE_ENDPOINT=jive.rest.url("/containers/search")};this.findAll=function(h){var g=e.findAll.call(this,h).deferred();g.allowedToContribute=function(i){return g.pipe(c.bind(null,i))};return g};var f=["prop","perms","allowedToContribute"];function c(i,h){var g=h.containers.filter(function(j){var k=f.reduce(function(l,m){return typeof l[m]==="undefined"||l[m]},j);return k==i});return b.extend({},h,{containers:g})}});return jive.PublishBar.SearchPlacesSource});
;
jive.namespace("PublishBar");define("apps/publish_bar/models/suggested_places_source",["apps/shared/models/rest_service"],function(a){jive.PublishBar.SuggestedContainersSource=a.extend(function(b,c){b.resourceType="container";b.init=function(d){c.init.call(this,d);$j.extend(this.defaultParams,{containerType:d.containerType,containerID:d.containerID});this.RESOURCE_ENDPOINT=jive.rest.url("/containers/suggested")}});return jive.PublishBar.SuggestedContainersSource});
;
jive.namespace("PublishBar");jive.PublishBar.PlaceMain=jive.oo.Class.extend(function(a){jive.conc.observable(this);a.init=function(l){var e=this;var b=l.objectType||-1;var m=l.upload||false;var h=l.containerType||-1;var k=l.containerID||-1;var c=l.renderType;var i=l.showCommunityOption;var j=new jive.PublishBar.SuggestedContainersSource({containerType:h,containerID:k});var g=new jive.PublishBar.SearchPlacesSource();var d=new jive.PublishBar.PlaceView($j("#"+l.publishBarPlaceInputId),$j("#"+l.publishBarPlaceResultsId),$j("#"+l.publishBarPlaceBrowseId),c,i);d.addListener("suggest",function(n){j.get(b).addCallback(function(o){n.emitSuccess(o)})});d.addListener("search",function(o,p){var n=g.findAll({query:o,contentType:b,maxReturned:10});n.allowedToContribute(true).then(function(q){if(q.containers&&q.containers.length>0){p.emitSuccess(q)}else{n.then(function(r){p.emitSuccess(r)})}})});function f(){var n=new jive.Placepicker.Main({pickerContext:"create",objectType:b,containerType:h,containerID:k,upload:m,closeOnSelect:true,hideUserContainer:true});n.showPicker();n.addListener("container",function(o,p){d.selectPlace(o.targetContainerType,o.targetContainerID)})}d.addListener("browse",function(){f()});this.addListener("browse",function(){f()});d.addListener("selectPlace",function(q,n,p,o){e.emit("selectPlace",q,n,p,o)})}});define("apps/publish_bar/place_main",function(){return jive.PublishBar.PlaceMain});
;
jive.namespace("PublishBar");define("apps/publish_bar/models/publish_bar_source",["apps/shared/models/rest_service"],function(a){jive.PublishBar.PublishBarSource=a.extend(function(b,c){b.resourceType="container";b.init=function(d){d=d||{};c.init.call(this,d);this.RESOURCE_ENDPOINT=jive.rest.url("/publishbar")}});return jive.PublishBar.PublishBarSource});
;
jive.namespace("PublishBar");jive.PublishBar.Main=jive.oo.Class.extend(function(a){jive.conc.observable(this);a.init=function(d){var c=this;if(d.placeRenderType){c.placeRenderType=d.placeRenderType}if(d.showCommunityOption){c.showCommunityOption=d.showCommunityOption}c.identifierPrefix="";if(d.identifier){c.identifierPrefix=d.identifier}c.placeViewContainerId=c.identifierPrefix+"js-publishbar-place-selection";c.organizeContainerId=c.identifierPrefix+"js-publishbar-organize";c.collaborationContainerId=c.identifierPrefix+"js-publishbar-collaboration";c.loadingContainerId=c.identifierPrefix+"js-publishbar-loading";c.publishBarChangePlaceId=c.identifierPrefix+"js-publishbar-changePlace";c.publishBarOptionPrefixId=c.identifierPrefix+"js-publishbar-option-";c.publishBarOptionPlaceId=c.identifierPrefix+"js-publishbar-option-place";c.publishBarOptionAllId=c.identifierPrefix+"js-publishbar-option-all";c.publishBarOptionPeopleId=c.identifierPrefix+"js-publishbar-option-people";c.publishBarPlaceInputId=c.identifierPrefix+"js-publishbar-place-input";c.publishBarUsersId=c.identifierPrefix+"js-publishbar-users";c.visibilityPeopleId=c.identifierPrefix+"js-visibility-people";c.publishBarCreateBlogChangeId=c.identifierPrefix+"js-publishbar-createblog-change";c.publishBarCreateBlogDefault=c.identifierPrefix+"js-publishbar-createblog-default";c.publishBarCreateBlog=c.identifierPrefix+"js-publishbar-createblog";c.publishBarOptionPrivateId=c.identifierPrefix+"js-publishbar-option-private";c.privateDefaultAuthorPolicyId=c.identifierPrefix+"private-default-authorPolicy";c.publishBarTagInputClass=c.identifierPrefix+"js-tag-input";c.publishBarDocAuthorsId=c.identifierPrefix+"js-publishbar-docAuthors";c.publishBarDocAuthorPolicyPrefixId=c.identifierPrefix+"js-publishbar-docAuthorPolicy-";c.publishBarDocAuthorDetailsId=c.identifierPrefix+"js-publishbar-docAuthorDetails";c.publishBarDocDefautlAuthorshipPolicyId=c.identifierPrefix+"js-publishbar-docDefaultAuthorshipPolicy";c.publishBarDocAuthorOptionId=c.identifierPrefix+"js-publishbar-docAuthorsOption";c.publishBarDocAuthorsMultipleId=c.identifierPrefix+"js-publishbar-docAuthors-multiple";c.publishBarDocApproversId=c.identifierPrefix+"js-publishbar-docApprovers";c.publishBarDocApproversOptionId=c.identifierPrefix+"js-publishbar-docApproversOption";c.publishBarDocApproversDetailsId=c.identifierPrefix+"js-publishbar-docApproversDetails";c.publishBarCommentOptionId=c.identifierPrefix+"js-publishbar-commentOption";c.publishBarCommentOptionDetailsId=c.identifierPrefix+"js-publishbar-commentOptionDetails";c.publishBarCommentStatusNoneId=c.identifierPrefix+"js-publishbar-commentStatusNone";c.PublishBarCommentStatusOpenId=c.identifierPrefix+"js-publishbar-commentStatusOpen";c.publishDateId=c.identifierPrefix+"publishDate";c.publishBarBlogPublishOptionId=c.identifierPrefix+"js-publishbar-blogPublishOption";c.publishBarBlogPublishDetailsId=c.identifierPrefix+"js-publishbar-blogPublishDetails";c.publishBarPollVoteOptionsId=c.identifierPrefix+"js-publishbar-pollVoteOptions";c.publishBarPollVoteDetailsId=c.identifierPrefix+"js-publishbar-pollVoteDetails";c.publishBarCollabLinkId=c.identifierPrefix+"js-publishbar-collab-link";c.publishBarCollabId=c.identifierPrefix+"js-publishbar-collab";c.publishBarModerationWarningId=c.identifierPrefix+"js-publishbar-moderation-warning";c.publishBarPlaceResultsId=c.identifierPrefix+"js-publishbar-place-results";c.publishBarPlaceBrowseId=c.identifierPrefix+"js-publishbar-place-browse";c.publishBarTagSetsId=c.identifierPrefix+"js-publishbar-tagsets";c.publishBarCategories=c.identifierPrefix+"j-publishbar-categories";c.publishBarMoveNotifyStreams=c.identifierPrefix+"js-publishbar-move-notify-streams";c.statusUpdateModerationWarningId=c.identifierPrefix+"moderation-warning";c.activeLaterId="active-later";c.activeDateId="activeDate";c.endsNeverId="ends-never";c.endsDaysId="endsDays";c.endsDateId="endsDate";c.endsRelativeId="ends-relative";c.endsLaterId="ends-later";c.endsNowId="ends-now";c.publishBarSelectId=c.identifierPrefix+"js-publishbar-select";this.objectID=d.objectDescriptor?d.objectDescriptor.id:-1;this.objectType=d.objectType||-1;var b=d.initData||{};this.publishBarSource=new jive.PublishBar.PublishBarSource();this.placeViewContainer=$j("#"+c.placeViewContainerId);this.organizeContainer=$j("#"+c.organizeContainerId);this.collaborationContainer=$j("#"+c.collaborationContainerId);this.loadingContainer=$j("#"+c.loadingContainerId);this.resetAuthorshipOpts=false;this.visibility=b.visibilityBean.visibility;this.invitationsEnabled=b.visibilityBean.systemInvitationsEnabled;if(this.visibility=="place"&&b.visibilityBean.placeSelected){this.containerID=b.visibilityBean.placeItemBean.id;this.containerType=b.visibilityBean.placeItemBean.type;this.originalContainer={containerID:this.containerID,containerType:this.containerType}}this.handleVisibilityFocus=d.handleVisibilityFocus==null?true:d.handleVisibilityFocus;$j("#"+c.publishBarSelectId+" :radio").change(function(){c.setVisibility($j(this).val());if($j(this).val()!="place"){$j("#jive-compose-categories").remove()}});$j("#"+c.identifierPrefix+"j-publishbar-place-original").bind("resetToOriginalPlace",function(){var e=$j("#"+c.identifierPrefix+"j-publishbar-place-original");var f=e.data("placechangeable");if(f&&e.data("place-type-id")&&e.data("place-id")){c.selectPlace(e.data("place-type-id"),e.data("place-id"),e.data("render-type"),e.data("subject"))}});if(b.visibilityBean.placeSelected){this.initPlaceSelectedJavascript(b)}else{this.initVisibilityJavascript(b)}this.spinner=null;jive.acclaim.addListener("beforeFetch",a.setSpinnerVisibility.bind(this,"show"));jive.acclaim.addListener("afterFetch",a.setSpinnerVisibility.bind(this,"hide"))};a.setSpinnerVisibility=function(c){var b=this;var e=$j("#"+b.publishBarChangePlaceId).closest(".j-js-place-view-info").find(".j-js-publish-bar-acclaim-container"),d={inline:true,showLabel:false,size:"small"};e.css("position","relative");if(c==="show"&&!this.spinner){this.spinner=new jive.loader.LoaderView(d);this.spinner.prependTo(e)}else{if(c==="hide"&&this.spinner){this.spinner.destroy();this.spinner=null;e.find(".j-loading-container").remove()}}};a.setVisibility=function(c){var b=this;var d=b.visibility;b.visibility=c;if(d!="place"&&c=="place"){if(typeof(b.containerID)!="undefined"){return b.selectPlace(b.containerType,b.containerID)}if(d=="private"){b.resetAuthorshipOpts=true}}if(b.shouldAlertMove()){$j("#"+b.publishBarMoveNotifyStreams).show()}else{$j("#"+b.publishBarMoveNotifyStreams).hide()}if(!this.loadingContainer.find("#j-loading-content").length){b.spinner=new jive.loader.LoaderView({showLabel:false,size:"small"});b.spinner.appendTo(this.loadingContainer)}var e=(b.objectType<0||b.objectID<0)?"view":"edit";this.publishBarSource.get(e,{objectType:b.objectType,objectID:b.objectID,visibility:c}).addCallback(function(g){if(b.spinner){b.spinner.getContent().remove();b.spinner.destroy()}if(g.visibilityBean.visibility=="place"){g.visibilityBean.showVisibility=true}b.renderVisibilityContainer(g.visibilityBean);b.renderCollaborationContainer(g.optionsBean);b.initVisibilityJavascript(g);b.renderCreatorInfo(d,c,g);if(g.visibilityBean.showVisibility){var f=$j("ul#"+b.publishBarSelectId+" li div.j-share-to-option:visible");b.updateVisibilityFocus(f)}})};a.renderCreatorInfo=function(e,g,f){var b=this;var c=b.publishBarOptionPrefixId+e;var d=b.publishBarOptionPrefixId+g;$j("#"+c).remove("#"+b.identifierPrefix+"js-container-objecttype");$j("#"+c).remove("#"+b.identifierPrefix+"js-container-objectid");if(f.creator&&g!="place"){$j("#"+d).append(jive.publishbar.creatorVisibilityInfo({visibilityBean:f.visibilityBean,includeVisibilityValue:false}))}};a.selectPlace=function(h,c,e,d){var b=this;if(e=="quick"&&c==-1&&h==-1){this.jivePublishBarPlace.emit("browse");return}var g=new jive.loader.LoaderView({showLabel:false,size:"small"});g.appendTo(this.loadingContainer);var f=(b.objectType<0||b.objectID<0)?"view":"edit";this.publishBarSource.get(f,{objectType:this.objectType,objectID:this.objectID,visibility:"place",containerType:h,containerID:c}).addCallback(function(j){if(h!=14||c!=1){b.containerType=h;b.containerID=c}g.getContent().remove();g.destroy();if(b.tagAutocomplete){var i=b.tagAutocomplete.getTagsFromBadges();if(j.organizeBean.tags&&j.organizeBean.tags.length){j.organizeBean.tags=k(j.organizeBean.tags,i)}else{j.organizeBean.tags=i.join(",")}}b.renderPlaceViewContainer(j.visibilityBean.placeItemBean,d);b.renderOrganizeContainer(j.organizeBean);b.renderCollaborationContainer(j.optionsBean);b.initPlaceSelectedJavascript(j);if(b.shouldAlertMove()){$j("#"+b.publishBarMoveNotifyStreams).show()}else{$j("#"+b.publishBarMoveNotifyStreams).hide()}$j("#"+b.publishBarChangePlaceId).focus();require(["channel!publishBar"],function(l){l.trigger("place:selected",j.visibilityBean.placeItemBean)});b.emit("placeSelected",{containerType:h,containerId:c});function k(n,m){var l=n.split(",");return _.uniq(m.concat(l)).join(",")}})};a.updateVisibilityFocus=function(d){if(!this.handleVisibilityFocus){return}var c=this;var f=$j("ul#"+c.publishBarSelectId+" li div.j-share-to-option:visible"),b=f.siblings("label").find("input[type=radio]").attr("id"),e=d.siblings("label").find("input[type=radio]").attr("id");if(b===e){f.find(":focusable:first").focus()}};a.renderVisibilityContainer=function(d){var b=this,c=$j("ul#"+b.publishBarSelectId+" li div.j-share-to-option:visible");this.placeViewContainer.hide().empty();$j("ul#"+b.publishBarSelectId+" li div.j-share-to-option").hide().empty();if(d.showVisibility){$j("#"+b.publishBarOptionPrefixId+d.visibility).empty().append($j(jive.publishbar.visibility($j.extend({communityFeatureVisible:jive.global.communityFeatureVisible,identifier:b.identifierPrefix,inputBrowse:(c.data("inputbrowse")!==undefined?c.data("inputbrowse"):true),preInputNameKey:c.data("preinputnamekey")},d)))).show()}$j("#"+b.publishBarOptionPrefixId+d.visibility).parent().find("input[name='publishBar.visibility']").focus()};a.renderPlaceViewContainer=function(f,c){var b=this,d=$j("ul#"+b.publishBarSelectId+" li div.j-share-to-option");$j("ul#"+b.publishBarSelectId+" li div.j-share-to-option").hide().empty();var e=f;if(c){e.subject=c;e.iconCss=""}this.placeViewContainer.empty().append($j(jive.publishbar.placeView($j.extend({identifier:b.identifierPrefix,placeRenderType:b.placeRenderType,preInputNameKey:d.data("preinputnamekey"),placeChangeable:true,showExStorageInfo:true},e)))).show(0,function(){b.updateVisibilityFocus(d)})};a.renderOrganizeContainer=function(d){var b=this;var c=this.organizeContainer.clone();this.organizeContainer.empty().append($j(jive.publishbar.organize($j.extend({identifier:b.identifierPrefix},d))));this.transposeInputs(c,this.organizeContainer)};a.renderCollaborationContainer=function(c){var b=this;if(c.showOptionsLink){var d=this.collaborationContainer.clone();this.collaborationContainer.empty().append($j(jive.publishbar.collaborationOptions($j.extend({identifier:b.identifierPrefix},c)))).show();this.transposeInputs(d,this.collaborationContainer)}else{this.collaborationContainer.empty().hide()}};a.transposeInputs=function(d,b){var c=this;$j(d).find("input").each(function(){var e=$j(this);$j(b).find("input#"+e.attr("id")).each(function(){var f=$j(this);if(e.attr("type")=="radio"){}else{c.transposeNonRadioInput(e,f)}})});$j(d).find(".js-onboarding-tip").each(function(){var f=$j(this),e=f.next();$j(b).find("#"+e.attr("id")).before(f)})};a.transposeNonRadioInput=function(d,b){if(b.prop("disabled")){}var c=b.attr("type");if(c=="checkbox"){if(!b||$j(b).closest("li").find("input").length>1){return}b.prop("checked",d.prop("checked"))}else{b.val(d.val())}};a.initVisibilityJavascript=function(c){var b=this;if(c.visibilityBean.privateVisibility){this.initPrivateVisibilityJavascript(c.optionsBean)}else{this.destroyPrivateVisibilityJavascript()}if(c.visibilityBean.placeVisibility){this.initPlaceVisibilityJavascript()}else{if(c.visibilityBean.peopleVisibility){this.initPeopleVisibilityJavascript(c.visibilityBean.users)}else{if(c.visibilityBean.allVisibility){if(c.visibilityBean.personalBlog){this.initAllVisibilityJavascript()}}}}this.initTagJavascript(-1,-1);this.initOptionsJavascript(c.optionsBean);this.manageModerationWarning($j.extend(c,{initVisibility:true}));jive.localexchange.emit("initVisibilityJs",c,b)};a.initPlaceSelectedJavascript=function(c){var b=this;$j("#"+b.publishBarChangePlaceId).click(function(d){b.setVisibility("place");d.preventDefault()});this.initTagJavascript(c.visibilityBean.placeItemBean.type,c.visibilityBean.placeItemBean.id);this.initOptionsJavascript(c.optionsBean);this.manageModerationWarning(c);jive.localexchange.emit("initPlaceSelectedJs",c,b)};a.initPlaceVisibilityJavascript=function(){var b=this;this.jivePublishBarPlace=new jive.PublishBar.PlaceMain({objectType:this.objectType,publishBarPlaceInputId:b.publishBarPlaceInputId,publishBarPlaceResultsId:b.publishBarPlaceResultsId,publishBarPlaceBrowseId:b.publishBarPlaceBrowseId,renderType:b.placeRenderType,showCommunityOption:b.showCommunityOption});this.jivePublishBarPlace.addListener("selectPlace",function(f,c,e,d){b.selectPlace(f,c,e,d)});$j("#"+b.publishBarOptionPlaceId).find("#"+b.publishBarPlaceInputId).prop("required","required")};a.initPeopleVisibilityJavascript=function(c){var b=this;c=c?c:[];this.peopleAutocomplete=new jive.UserPicker.Main({multiple:true,valueIsUsername:true,emailAllowed:this.invitationsEnabled,listAllowed:true,canInvitePartners:true,$input:$j("#"+b.publishBarUsersId),startingUsers:{users:c,userlists:[]},selectionCallbacks:[this.decorateGuestUsers],userMessages:[this.getUserInviteMessage()]});$j("#"+b.visibilityPeopleId).find("input[name='publishBar.users']").prop("required","required").prop("errorFocus","#js-publishbar-users")};a.initAllVisibilityJavascript=function(){var b=this;$j("#"+b.publishBarCreateBlogChangeId).click(function(c){$j("#"+b.publishBarCreateBlogDefault).hide();$j("#"+b.publishBarCreateBlog).show();$j("#"+b.publishBarCreateBlog).find("input").focus();c.preventDefault()});$j("#"+b.publishBarCreateBlog).keypress(function(c){if(c.keyCode==10||c.keyCode==13){c.preventDefault()}})};a.initPrivateVisibilityJavascript=function(c){var b=this;if(c.authorsBean){$j("#"+b.publishBarOptionPrivateId).append('<input type="hidden" id="'+b.privateDefaultAuthorPolicyId+'" name="publishBar.authorPolicy" value="'+c.authorsBean.authorPolicySingleValue+'"/>')}};a.destroyPrivateVisibilityJavascript=function(){var b=this;$j("#"+b.publishBarOptionPrivateId).remove("#"+b.privateDefaultAuthorPolicyId)};a.initTagJavascript=function(e,c){var b=this;this.publishBarTagSetSupport=new PublishBarTagSetSupport($j("."+b.publishBarTagInputClass),b.publishBarCategories);var d=$j("."+b.publishBarTagInputClass);if(d.length>0){this.tagAutocomplete=new jive.Tags.Controller(d,{containerType:e,containerID:c,identifierPrefix:b.identifierPrefix}).addListener("tags.change",function(f){b.publishBarTagSetSupport.suggestCategories(f)})}};a.initOptionsJavascript=function(b){if(b.showOptionsLink){this.initCollaborationToggleJavascript()}if(b.showAuthors){this.initDocumentAuthorsJavascript(b.authorsBean)}if(b.showApprovers){this.initDocumentApproversJavascript(b.approversBean.approvers)}if(b.showCommentOptions){this.initCommentOptionsJavascript(b.commentOptionsBean)}if(b.showBlogPostPublishDate){this.initBlogPostPublishDateJavascript(b.blogPostPublishDateBean)}if(b.showPollOptions){this.initPollOptionsJavascript()}};a.initDocumentAuthorsJavascript=function(e){var c=this;var h=e.authors||[];var g=[];if(this.peopleAutocomplete&&this.peopleAutocomplete.getSelectedUsersAndLists()){var d=this.peopleAutocomplete.getSelectedUsersAndLists().users||[];g=$j.map(d,function(l){var k=false;$j.each(h,function(m,n){if((l.id==-1&&jive.util.equalsIgnoreCaseAndPadding(l.email,l.email))||(l.id==n.id&&l.objectType==n.objectType)){k=true;return true}});if(k){return null}var j=$j.extend(true,{},l);j.excluded=true;return j});if(g.length>=1&&!h.length===0){$j("#"+c.publishBarDocAuthorOptionId).prop("checked",true).change();$j("#"+c.publishBarDocAuthorDetailsId).show();$j("#"+c.publishBarDocAuthorsMultipleId).show();$j("#"+c.publishBarDocAuthorPolicyPrefixId+e.authorPolicyMultipleValue).prop("checked",true).change()}else{if(d.length>=1&&h.length===0){$j("#"+c.publishBarDocAuthorOptionId).prop("checked",true).change();$j("#"+c.publishBarDocAuthorDetailsId).show();$j("#"+c.publishBarDocAuthorsMultipleId).hide();$j("#"+c.publishBarDocAuthorPolicyPrefixId+2).prop("checked",true).change()}else{if(h.length>=1&&d.length>=1&&(d.length>h.length)){$j("#"+c.publishBarDocAuthorOptionId).prop("checked",true).change();$j("#"+c.publishBarDocAuthorDetailsId).show();$j("#"+c.publishBarDocAuthorsMultipleId).show()}else{$j("#"+c.publishBarDocAuthorOptionId).prop("checked",false).change();$j("#"+c.publishBarDocAuthorDetailsId).hide();$j("#"+c.publishBarDocAuthorsMultipleId).hide()}}}}else{if($j("#"+c.publishBarDocAuthorOptionId).prop("checked")){$j("#"+c.publishBarDocAuthorDetailsId).show()}else{$j("#"+c.publishBarDocAuthorDetailsId).hide()}}$j.merge(h,g);var f={multiple:true,valueIsUsername:true,emailAllowed:c.invitationsEnabled,listAllowed:true,$input:$j("#"+c.publishBarDocAuthorsId),canInvitePartners:true,startingUsers:{users:h,userlists:[]}};var i=c.getEntitlementCheckObjectForAuthors();if(i){f=$j.extend(f,{object:i,entitlement:c.getAuthorEntitlementCheckMask(),userMessages:[c.getUserPermissionsMessage()],listMessages:[c.getListPermissionsMessage()]})}this.docAuthorAutocomplete=new jive.UserPicker.Main(f);if(e.forceAuthorList){this.docAuthorAutocomplete.setNoPicker(true);this.peopleAutocomplete.addListener("selectedUsersChanged",function(o){var l=c.docAuthorAutocomplete.getSelectedUsersAndLists(true),j=l.users,k=l.userlists;if(o.changes&&o.changes.added){$j("#"+c.publishBarDocAuthorPolicyPrefixId+e.authorPolicyMultipleValue).prop("checked",true).change();if(o.changes.added.users){k.push(o.changes.added);c.docAuthorAutocomplete.setLists(k)}else{var m=o.changes.added instanceof Array?o.changes.added:[o.changes.added];j.push.apply(j,m);c.docAuthorAutocomplete.setUsers(j)}}if(o.changes&&o.changes.removed){var n=-1;$j.map(j,function(p,q){if(p.id===o.changes.removed.id){n=q}});if(n!==-1){j.splice(n,1);c.docAuthorAutocomplete.setUsers(j)}if(j.length&&j.length>=1){$j("#"+c.publishBarDocAuthorPolicyPrefixId+e.authorPolicyMultipleValue).prop("checked",true).change()}else{$j("#"+c.publishBarDocAuthorPolicyPrefixId+e.authorPolicyMultipleValue).prop("checked",false).change();$j("#"+c.publishBarDocAuthorOptionId).prop("checked",false).change();$j("#"+c.publishBarDocAuthorDetailsId).hide()}}})}if(c.resetAuthorshipOpts){var b=$j("#"+c.publishBarDocAuthorOptionId);if(b.prop("checked")){b.prop("checked",false)}}$j("#"+c.publishBarDocDefautlAuthorshipPolicyId).val(e.defaultAuthorPolicy);$j("#"+c.publishBarDocAuthorOptionId).click(function(){if($j(this).is(":checked")){$j("#"+c.publishBarDocAuthorDetailsId).show();if($j("#"+c.publishBarDocAuthorDetailsId+' li:visible input[id="'+c.publishBarDocAuthorPolicyPrefixId+e.defaultAuthorPolicy+'"]').length==1){$j("#"+c.publishBarDocAuthorPolicyPrefixId+e.defaultAuthorPolicy).prop("checked",true)}else{$j($j("#"+c.publishBarDocAuthorDetailsId+' li:visible input[name="publishBar.authorPolicy"]')[0]).prop("checked",true)}if($j("#"+c.publishBarDocAuthorDetailsId+' input[name="publishBar.authorPolicy"]:checked').val()==e.authorPolicyMultipleValue){$j("#"+c.publishBarDocAuthorsMultipleId).show()}if($j("#"+c.publishBarOptionPeopleId).prop("checked")){c.docAuthorAutocomplete.setNoPicker(true)}}else{$j("#"+c.publishBarDocAuthorDetailsId).hide();$j("#"+c.publishBarDocAuthorPolicyPrefixId+e.defaultAuthorPolicy).prop("checked",true);$j("#"+c.publishBarDocAuthorsMultipleId).hide()}});$j("#"+c.publishBarDocAuthorDetailsId+' input[name="publishBar.authorPolicy"]').change(function(){if($j(this).is(":checked")&&$j(this).val()==e.authorPolicyMultipleValue){$j("#"+c.publishBarDocAuthorsMultipleId).show()}else{$j("#"+c.publishBarDocAuthorsMultipleId).hide()}})};a.initDocumentApproversJavascript=function(c){var b=this;c=c?c:[];var e={multiple:true,valueIsUsername:true,listAllowed:true,$input:$j("#"+b.publishBarDocApproversId),startingUsers:{users:c,userlists:[]},canInvitePartners:true};var d=b.getEntitlementCheckObject();if(d){e=$j.extend(e,{object:d,entitlement:b.getApproverEntitlementCheckMask(),userMessages:[b.getUserPermissionsMessage()],listMessages:[b.getListPermissionsMessage()]})}window.docApproversAutocomplete=new jive.UserPicker.Main(e);$j("#"+b.publishBarDocApproversOptionId).click(function(){if($j(this).is(":checked")){$j("#"+b.publishBarDocApproversDetailsId).show();$j("#"+b.publishBarDocApproversDetailsId).find("input[name='publishBar.approvers']").prop("required","required")}else{$j("#"+b.publishBarDocApproversDetailsId).hide();$j("#"+b.publishBarDocApproversDetailsId).find("input[name='publishBar.approvers']").removeProp("required")}})};a.initCommentOptionsJavascript=function(c){var b=this;$j("#"+b.publishBarCommentOptionId).click(function(){if($j(this).is(":checked")){if(c.showAdditionalCommentOptions){$j("#"+b.publishBarCommentOptionDetailsId).show()}$j("#"+b.publishBarCommentStatusNoneId).prop("checked",true)}else{$j("#"+b.publishBarCommentOptionDetailsId).hide();$j("#"+b.PublishBarCommentStatusOpenId).prop("checked",true)}})};a.initBlogPostPublishDateJavascript=function(c){var b=this;if(c.selectedDate){$j("#"+b.publishDateId).attr("value",c.selectedDate)}else{$j("#"+b.publishDateId).attr("value",c.defaultDate)}$j("#"+b.publishBarBlogPublishOptionId).click(function(){if($j(this).is(":checked")){$j("#"+b.publishBarBlogPublishDetailsId).show()}else{$j("#"+b.publishBarBlogPublishDetailsId).hide()}})};a.initPollOptionsJavascript=function(){var b=this;$j("#"+b.publishBarPollVoteOptionsId).click(function(){if($j(this).is(":checked")){$j("#"+b.publishBarPollVoteDetailsId).show()}else{$j("#"+b.publishBarPollVoteDetailsId).hide()}});$j("#"+b.publishBarPollVoteDetailsId).find("input[name='activeMode']").change(function(){if($j("#"+b.activeLaterId).is(":checked")){$j(".activeDatePicker").show()}else{$j(".activeDatePicker").hide();$j("#"+b.activeDateId).val("")}});$j("#"+b.publishBarPollVoteDetailsId).find("input[name='endsMode']").change(function(){if($j("#"+b.publishBarPollVoteDetailsId).find("#"+b.endsNeverId).is(":checked")){$j("#"+b.publishBarPollVoteDetailsId).find(".expiresDatePicker").hide();$j("#"+b.publishBarPollVoteDetailsId).find("#"+b.endsDaysId).val("");$j("#"+b.publishBarPollVoteDetailsId).find("#"+b.endsDateId).val("")}else{if($j("#"+b.publishBarPollVoteDetailsId).find("#"+b.endsRelativeId).is(":checked")){$j("#"+b.publishBarPollVoteDetailsId).find(".expiresDatePicker").hide();$j("#"+b.publishBarPollVoteDetailsId).find("#"+b.endsDateId).val("")}else{if($j("#"+b.publishBarPollVoteDetailsId).find("#"+b.endsLaterId).is(":checked")){$j("#"+b.publishBarPollVoteDetailsId).find("#"+b.endsDaysId).val("");$j("#"+b.publishBarPollVoteDetailsId).find(".expiresDatePicker").show()}else{if($j("#"+b.publishBarPollVoteDetailsId).find("#"+b.endsNowId).is(":checked")){$j("#"+b.publishBarPollVoteDetailsId).find(".expiresDatePicker").hide();$j("#"+b.publishBarPollVoteDetailsId).find("#"+b.endsDaysId).val("");$j("#"+b.publishBarPollVoteDetailsId).find("#"+b.endsDateId).val("")}}}}})};a.initCollaborationToggleJavascript=function(){var b=this;$j("#"+b.publishBarCollabLinkId).click(function(c){$j(this).find("span.jive-icon-glyph").toggleClass("icon-arrow-right2").toggleClass("icon-arrow-down2");$j("#"+b.publishBarCollabId).slideToggle("fast");c.preventDefault()})};a.getEntitlementCheckObject=function(){var b=this;if(b.visibility=="place"){if(b.objectID>0&&b.isPlaceUnchanged()){return{objectID:b.objectID||-1,objectType:b.objectType||-1}}else{return{objectID:b.containerID||-1,objectType:b.containerType||-1}}}else{return null}};a.getEntitlementCheckObjectForAuthors=function(){var b=this;if(b.visibility=="place"){return{objectID:b.containerID||-1,objectType:b.containerType||-1}}else{return null}};a.isPlaceUnchanged=function(){return this.originalContainer&&this.originalContainer.containerID==this.containerID&&this.originalContainer.containerType==this.containerType};a.shouldAlertMove=function(){return(this.objectID||-1)!=-1&&(this.objectType||-1)!=-1&&this.visibility=="place"&&!this.isPlaceUnchanged()};a.getAuthorEntitlementCheckMask=function(){return"CREATE_DOCUMENT"};a.getApproverEntitlementCheckMask=function(){return(this.objectID>0&&this.isPlaceUnchanged())?"VIEW":"VIEW_CONTENT"};a.getUserPermissionsMessage=function(){return{type:"warn",render:function(b){return jive.publishbar.userWithoutPermission(b)}}};a.getListPermissionsMessage=function(){return{type:"warn",render:function(b){return jive.publishbar.listWithoutPermission(b)}}};a.decorateGuestUsers=function(b){var c=b.find('[data-user-id="-1"]');c.append('<span class="jive-icon-sml jive-icon-info">')};a.getUserInviteMessage=function(){return{type:"info",render:function(b){return jive.publishbar.guestInvited({})}}};a.manageModerationWarning=function(d){var b=this;var c=d?d.visibilityBean.placeItemBean:null;if(c&&c.prop.isModerated){$j("#"+b.publishBarModerationWarningId).show();if(d.visibilityBean.contentType==1464927464){if($j("#"+b.statusUpdateModerationWarningId)){if(d.initVisibility){$j("#"+b.statusUpdateModerationWarningId).hide()}else{$j("#"+b.statusUpdateModerationWarningId).show()}}}}else{$j("#"+b.publishBarModerationWarningId).hide();if(d.visibilityBean.contentType==1464927464){if($j("#"+b.statusUpdateModerationWarningId)){$j("#"+b.statusUpdateModerationWarningId).hide()}}}if(d.visibilityBean.contentType!=1464927464){jive.localexchange.emit("placeChanged",c)}}});define("apps/publish_bar/main",function(){return jive.PublishBar.Main});
;
define("apps/status_input/data_source",["jive/promise_util","jquery","underscore"],function(d,c,u){var n={};var a=false;function e(w,y){var x=n[w];var z=x?x.then(u.identity,function(){return y()}):y();n[w]=z;return z}function j(){a=true;return b()}function t(){a=false;n={}}function h(w){return e(w,c.getJSON.bind(c,w))}function i(B){var w=c.trim(B.replace(/_/g," "));if(w.length>255){return[]}var x=10;var C={sort:"relevanceDesc",count:x,filter:"search("+w.replace(/[()*]/g,"")+"*)",origin:"atmention",highlight:"false"};var z=l("/search/people",C);var y=s("/search/places",C);var A=f("/search/contents",C);return[z.then(function(D){return{type:"people",list:D}}),y.then(function(D){return{type:"places",list:D}}),A.then(function(D){return{type:"content",list:D}})]}function b(z){var A={count:z||10,origin:"warmcache"};var x=g(A);var w=r(A);var y=o(A);return[x.then(function(B){return{type:"people",list:B}}),w.then(function(B){return{type:"places",list:B}}),y.then(function(B){return{type:"content",list:B}})]}function g(y){var w=l("/activities/frequent/people",{count:y.count,origin:y.origin}).then(function(z){return z.filter(function(A){return A.id!==_jive_current_user.ID})});var x=l("/people",{sort:"dateJoinedAsc",count:y.count,origin:y.origin});return w.then(function(z){return z.length>=y.count?z:x.then(function(A){return q(z.concat(A)).slice(0,y.count)})})}function q(z){var x=z;var y=[];var w={};u.each(x,function(B,A){if(B.id&&!w[B.id]){w[B.id]=true;y.push(z[A])}});return y}function r(w){return s("/activities/recent/places",{count:w.count,origin:w.origin})}function o(w){return f("/activities/recent/content",{count:w.count,origin:w.origin})}function m(x){var w=c.trim(x.replace(/_/g," ")).toLowerCase();return h(jive.rest.url("/tags/search?query="+encodeURIComponent(w)+"*"))}function k(w,x){return w.sections.length===x.sections.length&&w.sections.every(function(z){var y=u.find(x.sections,function(A){return A.type===z.type});return y&&u.zipWith(z.list,y.list,function(B,A){return B&&A&&B.id==A.id&&B.type==A.type}).every(u.id)})}function l(w,x){return p("person",w,c.extend({fields:"type,id,mentionName,thumbnailId,jive",origin:x.origin||"unknown"},x)).then(function(y){y.forEach(function(A){var z=(A.jive&&A.jive.profile)||[];z.forEach(function(B){if(B.jive_label==="Title"){A.title=B.value}else{if(B.jive_label==="Department"){A.department=B.value}}});A.displayExternalContributor=(!_jive_current_user.partner)&&A.jive&&A.jive.externalContributor});return y})}function s(w,x){return p("place",w,c.extend({fields:"type,id,name,displayName,visibleToExternalContributors",origin:x.origin||"unknown"},x)).then(function(y){y.forEach(function(z){z.displayExternalAccess=(!_jive_current_user.partner)&&z.visibleToExternalContributors});return y})}function f(w,x){return p("content",w,c.extend({fields:"type,id,author,subject,visibleToExternalContributors,published,updated,question,answer,helpful,iconCss",collapse:true,origin:x.origin||"unknown"},x)).then(function(y){y.forEach(function(z){if(z.published){z.publishedDate=v(z.published).getTime()}if(z.updated){z.updatedDate=v(z.updated).getTime()}if(z.author&&!z.author.displayName){z.author.displayName=z.author.name.formatted||z.author.jive.username}if(z.type=="file"&&z.binaryURL){z.extension=z.binaryURL.split(".").slice(-1).join(".").toLowerCase()}if(!z.subject&&z.highlightSubject){z.subject=z.highlightSubject}if(!z.subject&&z.parentContent){z.subject=z.parentContent.name}z.subject=u.unescape(z.subject);z.displayExternalAccess=(!_jive_current_user.partner)&&z.visibleToExternalContributors});return y})}function p(z,x,y){var w=jive.rest.corev3.url(x)+"?"+c.param(y);return h(w).then(function(A){return A.list.map(function(B){return c.extend(B,{archetype:z})})})}function v(z){var w=z.replace(/\+\d+/,"Z");var y=new Date(w);if(isNaN(y.getTime())){var x=w.replace(/-/,"/").replace("T"," ").replace(/\.\d+Z/," GMT");y=new Date(x)}return y}return{viaCache:e,warmCache:j,clearCache:t,search:i,defaultData:b,tags:m,equals:k}});
;
define("libRange",["jquery"],function(g){function p(v){var u=0;while(v=v.previousSibling){++u}return u}function o(v,u){u.parentNode.insertBefore(v,u.nextSibling)}function s(w,u){var x=w,v;while(x){v=u;while(v&&x!=v){v=v.parentNode}if(x==v){break}x=x.parentNode}if(!x&&w.ownerDocument){return w.ownerDocument.documentElement}return x}var f=(function(){function u(C,B){var x=this;function v(){return C.selection.createRange()}function w(){return new B(C)}function A(){var D=v();if(!D||D.item){return false}return D.compareEndPoints("StartToEnd",D)===0}function y(D,E){var F,O=0,L,I,H,G,J,M,K=-1,N;F=D.duplicate();F.collapse(E);N=F.parentElement();if(N.ownerDocument!==C){return}while(N.contentEditable==="false"){N=N.parentNode}if(!N.hasChildNodes()){return{node:N,inside:1}}H=N.children;L=H.length-1;while(O<=L){M=Math.floor((O+L)/2);G=H[M];F.moveToElementText(G);K=F.compareEndPoints(E?"StartToStart":"EndToEnd",D);if(K>0){L=M-1}else{if(K<0){O=M+1}else{return{node:G}}}}if(K<0){if(!G){F.moveToElementText(N);F.collapse(true);G=N;I=true}else{F.collapse(false)}F.setEndPoint(E?"EndToStart":"EndToEnd",D);if(F.compareEndPoints(E?"StartToStart":"StartToEnd",D)>0){F=D.duplicate();F.collapse(E);J=-1;while(N==F.parentElement()){if(F.move("character",-1)==0){break}J++}}J=J||F.text.replace("\r\n"," ").length}else{F.collapse(true);F.setEndPoint(E?"StartToStart":"StartToEnd",D);J=F.text.replace("\r\n"," ").length}return{node:G,position:K,offset:J,inside:I}}function z(){var D=v(),M=w(),G,F,K,L,H,E;G=D.item?D.item(0):D.parentElement();if(G.ownerDocument!=C){return M}F=A();if(D.item){M.setStart(G.parentNode,p(G));M.setEnd(M.startContainer,M.startOffset+1);return M}function J(U){var P=y(D,U),N,S,T=0,R,Q,O;N=P.node;S=P.offset;if(P.inside&&!N.hasChildNodes()){M[U?"setStart":"setEnd"](N,0);return}if(S===Q){M[U?"setStartBefore":"setEndAfter"](N);return}if(P.position<0){R=P.inside?N.firstChild:N.nextSibling;if(!R){M[U?"setStartAfter":"setEndAfter"](N);return}if(!S){if(R.nodeType==3){M[U?"setStart":"setEnd"](R,0)}else{M[U?"setStartBefore":"setEndBefore"](R)}return}while(R){O=R.nodeValue;T+=O.length;if(T>=S){N=R;T-=S;T=O.length-T;break}R=R.nextSibling}}else{R=N.previousSibling;if(!R){return M[U?"setStartBefore":"setEndBefore"](N)}if(!S){if(N.nodeType==3){M[U?"setStart":"setEnd"](R,N.nodeValue.length)}else{M[U?"setStartAfter":"setEndAfter"](R)}return}while(R){T+=R.nodeValue.length;if(T>=S){N=R;T-=S;break}R=R.previousSibling}}M[U?"setStart":"setEnd"](N,T)}try{J(true);if(!F){J()}}catch(I){if(I.number==-2147024809){H=x.getBookmark(2);K=D.duplicate();K.collapse(true);G=K.parentElement();if(!F){K=D.duplicate();K.collapse(false);L=K.parentElement();L.innerHTML=L.innerHTML}G.innerHTML=G.innerHTML;x.moveToBookmark(H);D=v();J(true);if(!F){J()}}else{throw I}}return M}this.addRange=function(D){var J,G,F,L,N,M,I=C.body;function H(O){O.parentNode.removeChild(O)}function E(T){var P,S,O,R,Q;O=C.createElement("a");P=T?F:N;S=T?L:M;R=J.duplicate();if(P==C||P==C.documentElement){P=I;S=0}if(P.nodeType==3){P.parentNode.insertBefore(O,P);R.moveToElementText(O);R.moveStart("character",S);H(O);J.setEndPoint(T?"StartToStart":"EndToEnd",R)}else{Q=P.childNodes;if(Q.length){if(S>=Q.length){o(O,Q[Q.length-1])}else{P.insertBefore(O,Q[S])}R.moveToElementText(O)}else{O=C.createTextNode("\uFEFF");P.appendChild(O);R.moveToElementText(O.parentNode);R.collapse(true)}J.setEndPoint(T?"StartToStart":"EndToEnd",R);H(O)}}F=D.startContainer;L=D.startOffset;N=D.endContainer;M=D.endOffset;J=I.createTextRange();if(F==N&&F.nodeType==1&&L==M-1){if(L==M-1){try{G=I.createControlRange();G.addElement(F.childNodes[L]);G.select();return}catch(K){}}}E(true);E();J.select()};this.getRangeAt=z}return u})();var l=(function(){function u(x){var ac=this,ag=0,T=1,C=2,ah="startOffset",A="startContainer",ae="endContainer",P="endOffset",D=g.extend;D(ac,{startContainer:x,startOffset:0,endContainer:x,endOffset:0,collapsed:true,commonAncestorContainer:x,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:I,setEnd:K,setStartBefore:z,setStartAfter:X,setEndBefore:Y,setEndAfter:L,collapse:Q,selectNode:N,selectNodeContents:U,compareBoundaryPoints:M,deleteContents:H,extractContents:W,cloneContents:w,insertNode:S,surroundContents:ab,cloneRange:Z});ac.toString=v;function v(){var ak=this.cloneContents();var aj=[];var al=ak.firstChild;while(al){if(al.nodeType==3){aj.push(al.nodeValue)}else{if(al.nodeType==1){if(al.innerText!=null){aj.push(al.innerText)}else{aj.push(al.textContent)}}}al=al.nextSibling}return aj.join("")}function I(ak,aj){R(true,ak,aj)}function K(ak,aj){R(false,ak,aj)}function z(aj){I(aj.parentNode,p(aj))}function X(aj){I(aj.parentNode,p(aj)+1)}function Y(aj){K(aj.parentNode,p(aj))}function L(aj){K(aj.parentNode,p(aj)+1)}function Q(aj){if(aj){ac[ae]=ac[A];ac[P]=ac[ah]}else{ac[A]=ac[ae];ac[ah]=ac[P]}ac.collapsed=true;ac.commonAncestorContainer=ac[A]}function N(aj){z(aj);L(aj)}function U(aj){I(aj,0);K(aj,aj.nodeType===1?aj.childNodes.length:aj.nodeValue.length)}function M(an,aj){var aq=ac[A],al=ac[ah],ap=ac[ae],ak=ac[P],ao=aj.startContainer,at=aj.startOffset,am=aj.endContainer,ar=aj.endOffset;if(an===0){return V(aq,al,ao,at)}if(an===1){return V(ap,ak,ao,at)}if(an===2){return V(ap,ak,am,ar)}if(an===3){return V(aq,al,am,ar)}}function H(){F(C)}function W(){return F(ag)}function w(){return F(T)}function S(an){var ak=this[A],aj=this[ah],am,al;if((ak.nodeType===3||ak.nodeType===4)&&ak.nodeValue!=null){if(!aj){ak.parentNode.insertBefore(an,ak)}else{if(aj>=ak.nodeValue.length){o(an,ak)}else{am=ak.splitText(aj);ak.parentNode.insertBefore(an,am)}}}else{if(ak.childNodes.length>0){al=ak.childNodes[aj]}if(al){ak.insertBefore(an,al)}else{ak.appendChild(an)}}}function ab(ak){var aj=ac.extractContents();ac.insertNode(ak);ak.appendChild(aj);ac.selectNode(ak)}function Z(){return D(new u(x),{startContainer:ac[A],startOffset:ac[ah],endContainer:ac[ae],endOffset:ac[P],collapsed:ac.collapsed,commonAncestorContainer:ac.commonAncestorContainer})}function ad(aj,ak){var al;if(aj.nodeType==3){return aj}if(ak<0){return aj}al=aj.firstChild;while(al&&ak>0){--ak;al=al.nextSibling}if(al){return al}return aj}function E(){return(ac[A]==ac[ae]&&ac[ah]==ac[P])}function V(am,ao,ak,an){var ap,al,aj,aq,at,ar;if(am==ak){if(ao==an){return 0}if(ao<an){return -1}return 1}ap=ak;while(ap&&ap.parentNode!=am){ap=ap.parentNode}if(ap){al=0;aj=am.firstChild;while(aj!=ap&&al<ao){al++;aj=aj.nextSibling}if(ao<=al){return -1}return 1}ap=am;while(ap&&ap.parentNode!=ak){ap=ap.parentNode}if(ap){al=0;aj=ak.firstChild;while(aj!=ap&&al<an){al++;aj=aj.nextSibling}if(al<an){return -1}return 1}aq=s(am,ak);at=am;while(at&&at.parentNode!=aq){at=at.parentNode}if(!at){at=aq}ar=ak;while(ar&&ar.parentNode!=aq){ar=ar.parentNode}if(!ar){ar=aq}if(at==ar){return 0}aj=aq.firstChild;while(aj){if(aj==at){return -1}if(aj==ar){return 1}aj=aj.nextSibling}}function R(ak,an,am){var aj,al;if(ak){ac[A]=an;ac[ah]=am}else{ac[ae]=an;ac[P]=am}aj=ac[ae];while(aj.parentNode){aj=aj.parentNode}al=ac[A];while(al.parentNode){al=al.parentNode}if(al==aj){if(V(ac[A],ac[ah],ac[ae],ac[P])>0){ac.collapse(ak)}}else{ac.collapse(ak)}ac.collapsed=E();ac.commonAncestorContainer=s(ac[A],ac[ae])}function F(aq){var ap,am=0,at=0,ak,ao,al,an,aj,ar;if(ac[A]==ac[ae]){return y(aq)}for(ap=ac[ae],ak=ap.parentNode;ak;ap=ak,ak=ak.parentNode){if(ak==ac[A]){return J(ap,aq)}++am}for(ap=ac[A],ak=ap.parentNode;ak;ap=ak,ak=ak.parentNode){if(ak==ac[ae]){return ai(ap,aq)}++at}ao=at-am;al=ac[A];while(ao>0){al=al.parentNode;ao--}an=ac[ae];while(ao<0){an=an.parentNode;ao++}for(aj=al.parentNode,ar=an.parentNode;aj!=ar;aj=aj.parentNode,ar=ar.parentNode){al=aj;an=ar}return G(al,an,aq)}function y(ao){var aq,an,am,ap,aj,al,ak;if(ao!=C){aq=x.createDocumentFragment()}if(ac[ah]==ac[P]){return aq}if(ac[A].nodeType==3){an=ac[A].nodeValue;am=an.substring(ac[ah],ac[P]);if(ao!=T){ac[A].deleteData(ac[ah],ac[P]-ac[ah]);ac.collapse(true)}if(ao==C){return}aq.appendChild(x.createTextNode(am));return aq}ap=ad(ac[A],ac[ah]);aj=ac[P]-ac[ah];while(aj>0){al=ap.nextSibling;ak=O(ap,ao);if(aq){aq.appendChild(ak)}--aj;ap=al}if(ao!=T){ac.collapse(true)}return aq}function J(aq,an){var ap,ao,ak,aj,am,al;if(an!=C){ap=x.createDocumentFragment()}ao=B(aq,an);if(ap){ap.appendChild(ao)}ak=p(aq);aj=ak-ac[ah];if(aj<=0){if(an!=T){ac.setEndBefore(aq);ac.collapse(false)}return ap}ao=aq.previousSibling;while(aj>0){am=ao.previousSibling;al=O(ao,an);if(ap){ap.insertBefore(al,ap.firstChild)}--aj;ao=am}if(an!=T){ac.setEndBefore(aq);ac.collapse(false)}return ap}function ai(ao,an){var aq,ak,ap,aj,am,al;if(an!=C){aq=x.createDocumentFragment()}ap=af(ao,an);if(aq){aq.appendChild(ap)}ak=p(ao);++ak;aj=ac[P]-ak;ap=ao.nextSibling;while(aj>0){am=ap.nextSibling;al=O(ap,an);if(aq){aq.appendChild(al)}--aj;ap=am}if(an!=T){ac.setStartAfter(ao);ac.collapse(true)}return aq}function G(ao,aj,ar){var al,au,an,ap,aq,ak,at,am;if(ar!=C){au=x.createDocumentFragment()}al=af(ao,ar);if(au){au.appendChild(al)}an=ao.parentNode;ap=p(ao);aq=p(aj);++ap;ak=aq-ap;at=ao.nextSibling;while(ak>0){am=at.nextSibling;al=O(at,ar);if(au){au.appendChild(al)}at=am;--ak}al=B(aj,ar);if(au){au.appendChild(al)}if(ar!=T){ac.setStartAfter(ao);ac.collapse(true)}return au}function B(ap,aq){var al=ad(ac[ae],ac[P]-1),ar,ao,an,aj,ak,am=al!=ac[ae];if(al==ap){return aa(al,am,false,aq)}ar=al.parentNode;ao=aa(ar,false,false,aq);while(ar){while(al){an=al.previousSibling;aj=aa(al,am,false,aq);if(aq!=C){ao.insertBefore(aj,ao.firstChild)}am=true;al=an}if(ar==ap){return ao}al=ar.previousSibling;ar=ar.parentNode;ak=aa(ar,false,false,aq);if(aq!=C){ak.appendChild(ao)}ao=ak}}function af(ap,aq){var am=ad(ac[A],ac[ah]),an=am!=ac[A],ar,ao,al,aj,ak;if(am==ap){return aa(am,an,true,aq)}ar=am.parentNode;ao=aa(ar,false,true,aq);while(ar){while(am){al=am.nextSibling;aj=aa(am,an,true,aq);if(aq!=C){ao.appendChild(aj)}an=true;am=al}if(ar==ap){return ao}am=ar.nextSibling;ar=ar.parentNode;ak=aa(ar,false,true,aq);if(aq!=C){ak.appendChild(ao)}ao=ak}}function aa(aj,an,aq,ar){var am,al,ao,ak,ap;if(an){return O(aj,ar)}if(aj.nodeType==3){am=aj.nodeValue;if(aq){ak=ac[ah];al=am.substring(ak);ao=am.substring(0,ak)}else{ak=ac[P];al=am.substring(0,ak);ao=am.substring(ak)}if(ar!=T){aj.nodeValue=ao}if(ar==C){return}ap=aj.cloneNode(false);ap.nodeValue=al;return ap}if(ar==C){return}return aj.cloneNode(false)}function O(ak,aj){if(aj!=C){return aj==T?ak.cloneNode(true):ak}ak.parentNode.removeChild(ak)}}return u})();function e(){if(window.getSelection){return function u(x){if(!x){x=window}return x.getSelection()}}else{if(window.document.getSelection){return function w(x){if(!x){x=window}return x.document.getSelection()}}else{return function v(x){if(!x){x=window}return new f(x.document,l)}}}}function j(){if(window.document.createRange){return function v(w){if(!w){w=window.document}return w.createRange()}}else{return function u(w){if(!w){w=window.document}return new l(w)}}}var h=e();var t=j();function c(u){if(!u){u=window}this.doc=u.document;this.selection=h(u)}c.prototype.getSelection=function(){return this.selection};c.prototype.getRange=function(){return t(this.doc)};c.prototype.getSelectedRange=function(){var u;if(this.selection.rangeCount===0){u=null}else{u=this.selection.getRangeAt(0)}if(!u){u=this.getRange();u.setStart(this.doc,0);this.setSelectedRange(u)}return u};c.prototype.setSelectedRange=function(u){if(this.selection.rangeCount&&this.selection.getRangeAt(0)==u){return}if(this.selection.removeAllRanges){this.selection.removeAllRanges()}this.selection.addRange(u)};function r(u){return{c:u.startContainer,off:u.startOffset}}function q(){}q.prototype.selectWord=function i(u,B){u.collapse(B);var A=r(u);var z=this.prevCharPos(A),y=A,w;var x=/[^\s\u00a0]/;while(z&&(w=this.charAt(z))&&x.test(w)){y=z;z=this.prevCharPos(z)}z=y;var v=A;y=v;while((w=this.charAt(v))&&x.test(w)){y=v;v=this.nextCharPos(v)}if(!v){v=y;if((v.nodeType==1&&v.childNodes.length>v.off)||(v.nodeType==3&&v.nodeValue.length>v.off)){++v.off}}u.setStart(z.c,z.off);u.setEnd(v.c,v.off);if(u.collapsed){return""}return u.toString()};q.prototype.prevCharPos=function(u){if(u.c.nodeType==3){if(u.off>0){return{c:u.c,off:u.off-1}}else{return this.prevCharPos({c:u.c.parentNode,off:p(u.c)})}}else{if(u.c.nodeType==1){if(u.off>0){var v=u.c.childNodes[u.off-1];if(v.nodeType==3){return this.prevCharPos({c:v,off:v.nodeValue.length})}}}}return null};q.prototype.nextCharPos=function(u){if(u.c.nodeType==3){if(u.off<u.c.nodeValue.length-1){return{c:u.c,off:u.off+1}}else{if(u.off==u.c.nodeValue.length-1){return this.nextCharPos({c:u.c,off:u.off+1})}else{return this.nextCharPos({c:u.c.parentNode,off:p(u.c)+1})}}}else{if(u.c.nodeType==1){if(u.off<u.c.childNodes.length){var v=u.c.childNodes[u.off];if(v.nodeType==3){if(v.nodeValue.length>0){return{c:v,off:0}}else{return this.nextCharPos({c:v,off:0})}}}}}return null};q.prototype.charAt=function(u){if(u&&u.c.nodeType==3){return u.c.nodeValue.substr(u.off,1)}return null};function d(y,v,u,x){var w=y.ownerDocument.createRange();if(y&&v){w.setStart(y,v)}if(u&&x){w.setEnd(u,x)}else{w.collapse(true)}return w}function m(u){if(u.anchorNode==null||u.focusNode==null){return true}var w=d(u.anchorNode,u.anchorOffset);var v=d(u.focusNode,u.focusOffset);return w.compareBoundaryPoints(w.START_TO_START,v)<=0}function a(v){var u=v.nodeName;if(u=="#text"){u="#"+v.nodeValue}return u}function k(w,v){var u="";if(w.parentNode&&w.parentNode.nodeName!="HTML"){u=k(w.parentNode,p(w))+"/"}return u+a(w)+(v!=null?"["+v+"]":"")}function b(y,v){if(!v){v=new c()}var w=v.getSelection();var u=v.getSelectedRange();if(!y){y=""}else{if(!/ $/.test(y)){y=y+": "}}if(w.rangeCount==0){console.log(y+"No selection.")}else{if(u.collapsed){console.log(y+"current selection position: "+k(u.startContainer,u.startOffset)+" (collapsed)")}else{var x=m(w)?"->":"<-";console.log(y+"current selection range: "+k(u.startContainer,u.startOffset)+"\n\t- "+k(u.endContainer,u.endOffset)+" Direction "+x,u);if(w.anchorNode){console.log("Anchor-focus"+(w.baseNode!=null?", base-extent: ":": ")+k(w.anchorNode,w.anchorOffset)+" - "+k(w.focusNode,w.focusOffset)+(w.baseNode!=null?", "+k(w.baseNode,w.baseOffset)+" - "+k(w.extentNode,w.extentOffset):""))}}}}function n(v,u){if(!v){v=""}else{if(!/ $/.test(v)){v=v+": "}}if(u.collapsed){console.log(v+k(u.startContainer,u.startOffset)+" (collapsed)")}else{console.log(v+k(u.startContainer,u.startOffset)+" - "+k(u.endContainer,u.endOffset),u)}}return{RangeContext:c,RangeUtils:new q(),logSelection:b,logRange:n}});
;
jive.namespace("StatusInput");if(!jive.StatusInput.StatusInputs){define("apps/status_input/status_input",["apps/status_input/data_source","jive/fresh_action_queue","libRange","jquery","jquery/jquery.typeAhead"],function(c,d,b,e){jive.StatusInput.StatusInputs=$Class.extend({init:function(f,g){this._container=e(f);this._i18n=g.i18n;this._statusInputIdPostfix=g.idPostfix;this.statusInputs={};var h=this;e(document).asyncReady(function(){h._docReadyInit(g);h.emit("ready")})},getSubmitVals:function(f){return this.getStatusInput(f).getSubmitVals(true)},resetText:function(f){this.getStatusInput(f).resetText()},_docReadyInit:function(f){var g=this;this._container.find(".jive-js-statusinput").each(function(){var h=e(this).attr("id");g.statusInputs[h]=new jive.StatusInput.StatusInput(e(this),f)})},getStatusInput:function(f){return this.statusInputs[f]}});jive.conc.observable(jive.StatusInput.StatusInputs.prototype);jive.conc.observable(jive.StatusInput.StatusInputs.prototype);jive.StatusInput.StatusInput=$Class.extend({init:function(f,g){try{g.mobileUI=g.mobileUI||jive.rte.mobileUI;this._container=e(f);var i=this._container.get(0);i.insertBefore(document.createTextNode(""),i.firstChild);this.mobileUI=g.mobileUI;if(this.mobileUI){this._container=e("<input type='text' class='rteReplacement'/>");e(f).before(this._container);e(f).remove()}this._mobileEditor=g.mobileUI;this._i18n=g.i18n;this._selection=null;this._replacedInitialText=false;this._statusInputIdPostfix=g.idPostfix;this._initTypeAhead();this._initDD(g);this._initDDHandlers();this._blurWaitTimeout=null;this._maxCharCount=g.maxCharCount;this._maxCharCountBeforeWarning=((this._maxCharCount)?(g.maxCharCountBeforeWarn||this._maxCharCount*0.8):0);this._previousMatchReqsSpaceAfter=null;this._previousPasteVal=null;this._previousSanitizedHTML=null;this._supportsDomRange=e.isFunction(window.getSelection);this._id=this._container.attr("id");this._rangeContext=new b.RangeContext();this._actionQueue=new d();var j=this;e(document).bind("keyup mouseup",function(k){k.stopPropagation();switch(k.which){case 1:case 2:case 3:break;case 13:k.preventDefault();break;case 27:j._dd.hide();return;break;default:break}});this._container.bind("keyup",function(k){k.stopPropagation();switch(k.which){case 13:case 32:k.preventDefault();j._processToken();break;default:break}});this._container.bind("keypress",function(k){switch(k.which){case 13:k.preventDefault();if(j._mobileEditor){return false}break}});this.delay=(function(){var k=0;return function(m,l){clearTimeout(k);k=setTimeout(m,l)}})();this._container.bind("paste",function(k){j.delay(function(){j._processToken();j._processCompleteToken()},150)});this._container.bind("keydown",function(l){l.stopPropagation();var k;switch(l.which){case 13:l.preventDefault();break;case 32:j._processToken();break;case 37:k=j._rangeContext.getSelectedRange();if(k&&k.startContainer&&k.startContainer.parentNode==j._container[0].firstChild&&k.startOffset==0){e(j._container[0]).html("&nbsp"+e(j._container[0]).html());k.setStart(j._container[0].firstChild,0);k.collapse(true);j._rangeContext.setSelectedRange(k)}return;case 38:case 40:if(j._dd.isVisible()){l.preventDefault()}break;case 9:j._processToken();return;default:break}j.delay(function(){var n;switch(l.which){case 13:if(j._mobileEditor){return false}if(j._dd.isVisible()){j._dd.hide();return false}var o=document.createElement("br");o.setAttribute("data-jive-statusinputadd","true");var p=document.createTextNode(j._zeroWidthSpace);n=j._rangeContext.getSelectedRange();n.deleteContents();n.insertNode(p);if(e.browser.msie&&parseFloat(e.browser.version.charAt(0))==9){n.insertNode(document.createTextNode("\ufeff"))}n.insertNode(o);n.selectNodeContents(p);n.setStartAfter(p);n.setEndAfter(p);j._rangeContext.setSelectedRange(n);break;case 27:j._dd.hide();j.emit("escapeKeyPress");return;break;case 32:j._dd.hide();j._processCompleteToken();return;break;case 37:case 39:return;break;case 38:return;break;case 40:return;break;case 188:case 191:if(!l.shiftKey){j._dd.hide()}return;break;default:break}if((j._mobileEditor&&j._container.val().length==0)||(!j._mobileEditor&&j._container.text().length==0)){j._dd.hide();if(j._maxCharCount){j.emit("characterLenMsg","ok",{charCount:j.getCharCount()})}return}j.sanitizeHTML();if(!j._replacedInitialText){j._replacedInitialText=true}j._processToken();if(j._maxCharCount){var m=j.getCharCount();if(m>j._maxCharCountBeforeWarning){if(j.getCharCount()>j._maxCharCount){j.emit("characterLenMsg","error",{charCount:m,charOver:m-j._maxCharCount})}else{j.emit("characterLenMsg","warning",{charCount:m,charLeft:j._maxCharCount-m})}}else{j.emit("characterLenMsg","ok",{charCount:j.getCharCount()})}}},75)});this._container.bind("focus",function(k){if(!j.focusing){j.focusing=true;j._onContainerFocus(k)}});this._container.bind("blur",function(k){j._onContainerBlur(k)});this._container.blur(function(k){if(j._blurWaitTimeout){clearTimeout(j._blurWaitTimeout)}j._blurWaitTimeout=setTimeout(function(){j._processCompleteToken();j.emit("blur");j.sanitizeHTMLInterval=window.clearInterval(j.sanitizeHTMLInterval)},400)});this._addInstanceToInstanceObj();this._container.trigger("statusInputSuccess",[this]).data("statusInputStatus",true)}catch(h){this._container.trigger("statusInputFail").data("statusInputStatus",false)}},_onContainerFocus:function(f){this.sanitizeHTML();this.sanitizeHTMLInterval=window.setInterval(e.proxy(this.sanitizeHTML,this),500)},_triggerContainerFocus:function(){if(!this._container.is(":focus")){this._container.trigger("focus")}},_initTypeAhead:function(){var l=this;function h(){return l._checkTokens()}function q(r){return[27,38,40,9].indexOf(r.keyCode)>=0}function n(r){r.stopPropagation();r.preventDefault();return false}function k(t){var s;if(h()){var r=l._dd.isVisible();var u=new e.Event(t.type,{keyCode:t.keyCode});if(t.keyCode==13||t.keyCode==32){if(r&&l.typeAheadProxy.data("typeAhead").getSelected().length>0){s=n(t)}}else{if(q(t)){if(r){n(t);s=false}else{if(t.keyCode==27){n(t)}}}}if(r&&t.type=="keydown"&&t.keyCode==9){if(e("a.jive-js-friends.j-active").length){e("a.jive-js-history").click()}else{if(e("a.jive-js-history.j-active").length){e("a.jive-js-friends").click()}}}l.typeAheadProxy.trigger(u)}else{l.typeAheadProxy.trigger("close")}return s}function m(){if(l._isMention()){var r=l._getMention();if(r&&r.length>=2){l._performSearch(r)}else{l._showDefaultList()}}}this.typeAheadProxy=e("<input type='text' />").typeAhead({hasFocus:function g(){var r=e(document.activeElement);return r.get(0)===l._container.get(0)||r.closest(l._container).length>0},itemSelector:".j-autocomplete-results li:visible, .j-results li:visible",chooseOnSpace:true,ariaParent:this._container,focusTarget:this._container,keystrokeWait:400}).on("selectionChosen",function i(x,u,w,A){if(!l._dd.isVisible()){return}var r=w.find("a");var t=r.attr("data-id")||w.attr("data-id");var s=r.attr("data-type")||w.attr("data-type");s=(jive.global.typeToNumeric&&jive.global.typeToNumeric[s])?jive.global.typeToNumeric[s]:s;if(r.hasClass("jive-js-status-input-create")){var z={newtag:1};l._dd.emit("interactionFinished",{link:r,index:-1,value:'<span class="jive-icon-med jive-icon-tag"></span>'+t,href:_jive_base_url+"/tags#/?tags="+t,html:r.html()},z)}else{if(r.data("command")==="more"){l._dd.expand(r)}else{var y=r.html(),v=r.attr("href");if(!t&&r.attr("data-objectType")&&r.attr("__default_attr")){t=r.attr("data-objectType")+"-"+r.attr("__default_attr")}l._dd.emit("interactionFinished",{link:r,value:y,href:v,id:t,objectType:s})}}}).on("keystroke",function(r){m()}).on("focusWaitFinished",function(){if(!l._dd.isVisible()){l._processToken()}}).on("close blurWaitFinished",function(){l._dd.hide()});var j=this._container.on("keydown keyup",function(r){if(k(r)===false){r.stopImmediatePropagation()}}).attr("aria-autocomplete","list").attr("role","combobox").attr("tabindex","0");if(this._i18n&&this._i18n.ariaLabel){j.attr("aria-label",this._i18n.ariaLabel)}if(this._statusInputIdPostfix){var o="jive-508-label-";if(this._statusInputIdPostfix=="mbASHeader"&&this._container&&this._container.length>0){var p=this._container.attr("id");if(p){o=o+p}}else{o=o+"message-"+this._statusInputIdPostfix}var f=e("#"+o);if(f&&f.length>0){j.attr("aria-labelledby",o)}}},_addInstanceToInstanceObj:function(){jive.StatusInput.StatusInput.instances[this._id]=this},getContainer:function(){return this._container},isContainerEditable:function(){var f=this._container.attr("contenteditable");return f&&f==="true"},setContainerEditable:function(f){this._container.attr("contenteditable",f)},getSubmitVals:function(f){if(f){this._truncateNodes()}var g;if(this._mobileEditor){g=jive.util.escapeHTML(this._container.val())}else{g=this._container.html()}g=g.replace(/<\/?br _[^>]*>/gi,"");g=g.replace(/(<\/?)(\w+)([^>]*>)/gi,function(k,j,i,h){return j+i.toLowerCase()+h.replace(/((data-jive-statusInputadd)|(data-jive-truncation-flag))=["']true["']/gi,"")});g=g.replace(/(<\/?[aA]\s+[^>]*href=")([^"]*)("[^>]*>)/gi,function(l,k,j,i){if(l.search(/<\w+[^>]*data-jive-statusinputinteral="true"[^>]*>/gi)!=-1){var h=j.replace(/https?\:\/\//,"").split("/").slice(1).join("/");return k+"/"+h+i}else{return l}});return g},_truncateNodes:function(){if(this.getCharCount()>this._maxCharCount){var m=this._container[0].childNodes;var l=0;var k=false;for(var h=0;h<m.length;h++){var g=m[h];if(k){this._container[0].removeChild(g)}else{var f=e(g).text().length;if(l+f>this._maxCharCount){var j=this._maxCharCount-l;this._truncateNode(g,j);k=true}l+=f}}}},_truncateNode:function(h,f){if(h.nodeType==3){var j=h.nodeValue;if(j.length<f){return f-j.length}else{h.nodeValue=h.nodeValue.substr(0,f);return 0}}else{var k=h.childNodes;for(var g=0;g<k.length;g++){if(f==0){h.removeChild(k[g])}else{f=this._truncateNode(k[g],f)}}}},truncateAnchors:function(){e(this._container).find("[data-jive-statusinputadd=true]:not([data-jive-truncation-flag=true],[data-jive-statusinputinteral=true],[data-jive-untrusted-link])").each(function(){var f=e(this);f.contents().filter(function(){return this.nodeType==3}).each(function(){var g=e(this);g.replaceWith(document.createTextNode(jive.util.truncateStr(g.text())))});f.attr("data-jive-truncation-flag",true)})},sanitizeHTML:function(){var g=this._container.html();if(this._previousSanitizedHTML==g){return}var m=this._container[0];if(m.childNodes.length==0||(m.childNodes.length==1&&m.lastChild.nodeName.toLowerCase()=="br")){m.insertBefore(document.createTextNode(""),m.lastChild)}var i=m.lastChild;if(!e.browser.msie&&(i==null||i.nodeType==3||i.nodeName&&i.nodeName.toLowerCase()!="br")){var j=document.createElement("br");j.setAttribute("_moz_dirty","");m.appendChild(j)}this.truncateAnchors();if(!e.browser.msie){g=g.replace(/<\/?br[^>]*>$/mi,"")}var p=this;this._container.find("a[data-jive-statusinputadd=true]").filter(function(){return e(this).text()==""}).each(function(){var s=p._rangeContext.getSelectedRange(),r=p._rangeContext.getRange(),t=false;r.selectNode(this);if(r.compareBoundaryPoints(r.START_TO_START,s)<=0||r.compareBoundaryPoints(r.END_TO_END,s)>=0){t=true}r.deleteContents();if(t){p._rangeContext.setSelectedRange(r)}});var k=this._container.children("[data-jive-statusInputadd!=true]");if(!e.browser.msie){k=k.filter(":not(:last)")}k.filter("br").not("[_moz_dirty]").each(function(){e(this).replaceWith("<br />")});k=k.not("br");if(k.length>0){var h,l=0,o=function(r){return/^style$/i.test(r.nodeName||"")},n=function(r){return/^(i|b|strong)$/i.test(r.nodeName||"")},q=function(r){if(/^(p|div)$/i.test(r.tagName)){return l++>0}return false};k.each(function(){var r=e(this);if(o(this)){r.remove()}else{if(n(this)){r.replaceWith(r.contents())}else{if(q(this)){r.before('<br data-statusInputadd="true" />')}h=document.createTextNode(r.text());p._container[0].replaceChild(h,this)}}});if(!e.browser.msie&&h){var f=this._rangeContext.getRange();f.selectNodeContents(h);f.collapse(false);this._rangeContext.setSelectedRange(f)}}this._previousPasteVal=this._container.text();this._previousSanitizedHTML=this._container.html()},resetText:function(){this._setText("");this._replacedInitialText=false;this.emit("characterLenMsg","ok",{charCount:this.getCharCount()})},getCharCount:function(){if(this.mobileUI){return this._container.val().length}else{return this._container.text().length}},_setText:function(f){if(this._mobileEditor){this._container.val(jive.util.unescapeHTML(f))}else{this._container.html(f)}},_focus:function(f){this._container.blur();this._container.attr("contentEditable",false).attr("contentEditable",true);this._container.focus()},_createNewSelectionUtil:function(){var g=false;if(e.browser.msie){if(this._container.contents().length==0){return}}else{var h=this._container[0].lastChild;if(!h){this.sanitizeHTML();h=this._container[0].lastChild}g=h.nodeName.toLowerCase()=="br"}var f=this._rangeContext.getRange();f.selectNode(this._container[0].lastChild);f.collapse(g);this._rangeContext.setSelectedRange(f)},_isMatch:function(g,f){return f.search(new RegExp(this._getPatterns()[g],"gi"))>-1},_matchUtil:function(g,f){return f.match(new RegExp(this._getPatterns()[g],"gi"))},_isMention:function(){var f=this._rangeContext.getSelectedRange().cloneRange();var g=b.RangeUtils.selectWord(f,true);return this._isMatch("mention",g)},_getMention:function(){var f=this._rangeContext.getSelectedRange().cloneRange();var h=b.RangeUtils.selectWord(f,true);var g=this._matchUtil("mention",h)[0];return g.substr(1,g.length)},_checkTokens:function a(){var g=this._rangeContext.getSelectedRange().cloneRange();var i=b.RangeUtils.selectWord(g,true);var h=this._getTokens();var f=false;e.each(Object.keys(h),function(){var j=h[this];if(i.match(j.regExp)){f=true;return false}});return f},_processToken:function(){if(!this._mobileEditor){var f=this._rangeContext.getSelectedRange().cloneRange();var g=b.RangeUtils.selectWord(f,true);if(g===""||g.slice(-1)===","){this._processCompleteToken()}else{this._processPartialToken(g,this._rangeContext.getSelectedRange().startContainer)}}},_processCompleteToken:function(){if(!this._dd.isVisible()){var f=this._tokenCallbacks||[];f.forEach(function(g){g()});if(f.length<1){this._dd.hide()}this._tokenCallbacks=[]}},_processPartialToken:function(k,i){var h=[],j=this._getTokens(),f=false,g=this;Object.keys(j).forEach(function(l){var m=j[l],n=k.match(m.regExp);if(n){f=true;n.push(i);if(m.complete){h.push(function(){m.complete.apply(g,n)})}if(m.keypress){m.keypress.apply(g,n)}}});if(!f){this._dd.hide()}this._tokenCallbacks=h},_performSearch:function(h){var g=this;var f=c.search(h);this._dataGroup=(this._dataGroup||0)+1;f.forEach(function(i){g._actionQueue.push(i,g._dataGroup).then(g._assembleData.bind(g)).then(g._dd.renderSearchData.bind(g._dd))})},_assembleData:function(f){if(!this._lastData){this._lastData=[{type:"people",list:[]},{type:"places",list:[]},{type:"content",list:[]}]}this._lastData=this._lastData.map(function(g){return g.type===f.type?f:g});return{sections:this._lastData.filter(function(g){return g.list.length>0})}},_getMacroname:function(f){return jive.global.typeToMacroName[f]},_getObjectType:function(f){return jive.global.typeToNumeric[f]},_zeroWidthSpace:e.browser.msie&&parseFloat(e.browser.version.charAt(0))<9?"\uFEFF":"\u200b"});jive.StatusInput.StatusInput.instances={};jive.StatusInput.StatusInput.sanitizeHTMLIntervalHandler=function(){for(var f in jive.StatusInput.StatusInput.instances){jive.StatusInput.StatusInput.instances[f].sanitizeHTML()}};jive.StatusInput.StatusInput.getRegExpsFromPatterns=function(f){var g={};Object.keys(f).forEach(function(h){var i=f[h],j;if(e.isArray(i)){j=i.map(function(k){return"("+k+")"}).join("|")}else{j=i}g[h]=new RegExp(j)});return g};jive.StatusInput.StatusInput.Patterns={mention:"@([^@ ]+)?"};jive.StatusInput.StatusInput.Tokens={mention:{regExp:new RegExp(jive.StatusInput.StatusInput.Patterns.mention,"i"),keypress:function(g,f){if(f&&f.length>=2){this._performSearch(f)}else{}}}};jive.conc.observable(jive.StatusInput.StatusInput.prototype);jive.StatusInput.renderAttachmentsWrapper=function(g,f,h){if(g.attachments){f.append(jive.statusinput.attachments.renderAttachments({entry:{meta:g.attachments},removable:h}))}else{f.append(jive.statusinput.attachments.renderAttachments(e.extend({},g,{removable:h})))}if(h){f.slideDown("fast",function(){e(this).animate({opacity:1},500)})}else{f.css("opacity","1").show()}jive.StatusInput.bindAttachment(f.find("ul.j-attached-items"),h)};jive.StatusInput.renderAttachmentWrapper=function(g,f,h){f.append(jive.statusinput.attachments.renderAttachment(e.extend(g,{removable:h})))};jive.StatusInput.bindAttachment=function(g,i){var f=0,h;g.find("li:visible").each(function(){f+=e(this).outerWidth()});if(g.find("li.js-attached-link").length==0){g.css("width",f+"px").data("innerWidth",f)}h=g.width()-g.closest(".j-attachment-container").width();if(h>0&&i){g.animate({left:(h*-1-40)},300)}g.find("li a.j-attach-anchor").unbind("hover").hover(function(){e(this).find(".j-icon-play").stop().fadeTo("fast",0.6)},function(){e(this).find(".j-icon-play").stop().fadeOut("fast")});g.parent().find("a.j-attachment-arrow").unbind().mousedown(function(){try{var k;var m=e(this).outerWidth()*2;h=g.width()-g.closest(".j-attachment-container").width();var j=parseInt(g.css("left"));if(isNaN(j)){j=0}if(e(this).hasClass("j-attachment-arrow-right")&&h>0){k=j+(h+m);g.stop().animate({left:(-h-m)},k*5,"linear")}else{if(h>0){k=j*-1;g.stop().animate({left:0},k*5,"linear")}}}catch(l){console.log(l)}}).mouseup(function(){g.stop();return false}).click(function(){return false});if(!i){jive.StatusInput.sizeContainer(g.parent().parent())}else{jive.StatusInput.showArrows()}};e(window).resize((function(){var f;return function(){var g=e(window).width();if(f&&g!==f){jive.StatusInput.sizeContainer()}f=g}})());jive.StatusInput.sizeContainer=function(g){var f;g=g||e(document);g.find(".j-attachment-container:visible:has(ul.j-attached-items)").hide().each(function(){var h=e(this),i=h.closest(".jive-table-cell-activity"),k=h.closest(".j-wall-repost-content"),l=h.parent(),j;if(i.length>0){j=i.width()}else{if(k.length>0){j=k.width()}else{if(h.closest(".j-wall-form").length>0){j=0}else{if(e.browser.msie){j=l.width()-12}else{j=l.width()}}}}f=h.find("ul.j-attached-items").data("innerWidth")||Number.POSITIVE_INFINITY;if(j>0){e(this).width(Math.min(j,f)).show()}else{h.show()}});jive.StatusInput.showArrows(g)};jive.StatusInput.showArrows=function(f){f=f||e(document);f.find("ul.j-attached-items:visible").each(function(){var h=e(this),g=h.parent();if(g.innerWidth()<h.innerWidth()){g.find("a.j-attachment-arrow").css("display","block");h.css("margin","0 20px")}else{g.find("a.j-attachment-arrow").hide();h.css({margin:"0",left:0})}})};return jive.StatusInput})};
;
goog.provide("jive.statusinput.dropdown.ddCreateTag");
jive.statusinput.dropdown.ddCreateTag=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a class="jive-js-status-input-selectable jive-js-status-input-create j-createTag" href="#" data-id="',soy.$$escapeHtml(opt_data.currentTagText),'" data-type="tag"><span class="jive-icon-tag jive-icon-med"></span><span class="j-createLabel font-color-normal">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2028"),[])),' </span><span class="result-title lnk">',soy.$$escapeHtml(opt_data.currentTagText),
"</span></a>");return opt_sb?"":output.toString()};
;
goog.provide("jive.statusinput.dropdown.ddOutputTags");
jive.statusinput.dropdown.ddOutputTags=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<ul class="j-autocomplete-results j-icon-list" role="listbox">');if(opt_data.shouldCreateTag&&opt_data.allowTagCreation){output.append('<li role="option">');jive.statusinput.dropdown.ddCreateTag(opt_data,output);output.append("</li>")}var entryList9=opt_data.entries;var entryListLen9=entryList9.length;for(var entryIndex9=0;entryIndex9<entryListLen9;entryIndex9++){var entryData9=
entryList9[entryIndex9];output.append('<li role="option"><a class="jive-js-status-input-selectable" href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,"/tags#/",{tags:entryData9})),'" data-id="',soy.$$escapeHtml(entryData9),'" data-type="tag"><span class="jive-icon-med jive-icon-tag"></span><span class="result-title lnk">',soy.$$escapeHtml(entryData9),"</span></a></li>")}output.append("</ul>");return opt_sb?"":output.toString()};
;
goog.provide("jive.statusinput.dropdown.ddTagsContent");
jive.statusinput.dropdown.ddTagsContent=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.currentTagText)jive.statusinput.dropdown.ddOutputTags(opt_data,output);else output.append('<p class="j-autocomplete-tag-prompt j-autocomplete-prompt j-pop-desc">',opt_data.allowTagCreation?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k45c3"),["Continue typing to search tags or create new tags"])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k45c4"),["Continue typing to search tags"])),
"</p>");return opt_sb?"":output.toString()};
;
goog.provide("jive.statusinput.dropdown.ddTags");jive.statusinput.dropdown.ddTags=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-autocomplete-container j-pop-main j-menu j-quick-menu">');jive.statusinput.dropdown.ddTagsContent(opt_data,output);output.append("</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.statusinput.dropdown.ddOutputEntries");
jive.statusinput.dropdown.ddOutputEntries=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var sectionList3=opt_data.sections;var sectionListLen3=sectionList3.length;for(var sectionIndex3=0;sectionIndex3<sectionListLen3;sectionIndex3++){var sectionData3=sectionList3[sectionIndex3];output.append('<div class="j-results j-spotlight-find" data-type="',soy.$$escapeHtml(sectionData3.type),'"><h4 class="font-color-meta">',sectionData3.type=="people"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k347e"),
[])):sectionData3.type=="places"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k347f"),[])):sectionData3.type=="content"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k347d"),[])):"","</h4>");jive.autosearch.resultSection(soy.$$augmentMap(sectionData3,{max:5}),output);output.append("</div>")}return opt_sb?"":output.toString()};
;
goog.provide("jive.statusinput.dropdown.ddDefault");
jive.statusinput.dropdown.ddDefault=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-pop-main j-menu j-quick-menu j-autocomplete-container jive-spotlight-search-result" aria-live="polite"><p class="j-pop-desc j-autocomplete-prompt" style="max-height:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k45be"),[])),'</p><div class="js-nav-menu-scrollable">');jive.statusinput.dropdown.ddOutputEntries(opt_data,output);output.append("</div></div>");
return opt_sb?"":output.toString()};
;
goog.provide("jive.statusinput.dropdown.ddSearch");
jive.statusinput.dropdown.ddSearch=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-autocomplete-container jive-spotlight-search-result j-pop-main j-menu j-quick-menu"><p class="j-pop-desc j-autocomplete-prompt" style="max-height:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k45c1"),[])),'</p><div class="js-nav-menu-scrollable">');jive.statusinput.dropdown.ddOutputEntries(opt_data,output);output.append("</div></div>");return opt_sb?"":
output.toString()};
;
jive.namespace("MicroBlogging");define("apps/microblogging/status_input_drop_down",["apps/status_input/data_source","jquery","underscore","soy!jive.statusinput.dropdown.ddTags","soy!jive.statusinput.dropdown.ddDefault","soy!jive.statusinput.dropdown.ddSearch"],function(b,f,a,e,d,c){var g=f;if(!jive.MicroBlogging.StatusInputDropDown){jive.MicroBlogging.StatusInputDropDown=$Class.extend({init:function(j,i,h){h=h||{};var k=this;this._$popoverContext=g(j);this._typeAhead=i;this._dd=null;this._allowTagCreation=typeof h.allowTagCreation==="undefined"||h.allowTagCreation;this._typeAhead.options.eventTarget.on("selectionChanged",function(m,o,l,p){var q=l.data("id");var n=l.data("type");if(n&&q){k._lastSelected=[n,q]}if(p!=="mouse"){k.scrollTo(l)}})},renderDefaultList:function(j,h){if(this._unchanged(j)){return}var i=this._formatResults(j);this._render(f(d(i)),h)},renderTagsData:function(k,l,i){var h=k?this._normalizeTagsData(k):[];var j=!h.some(function(m){return m===l});if(this._allowTagCreation||!l||h.length>0){this._render(f(e({entries:h,currentTagText:l,allowTagCreation:this._allowTagCreation,shouldCreateTag:j})),i)}else{this.hide()}},renderSearchData:function(j,h){if(j.sections.length>0){if(this._unchanged(j)){return}var i=this._formatResults(j);this._render(f(c(i)),h)}else{this.hide()}},hide:function(){if(this._dd){this._dd.trigger("close");delete this._dd;delete this._lastEntries;delete this._lastSelected}this._shown=false;this.emit("close")},show:function(h){if(this._dd&&!this._shown){this._dd.popover(f.extend({context:this._$popoverContext,position:"below",align:"left",arrowOffset:6,duration:0,destroyOnClose:true,focusPopover:false,setRole:"listbox",containWithinViewport:true,onClose:this.hide.bind(this)},h));this._shown=true}},isVisible:function(){return this._shown},selectItem:function(i){if(!this._dd){return}var h=this._typeAhead.getSelectable().eq(i);this._typeAhead.setSelected(h)},selectItemById:function(i,j){if(!i||!j){return}var h=this._typeAhead.getSelectable().filter(function(l,m){var k=f(m);return k.data("type")===i&&k.data("id")===j});if(h.length>0){this._typeAhead.setSelected(h.filter(":first"))}},scrollTo:function(h){var k=this._dd.find(".js-nav-menu-scrollable");if(k.length<1){return}var l=k.height();var r=k.offset().top;var i=r+l;var o=h.outerHeight();var q=h.offset().top;var p=q+o;var n=k.find("h4").outerHeight()||32;var m=q<r+n;var j=p>i-n;if(m){k.scrollTo(h,{offset:0-n})}else{if(j){k.scrollTo(h,{offset:0-(l-o-n)})}}},expand:function(j){var i=f(j);var h=i.closest("ol,ul").find("li.j-inactive").removeClass("j-inactive").first();this._typeAhead.setSelected(h);i.closest("li").addClass("j-inactive")},_normalizeTagsData:function(h){if(h&&h.tagSearchResult){return h.tagSearchResult.filter(a.prop("found")).map(a.prop("name"))}},_getCollectionFromData:function(h){return h.mentionCollection||h},_getCollectionEntriesFromData:function(i){var h=i.mentionCollection?i.mentionCollection.entries:i.entries;return f.isArray(h)?h:[h]},_render:function(i,h){if(this.isVisible()){this._dd.empty().append(i.children());this._dd.trigger("triggerPopoverReposition");this.selectItemById.apply(this,this._lastSelected||[])}else{this._dd=i;this.show(f.isFunction(h)?h():h)}this._typeAhead.setSuggestElement(this._dd)},_unchanged:function(i){var h=this._lastEntries;this._lastEntries=i;return h&&b.equals(i,h)},_formatResults:function(h){h.sections=a.map(h.sections,function(i){i.list=a.map(i.list,function(j){if(j.subject){}return j});return i});return h}});jive.MicroBlogging.StatusInputDropDown.selectedItemClassName="jive-js-status-input-selected";jive.MicroBlogging.StatusInputDropDown.selectableItemClassName="jive-js-status-input-selectable";jive.conc.observable(jive.MicroBlogging.StatusInputDropDown.prototype);jive.MicroBlogging.StatusInputDropDown.delay=(function(){var h=0;return function(j,i){clearTimeout(h);h=setTimeout(j,i)}})()}return jive.MicroBlogging.StatusInputDropDown});
;
define("apps/microblogging/link_builder",["jquery"],function(d){function b(g,h){var l=g.find(".result-title").text(),e=g.attr("href"),f=g.data("id")||g.closest("[data-id]").data("id"),i=g.data("type")||g.closest("[data-type]").data("type"),j=g.find('[class*="jive-icon"]'),k=a((j.attr("class")||"").split(/\s+/)),m=d(h());m.text(l).attr("href",e).addClass(k);if(f){m.attr("jiveID",f);m.attr("data-id",f)}if(i){m.attr("data-type",i)}return m}function c(){}function a(g){var f={"jive-icon-blog":"jive-link-blog-small","jive-icon-doctype-compressed":"jive-icon-doctype-compressed-small","jive-icon-discussion":"jive-icon-discussion-small","jive-icon-discussion-bridged":"jive-icon-discussion-bridged-small","jive-icon-discussion-correct":"jive-icon-discussion-correct-small","jive-icon-discussion-question":"jive-icon-discussion-question-small","jive-icon-doctype-acrobat":"jive-icon-doctype-acrobat-small","jive-icon-doctype-document":"jive-icon-doctype-document-small","jive-icon-doctype-image":"jive-icon-doctype-image-small","jive-icon-doctype-presentation":"jive-icon-doctype-presentation-small","jive-icon-doctype-spreadsheet":"jive-icon-doctype-spreadsheet-small","jive-icon-document":"jive-link-wiki-small","jive-icon-document-upload":"jive-link-wiki-small","jive-icon-external-site":"jive-link-url-small","jive-icon-group":"jive-link-socialgroup-small","jive-icon-poll":"jive-link-poll-small","jive-icon-profile":"jive-link-profile-small","jive-icon-project":"jive-link-project-small","jive-icon-tag":"jive-link-tag-small","jive-icon-tile-activity":"jive-link-tilestream-small","jive-icon-space":"jive-link-community-small","jive-icon-idea":"jive-link-idea","jive-icon-event":"jive-link-event","jive-icon-video":"jive-link-video-small","jive-icon-status":"jive-link-status-small"},e=d.map(g,function(h){return h in f?f[h]:null});return e.shift()||"jive-link-profile-small"}return{objectRef:b,tagRef:c}});
;
jive.namespace("MicroBlogging");if(!jive.MicroBlogging.StatusInputs){define("apps/microblogging/status_input",["apps/status_input/status_input","apps/microblogging/status_input_drop_down","apps/status_input/data_source","apps/microblogging/link_builder","libRange","jive/promise_util","jquery"],function(b,f,c,h,a,e,d){var g=d;jive.MicroBlogging.StatusInputs=b.StatusInputs.extend({_docReadyInit:function(i){this._container.find(".jive-js-statusinput").each(function(l,j){var n=g(j).attr("id"),m=this.emit.bind(this,"characterLenMsg"),k=this.emit.bind(this,"atMentionFinished");this.statusInputs[n]=new jive.MicroBlogging.StatusInput(j,i).addListener("characterLenMsg",m).addListener("atMentionFinished",k)}.bind(this))}});jive.MicroBlogging.StatusInput=jive.StatusInput.StatusInput.extend({init:function(i,j){this._super(i,j);this._focusOnRdy=j.focusOnRdy;this._allowTagCreation=j.allowTagCreation==undefined?true:j.allowTagCreation;this._doNotAnimate=j.doNotAnimate==undefined?false:j.doNotAnimate;this.firefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;var k=this;if(j.defaultValue){k._container.prev(".jive-js-statusinput-default").hide()}else{this._origHeight=0}this._container.bind("click",function(m){if(k.firefox){var l=k.focusing;k.focusing=true;k._container.blur();k._container.attr("contentEditable",false).attr("contentEditable",true);k._container.focus();if(!l){k.focusing=false}}k._triggerContainerFocus()});this._container.prev(".jive-js-statusinput-default").keydown(function(l){if(l.keyCode==13||l.keyCode==32){k._triggerContainerFocus()}});this._container.prev().focus(function(){k._triggerContainerFocus()})},_setOriginalHeight:function(){if(this._origHeight==0){this._origHeight=g(this._container).height()}},triggerOnFocusAnimation:function(){if(this._focusOnRdy){this._triggerContainerFocus()}},_onContainerFocus:function(k){var j=this;var i;this._super(k);this._container.prev(".jive-js-statusinput-default").hide();g("#j-js-mb-success").hide();if(!this._doNotAnimate){this._setOriginalHeight();i=this._container.animate({minHeight:Math.max(this._origHeight*2.2,15)},150,function(){if(j.firefox){j._container.blur();j._container.attr("contentEditable",false).attr("contentEditable",true);j._container.focus()}j.focusing=false})}else{j.focusing=false}this._container.addClass("j-mb-focused");this._container.attr("contentEditable",true);c.warmCache();this.emit("focus")},_onContainerBlur:function(i){this._container.removeClass("j-mb-focused");if(!this.getSubmitVals()){this._container.prev(".jive-js-statusinput-default").show()}c.clearCache()},_initDD:function(i){this._dd=new f(this._container,this.typeAheadProxy.data("typeAhead"),i)},_initDDHandlers:function(){var i=this;this._dd.addListener("interactionFinished",function(q,s){var o=h.objectRef(q.link,document.createElement.bind(document,"a"));d.each(d.extend({"data-jive-statusInputadd":"true","data-jive-statusInputInteral":"true"},s),function(u,v){o.attr(u,v)});var m=o.attr("data-id");var p=o.attr("data-type");var t=o.data("type")==="tag"?m:null;var r=t?"tag":i._getMacroname(p);var l=i._getObjectType(p);o.attr("href","javascript:;");o.attr("data-objectType",l);o.attr("jivemacro",r);o.addClass("jive_macro jive_macro_"+r);if(!t){o.attr("___default_attr",m)}if(t){o.attr("_tag",t)}var k=document.createTextNode(i._zeroWidthSpace);var j=i._rangeContext.getSelectedRange();a.RangeUtils.selectWord(j,true);var n=j.cloneRange();j.collapse(false);j.insertNode(k);k.parentNode.insertBefore(o.get(0),k);n.deleteContents();j.selectNodeContents(k);j.collapse(false);i._rangeContext.setSelectedRange(j);i._dd.hide();i.emit("atMentionFinished",q.id,q.value,q.objectType)})},_getTokens:function(){return jive.MicroBlogging.StatusInput.Tokens},_getPatterns:function(){return jive.MicroBlogging.StatusInput.Patterns},_showDefaultList:function(i){var j=this;this._actionQueue.push(e.whenAll(c.defaultData())).then(function(k){j._lastData=k;j._dd.renderDefaultList({sections:k.filter(function(l){return l.list.length>0})});if(i){j._dd.selectItem(0)}})},_showTagsList:function(j){var i=this;this._actionQueue.push(c.tags(j)).then(function(k){i._dd.renderTagsData(k,d.trim(j))})},handleAtMentionButtonClick:function(){this._replacedInitialText=true;this._container.focus();var j=this._rangeContext.getSelectedRange();if(g(j.commonAncestorContainer).parents(this._container).length==0){j.selectNodeContents(this._container[0]);j.collapse(false)}var l=j.cloneRange();if(a.RangeUtils.selectWord(l,false).length>0){l.collapse(false);var k=document.createTextNode(" ");l.insertNode(k);l.selectNodeContents(k);l.collapse(false);j=l}var i=document.createTextNode("@");j.insertNode(i);j.selectNodeContents(i);j.collapse(false);this._rangeContext.setSelectedRange(j);this._showDefaultList()},handleInsertLink:function(k){this._focus(true);k=k.trim();if(!this._isMatch("linkURL",k)){k="http://"+k}this._createNewSelectionUtil();var j=this._rangeContext.getSelectedRange();var i=document.createTextNode(k);j.insertNode(i);j.selectNodeContents(i);j.collapse(false);this._rangeContext.setSelectedRange(j);if(this._isMatch("linkURL",k)){this._processToken();this._processCompleteToken()}},swapLinkFor:function(i,l){var j=this;function k(r,p,q){if(r.nodeType==3){var o=null;var u=r.nodeValue;if(u.indexOf(p)<0){return}if(u.indexOf(p)==(u.length-p.length)){var n=document.createTextNode(" ");r.parentNode.insertBefore(n,r);r.parentNode.insertBefore(r,r.previousSibling);r.nodeValue=u.substring(0,u.indexOf(p));r.parentNode.insertBefore(g(l)[0],r);r.parentNode.insertBefore(r,r.previousSibling);o=n}else{if(u.indexOf(p)==0){r.nodeValue=u.substring(p.length);r.parentNode.insertBefore(g(l)[0],r);o=r}else{var v=u.substring(0,u.indexOf(p));var w=u.substring(u.indexOf(p)+p.length);r.nodeValue=w;r.parentNode.insertBefore(document.createTextNode(v),r);r.parentNode.insertBefore(g(l)[0],r);o=r}}if(o.nodeType==3&&o.nodeValue.length>1){var t=document.createTextNode(o.nodeValue.substring(1));o.nodeValue=o.nodeValue.substring(0,1);r.parentNode.insertBefore(t,o);r.parentNode.insertBefore(o,t)}var m=j._rangeContext.getSelectedRange();m.selectNodeContents(o);m.collapse(false);j._rangeContext.setSelectedRange(m)}if(r.nodeType==1){if(r.nodeName.toLowerCase()=="a"){return}else{for(var s=0;s<r.childNodes.length;s++){k(r.childNodes[s],p,q)}}}}k(this._container[0],i,l)}});(function(i){var j={mention:"^(@|)([^@ ]+)?",tags:"^#([^#, /]+)?",imageURL:"https?\\://\\S+(\\.png|\\.jpg|\\.gif|\\.jpeg)",linkURL:"https?\\://\\S+",youtubeURL:"https?\\://(?:[\\w\\-]+\\.)?youtube\\.com/watch\\S*[&?]v=([^&\\s]+)\\S*",httpNoSsl:"http\\://\\S+"};i.Patterns=j;i.Tokens={mention:{regExp:new RegExp(j.mention,"i"),keypress:function(l,k){if(!k||k.length<2){this._showDefaultList()}}},tags:{regExp:new RegExp(j.tags,"i"),keypress:function(l,k){if(k&&k.length<=56){if(k&&k.length>=2){this._showTagsList(k)}else{this._dd.renderTagsData()}}}},imageURL:{regExp:new RegExp(j.imageURL,"i"),keypress:function(k,n,m){if(!g(m).parent().attr("data-jive-statusinputImageURL")){this.emit("imageURLMatch",k);var l=g("<a></a>").text(k).attr("href",k).attr("data-jive-statusinputadd",true).attr("data-jive-statusinputImageURL",true);this.swapLinkFor(k,l)}this._dd.hide()}},linkURL:{regExp:new RegExp(j.linkURL,"i"),complete:function(k,l){if(g(l).text()!=""&&!g(l).parent().attr("data-jive-statusinputImageURL")){this.emit("linkURLMatch",k)}this._dd.hide()}},youtubeURL:{regExp:new RegExp(j.youtubeURL,"i"),complete:function(k,m){var l=new RegExp(j.httpNoSsl,"i");if(k.match(l)){k=k.replace("http","https")}this.emit("youtubeURLMatch",k);this._dd.hide()}}}})(jive.MicroBlogging.StatusInput);return jive.MicroBlogging})};
;
jive.namespace("MicroBlogging");define("apps/microblogging/views/status_input_common_view",["apps/microblogging/status_input","apps/microblogging/views/attachment_view","jquery"],function(d,a,b){var c=b;jive.MicroBlogging.CommonView=jive.AbstractView.extend(function(e,f){this.init=function(g){f.init.call(this,g);this.idPostfix=g.idPostfix;this.maxCharCount=g.maxCharCount;this.statusInput=null;this.attachmentsView=null;this.$waitingViewElem=null;this.$formElem=null;this.$imageFormElem=null;this.mobileUI=g.mobileUI||jive.rte.mobileUI;this.atMentionBtn=g.atMentionBtn;this.imagesEnabled=g.imagesEnabled||window._jive_images_enabled||false;this.imgAttachmentBtn=g.imgAttachmentBtn;this.linkBtn=g.linkBtn;this.submitBtn=g.submitBtn;this.cancelBtn=g.cancelBtn;this.publishBarIdentifier="";this.publishBarViewBean=false;if(g.publishBarIdentifier){this.publishBarIdentifier=g.publishBarIdentifier}if(g.publishBarViewBean){this.publishBarViewBean=g.publishBarViewBean}if(g.supportAttachments==undefined){this.supportAttachments=true}else{this.supportAttachments=g.supportAttachments}this.doNotAnimate=!!g.doNotAnimate;this.allowTagCreation=g.allowTagCreation};this.postRender=function(){var g=this;if(this.mobileUI&&this.atMentionBtn.length){this.atMentionBtn.remove()}this.createFormElem();this.createWaitingViewElem();this.createWaitingView();this.createActionContainer();this.statusInput=new d.StatusInput(this.getContent().find(".jive-js-statusinput"),{maxCharCount:this.maxCharCount,idPostfix:this.idPostfix,focusOnRdy:true,doNotAnimate:this.doNotAnimate,allowTagCreation:this.allowTagCreation,i18n:{}});this.statusInput.addListener("characterLenMsg",g.handleCharacterLenMsg.bind(g)).addListener("atMentionFinished",g.handleAtMentionResult.bind(g));this.atMentionBtn.click(function(h){g.handleAtMentionClick(h,c(this))});if(this.linkBtn){this.linkBtn.click(function(h){if(!g.linkBtn.hasClass("j-disabled")){g.handleLinkBtnClick(h)}});this._getInsertLinkContainer().find("a.js-uri-add").click(function(h){g.handleInsertLink(h)});this._getInsertLinkContainer().find('input[type="uri"]').keydown(function(h){if(h.keyCode==13||h.keyCode==32){g.handleInsertLink(h)}})}if(this.imgAttachmentBtn&&this.imagesEnabled&&this.publishBarIdentifier!=="activityHome"){this.imgAttachmentBtn.jiveFileButton({name:"image",title:jive.i18n.keys.weFormAddimage(),id:"imageFile",accept:"image/*",tabindex:"-1"}).bind("choose",function(h,i){g.handleImageChoose(h,i)});this.imgAttachmentBtn.keydown(function(h){if(h.keyCode==13){c(this).find("input[name=image]").click()}})}this._getMetaImageContainer().find("form").submit(function(){var h=c(this);if(h.find("input[type=file]").val()==""){h=null;return false}g.handleImageURLMatch(null);h=null;return false});this.submitBtn.off().on("vclick",function(h){if(!g.waitingView.isFormEnabled()){return}g.waitingView.disableForm();g.handleSubmitClick(h);h.stopPropagation()});if(this.cancelBtn){this.cancelBtn.off().on("vclick",function(h){g.resetStatusInput();g.attachmentsView.removeAllAttachments();g.attachmentsView.reset();g.emit("cancel")})}this.statusInput.addListener("linkURLMatch",function(h){g.handleLinkURLMatch(h);if(g.shouldHandleEmbedly()&&g.isLinkBtnEnabled()){g.handleEmbedly(h)}}).addListener("imageURLMatch",function(h){if(!g.supportAttachments){return}else{if(g.shouldHandleEmbedly()){g.handleEmbedly(h,true)}else{g.handleImageURLMatch(h)}}}).addListener("youtubeURLMatch",function(h){if(!g.supportAttachments||g.shouldHandleEmbedly()){return}g.handleYoutubeURLMatch(h)}).addListener("focus",function(h){g.handleFocus(h)});this.attachmentsView=new a(this._getAttachmentsViewOptions());this.attachmentsView.addListener("removeImage",function(i,h){if(!g.supportAttachments){return}g.emitP("removeImage",i).addCallback(function(j){if(j==0){g.enableButtons()}h.emitSuccess(j)}).addErrback(function(k,j){h.emitError(k,j)})}).addListener("removeThumbnail",function(i,h){g.emitP("removeThumbnail",i).addCallback(function(j){h.emitSuccess(j)}).addErrback(function(k,j){h.emitError(k,j)})})};this.getStatusInput=function(){return this.statusInput};this.focus=function(){this.statusInput._focus()};this.createWaitingViewElem=function(){throw"createWaitingViewElem method is abstract. Need to implement in subclass"};this.createWaitingView=function(){this.waitingView=new jive.shared.FormWaitingView(this.$waitingViewElem)};this.enableForm=function(){this.waitingView.enableForm()};this.disableForm=function(){this.waitingView.disableForm()};this.createFormElem=function(){throw"createFormElem method is abstract. Need to implement in subclass"};this.createActionContainer=function(){this.$actionContainer=this.$formElem.find("[id^=status-input-actions-]");this.$inputActionContainer=this.$formElem.find("[id^=j-status-input-info]");this.$moderationMessageContainer=c("#"+this.publishBarIdentifier+"moderation-container")};this.handleAtMentionClick=function(h,g){this.statusInput.handleAtMentionButtonClick();this.emit("atMentionClick");h.stopPropagation()};this.handleAtMentionResult=function(){return null};this.handleCharacterLenMsg=function(h){var j=arguments[1]||{},g=this.$formElem.eq(0).find(".j-js-status-input-characters-remaining"),i=({ok:{msg:""},warning:{msg:jive.wall.charLenErrors({error:false,numChars:j.charLeft}),className:"warning"},error:{msg:jive.wall.charLenErrors({error:true,numChars:j.charOver}),className:"danger"}})[h];g.html(i.msg).removeClass("warning danger");if(h!=="ok"){g.addClass(i.className)}};this.handleLinkBtnClick=function(h){var g=this;this._getInsertLinkContainer().toggle("fast",function(){g._getInsertLinkContainer().find("input:visible").focus()})};this.handleInsertLink=function(h){var g=this._getInsertLinkContainer().find("input").val();this.statusInput.handleInsertLink(g);this.resetInsertLinkContainer()};this.handleLinkURLMatch=function(h){var g=this;this.emitP("linkURLMatch",h).addCallback(function(j,i){g.renderResolvedLink(i,j)}).addErrback(function(j,i){g.renderError(j,i)})};this.renderResolvedLink=function(h,g){this.statusInput.swapLinkFor(h,g)};e.getDraftData=function(){return null};this._getAttachmentsViewOptions=function(){return{selector:this.selector+" .jive-js-attachment-container"}};this._getMetaImageContainer=function(){return this.getContent().find("div.j-status-input-attach-action-container div.j-meta-image-container")};this._getInsertLinkContainer=function(){return this.getContent().find("div.js-insert-link")};this.resetInsertLinkContainer=function(){this._getInsertLinkContainer().hide().find('input[type="uri"]').val("")};this.handleImageURLMatch=function(h){this.attachmentsView.showLoadingNotification();this.disableLinkBtn();this.setDataForURLImage(h);var g=this;this.emitP("imageURLMatch",h,this.$imageFormElem,this.getDraftData()).addCallback(function(j,i){g.renderImageAttachment(i,j)}).addErrback(function(j,i){g.attachmentsView.hideLoadingNotification();if(g.attachmentsView.getAttachmentCount()==0){g.enableLinkBtn()}g.renderError(j,i)}).addCancelback(function(){g.attachmentsView.hideLoadingNotification()})};this.handleYoutubeURLMatch=function(h){this.attachmentsView.showLoadingNotification();var g=this;this.emitP("youtubeURLMatch",h,this.getDraftData()).addCallback(function(j,i){g.renderVideoAttachment(i,j)}).addErrback(function(j,i){g.attachmentsView.hideLoadingNotification();g.renderError(j,i)}).addCancelback(function(){g.attachmentsView.hideLoadingNotification()})};this.shouldHandleEmbedly=function(){return this.statusInput.isContainerEditable()&&this.supportAttachments&&this.hasLinkBtn()&&this.attachmentsView.getAttachmentCount()==0};this.handleEmbedly=function(i,h){var j=new c.Deferred();var k=this.attachmentsView.showLoadingNotification({listItemClass:"j-previewer-loading",spinnerSize:"big"});this.disableButtons();var g=this;this.emitP("embedlyURLMatch",i,this.getDraftData()).addCallback(function(m,l){g.renderEmbedlyAttachment(l,m);j.resolve()}).addErrback(function(m,l){g.enableButtons();if(m!="fetch failed"||l!="400"){g.renderError(m,l)}else{if(h){g.handleImageURLMatch(i)}}j.reject()}).addCancelback(function(){g.attachmentsView.hideLoadingNotification()});c.when(k,j).always(function(){g.attachmentsView.hideLoadingNotification()})};this.isLinkBtnEnabled=function(){return this.hasLinkBtn()&&!c(this.linkBtn).hasClass("j-disabled")};this.hasLinkBtn=function(){return !!this.linkBtn&&this.linkBtn.length>0};this.renderImageAttachment=function(g,h){this.attachmentsView.add(g,h)};this.renderVideoAttachment=function(g,h){this.attachmentsView.add(g,h)};this.renderEmbedlyAttachment=function(g,h){this.attachmentsView.add(g,h)};this.handleImageChoose=function(h,j){var g=this._getMetaImageContainer().find("form");var i=g.find("input[id=imageFile]");if(i.length==1){g[0].removeChild(i[0])}g.prepend(j);g.submit()};this.enableButtons=function(){this.enableImgAttachmentBtn();this.enableLinkBtn()};this.disableButtons=function(){this.disableImgAttachmentBtn();this.disableLinkBtn()};this.enableImgAttachmentBtn=function(){if(this.imgAttachmentBtn){this.imgAttachmentBtn.removeClass("j-disabled");this.imgAttachmentBtn.find('input[type="file"]').prop("disabled",false)}};this.disableImgAttachmentBtn=function(){if(this.imgAttachmentBtn){this.imgAttachmentBtn.addClass("j-disabled");this.imgAttachmentBtn.find('input[type="file"]').prop("disabled",true)}};this.enableLinkBtn=function(){if(this.hasLinkBtn()){this.linkBtn.removeClass("j-disabled")}};this.disableLinkBtn=function(){if(this.hasLinkBtn()){this.linkBtn.addClass("j-disabled")}this.resetInsertLinkContainer()};e.setDataForURLImage=function(g){this.$imageFormElem.find("input[name=imageURL]").val(g)};this.handleFocus=function(h){var g=this;if(this.$actionContainer.is(":hidden")){this._initialStatusInputHeight=this.statusInput.getContainer().height();if(!this.imagesEnabled&&this.imgAttachmentBtn){this.imgAttachmentBtn.hide()}this.$actionContainer.addClass("j-act-comment-actions clearfix");this.$actionContainer.css({opacity:0,height:1}).show().animate({height:"24px",opacity:1},200,"linear",function(){c(this).css("height","auto")});this.$formElem.closest("article").find("div.j-act-reply-form").addClass("r-active");this.$formElem.closest("article").find("div.eae-reply-avatar").fadeIn("fast")}if(this.$inputActionContainer&&this.$inputActionContainer.is(":hidden")){this.$inputActionContainer.removeAttr("style");this.$inputActionContainer.show()}if(this.$moderationMessageContainer&&this.$moderationMessageContainer.is(":hidden")){this.$moderationMessageContainer.show()}if(g.getContent().find("#j-js-mb-success").length){g.getContent().find("#j-js-mb-success").fadeOut("fast",function(){c(this).remove();g.getContent().find(".j-mb-last-update").show()})}if(g.publishBarIdentifier==="activityHome"){g.myPublishBar=new jive.PublishBar.Main({objectType:g.publishBarViewBean.objectType,objectDescriptor:g.publishBarViewBean.objectDescriptor,identifier:g.publishBarIdentifier,placeRenderType:"quick",showCommunityOption:(!g.publishBarViewBean.viewingUserPartner&&g.publishBarViewBean.visibilityBean.placeItemBean.prop.canPostToNetwork),initData:{visibilityBean:g.publishBarViewBean.visibilityBean,organizeBean:g.publishBarViewBean.organizeBean,optionsBean:g.publishBarViewBean.optionsBean},handleVisibilityFocus:false});if(g.imgAttachmentBtn&&g.imagesEnabled&&!g.initializedJiveFileButton){g.initializedJiveFileButton=true;g.imgAttachmentBtn.jiveFileButton({name:"image",title:jive.i18n.keys.weFormAddimage(),id:"imageFile",accept:"image/*",tabindex:"-1"}).bind("choose",function(i,j){g.handleImageChoose(i,j)});g.imgAttachmentBtn.keydown(function(i){if(i.keyCode==13){c(this).find("input[name=image]").click()}})}}this.emit("focus")};this.handleSubmitClick=function(h){var i=true;if(this.publishBarIdentifier){if(!(c("input#"+this.publishBarIdentifier+"j-publishbar-place-type").val()&&c("input#"+this.publishBarIdentifier+"j-publishbar-place-id").val())){i=false}}if(this.statusInput.getCharCount()!=0||!i||this.attachmentsView.getAttachmentCount()){if(this.maxCharCount&&this.statusInput.getCharCount()>this.maxCharCount){this.renderError(jive.wall.submitErrors({key:"over"}));this.emit("submitError",jive.wall.submitErrors({key:"over"}))}else{if(!i){this.renderError(jive.wall.submitErrors({key:"noplaceselected"}));this.emit("submitError",jive.wall.submitErrors({key:"noplaceselected"}))}else{c(".jive-js-error-general",this.$formElem).hide();var g=this;this.emitP("submit",this.getDataFromDom()).addCallback(function(k,j){if(k.wallentry!=undefined&&k.wallentry.errorMessage!=undefined){g.renderError(jive.wall.submitErrors({key:k.wallentry.errorMessage}));g.emit("submitError",jive.wall.submitErrors({key:k.wallentry.errorMessage}))}else{g.renderResponse(k)}}).addErrback(function(k,j){g.renderError(k,j)})}}}else{this.renderError(jive.wall.submitErrors({key:"none"}));this.emit("submitError",jive.wall.submitErrors({key:"none"}))}};this.getDataFromDom=function(){throw"getDataFromDom method is abstract. Need to implmenet in subclass"};this.normalizeData=function(){return this.statusInput.getSubmitVals()};this.renderError=function(i,g){this.waitingView.enableForm();var h=this.getContent().find(".jive-js-error-general");h.text(i);h.slideDown(100);h.attr("aria-invalid","true");h=null;setTimeout(function(){c(".jive-js-error-general",this.$formElem).fadeOut("fast")},3500)};this.renderResponse=function(g){this.waitingView.enableForm();this.attachmentsView.reset()};this.renderResponseCommon=function(i){this.getContent().find("#j-js-mb-success").fadeOut("fast");var h=this.getContent().find(".j-mb-last-update");if(h.length){h.hide();if(i.wallentry.containerType==2020){if(i.wallentry.status!="AWAITING_MODERATION"){var j=c(i.wallentry.message).text();j=c("<div/>").text(j).html();h.html(jive.statusinput.containers.microbloggingStatusInputLastUpdate({latestStatusUpdate:{text:j,url:i.wallentry.URL,commentcount:0}}))}}}var g=c(jive.statusinput.containers.microbloggingStatusInputSuccess({entry:i.wallentry}));g.hide();g.find(".j-js-mb-success-dismiss").click(function(){g.fadeOut("fast",function(){c(".j-mb-hint").show();h.show()})});this.getContent().append(g);g.animate({height:"toggle"},{duration:600},function(){if(i.wallentry.meta&&i.wallentry.meta.length>0){g.find(".jive-js-attachment-container").slideDown("fast",function(){c(this).animate({opacity:1},500)})}});this.resetStatusInput()};this.resetStatusInput=function(){this.statusInput.resetText();this.$actionContainer.hide();this.$inputActionContainer.hide();this.$moderationMessageContainer.hide();this.resetInsertLinkContainer();this.enableButtons();if(c("#"+this.publishBarIdentifier+"j-publishbar-place-original")){c("#"+this.publishBarIdentifier+"j-publishbar-place-original").trigger("resetToOriginalPlace")}this.$formElem.closest("article").find("div.eae-reply-avatar").hide();this.$formElem.closest("article").find("div.j-act-reply-form").removeClass("r-active");var g=this.statusInput.getContainer();g.css("minHeight","24px");g.prev(".jive-js-statusinput-default").show();g.removeClass("j-mb-focused");this.statusInput.setContainerEditable(false);g=null}});return jive.MicroBlogging.CommonView});
;
goog.provide("jive.statusinput.mention_warnings.jsI18nHelper");jive.statusinput.mention_warnings.jsI18nHelper=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.key),[])));return opt_sb?"":output.toString()};
;
jive.namespace("MicroBlogging");jive.MicroBlogging.CommonController=jive.oo.Class.extend(function(a){jive.conc.observable(this);this.init=function(d){if(!d){d={}}this.microbloggingService=new jive.MicroBlogging.MicroBloggingSource();this.metaService=new jive.MetaSource();this.draftWallEntry=null;this.meta=[];this.viewOptions=d.viewOptions||{};this.initMBView();this.manuallyRenderView=d.manuallyRenderView||false;this.submitURLParams={objectType:14,objectID:1};if(d.trackingID){this.submitURLParams.trackingID=d.trackingID}var c=this;this.microbloggingView.addListener("submit",function(e,f){c.submitHandler(e,f)}).addListener("linkURLMatch",function(e,f){c.metaService.createLink(e).addCallback(function(g){f.emitSuccess(g,e)}).addErrback(function(h,g){f.emitError(h,g)})}).addListener("imageURLMatch",function(g,e,f,i){b(f,h,i);function h(){var j=c.metaService.createImage(c.draftWallEntry.wallentry,g,g!=null,e);j.addCallback(function(k){c.meta.push("video");i.emitSuccess(k,g)}).addErrback(function(l,k){i.emitError(l,k)})}}).addListener("removeImage",function(f,e){c.metaService.remove(f).addCallback(function(g){c.meta.pop();e.emitSuccess(c.meta.length)}).addErrback(function(h,g){e.emitError(h,g)})}).addListener("removeThumbnail",function(f,e){c.metaService.setLinkThumbnail(f).addCallback(function(g){e.emitSuccess()}).addErrback(function(h,g){e.emitError(h,g)})}).addListener("youtubeURLMatch",function(g,f,h){b(f,e,h);function e(){c.metaService.createVideo(c.draftWallEntry.wallentry,g).addCallback(function(i){c.metaService.fetch(i.id).addCallback(function(j){if(j.meta.length>0){c.meta.push("video");h.emitSuccess(c.metaService.normalizeData(j),g)}else{h.emitError(message,status)}}).addErrback(function(k,j){h.emitError(k,j)})}).addErrback(function(j,i){h.emitError(j,i)})}}).addListener("embedlyURLMatch",function(h,g,k){b(g,i,k);function i(){c.meta.push("embedly");c.metaService.fetchEmbedly(h).addCallback(function(l){e(l)}).addErrback(function(){c.meta.pop();k.emitError("fetch failed",400);k.emitError("fetch failed",404)})}function e(m){if(c.draftWallEntry){var l={linkmeta:{parentObjectType:c.draftWallEntry.wallentry.objectType,parentObjectID:c.draftWallEntry.wallentry.objectId,url:h,type:j(m),title:!!m.title?m.title:"",description:!!m.description?m.description:"",providerURL:!!m.provider_url?m.provider_url:"",providerDisplay:!!m.provider_name?m.provider_name:"",thumbnailURLs:f(m),html:j(m)==="video"?m.object.html:"",imageURL:j(m)==="photo"?m.object.url:""}};c.metaService.createLinkMeta(l).addCallback(function(n){if(!!n.meta){k.emitSuccess(c.metaService.normalizeData(n),h)}else{c.meta.pop();k.emitError()}}).addErrback(function(o,n){c.meta.pop();k.emitError(o,n)})}else{c.meta.pop();k.emitError()}}function f(l){var m=[];if(!!l.images){l.images.forEach(function(n){m.push(n.url)})}return m.slice(0,3)}function j(l){if(!!l.object&&l.object.type){return l.object.type}else{return l.type}}}).addListener("cancel",function(){c.emit("cancel")});function b(e,g,f){if(c.meta.length>0&&c.meta[0]=="embedly"){f.cancel();return}c.draftData=e;if(c.draftWallEntry==null){c.createDraft(g,f)}else{g()}}if(!this.manuallyRenderView){this.renderView()}};a.submitHandler=function(d,e){var c=this;var b;if(this.draftWallEntry!=null){b=$j.extend(true,{},this.draftWallEntry,d)}else{b=d}if(d.wallentry&&d.wallentry.attachmentID&&d.wallentry.imageID){this.metaService.setLinkThumbnail(d.wallentry.attachmentID,d.wallentry.imageID)}this.submitServiceCall(b,e)};a.submitServiceCall=function(c,d){var b=this;this.microbloggingService.publishEntry(this.submitURLParams,c).addCallback(function(e){b.submitSuccessCallback(e,d)}).addErrback(function(f,e){b.submitErrCallback(f,e,d)})};a.submitSuccessCallback=function(b,c){this.draftWallEntry=null;this.meta=[];b.wallentry=this.metaService.normalizeData(b.wallentry);c.emitSuccess(b);this.emitP("submitSuccess",b)};a.submitErrCallback=function(c,b,d){d.emitError(c,b);this.emitP("submitError",c,b)};a.createDraft=function(d,c){var b=this;this.microbloggingService.createDraft({objectType:14,objectID:1},{wallentry:{}}).addCallback(function(e){b.draftWallEntry=e;d()}).addErrback(function(f,e){c.emitError(f,e)})};a.initMBView=function(){throw"initMBView method is abstract. Need to implement in subclass"};this.renderView=function(){this.microbloggingView.postRender()};this.getMicrobloggingView=function(){return this.microbloggingView}});define("apps/microblogging/status_input_common_controller",function(){return jive.MicroBlogging.CommonController});
;
jive.namespace("MicroBlogging");define("apps/microblogging/models/microblogging_source",["apps/shared/models/rest_service"],function(a){jive.MicroBlogging.MicroBloggingSource=a.extend(function(b){jive.conc.observable(this);b.resourceType="wall";b.pluralizedResourceType=b.resourceType;this.publishEntry=function(c,f){var d=this.RESOURCE_ENDPOINT+"/"+c.objectType+"/"+c.objectID+(c.trackingID?"?sr="+c.trackingID:"");var e=$j.deparam.querystring().fromQ;if(e){f.wallentry.fromQuest=e}else{if(jive.Onboarding&&jive.Onboarding.Controller){var g=jive.Onboarding.Controller.getActiveQuestAndStep();if(g.activeQuestID=="StayInTouchQuest"&&g.activeQuestStep==0){f.wallentry.fromQuest=g.activeQuestID}}}return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:d,data:JSON.stringify(f)},f)};this.createDraft=function(c,e){var d=this.RESOURCE_ENDPOINT+"/"+c.objectType+"/"+c.objectID+"/draft";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:d,data:JSON.stringify(e)},e)};this.repost=function(c,e){var d=this.RESOURCE_ENDPOINT+"/repost/"+c.wallEntryID;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:d,data:e},e)};this.createRepostDraft=function(c,e){var d=this.RESOURCE_ENDPOINT+"/repost/"+c.wallEntryID+"/draft";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:d,data:JSON.stringify(e)},e)}});return jive.MicroBlogging.MicroBloggingSource});
;
jive.namespace("Browse.User");define("apps/browse/user/model/user_source",["apps/shared/models/rest_service"],function(a){jive.Browse.User.ItemSource=a.extend(function(b){b.resourceType="user";this.findAll=function(e){var d=(e.userID)?e.userID:"current";var c=this.RESOURCE_ENDPOINT+"/"+d+"/browse";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:e||{}})};this.findAllOrgChart=function(e){var d=(e&&e.userID)?e.userID:"current";var c=this.RESOURCE_ENDPOINT+"/"+d+"/orgchart";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:e||{}})};this.getDirectReportCount=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.userID+"/directreports/count";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:{}})};this.getDirectReports=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.userID+"/directreports";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:{}})};this.getUserProperty=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.userID+"/prop/"+d.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:{}})};this.setUserProperty=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.userID+"/prop/"+d.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:d.propValue})};this.removeUserProperty=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.userID+"/prop/"+d.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"DELETE",{url:c})};this.isLoginProcessing=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.userID+"/login/processing";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:{}})}});return jive.Browse.User.ItemSource});
;
jive.namespace("Tips");jive.Tips.TipGroupState=jive.oo.Class.extend(function(a){a.init=function(b){this.stateKey=b.stateKey;this.currentTipId=b.currentTipID||null;this.dismissed=b.dismissed||false;this.skipped=false};this.setCurrentTipId=function(b){this.currentTipId=b};this.getCurrentTipId=function(){return this.currentTipId};this.setDismissed=function(b){this.dismissed=b};this.isDismissed=function(){return this.dismissed};this.setSkipped=function(b){this.skipped=b};this.isSkipped=function(){return this.skipped};this.getKey=function(){return this.stateKey};this.serialize=function(){var b=this.isDismissed()?"true":"false";if(this.currentTipId){b+="#"+this.currentTipId}return b}});define("apps/tips/models/tip_group_state",function(){return jive.Tips.TipGroupState});
;
goog.provide("jive.tips.renderTip");
jive.tips.renderTip=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div id="jive-tips-',soy.$$escapeHtmlAttribute(opt_data.id),'" data-group-id="',soy.$$escapeHtmlAttribute(opt_data.groupId),'" style="display: none" class="j-tips ',opt_data.cssClass?soy.$$escapeHtmlAttribute(opt_data.cssClass):"",'" role="dialog" tabindex="1111" aria-labelledby="',soy.$$escapeHtmlAttribute(opt_data.id),'-Title" aria-describedby="',soy.$$escapeHtmlAttribute(opt_data.id),'-Desc">',
opt_data.templateName?soy.$$filterNoAutoescape(jive.soy.func.eval(opt_data.templateName,true,false,{"data":opt_data.templateData})):(opt_data.titleKey?'<h4 id= "'+soy.$$escapeHtmlAttribute(opt_data.id)+'-Title" class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.titleKey),[]))+"</h4>":"")+'<p id="'+soy.$$escapeHtmlAttribute(opt_data.id)+'-Desc" >'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.bodyKey),[]))+"</p>",'<\!-- BEGIN tip footer --\><div class="j-tips-footer"><div class="j-tips-footer-overlay"></div>',
opt_data.count>1?'<div class="j-pagination"><span class="j-tips-count font-color-meta-light">'+soy.$$escapeHtml(opt_data.index+1)+" / "+soy.$$escapeHtml(opt_data.count)+'</span><span class="j-pagination-prevnext">'+(!opt_data.first?'<a href="#" class="j-pagination-prev js-prev-tip" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k428d"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k428c"),[]))+"</a>":'<span class="j-pagination-prev j-disabled font-color-meta">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k428c"),[]))+"</span>")+(!opt_data.last?'<a href="#" class="j-pagination-next js-next-tip" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k4282"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4281"),[]))+"</a>":'<span class="j-pagination-next j-disabled font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4281"),[]))+"</span>")+"</span></div>":"",'<ul class="j-tips-actions"><li><a href="#" class="js-ignore-tips close" title="',
soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k4280"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k427f"),[])),'</a></li><li><a href="#" class="js-close-tips close" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k427c"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k427b"),[])),"</a></li></ul></div><\!-- END tip footer --\></div>");return opt_sb?"":output.toString()};
;
Array.prototype.forEach=Array.prototype.forEach||function(b){var a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}var d=arguments[1];for(var c=0;c<a;c++){if(c in this){b.call(d,this[c],c,this)}}};Array.prototype.map=Array.prototype.map||function(b){var a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}var e=new Array(a);var d=arguments[1];for(var c=0;c<a;c++){if(c in this){e[c]=b.call(d,this[c],c)}}return e};Array.prototype.reduce=Array.prototype.reduce||function(b){var a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}if(a==0&&arguments.length==1){throw new TypeError()}var c=0;if(arguments.length>=2){var d=arguments[1]}else{do{if(c in this){d=this[c++];break}if(++c>=a){throw new TypeError()}}while(true)}for(;c<a;c++){if(c in this){d=b.call(null,d,this[c],c,this)}}return d};Array.prototype.reduceRight=function(b){var a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}if(a==0&&arguments.length==1){throw new TypeError()}var c=a-1;if(arguments.length>=2){var d=arguments[1]}else{do{if(c in this){var d=this[c--];break}if(--c<0){throw new TypeError()}}while(true)}for(;c>=0;c--){if(c in this){d=b.call(null,d,this[c],c,this)}}return d};Array.prototype.filter=Array.prototype.filter||function(b){var a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}var e=[];var d=arguments[1];for(var c=0;c<a;c++){if(c in this){var f=this[c];if(b.call(d,f,c)){e.push(f)}}}return e};Array.prototype.every=Array.prototype.every||function(b){var a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}var d=arguments[1];for(var c=0;c<a;c++){if(c in this&&!b.call(d,this[c],c,this)){return false}}return true};Array.prototype.some=Array.prototype.some||function(b){var d=0,a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}var c=arguments[1];for(;d<a;d++){if(d in this&&b.call(c,this[d],d,this)){return true}}return false};Array.prototype.indexOf=Array.prototype.indexOf||function(b){var a=this.length>>>0;var c=Number(arguments[1])||0;c=(c<0)?Math.ceil(c):Math.floor(c);if(c<0){c+=a}for(;c<a;c++){if(c in this&&this[c]===b){return c}}return -1};Array.prototype.lastIndexOf=Array.prototype.lastIndexOf||function(b){var a=this.length;var c=Number(arguments[1]);if(isNaN(c)){c=a-1}else{c=(c<0)?Math.ceil(c):Math.floor(c);if(c<0){c+=a}else{if(c>=a){c=a-1}}}for(;c>-1;c--){if(c in this&&this[c]===b){return c}}return -1};define("lib/jiverscripts/src/compat/array",{});
;
(function(f){var e=/^-?\d+$/;function a(g){var h=g.css("position");return h=="absolute"||h=="relative"||h=="fixed"}function d(g){var h=g.css("z-index");return typeof h=="number"||(h&&h.match(e))}function b(g){return(a(g)&&d(g))||g.is("body")}function c(h,g){return g.toArray().every(function(i){return f.contains(h,i)})}jQuery.fn.effectiveZIndex=function(h){var g;if(h&&h.context){g=f(h.context)}else{if(h&&h.relativeTo){g=this.stackingContexts(h)}else{g=f("body")}}var i=[],j=this;while(j.length>0){if(j[0]!==g[0]){i.push(j)}else{break}j=j.parent()}return i.reduce(function(m,l){var k=f(l);if(b(k)){return parseInt(k.css("z-index"),10)}else{return m}},0)};jQuery.fn.stackingContexts=function(g){var h=(g&&g.relativeTo)?f(g.relativeTo):this;var j=this;var i=this.parents().filter(function(){var l=f(this),k=c(this,j)&&c(this,h);return k&&b(l)});return i};jQuery.fn.stackingContext=function(g){return this.stackingContexts(g).filter(":first")}})(jQuery);
;
jive.namespace("Tips");jive.Tips.TipView=jive.AbstractView.extend(function(a){a.init=function(b){this.tipView=$j.extend({},b)};a.getId=function(){return this.tipView.id};this.hasBeenViewed=function(){return this.shown};this.hasValidSelector=function(){var c=this;if(c.tipView.selector){var d=$j(c.tipView.selector);var b=(c.tipView.hiddenSelectorAllowed||d.is(":visible"));return(d.length>0)&&b}return false};a.getLoadSelector=function(){return this.tipView.loadSelector};this.isInitialTip=function(){return this.initialTip};this.render=function(f){var c=this;this.shown=false;c.triggerEventType=f.triggerEventType;c.triggerSelector=f.triggerSelector;c.groupId=f.id;var b=f.getTipViewsWithValidSelectors();var e=f.findIndexById(c.getId(),b);this.initialTip=e==0;var g=$j.extend(c.tipView,{groupId:c.groupId,count:b.length,first:c.initialTip,last:e==(b.length-1),index:e});var d=jive.tips.renderTip(g);c.$tipElement=$j(d);c.bindTipElementHandlers(f)};a.bindTipElementHandlers=function(c){var b=this;b.$tipElement.find(".js-next-tip").bind("click",function(d){c.showNextTip();d.preventDefault()});b.$tipElement.find(".js-prev-tip").bind("click",function(d){c.showPreviousTip();d.preventDefault()});b.$tipElement.find(".js-ignore-tips").bind("click",function(d){c.skip();d.preventDefault()});b.$tipElement.find(".js-close-tips").bind("click",function(d){c.dismiss();d.preventDefault()})};this.display=function(){var b=this;b.$tipSelector=$j(b.tipView.selector).filter(":first");if(b.$tipSelector.length>0){var c=b.$tipSelector;if(b.triggerSelector){c=$j(b.triggerSelector)}if(c.length>0){this.showTip(c)}else{if(console){console.warn("Please ensure a valid trigger selector is specified for tip "+this.tipView.id)}}}else{if(console){console.warn("Please ensure a valid selector is specified for tip "+this.tipView.id)}}};a.isTransientTrigger=function(){return this.isMouseoverTrigger()||this.isFocusTrigger()};a.isMouseoverTrigger=function(){return this.triggerEventType=="mouseover"};a.isFocusTrigger=function(){return this.triggerEventType=="focus"};a.showTip=function(d){var b=this;if(b.triggerEventType&&b.isInitialTip()){b.$triggerSelector=d;b.$triggerSelector.one(b.triggerEventType,function(f){b.showPopover(f)})}else{var c=b.getLoadSelector();if(c){b.showTipWithLoadSelector(c)}else{b.showPopover()}}};a.showTipWithLoadSelector=function(d){var b=this;var c=$j(d);if(c.length>0){if(c.is("img")){c.imagesLoaded(function(){b.showPopover()})}else{c.bind("load",function(){b.showPopover()})}}else{b.showPopover()}};a.showPopover=function(f){var c=this;if(!c.shown){var b=c.determineTipContext(f);var d={context:b,closeOtherPopovers:true,closeOtherPopoversSelector:"BODY > .js-pop > .j-tips[data-group-id='"+c.groupId+"']"};if(c.tipView.hiddenSelectorAllowed){c.handleInvisibleContext(b)}d=$j.extend(d,c.unbindDefocusHandlers());d=$j.extend(d,c.addCloseOptions());d=$j.extend(d,c.addOffsetOptions());c.$tipElement.popover(d);var e=c.$tipElement.closest(".js-pop");e.css("z-index",b.effectiveZIndex({relativeTo:e})+5);c.bindDefocusHandlers();c.shown=true}};a.hasCloseSelector=function(){return(this.tipView.closeSelector&&this.tipView.closeSelector.length>0)||false};a.isCloseOnClick=function(){return this.hasCloseSelector()&&this.tipView.closeSelector.trim().toLowerCase()=="body"};a.addOffsetOptions=function(){var b=this;return{nudge:{top:b.tipView.belowOffset,bottom:b.tipView.aboveOffset}}};a.addCloseOptions=function(){var b=this;var d=b.hasCloseSelector();var c={closeOnClick:d};if(d){c=$j.extend(c,{closeOnClickSelector:b.tipView.closeSelector})}return c};a.bindDefocusHandlers=function(){var b=this;if(!b.isCloseOnClick()){b.$tipElement.bind("click",function(){b.focusTip()});jive.conc.nextTick(function(){$j("BODY").bind("click",function(c){b.blurTip(c)})})}};a.unbindDefocusHandlers=function(){var b=this;var c={};if(!b.isCloseOnClick()){c=$j.extend(c,{onClose:function(){b.$tipElement.unbind("click",b.focusTip);$j("BODY").unbind("click",b.blurTip);b.restoreContextVisibility()}})}return c};a.determineTipContext=function(e){var d=this;var c=d.$tipSelector;if(e){var b=$j(e.currentTarget);var f=b.find(d.tipView.selector);if(f.length==0&&d.triggerSelector){f=$j(e.target).find(d.triggerSelector)}if(f&&f.length>0){c=f}}return c};a.blurTip=function(f){var b=this;if(b.$tipElement){var c=b.$tipElement.parent();var d=$j(f.target).parents().addBack().toArray().reduce(function(h,e){return h||e==c[0]},false);var g=$j(f.target).parents("body").length>0;if(!d&&g){c.addClass("j-pop-blurred");b.restoreContextVisibility()}}};a.focusTip=function(){if(this.$tipElement){this.$tipElement.parent().removeClass("j-pop-blurred")}};a.handleInvisibleContext=function(c){var b=this;if(!c.is(":visible")){b.hiddenSelector=true;var e=c.attr("style");var d=e&&e.match(/display:/);b.cssDiplayValue=(d)?c.css("display"):"";c.show()}};a.restoreContextVisibility=function(){var b=this;if(b.hiddenSelector&&b.$tipSelector.is(":visible")){b.$tipSelector.css("display",b.cssDiplayValue)}};this.close=function(){if(this.$tipElement){this.$tipElement.trigger("close")}}});define("apps/tips/views/tip_view_view",function(){return jive.Tips.TipView});
;
jive.namespace("Tips");jive.Tips.Tip=jive.AbstractView.extend(function(a){a.init=function(d){var c=this;c.id=d.id;var b=d.views||[];if(!d.views){b.push(d)}this.views=$j.map(b,function(e){return new jive.Tips.TipView($j.extend(e,{id:c.id}))})};a.getActiveTipView=function(){return this.views[this.getValidSelectorIndex()]};this.getId=function(){return this.id};this.hasValidSelector=function(){return this.getValidSelectorIndex()>-1};a.getValidSelectorIndex=function(){var b=this;for(var d=0;d<b.views.length;d++){var c=b.views[d];if(c.hasValidSelector()){return d}}return -1};this.isInitialTip=function(){return this.getActiveTipView().isInitialTip()};this.render=function(b){this.getActiveTipView().render(b)};this.display=function(){this.getActiveTipView().display()};this.close=function(){if(this.hasValidSelector()){this.getActiveTipView().close()}}});define("apps/tips/views/tip_view",function(){return jive.Tips.Tip});
;
jive.namespace("Tips");jive.Tips.TipGroup=jive.AbstractView.extend(function(a){a.init=function(c){var b=this;b.id=c.id;b.index=c.index;b.triggerSelector=c.triggerSelector;b.triggerEventType=c.triggerEventType;b.dismissKey=c.dismissKey||[];b.tips=c.visibleTips||[];b.refreshSelector=c.refreshSelector;b.refreshTimeout=c.refreshTimeout||b.getRefreshTimeout();var d=c.state||{};b.state=new jive.Tips.TipGroupState($j.extend(d,{stateKey:b.dismissKey}));b.buildTipViews();b.bindRefreshHandler()};a.buildTipViews=function(){var b=this;b.tipViews=[];b.activeTipIndex=-1;var c=b.state.getCurrentTipId();$j.each(b.tips,function(e,f){var d=new jive.Tips.Tip(f);if(f.id==c){b.activeTipIndex=(e-1)}b.tipViews.push(d)});while(b.activeTipIndex>=(b.tipViews.length-1)){b.activeTipIndex--}};a.destroyTipViews=function(){$j.each(this.tipViews,function(c,b){b.close()})};a.refresh=function(){var b=this;if(!b.isHidden()){b.destroyTipViews();setTimeout(function(){b.buildTipViews();b.showNextTip()},b.refreshTimeout)}};a.isHidden=function(){return this.state&&(this.state.isSkipped()||this.state.isDismissed())};a.getRefreshTimeout=function(){return jive.localexchange?1000:5000};this.hasVisibleTips=function(){return this.getTipViewsWithValidSelectors().length>0};this.showNextTip=function(){var b=this;var c=b.tipViews;if(c&&b.activeTipIndex<(c.length-1)){b.activeTipIndex++;if(!b.showActiveTip()){b.showNextTip()}}else{if(b.hasVisibleTips()){b.resetSequence()}}};this.showPreviousTip=function(){var b=this;if(b.activeTipIndex>0){b.activeTipIndex--;if(!b.showActiveTip()){b.showPreviousTip()}}else{if(b.hasVisibleTips()){b.resetSequence()}}};a.resetSequence=function(){var b=this;b.activeTipIndex=-1;b.showNextTip()};a.showActiveTip=function(){var b=this;var c=b.getCurrentTipView();if(c){if(c.hasValidSelector()){c.render(b);c.display();b.storeState(c);return true}else{return false}}else{return false}};a.storeState=function(c){var b=this;var d=b.state.getCurrentTipId();if(c.getId()!=d){b.state.setCurrentTipId(c.getId());if(d){b.emit("state",b.state)}}};this.findIndexById=function(b,c){return $j.inArray(b,this.getTipIds(c))};a.getCurrentTipView=function(){return this.tipViews[this.activeTipIndex]};this.skip=function(){var b=this;b.state.setSkipped(true);b.state.setDismissed(false);b.emit("close",b.state)};this.dismiss=function(){var b=this;b.state.setSkipped(false);b.state.setDismissed(true);b.emit("close",b.state)};a.getTipIds=function(b){return $j.map(b,function(c){return c.getId()})};a.getTipViewsWithValidSelectors=function(){var b=this;return $j.map(b.tipViews,function(c){return c.hasValidSelector()?c:null})};a.bindRefreshHandler=function(){var b=this;if(b.hasRefreshSelector()){$j(b.refreshSelector).bind("click",function(c){b.refresh();c.preventDefault()})}else{if(jive.localexchange&&jive.localexchange.viewupdatesource){jive.localexchange.addListener("view.update.start",function(){if(!b.isHidden()){b.destroyTipViews()}});jive.localexchange.addListener("view.update.stop",function(){if(!b.isHidden()){setTimeout(function(){b.buildTipViews();b.showNextTip()},b.refreshTimeout)}})}}};a.hasRefreshSelector=function(){return(this.refreshSelector&&this.refreshSelector.length>0)||false}});define("apps/tips/views/tip_group_view",function(){return jive.Tips.TipGroup});
;
jive.namespace("Tips");jive.Tips.PageView=jive.AbstractView.extend(function(a){a.init=function(c){var b=this;b.currentTipGroupIndex=0;b.tipGroups=c.tipGroups||[];b.asyncLoad=(typeof c.asyncLoad!="undefined")?c.asyncLoad:true;if(b.tipGroups.length>0){b.handleAsyncLoad(function(){b.showNextTipGroup(b.tipGroups[0])})}};a.showNextTipGroup=function(d){var b=this;d.index=b.currentTipGroupIndex;var c=new jive.Tips.TipGroup(d);if(c.hasVisibleTips()){b.addListeners(c);c.showNextTip()}else{if(b.hasUnviewedTipGroups()){b.showNextTipGroup(b.tipGroups[++b.currentTipGroupIndex])}}};a.addListeners=function(c){var b=this;c.addListener("state",function(d){b.emit("state",d)});c.addListener("close",function(d){b.emit("state",d);if(b.hasUnviewedTipGroups()){b.showNextTipGroup(b.tipGroups[++b.currentTipGroupIndex])}})};a.hasUnviewedTipGroups=function(){return this.currentTipGroupIndex<(this.tipGroups.length-1)};a.handleAsyncLoad=function(c){var b=this;if(b.asyncLoad){jive.conc.nextTick(c)}else{c()}}});define("apps/tips/views/page_view",function(){return jive.Tips.PageView});
;
jive.namespace("Tips");jive.Tips.Main=jive.oo.Class.extend(function(a){a.init=function(c){var b=this;if(!$j.deparam.querystring().fromQ){b.userSource=c.userSource||new jive.Browse.User.ItemSource();b.tipView=new jive.Tips.PageView(c);b.skippedTipGroupIDs=c.skippedTipGroupIDs||[];b.tipView.addListener("state",function(d){if(d){if(!d.isSkipped()){b.userSource.setUserProperty({userID:"current",propName:d.getKey(),propValue:d.serialize()})}else{b.skippedTipGroupIDs.push(d.getKey());document.cookie="jive.tipGroups.skipped="+b.skippedTipGroupIDs.unique().join("|")}}})}}});define("apps/tips/main",function(){return jive.Tips.Main});
;
jive.namespace("Trial");define("apps/trial/views/trial_help_view",["jquery"],function(a){return jive.AbstractView.extend(function(b){jive.conc.observable(this);this.init=function(e){var c=this;this.trialBannerID="#jive-trial-banner";this.trialHelpLinkID="#jive-trial-help-link";this.trialHelpPanelID="#jive-trial-help-panel";var f=$j(c.trialBannerID),d=$j(c.trialHelpLinkID),g=$j(c.trialHelpPanelID);if(d){d.click(function(){var h=g.is(".j-active");$j("#jive-trial-help-link").toggleClass("open",!h);$j("#jive-trial-curtain, #jive-trial-help-panel").toggleClass("j-active",!h);b.setJiveHelpCopy(h);h||d.find(".j-js-chat-indicator").hide();return false})}$j("#jive-trial-help-panel a").click(function(h){h.preventDefault();window.open(this.getAttribute("href"))});$j("#jive-trial-help-panel iframe").load(function(){this.contentWindow.jQuery("body").on("onMessageToVisitor",function(){if(!$j("#jive-trial-help-panel").is(".j-active")){$j("#jive-trial-help-link .j-js-chat-indicator").show()}})});$j("#jive-trial-help-panel .close").click(function(h){h.preventDefault();d.click()})};b.setJiveHelpCopy=function(c){var d=c?jive.trial.openHelp():jive.trial.closeHelp();$j("#jive-trial-help-link .j-js-title").text(d)}})});
;
goog.provide("jive.browse.user.userProfileImage");
jive.browse.user.userProfileImage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.prop.profileImage.url?'<a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,opt_data.link)))+'" class="j-user-photo" tabindex="-1"><img src="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,"/9.0.2.8500fd4/","",opt_data.prop.profileImage.url)))+'" alt="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k2e6d"),
[]))+'" width="200"/>'+(opt_data.prop.isVisibleToPartner?'<div class="j-browse-external-access"><span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k2968"),[]))+'"></span><span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k296b"),[]))+"</span></div>":"")+"</a>":"");return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.displayutil.userRoleBadgeImage");
jive.shared.displayutil.userRoleBadgeImage=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append(opt_data.groupBadgeUri&&opt_data.groupBadgeRoleName?'<img src="'+soy.$$escapeHtml(opt_data.groupBadgeUri)+'" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("rolebadge."+String(opt_data.groupBadgeRoleName).toLowerCase())),[]))+'" alt="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("rolebadge."+String(opt_data.groupBadgeRoleName).toLowerCase())),
[]))+'" height="16" width="16" class="j-role-badge">':"");return opt_sb?"":output.toString()};
;
goog.provide("jive.people.profile.statusLevel");
jive.people.profile.statusLevel=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.ready?'<div class="j-status-container"><span class="j-status-img"><img src="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.imagePath))+'" alt="'+soy.$$escapeHtml(opt_data.name)+'" title="'+soy.$$escapeHtml(opt_data.name)+'" alt=""/></span><span class="j-status-levels">'+(opt_data.showPoints?soy.$$escapeHtml(opt_data.name)+" ("+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3bb9"),
[opt_data.pointLevel]))+")":"")+"</span></div>":"");return opt_sb?"":output.toString()};
;
goog.provide("jive.nav.menu.create.appActionLink");
jive.nav.menu.create.appActionLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<li>");if(opt_data.windowSpec||!opt_data.actionUrl){output.append('<a href="#" rel="nofollow" class="app-action" data-action-id="',soy.$$escapeHtml(opt_data.id),'" data-app-url="',soy.$$escapeHtml(opt_data.appURL),'" data-app-uuid="',soy.$$escapeHtml(opt_data.appUUID),'" data-app-instance-uuid="',soy.$$escapeHtml(opt_data.appInstanceUUID),'" data-name="os-action-link" data-selection-type="',
soy.$$escapeHtml(opt_data.coreAPIType),'" data-label="',soy.$$escapeHtml(opt_data.label),'" data-selection-id="',opt_data.contextObject?soy.$$escapeHtml(opt_data.contextObject.id):"",'" data-view="',opt_data.view?soy.$$escapeHtml(opt_data.view):"",'" data-action-url="',opt_data.actionUrl?soy.$$escapeHtml(opt_data.actionUrl):"",'" data-action-window-spec="',opt_data.windowSpec?soy.$$escapeHtml(opt_data.windowSpec):"",'"',opt_data.tooltip?'title="'+soy.$$escapeHtml(opt_data.tooltip)+'"':"",">");switch(opt_data.icon){case "edit":output.append('<span class="jive-icon-med jive-icon-edit"></span>');
break;case "manage":output.append('<span class="jive-icon-med jive-icon-gear"></span>');break;case "move":output.append('<span class="jive-icon-med jive-icon-move"></span>');break;case "add":output.append('<span class="jive-icon-med jive-icon-plus"></span>');break;case "delete":output.append('<span class="jive-icon-med jive-icon-delete"></span>');break;case "download":output.append('<span class="jive-icon-med jive-icon-appmarket"></span>');break;case "flag":output.append('<span class="jive-icon-med jive-icon-checkpoint"></span>');
break;case "graph":output.append('<span class="jive-icon-med jive-icon-poll"></span>');break;case "link":output.append('<span class="jive-icon-med jive-icon-link"></span>');break;case "create":output.append('<span class="jive-icon-med jive-icon-add"></span>');break;default:output.append(opt_data.smallView?'<span class="jive-icon-med jive-icon-blank"><img src="'+soy.$$escapeHtml(opt_data.icon)+'" height="16" width="16" alt="" /></span>':'<span class="jive-icon-big jive-icon-blank"><img src="'+soy.$$escapeHtml(opt_data.icon)+
'" height="24" width="24" alt="" /></span>')}output.append('<span class="lnk">',soy.$$escapeHtml(opt_data.label),"</span></a>")}else{output.append('<a href="',soy.$$escapeHtml(opt_data.actionUrl),'" rel="nofollow" data-action-id="',soy.$$escapeHtml(opt_data.id),'" data-app-url="',soy.$$escapeHtml(opt_data.appURL),'" data-app-uuid="',soy.$$escapeHtml(opt_data.appUUID),'" data-app-instance-uuid="',soy.$$escapeHtml(opt_data.appInstanceUUID),'" data-name="os-action-link" data-selection-type="',soy.$$escapeHtml(opt_data.coreAPIType),
'" data-label="',soy.$$escapeHtml(opt_data.label),'" data-selection-id="',opt_data.contextObject?soy.$$escapeHtml(opt_data.contextObject.id):"",'" data-view="',opt_data.view?soy.$$escapeHtml(opt_data.view):"",'" data-action="',opt_data.actionUrl?soy.$$escapeHtml(opt_data.actionUrl):"",'"',opt_data.tooltip?'title="'+soy.$$escapeHtml(opt_data.tooltip)+'"':"",">");switch(opt_data.icon){case "edit":output.append('<span class="jive-icon-med jive-icon-edit"></span>');break;case "manage":output.append('<span class="jive-icon-med jive-icon-gear"></span>');
break;case "move":output.append('<span class="jive-icon-med jive-icon-move"></span>');break;case "add":output.append('<span class="jive-icon-med jive-icon-plus"></span>');break;case "delete":output.append('<span class="jive-icon-med jive-icon-delete"></span>');break;case "download":output.append('<span class="jive-icon-med jive-icon-appmarket"></span>');break;case "flag":output.append('<span class="jive-icon-med jive-icon-checkpoint"></span>');break;case "graph":output.append('<span class="jive-icon-med jive-icon-poll"></span>');
break;case "link":output.append('<span class="jive-icon-med jive-icon-link"></span>');break;case "create":output.append('<span class="jive-icon-med jive-icon-add"></span>');break;default:output.append(opt_data.smallView?'<span class="jive-icon-med jive-icon-blank"><img src="'+soy.$$escapeHtml(opt_data.icon)+'" height="16" width="16" alt="" /></span>':'<span class="jive-icon-big jive-icon-blank"><img src="'+soy.$$escapeHtml(opt_data.icon)+'" height="24" width="24" alt="" /></span>')}output.append('<span class="lnk">',
soy.$$escapeHtml(opt_data.label),"</span></a>")}output.append("</li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.nav.menu.create.contentTypeHref");
jive.nav.menu.create.contentTypeHref=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.legacy?opt_data.urlParams?soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.url,jQuery.extend({},function(){var map={};var pairs=[["sr","cmenu"]];for(var i=0;i<pairs.length;i+=1)map[pairs[i][0]]=pairs[i][1];return map}(),opt_data.urlParams))):soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.url,function(){var map={};var pairs=[["sr",
"cmenu"]];for(var i=0;i<pairs.length;i+=1)map[pairs[i][0]]=pairs[i][1];return map}())):"javascript:void(0)");return opt_sb?"":output.toString()};
;
goog.provide("jive.nav.menu.create.contentTypeLink");
jive.nav.menu.create.contentTypeLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.iconCss){output.append('<a href="');jive.nav.menu.create.contentTypeHref(soy.$$augmentMap(opt_data,{legacy:(opt_data.linkCss.match(new RegExp("js-legacy-create",""))||[]).length>0}),output);output.append('" class="',soy.$$escapeHtml(opt_data.linkCss),'"',opt_data.urlParams&&opt_data.urlParams.contentType?' data-content-type="'+soy.$$escapeHtml(opt_data.urlParams.contentType)+'"':"",
opt_data.upload?' data-upload="true"':"");if((opt_data.linkCss.match(new RegExp("quick",""))||[]).length>0){output.append(' data-quick-create-url="');jive.nav.menu.create.contentTypeHref(soy.$$augmentMap(opt_data,{legacy:true}),output);output.append('"')}output.append('><span class="',soy.$$escapeHtml(opt_data.iconCss)," jive-icon-",opt_data.iconSize?soy.$$escapeHtml(opt_data.iconSize):opt_data.smallView?"med":"big",'"></span><span class="lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.smallView&&
opt_data.smallNameKey?opt_data.smallNameKey:opt_data.nameKey),[])),"</span>",!opt_data.smallView&&opt_data.descriptionKey?'<p class="font-color-normal">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.descriptionKey),[]))+"</p>":"","</a>")}return opt_sb?"":output.toString()};
;
goog.provide("jive.nav.menu.create.contentTypeLinkItem");
jive.nav.menu.create.contentTypeLinkItem=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;if(opt_data.uploadable){output.append("<li>");jive.nav.menu.create.contentTypeLink(soy.$$augmentMap(opt_data.uploadLink,{upload:true,smallView:opt_data.smallView}),output);output.append("</li>")}output.append("<li ",opt_data.id?'id="'+soy.$$escapeHtml(opt_data.id)+'"':"",">");jive.nav.menu.create.contentTypeLink(opt_data,output);output.append("</li>");return opt_sb?"":
output.toString()};
;
/*
 * Copyright 2010 Jive Software
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


/*jslint laxbreak:true forin:true browser:true */
/*extern jive */

jive = this.jive || {};
jive.oo = jive.oo || {};

/**
 * Singleton representing an abstract member.  You can set the value of a field
 * or method of a class implemented with jive.oo.Class to jive.oo._abstract to
 * make that class abstract.  An abstract class or a subclass of an abstract
 * class cannot be instantiated unless any abstract members are overridden with
 * concrete definitions.
 *
 * @field
 * @requires jive.oo.Class
 */
jive.oo.abstract = function() {};
jive.oo._abstract = jive.oo.abstract; // Alias to non-reserved word.

;
define("jquery/jquery.slideMenu",["jquery","underscore","jive/accessibility","soy!jive.shared.displayutil.a11yBoundary"],function(c,b,a){function d(i,n){this.element=c(i);this.options=c.extend({},c.fn.slideMenu.defaults,n);var e=this.options;var m=this.element.addClass("j-slidemenu-main"),l=c('<div class="j-slidemenu js-slidemenu" />').addClass(e.addClass);if(e.setRole){l.attr("role",e.setRole)}e.container=c(e.container);if(!e.container||e.container.length===0){e.container=c("body")}if(e.side=="right"){l.addClass("j-slidemenu-right")}else{l.addClass("j-slidemenu-left")}l.append(m);m.show();l.appendTo(e.container);b.delay(function(){l.addClass("active")},5);(function(){if(e.focus){jive.conc.nextTick(k)}e.onLoad()})();m.autoclose(c.extend({},e,{onClose:j,decoration:l}));var f=new jive.Accessibility({scope:m,hoverSelection:e.hoverSelection,focusOnHover:e.focusOnHover,otherActions:[jive.Accessibility.focusRingAction(m),jive.Accessibility.menuSelectAction({container:m,moveFocus:true})]});if(e.accessibleBoundaryType){if(!m.children(".a11y-boundary").length){var g=a({type:e.accessibleBoundaryType});var h=a({type:e.accessibleBoundaryType,isEnd:true});m.prepend(g).append(h)}}function k(){jive.Accessibility.focusIn(m)}function j(o,p){e.beforeClose();l.remove();m.off(".slideMenu");f.teardown(!e.destroyOnClose);return e.onClose()}}c.fn.slideMenu=function(f){var e=Array.prototype.slice.call(arguments);return this.each(function(){var h=c(this),g=new d(h,f);if(typeof f==="string"&&c.isFunction(g[f])){var i=c.isArray(i[1])?i[1]:[];g[f].apply(g,i)}})};c.fn.slideMenu.Constructor=d;c.fn.slideMenu.defaults={container:c("body"),beforeClose:c.noop,onClose:c.noop,onLoad:c.noop,side:"right",focus:true,destroyOnClose:false,hoverSelection:false,focusOnHover:true,accessibleBoundaryType:"menu",addClass:"",setRole:null};return d});
;
jive.namespace("Navbar.Menu");jive.Navbar.Menu.AbstractListView=jive.AbstractView.extend(function(a,b){this.init=function(d,f,e,g){var c=this;c.$menu=$j(f);c.$button=$j(d);c.menuOpts=e||{};c.slideMenu=g;c.popoverOpen=false;c.$button.on("vclick",function(h){if(!c.popoverOpen){c.$button.addClass("active");c.showSpinner();if(c.spinning){c.spinning=false;c.open();c.spinning=true}c.emitP("toggle").addCallback(function(i){c.data=i||c.data;c.render(c.data);c.open()}).always(function(){c.hideSpinner()})}else{c.close()}h.preventDefault()});c.$menu.on("navbarPopoverLoad",function(){var h=$j(this);_.defer(function(){jive.Accessibility.focusIn(h)})})};this.render=jive.oo._abstract;a.setContent=function(c,d){this.content=$j(c);if(this.popoverOpen&&!this.shouldSlideMenu()){this.$menu.trigger("updatePopoverHTML",[this.content,d])}else{this.$menu.children().remove();this.$menu.append(this.content);if(d){d()}}};this.getContent=function(){this.content=this.content||this.$menu.children();return this.content};this.close=function(){this.$menu.trigger("close")};this.repositionPopover=$j.noop;a.createSpinner=function(){if(!this.popoverOpen){this.spinner=new jive.loader.LoaderView();this.setContent(this.spinner.getContent());this.open()}else{b.createSpinner.call(this)}this.spinning=true};a.destroySpinner=function(){this.spinning=false;b.destroySpinner.call(this);if(this.spinner){this.spinner.destroy()}};a.open=function(){if(this.shouldSlideMenu()){this.openSlideMenu()}else{this.openPopover()}};a.openPopover=function(){var c=this;if(!c.popoverOpen&&!c.spinning){c.$button.addClass("active");var d={};c.$menu.popover($j.extend(d,{context:c.$button,containWithinViewport:true,flip:false,hoverSelection:true,returnPopover:true,onClose:function(){c.repositionPopover=$j.noop;c.$button.removeClass("active");c.popoverOpen=false;c.$menu.find("div.js-onboarding-tip").remove()},onLoad:function(){c.repositionPopover=d.reposition;c.$menu.trigger("navbarPopoverLoad")}},c.menuOpts));c.popoverOpen=true}};a.openSlideMenu=function(){var c=this;if(!c.popoverOpen&&!c.spinning){c.$button.addClass("active");c.$menu.slideMenu({side:"right",onClose:function(){c.$button.removeClass("active");c.popoverOpen=false;c.$menu.find("div.js-onboarding-tip").remove()}});c.popoverOpen=true}};a.shouldSlideMenu=function(){return this.slideMenu&&!$j("body").hasClass("j-responsive-sm")}});define("apps/navbar/menu/view/abstract_list",["jquery/jquery.slideMenu"],function(){return jive.Navbar.Menu.AbstractListView});
;
jive.namespace("Navbar.Menu");jive.Navbar.Menu.Main=jive.oo.Class.extend(function(a){a.init=function(c,e,d){var b=this;this.initialized=false;this.buttonSelector=c;this.listView=this.buildListView(c,e,d);this.itemSource=this.buildItemSource();this.listView.addListener("toggle",function(f){b.populate(f)})};a.populate=function(c){var b=this;if(!b.initialized){if(b.itemSource!=null){$j(b.buttonSelector).attr("aria-busy","true");b.itemSource.findAll(b.sourceParams()).addCallback(function(d){c.emitSuccess(d);$j(b.buttonSelector).attr("aria-busy","false");b.initialized=true})}else{c.emitSuccess({});b.initialized=true}}else{c.emitSuccess()}return c};a.invalidate=function(){this.initialized=false};a.sourceParams=function(){return{}};a.buildListView=jive.oo._abstract;a.buildItemSource=jive.oo._abstract});define("apps/navbar/menu/main",function(){return jive.Navbar.Menu.Main});
;
jive=this.jive||{};jive.oo=jive.oo||{};jive.oo.resolve=function(b,a){var c;return a.superclass.extend(function(e,k){var j=a.definition,i,h=this;if(typeof j=="function"){j.call(h,e,k)}else{for(i in j){if(j.hasOwnProperty(i)){h[i]=j[i]}}}g(h);g(e);f(h);f(e);function g(l){d(l,function(m){if(b[m]===c){delete l[m]}})}function f(l){d(l,function(m){if(b[m]){l[b[m]]=l[m];delete l[m]}})}function d(m,n){for(var l in m){if(b.hasOwnProperty(l)&&m.hasOwnProperty(l)){n(l)}}}})};
;
define("apps/shared/controllers/abstract_flow_controller",function(){jive.AbstractFlowController=jive.oo.Class.extend(function(a){a.init=function(d,c){var b=this;this.initialView=c;this.activeView=c;this.transitions=d;this.events=Object.keys(d);this.views=[c].concat(Object.values(d)).unique();this.resetHistory();b.views.forEach(function(e){b.events.forEach(function(f){e.addListener(f,function(){var h=Array.prototype.slice.call(arguments),g=b.transitions[f];b.transitionTo.apply(b,[g].concat(h));b.viewHistory.push({view:g,args:h});b.activeView=g})});e.addListener("back",function(){b.viewHistory.pop();var h=b.viewHistory.last(),f=h.view,g=h.args;if(b.transitionBack){b.transitionBack.apply(b,[f].concat(g))}else{b.transitionTo.apply(b,[f].concat(g))}b.activeView=f})})};a.transitionTo=jive.oo._abstract;a.resetHistory=function(){this.viewHistory=[{view:this.initialView,data:[]}]}});return jive.AbstractFlowController});
;
define("apps/navbar/menu/create/controllers/create_flow_controller",["jquery","lib/jiverscripts/src/oo/compose","apps/shared/controllers/abstract_flow_controller","apps/navbar/menu/view/abstract_list","apps/shared/controllers/localexchange","jive/namespace"],function(b,e,d,c,a){jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.CreateFlowController=e(jive.oo.resolve({init:"initFlowController"},d),jive.oo.resolve({init:"initListView"},c)).extend(function(f,g){f.init=function(h,k,l,j,i){this.initFlowController(l,j);this.initListView(h,k,i);this.views.forEach(function(m){m.addListener("browse",function(){jQuery(k).trigger("close")})})};this.render=function(h){this.activeView=this.initialView;this.activeView.render(h);this.setContent(this.activeView.getContent());this.setClass();this.resetHistory()};this.getContent=function(){return this.activeView.getContent()};f.setContent=function(h,i){this.setClass();g.setContent.call(this,h,i)};f.transitionTo=function(i){var k=Array.prototype.slice.call(arguments,1),h=this,j=this.activeView.getClass?this.activeView.getClass():"",m=i.getClass?i.getClass():"";var n=i.render.apply(i,k).addCallback(function(){var o=i.getContent();h.setContent(o,function(){o.find("a, input").filter(":visible").first().focus();a.emit("containerChooserUpdated")})});var l=k.last();if(k.last()&&k.last().emitSuccess&&k.last().emitError){n.addCallback(l.emitSuccess.bind(l));n.addErrback(l.emitError.bind(l))}};f.setClass=function(){var h=this.$menu,i=this.activeView.getClass?this.activeView.getClass():"";this.views.filter(function(j){return j.getClass||j.getClassToRemove}).forEach(function(k){var j=k.getClassToRemove?k.getClassToRemove():k.getClass;h.removeClass(j)});if(i){h.addClass(i)}}});return jive.Navbar.Menu.Create.CreateFlowController});
;
goog.provide("jive.nav.menu.create.contentTypes");
jive.nav.menu.create.contentTypes=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.smallView?'<\!--  <a href="#" class="toggle j-menu-quick-toplink js-use-large-menu font-color-meta" role="presentation">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k26ad"),[]))+"</a> --\>":'<\!--  <a href="#" class="toggle j-menu-quick-toplink js-use-small-menu font-color-meta" role="presentation">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k26ae"),[]))+
"</a> --\>",'<div class="j-nav-menu-scrollable js-nav-menu-scrollable">');var sectionList13=opt_data.sections;var sectionListLen13=sectionList13.length;for(var sectionIndex13=0;sectionIndex13<sectionListLen13;sectionIndex13++){var sectionData13=sectionList13[sectionIndex13];if(sectionData13.visible){output.append('<strong class="j-menu-quick-sectionlabel font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(sectionData13.name),[])),'</strong><ul id="create-list-',soy.$$escapeHtml(sectionIndex13),
'" class="j-icon-list js-create-list">');var itemList21=sectionData13.items;var itemListLen21=itemList21.length;for(var itemIndex21=0;itemIndex21<itemListLen21;itemIndex21++){var itemData21=itemList21[itemIndex21];if(itemData21.visible)if(itemData21.appAction)jive.nav.menu.create.appActionLink(soy.$$augmentMap(itemData21,{smallView:opt_data.smallView}),output);else jive.nav.menu.create.contentTypeLinkItem(soy.$$augmentMap(itemData21,{smallView:opt_data.smallView}),output)}output.append("</ul>")}}output.append("</div>");
return opt_sb?"":output.toString()};
;
define("apps/navbar/menu/create/views/type_chooser_view",["jquery","underscore","apps/shared/views/abstract_view","lib/jiverscripts/src/conc/promise","channel!app","application/config","soy!jive.nav.menu.create.contentTypes","jive/namespace"],function(g,b,e,f,d,a,c){jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.TypeChooserView=jive.AbstractView.extend(function(h){var i=jQuery;this.getContent=function(){return this.content};this.getClass=function(){if(this.data&&!this.data.smallView){return"j-choose-type j-large-view"}else{return"j-choose-type j-small-view"}};this.getClassToRemove=function(){return"j-choose-type j-small-view j-large-view"};this.render=function(k){var j=i(jive.nav.menu.create.contentTypes(this.data||k)),m=new jive.conc.Promise(),l=this;l.updateCurrentContainer();j.on("click",".js-create-list a",function(p){var q=i(this),r=q.attr("data-content-type"),o=!!q.attr("data-upload");if(q.hasClass("quick")){l.showSpinner({size:"small",showLabel:false,context:i(this).parent("li")});var n=q.data("quick-create-url");l.emit("quickCreate",r,n);p.preventDefault()}else{if(r&&q.hasClass("js-createmenu-containerchooser")){l.showSpinner({size:"small",showLabel:false,context:i(this).parent("li")});l.emitP("contentType",r,o).always(function(){l.hideSpinner()});p.preventDefault()}}});l.flatFind(j,".js-use-small-menu").click(function(n){l.data.smallView=true;l.emit("toggleView",true,l.data);n.preventDefault()});l.flatFind(j,".js-use-large-menu").click(function(n){l.data.smallView=false;l.emit("toggleView",false,l.data);n.preventDefault()});this.content=j;this.data=this.data||k;if(l.currentContainerType&&l.currentContainerID){$j(j).find("a.js-container-context").each(function(){$j(this).querystring("containerType="+l.currentContainerType+"&containerID="+l.currentContainerID)})}m.emitSuccess();return m};h.flatFind=function(k,j){return k.find(j).addBack().filter(j)};h.updateCurrentContainer=function(){var j=this;if(containerType&&containerID&&(typeof j.currentContainerType=="undefined"||typeof j.currentContainerID=="undefined")){j.currentContainerID=containerID;j.currentContainerType=containerType}}});return jive.Navbar.Menu.Create.TypeChooserView});
;
goog.provide("jive.statusinput.containers.microbloggingStatusInputModalSuccess");
jive.statusinput.containers.microbloggingStatusInputModalSuccess=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<p>",opt_data.wallentry.status!="AWAITING_MODERATION"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1cf6"),[opt_data.wallentry.containerName])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k4604"),[opt_data.wallentry.containerName])),"</p>");return opt_sb?"":output.toString()};
;
jive.namespace("MicroBlogging");define("apps/microblogging/views/microblogging_view",["apps/microblogging/views/status_input_common_view","jquery","soy!jive.statusinput.mention_warnings.jsI18nHelper"],function(a,c,b){jive.MicroBlogging.MicroBloggingView=a.extend(function(d,e){this.init=function(f){this.options=f;this.publishBarIdentifier="";if(f.publishBarIdentifier){this.publishBarIdentifier=f.publishBarIdentifier}e.init.call(this,f)};d.getSoyTemplate=function(f){return jive.statusinput.containers.microbloggingStatusInput(f)};this.createWaitingViewElem=function(){this.$waitingViewElem=this.getContent()};this.createFormElem=function(){var f=this.getContent();this.$formElem=f.find("form");this.$imageFormElem=f.find("div.j-meta-image-container form")};this.renderResponse=function(f){e.renderResponse.call(this,f);this.renderResponseCommon(f)};this.getDataFromDom=function(){var f=0;var j=0;var g=0;var h=0;if(c("#"+this.publishBarIdentifier+"j-publishbar-place-id")){f=c("#"+this.publishBarIdentifier+"j-publishbar-place-id").val()}if(c("#"+this.publishBarIdentifier+"j-publishbar-place-type")){j=c("#"+this.publishBarIdentifier+"j-publishbar-place-type").val()}if(this.getContent().find("li.j-thumbnail.selected")){var i=this.getContent().find("li.j-thumbnail.selected");h=i.closest("li.js-attached-link").attr("id");g=i.find("img").data("image-id")}return{wallentry:{message:this.normalizeData(),containerID:f,containerType:j,imageID:g,attachmentID:h}}};this.handleAtMentionResult=function(l,i,h){var j=this;var g;var k;if(l&&l.split("-").length==2){g=l.split("-")[0];k=l.split("-")[1]}else{g=h;k=l}if(k&&g){if(g!=3&&g!="tag"){var f=new jive.rte.EntitlementService({objectID:0,objectType:0,entitlement:"VIEW"});if(f&&g){f.checkEntitlement(g,k).addCallback(function(m){if(!m){var n="";if(g==700){n=jive.i18n.keys.tinymceJivementionSecretGroup()}else{n=jive.i18n.keys.tinymceJivementionRestrictedContent()}c("<p>"+i+" "+n+"</p>").message({style:"warn"})}})}}}}});return jive.MicroBlogging.MicroBloggingView});
;
jive.namespace("MicroBlogging");define("apps/microblogging/status_input_mb_create_modal_controller",["apps/microblogging/status_input_common_controller","soy!jive.statusinput.containers.microbloggingStatusInputModalSuccess"],function(b,a){jive.MicroBlogging.MBCreateModalController=b.extend(function(c,d){this.init=function(e){if(!e){e={}}e.trackingID="cmenu";this.options=e;this.publishBarIdentifier="";if(e.publishBarIdentifier){this.publishBarIdentifier=e.publishBarIdentifier;this.publishBarViewBean=e.publishBarViewBean}d.init.call(this,e)};c.initMBView=function(){var e=$j("#j-js-mb-modal-editor");this.microbloggingView=new jive.MicroBlogging.MicroBloggingView({selector:"#j-js-mb-modal-editor",idPostfix:"mbASHeader",atMentionBtn:e.find("a.jive-js-mention-button"),imgAttachmentBtn:e.find(".jive-js-imgattach-button"),imagesEnabled:!!e.find(".jive-js-imgattach-button").data("enabled"),linkBtn:e.find("a.jive-js-link-button"),cancelBtn:e.find("a.j-status-input-cancel"),submitBtn:e.find("a.j-status-input-submit"),maxCharCount:parseInt(e.data("maxcharcount"),10),publishBarIdentifier:this.publishBarIdentifier,publishBarViewBean:this.publishBarViewBean})};c.submitSuccessCallback=function(e,f){d.submitSuccessCallback.call(this,e,f);if(e.wallentry.errorMessage==undefined){$j("div.jive-modal-quickcreate").trigger("close");$j(a({wallentry:e.wallentry})).message({style:"success"})}}});return jive.MicroBlogging.MBCreateModalController});
;
goog.provide("jive.nav.menu.create.quick");
jive.nav.menu.create.quick=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-modal jive-modal-quickcreate">');jive.shared.displayutil.a11yBoundary({type:"dialog"},output);output.append('<header class="j-modal-header"><h2 class="js-title">',soy.$$escapeHtml(opt_data.title),'</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200f"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200f"),
[])),'"',opt_data.bootstrapCompatability?' data-dismiss="modal"':"",">",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k200e"),[])),'  <span class="jive-icon-glyph icon-close-med" role="img"></span></a><section class="jive-modal-content">',soy.$$filterNoAutoescape(opt_data.body),"</section>");jive.shared.displayutil.a11yBoundary({type:"dialog",isEnd:true},output);output.append("</div>");return opt_sb?"":output.toString()};
;
define("apps/navbar/menu/create/views/quick_create_view",["jquery","apps/shared/views/abstract_view","soy!jive.nav.menu.create.quick","jquery/jquery.lightbox_me","jive/namespace"],function(c,b,a){jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.QuickCreateView=b.extend(function(d){var e;this.render=function(){var f=this;var g=this;return f.emitP("fetch").addCallback(function(h){g.showQuickView(h)})};this.showQuickView=function(k){var g=this;var m=new jive.conc.Promise();var i=g.separateScripts(k.body),h=i[0],f=i[1],l=(h.match(/data-title\s*=\s*(['"])(.+?)\1/)||[])[2]||"",j;l=c("<div/>",{html:l}).text();j=c(jive.nav.menu.create.quick({title:l,body:h}));j.lightbox_me({closeSelector:".close",closeClick:false,closeEsc:false,destroyOnClose:true,initialFocusSelector:"input[type=text]:first",additionalFocusSelectors:"div[contenteditable]",closeFocusSelector:"#navCreate",onLoad:function(){f();m.emitSuccess()},onClose:function(){j.trigger("lightboxclose");delete g.content}});g.content=j}});return jive.Navbar.Menu.Create.QuickCreateView});
;
goog.provide("jive.placepicker.containers");
jive.placepicker.containers=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<nav class="j-nav-back"><p class="font-color-meta"><strong><span class="',opt_data.upload&&opt_data.selectedContentType.uploadLink?soy.$$escapeHtmlAttribute(opt_data.selectedContentType.uploadLink.iconCss):soy.$$escapeHtmlAttribute(opt_data.selectedContentType.iconCss),' jive-icon-med"></span>',opt_data.upload&&opt_data.selectedContentType.uploadLink?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.uploadLink.headingKey),
[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.headingKey),[])),'</strong>(<a href="#" class="back">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k26ac"),[])),'</a>)</p></nav><div role="search"><h4 class="font-color-meta">',opt_data.upload&&opt_data.selectedContentType.uploadLink?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.uploadLink.searchPlaceholderKey),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.searchPlaceholderKey),
[])),'</h4><div class="j-createPlaceSearch"><label for="container-filter-id" class="j-508-label">',opt_data.upload&&opt_data.selectedContentType.uploadLink?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.uploadLink.searchPlaceholderKey),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.searchPlaceholderKey),[])),'</label><input type="search" name="container-filter" id="container-filter-id" class="j-form-elem-special j-container-browse-search j-ui-elem" /></div></div><div class="j-places-list">');
jive.placepicker.recentPlaces(opt_data,output);output.append('</div><a href="#" class="j-menu-quick-bottomlink">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2664"),[])),"</a>");return opt_sb?"":output.toString()};
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.ContainerChooserView=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.Navbar.Menu.Create;this.getContent=function(){return this.content};this.getClass=function(){return"j-choose-container"};this.render=function(){var e=new jive.conc.Promise(),d=this;this.emitP("render").addCallback(function(h){var f,i,j,g=$j.deparam.querystring();if(g.fromQ){h.fromQ=g.fromQ}d.content=c(jive.placepicker.containers(h));d.content.find(".back").one("click",function(k){d.emit("back");k.preventDefault()});d.content.filter(".j-menu-quick-bottomlink").one("click",function(k){d.emit("browse",h);k.preventDefault()});i=d.flatFind(d.content,".j-places-list");j=new jive.Placepicker.ContainerSearchView(d.flatFind(d.content,"input[name=container-filter]"),i);d.proxyListener(j,"search");e.emitSuccess()});return e};a.flatFind=function(e,d){return e.find("*").addBack().filter(d)}});define("apps/navbar/menu/create/views/container_chooser_view",function(){return jive.Navbar.Menu.Create.ContainerChooserView});
;
define("apps/navbar/menu/create/models/create_source",["apps/shared/models/rest_service"],function(a){jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.CreateSource=a.extend(function(b){b.resourceType=b.pluralizedResourceType="createmenu"});return jive.Navbar.Menu.CreateSource});
;
jive.namespace("Placepicker");define("apps/placepicker/models/suggested_containers_source",["apps/shared/models/rest_service"],function(a){jive.Placepicker.SuggestedContainersSource=a.extend(function(b,c){b.resourceType="container";b.init=function(d){c.init.call(this,d);$j.extend(this.defaultParams,{containerType:d.containerType,containerID:d.containerID});this.RESOURCE_ENDPOINT=jive.rest.url("/containers/suggested")}});return jive.Placepicker.SuggestedContainersSource});
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.QuickCreateSource=jive.oo.Class.extend(function(a){this.fetch=function(b,d){var c=d||new jive.conc.Promise();$j.get(b,function(e){c.emitSuccess({body:e})});return c}});define("apps/navbar/menu/create/models/quick_create_source",function(){return jive.Navbar.Menu.Create.QuickCreateSource});
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.Main=jive.Navbar.Menu.Main.extend(function(a,b){a.init=function(d,e){var c=this;b.init.call(this,d,e,{container:".js-create-nav-container"});this.suggestedContainers=new jive.Placepicker.SuggestedContainersSource({containerType:containerType,containerID:containerID});this.containers=new jive.Placepicker.SearchContainersSource();this.browseContainers=new jive.Placepicker.BrowseContainersSource();this.placePicker=new jive.Placepicker.PlacePickerSource("create",{containerType:containerType,containerID:containerID});this.quickCreateSource=new jive.Navbar.Menu.Create.QuickCreateSource();this.userPrefSource=new jive.Browse.User.ItemSource();this.contentTypes={};this.currentContainerType=containerType;this.currentContainerID=containerID;this.listView.addListener("toggle",function(f){f.addCallback(function(g){c.initializeData(g);jive.localexchange.emit("navbarCreateMenuToggled")})});jive.localexchange.addListener("actions.create",function(f){c.selectedContentType=f.contentType;c.upload=f.upload;c.populate(new jive.conc.Promise()).addCallback(function(h){c.initializeData(h);var g=new jive.Placepicker.Main($j.extend({pickerContext:"create",followLinks:true,objectType:c.selectedContentType,upload:c.upload},c.contentTypes[c.selectedContentType]));g.showPicker();c.invalidate()})});jive.Accessibility.main.addHotkey("c",false,false,false,jive.Accessibility.clickAction($j(d)))};a.buildListView=function(f,h,g){var d=new jive.Navbar.Menu.Create.TypeChooserView(),e=new jive.Navbar.Menu.Create.ContainerChooserView(),i=new jive.Navbar.Menu.Create.QuickCreateView(),c=this;c.flowController=new jive.Navbar.Menu.Create.CreateFlowController(f,h,{contentType:e,toggleView:d},d,g);d.addListener("contentType",function(k,j){c.selectedContentType=k;c.upload=j}).addListener("toggleView",function(k,j){c.userPrefSource.setUserProperty({userID:"current",propName:"CreateMenuService.smallView",propValue:String(k)});c.initializeData(j)});e.addListener("render",function(j){c.suggestedContainers.get(c.selectedContentType).addCallback(function(k){j.emitSuccess(jQuery.extend({upload:c.upload,selectedContentType:c.contentTypes[c.selectedContentType]},k))})});e.addListener("search",function(j,k){c.containers.findAll({query:j,contentType:c.selectedContentType,maxReturned:10}).addCallback(function(l){k.emitSuccess(jQuery.extend({contentType:c.selectedContentType,containerType:containerType,containerID:containerID,upload:c.upload},l))})});e.addListener("browse",function(k){var j=new jive.Placepicker.Main($j.extend({pickerContext:"create",followLinks:true,objectType:c.selectedContentType,containerType:k.containerType,containerID:k.containerID,upload:c.upload},k.selectedContentType));j.showPicker()});d.addListener("quickCreate",function(k,j){c.selectedContentType=k;c.url=j;require(["apps/direct_messaging/factory"],function(l){if(l.isContentTypeEqualTo(k)){c.flowController.close();l.create({trackingID:"cmenu"}).showModal()}else{i.render()}})});i.addListener("fetch",function(j){c.flowController.close();if(c.url){c.quickCreateSource.fetch(c.url,j)}});jive.localexchange.addListener("createMenu.close",function(){c.flowController.close()});return c.flowController};a.buildItemSource=function(){return new jive.Navbar.Menu.CreateSource()};a.sourceParams=function(){return{containerType:containerType,containerID:containerID}};a.initializeData=function(d){var c=this;if(d){d.sections.reduce(function(e,f){return e.concat(f.items)},[]).filter(function(e){return e.urlParams&&e.urlParams.contentType}).forEach(function(e){if(e.id===null){delete e.id}if(c.currentContainerType&&typeof e.urlParams.containerType=="undefined"){e.urlParams.containerType=""+c.currentContainerType}if(c.currentContainerID&&typeof e.urlParams.containerID=="undefined"){e.urlParams.containerID=""+c.currentContainerID}c.contentTypes[e.urlParams.contentType]=jQuery.extend({id:e.urlParams.contentType,headingKey:e.headingKey,personalContainerTitleKey:e.personalContainerTitleKey,personalContainerCaptionKey:e.personalContainerCaptionKey,searchPlaceholderKey:e.searchPlaceholderKey},e)})}$j("a.js-container-context.quick").each(function(){$j(this).data("quick-create-url",$j(this).data("quick-create-url")+"&containerType="+c.currentContainerType+"&containerID="+c.currentContainerID);$j(this).removeClass("js-container-context")});$j("a.js-container-context").each(function(){$j(this).querystring("containerType="+c.currentContainerType+"&containerID="+c.currentContainerID);$j(this).removeClass("js-container-context")})}});define("apps/navbar/menu/create/main",function(){return jive.Navbar.Menu.Create.Main});
;
goog.provide("jive.nav.menu.link");
jive.nav.menu.link=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<li",opt_data.itemCss?' class="'+soy.$$escapeHtml(opt_data.itemCss)+'"':"",'><a id="',soy.$$escapeHtml(opt_data.id),'" href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.url?opt_data.url:"#")),'"',opt_data.urlParams&&opt_data.urlParams.contentType?' data-content-type="'+soy.$$escapeHtml(opt_data.urlParams.contentType)+'" ':"",opt_data.headingKey?' data-heading-key="'+soy.$$escapeHtml(opt_data.headingKey)+
'" ':"",opt_data.linkCss?'class="'+soy.$$escapeHtml(opt_data.linkCss)+'"':"",'><span class="lnk">',opt_data.name?soy.$$escapeHtml(opt_data.name):opt_data.nameKey?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.nameKey),[])):"","</span></a></li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.nav.menu.generic");jive.nav.menu.generic=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<ul>");var linkList4=opt_data.links;var linkListLen4=linkList4.length;for(var linkIndex4=0;linkIndex4<linkListLen4;linkIndex4++){var linkData4=linkList4[linkIndex4];if(linkData4.visible)jive.nav.menu.link(linkData4,output)}if(opt_data.lastLink&&opt_data.lastLink.visible)jive.nav.menu.link(opt_data.lastLink,output);output.append("</ul>");return opt_sb?"":output.toString()};
;
jive.namespace("Navbar.Menu.Custom");jive.Navbar.Menu.Custom.View=jive.AbstractView.extend(function(a,b){this.init=function(d,f,e){var c=this;c.$menu=$j(f);c.$button=$j(d);c.menuOpts=$j.extend({container:d},e);c.popoverOpen=false;c.$button.on("vclick",function(g){if(!c.popoverOpen){c.emitP("toggle").addCallback(function(h){c.data=h||c.data;c.openPopover()}).always(function(){c.hideSpinner();var h=c.getContent();if(h&&h.length){jive.Accessibility.focusIn(h)}})}if(!$j.contains(c.$menu[0],g.target)){g.preventDefault()}})};a.openPopover=function(){var c=this;if(!c.popoverOpen){c.$button.find("a").addClass("active");c.$menu.popover($j.extend({context:c.$button,flip:false,hoverSelection:true,onClose:function(){c.$button.find("a").removeClass("active");c.popoverOpen=false;c.$menu.find("div.js-onboarding-tip").remove();c.$menu.trigger("navbarPopoverClose")},onLoad:function(){c.$menu.trigger("navbarPopoverLoad")}},c.menuOpts));c.popoverOpen=true}}});define("apps/navbar/menu/custom/views/custom_view",function(){return jive.Navbar.Menu.Custom.View});
;
jive.namespace("Navbar.Menu.Custom");jive.Navbar.Menu.Custom.Main=jive.Navbar.Menu.Main.extend(function(a,b){this.init=function(d,f,e){var c=this;b.init.call(this,d,f,e)};a.buildListView=function(c,e,d){return new jive.Navbar.Menu.Custom.View(c,e,d)};a.buildItemSource=function(){return null}});define("apps/navbar/menu/custom/main",function(){return jive.Navbar.Menu.Custom.Main});
;
goog.provide("jive.i18n.keys.appframeworkAppInstalled");jive.i18n.keys.appframeworkAppInstalled=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("ke6a"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.nav.menu.apps.instances.computeWidthIcon");
jive.nav.menu.apps.instances.computeWidthIcon=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.count==0?"app-list-cols-0 app-list-lg-icon":opt_data.count==1?"app-list-cols-1 app-list-lg-icon":opt_data.count<=4?"app-list-cols-2 app-list-lg-icon":opt_data.count<=9?"app-list-cols-3 app-list-lg-icon":opt_data.count<=16?"app-list-cols-4 app-list-sm-icon":opt_data.count<=25?"app-list-cols-5 app-list-sm-icon":"app-list-cols-6 app-list-sm-icon");return opt_sb?"":output.toString()};
;
goog.provide("jive.nav.menu.apps.instances.renderAppInstanceLink");
jive.nav.menu.apps.instances.renderAppInstanceLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="j-quick-launch-app-item"',opt_data.searchResult?' data-search-found="'+soy.$$escapeHtmlAttribute(opt_data.searchResult.found)+'"':"","><a ",opt_data.appUUID?'id="app-ql-'+soy.$$escapeHtmlAttribute(opt_data.appUUID)+'"':"",' href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.url)),'" ',opt_data.blockedAppInstance?'class="j-quick-launch-app-warn-alert"':
"",'><img alt="" src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.iconSize==48?opt_data.smallIconSrc:opt_data.largeIconSrc)),'" width="',soy.$$escapeHtmlAttribute(opt_data.iconSize?opt_data.iconSize:"128"),'" height="',soy.$$escapeHtmlAttribute(opt_data.iconSize?opt_data.iconSize:"128"),'" class="js-app-icon"/><div class="j-app-title">',opt_data.blockedAppInstance?'<span class="jive-icon-sml  jive-icon-warn"></span>':"",'<span class="lnk">',soy.$$escapeHtml(opt_data.title),"</span></div></a></li>");
return opt_sb?"":output.toString()};
;
goog.provide("jive.nav.menu.apps.instances.appList");
jive.nav.menu.apps.instances.appList=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;if(opt_data.links&&opt_data.links.length>0){output.append('<ul id="j-quick-launch-apps-list" class="clearfix ');jive.nav.menu.apps.instances.computeWidthIcon({count:opt_data.links.length},output);output.append('">');var linkList9=opt_data.links;var linkListLen9=linkList9.length;for(var linkIndex9=0;linkIndex9<linkListLen9;linkIndex9++){var linkData9=linkList9[linkIndex9];jive.nav.menu.apps.instances.renderAppInstanceLink({appUUID:linkData9.appUUID,
url:linkData9.url,largeIconSrc:linkData9.largeIconSrc,smallIconSrc:linkData9.iconSrc,iconSize:opt_data.links.length<=9?128:48,title:linkData9.displayTitle,blockedAppInstance:linkData9.blockedAppInstance,searchResult:opt_data.searchResults?opt_data.searchResults[linkIndex9]:null},output)}output.append("</ul>")}else if(opt_data.searchResults)output.append('<div class="j-no-apps-installed"><div class="j-empty-container"><p class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k265a"),
["No installed apps match your search"])),"</p></div></div>");else{output.append('<div class="j-no-apps-installed j-empty-view"><div class="j-empty-container"><p class="font-color-meta"><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2657"),["There are currently no apps installed."])),"</strong></p>");if(opt_data.appsMarketEnabled){output.append("<p>");jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k2658"),arg0:'<a class="js-launch-app-market" href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2655"),
[]))+'<span class="j-ui-elem j-cta-arrow"></span></a>',noAutoEscape:true},output);output.append("</p>")}output.append("</div></div>")}return opt_sb?"":output.toString()};
;
jive.namespace("Apps");jive.AppMarketLaunch=$Class.extend({init:function(a){var b=this;this.appLaunchView=a.appLaunchView},showAppMarket:function(a){require(["appContainer"],function(b){b.handleMarketContext(a)})},addApp:function(b){var a=$j(jive.nav.menu.apps.instances.renderAppInstanceLink({appLink:b}));this.appLaunchView.showLaunchPad();$j(this.appLaunchView.$menu).find("#j-quick-launch-apps-list").fadeIn(200).append(a)}});
;
jive.namespace("Navbar.Menu.Apps.Instances");jive.Navbar.Menu.Apps.Instances.Main=jive.Navbar.Menu.Main.extend(function(a,b){this.init=function(d,f,e){b.init.call(this,d,f,e);var c=this;require(["appContainer"],function(g){g.getMarketEvents().addListener("app_install",function(k,o){var n=o&&o.offset();if($j.isArray(k)){for(var m=0,j=k.length;m<j;++m){h(k[m])}}else{h(k)}function h(i){jive.switchboard.emit("app.install.ended");c.invalidate();var l=jive.apps.container.renderMessage({message:jive.i18n.keys.appframeworkAppInstalled()});$j("<p/>").html(l).message({style:"info"})}});g.getMarketEvents().addListener("show_app_detail",function(h){if(h&&h.appUUID){var i=jive.app.url({path:"/apps/market/marketapp/"})+h.appUUID;window.open(i)}})});jive.switchboard.addListener("apps_market.apps_have_changed",function(){c.invalidate()})};this.buildListView=function(c,e,d){return new jive.Navbar.Menu.Apps.Instances.ListView(c,e,d)};this.buildItemSource=function(){return new jive.AppInstanceSource()};a.sourceParams=function(){return{ts:new Date().getTime()}}});define("apps/navbar/menu/apps/instances/main",function(){return jive.Navbar.Menu.Apps.Instances.Main});
;
goog.provide("jive.nav.menu.apps.instances.content");
jive.nav.menu.apps.instances.content=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-pop-desc"><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k265c"),[])),"</h2></div>",opt_data.links&&opt_data.links.length>9?'<div id="j-quick-launch-search" class="j-appSearch j-form"><label for="js-quick-launch-search-string" class="j-508-label">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2659"),["Search installed Apps"]))+
'</label><input id="js-quick-launch-search-string" type="text" placeholder="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k265b"),["Search installed Apps"]))+'"/></div>':"",'<div id="j-quick-launch-apps" class="j-nav-menu-scrollable js-nav-menu-scrollable">');jive.nav.menu.apps.instances.appList({links:opt_data.links,searchResults:false,appsMarketEnabled:opt_data.appsMarketEnabled},output);output.append("</div>");if(opt_data.appsMarketEnabled){output.append('<div id="app-market-links" class="j-appmarketLinks"><ul id="j-app-market-nav" class="');
jive.nav.menu.apps.instances.computeWidthIcon({count:opt_data.links.length},output);output.append('"><li><a id="app-launch-your-apps" href="#"><span class="lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2656"),[])),'</span></a></li><li><a id="app-launch-market" href="#"><span class="lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2655"),[])),"</span></a></li></ul></div>")}return opt_sb?"":output.toString()};
;
(function(b){b.path={};var a={rotate:function(f,g){var e=g*3.141592654/180;var h=Math.cos(e),d=Math.sin(e);return[h*f[0]-d*f[1],d*f[0]+h*f[1]]},scale:function(c,d){return[d*c[0],d*c[1]]},add:function(d,c){return[d[0]+c[0],d[1]+c[1]]},minus:function(d,c){return[d[0]-c[0],d[1]-c[1]]}};b.path.bezier=function(g){g.start=b.extend({angle:0,length:0.3333},g.start);g.end=b.extend({angle:0,length:0.3333},g.end);this.p1=[g.start.x,g.start.y];this.p4=[g.end.x,g.end.y];var d=a.minus(this.p4,this.p1);var e=a.scale(d,g.start.length);e=a.rotate(e,g.start.angle);this.p2=a.add(this.p1,e);var c=a.scale(d,-1);var f=a.scale(c,g.end.length);f=a.rotate(f,g.end.angle);this.p3=a.add(this.p4,f);this.f1=function(h){return(h*h*h)};this.f2=function(h){return(3*h*h*(1-h))};this.f3=function(h){return(3*h*(1-h)*(1-h))};this.f4=function(h){return((1-h)*(1-h)*(1-h))};this.css=function(k){var i=this.f1(k),n=this.f2(k),l=this.f3(k),j=this.f4(k);var h=this.p1[0]*i+this.p2[0]*n+this.p3[0]*l+this.p4[0]*j;var m=this.p1[1]*i+this.p2[1]*n+this.p3[1]*l+this.p4[1]*j;return{top:m+"px",left:h+"px"}}};b.path.arc=function(d){for(var c in d){this[c]=d[c]}this.dir=this.dir||1;while(this.start>this.end&&this.dir>0){this.start-=360}while(this.start<this.end&&this.dir<0){this.start+=360}this.css=function(g){var f=this.start*(g)+this.end*(1-(g));f=f*3.1415927/180;var e=Math.sin(f)*this.radius+this.center[0];var h=Math.cos(f)*this.radius+this.center[1];return{top:h+"px",left:e+"px"}}};b.fx.step.path=function(e){var d=e.end.css(1-e.pos);for(var c in d){e.elem.style[c]=d[c]}}})(jQuery);
;
String.prototype.score=function(l,d){d=d||0;if(l.length==0){return 0.9}if(l.length>this.length){return 0}for(var g=l.length;g>0;g--){var n=l.substring(0,g);var h=this.indexOf(n);if(h<0){continue}if(h+l.length>this.length+d){continue}var m=this.substring(h+n.length);var f=null;if(g>=l.length){f=""}else{f=l.substring(g)}var e=m.score(f,d+h);if(e>0){var a=this.length-m.length;if(h!=0){var b=0;var k=this.charCodeAt(h-1);if(k==32||k==9){for(var b=(h-2);b>=0;b--){k=this.charCodeAt(b);a-=((k==32||k==9)?1:0.15)}}else{a-=h}}a+=e*m.length;a/=this.length;return a}}return 0};
;
jQuery.quickSilverFilter=function(a,f,b,c){var e=$j.trim(f.toLowerCase()),g=[];if(c==null){c=function(h){return h}}if(!e){return a}else{var d=[];jQuery(a).each(function(h,j){var k=c(j).score(e);if(k>0){g.push([k,h])}});jQuery.each(g.sort(function(i,h){return h[0]-i[0]}),function(){d.push(a[this[1]])});if(b!=null&&d.length>b){d=d.slice(0,b)}return d}};
;
jive.namespace("Navbar.Menu.Apps.Instances");jive.Navbar.Menu.Apps.Instances.ListView=jive.Navbar.Menu.AbstractListView.extend(function(a){var b=jQuery;this.render=function(i){var g=this;this.stripDomain(i);var h=b(jive.nav.menu.apps.instances.content({links:i,appsMarketEnabled:window.appsMarketEnabled}));this.$menu.html(h);this.repositionPopover();var j=new jive.AppMarketLaunch({appLaunchView:this});window.appsMarketLaunchPad=j;var e=function(k){window.location=jive.app.url({path:"/apps/market"})};b(this.$menu).find("#app-launch-market").unbind("click").click(e);b(this.$menu).find(".js-launch-app-market").unbind("click").click(e);jive.conc.nextTick(function(){c(i,b(g.$menu))});b(this.$menu).find("#app-launch-your-apps").unbind("click").click(function(k){window.location=jive.app.url({path:"/apps/market/yourApps"})});var f=this;jive.switchboard.addListener("at",function(l,k){f.animateInstall(l,k)})};this.showLaunchPad=function(){var e=this;e.$button.click()};this.toggleButton=function(f){var e=this;if(f>0){e.$button.show()}else{e.$button.hide()}};a.stripDomain=function(h){var g=document.createElement("a");g.href=_jive_base_absolute_url;var e=g.host;if(h&&h.length){for(var f=0;f<h.length;++f){h[f].url=d(h[f].url,e);h[f].iconSrc=d(h[f].iconSrc,e);h[f].largeIconSrc=d(h[f].largeIconSrc,e);h[f].favIconSrc=d(h[f].favIconSrc,e)}}};function d(f,e){var g=document.createElement("a");g.href=f;if(g.host==e&&f.indexOf(e)!==-1){f=f.substring(f.indexOf(e)+e.length)}return f}function c(k,g){var n=g.find("#js-quick-launch-search-string");if(!n.length){return}else{jive.conc.nextTick(function(){n[0].focus()})}var h=g.find("#j-quick-launch-apps");var m=[];var f={};var e=new Date().getTime();b.each(k,function(p,t){if(t.appUUID){var u="app-ql-"+t.appUUID;var s=t.title||t.displayTitle;var r=s.replace(/\W+/g," ").replace(/^ | $/,"").toLowerCase();var q={id:u,words:r,app:t};f[u]=p;m.push(q)}});var j=new Date().getTime();console.log("Built index of "+k.length+" apps in "+((j-e)/1000)+"s");var o="";var i=null;var l=function(){i=null;var p=n.val();if(p==o){return}var q,s;if(p){n.removeClass("font-color-meta");q=$j.quickSilverFilter(m,p,9,function(t){return t.words});console.log("Searching for '"+p+"'",q);s=b.map(q,function(t){return{found:t.words.split(/\s+/g).join(",")}});q=b.map(q,function(t){return t.app})}else{n.addClass("font-color-meta");q=k}o=p;var r=b(jive.nav.menu.apps.instances.appList({links:q,searchResults:s}));h.html(r)};n.unbind("keyup").keyup(function(){if(i!=null){window.clearTimeout(i)}i=window.setTimeout(l,333)})}});define("apps/navbar/menu/apps/instances/views/instance_list",function(){return jive.Navbar.Menu.Apps.Instances.ListView});
;
define("apps/shared/models/app_instance_source",["apps/shared/models/rest_service"],function(a){jive.AppInstanceSource=a.extend(function(b){b.init=function(c){this.resourceType="instance";this.pluralizedResourceType="instances";this.RESOURCE_ENDPOINT=jive.api.apps(this.pluralizedResourceType)}});return jive.AppDashboardSource});
;
define("apps/activity_stream/models/fill_in_the_gap_request",["jquery/jquery.oo"],function(a){return a.extend({init:function(b){this.originalIDs=b.originalIDs;this.timestamp=b.timestamp;this.fullContent=b.fullContent;this.pageSize=b.pageSize}})});
;
define("apps/activity_stream/models/full_replies_request",["jquery/jquery.oo"],function(a){return a.extend({init:function(b){this.originalIDs=b.originalIDs}})});
;
define("apps/activity_stream/models/activity_stream_source",["apps/shared/models/rest_service","lib/jiverscripts/src/conc/promise"],function(a,b){return a.extend(function(c){c.resourceType="activity-stream";c.pluralizedResourceType=c.resourceType;jive.conc.observable(this);this.initializeView=function(e,j,k,d,g,h,l){var f=this.RESOURCE_ENDPOINT+"/initializeView",i={objectType:g||3,objectID:h||window._jive_current_user.ID,streamSource:e,streamID:j||0,streamChannel:k||(e=="all"?"discovery":"recent"),filterType:d||["all"],timestamp:0};c.displayGenericErrorMessages=false;if(!l){l=new b()}return this.commonAjaxRequest(l,"POST",{url:f,data:JSON.stringify(i)}).addErrback(function(n,m){if(m==401||m==403||m==4026||m===0){location.reload()}}).always(function(){c.displayGenericErrorMessages=true})};this.list=function(e,f){var d=this.RESOURCE_ENDPOINT+"/list";c.displayGenericErrorMessages=false;if(!f){f=new b()}return this.commonAjaxRequest(f,"POST",{url:d,data:JSON.stringify(e)}).addErrback(function(h,g){if(g==401||g==403||g==4026||g===0){location.reload()}}).always(function(){c.displayGenericErrorMessages=true})};this.getMore=function(e){var d=this.RESOURCE_ENDPOINT+"/list/before";return this.commonAjaxRequest(new b(),"POST",{url:d,data:JSON.stringify(e)})};this.saveActiveStreamTab=function(e){var d=this.RESOURCE_ENDPOINT+"/activetab/save";return this.commonAjaxRequest(new b(),"POST",{url:d,data:e})};this.saveActiveStreamFilter=function(e,f){var d=this.RESOURCE_ENDPOINT+"/activefilter/save/"+e;return this.commonAjaxRequest(new b(),"POST",{url:d,data:f})};this.saveActiveCommunicationsItem=function(d,f){var e=this.RESOURCE_ENDPOINT+"/activeitem/save/"+d+"/"+f;return this.commonAjaxRequest(new b(),"POST",{url:e})};this.saveRefreshTime=function(d){var e=this.RESOURCE_ENDPOINT+"/refreshtime/save";return this.commonAjaxRequest(new b(),"POST",{url:e,data:d})};this.newCount=function(){var e=encodeURIComponent((window.location.pathname.split("/")).pop());var d=this.RESOURCE_ENDPOINT+"/new/count"+((e)?"?currentPage="+e:"");return this.commonAjaxRequest(new b(),"GET",{url:d})};this.getFullContent=function(d,i,g,e){var h=new b(),f={url:this.RESOURCE_ENDPOINT+"/fullcontent/"+d+"/"+i};if(d==1150305777){f.url=this.RESOURCE_ENDPOINT+"/acclaim"}if(g!=undefined&&e!=undefined&&e!=window._jive_effective_user_id){f.data={sr:g,ru:e}}return this.commonAjaxRequest(h,"GET",f)};this.getFullReplies=function(d,g,f){var e=this.RESOURCE_ENDPOINT+"/fullreplies/"+d+"/"+g;return this.commonAjaxRequest(new b(),"POST",{url:e,data:JSON.stringify(f)},f)};this.fillInTheGaps=function(d,h,f){var g=new b();var e=this.RESOURCE_ENDPOINT+"/fillinthegaps/"+d+"/"+h;return this.commonAjaxRequest(g,"POST",{url:e,data:JSON.stringify(f)},f)};this.fillActivity=function(d,h,f,g){var e=this.RESOURCE_ENDPOINT+"/fillactivity/"+d+"/"+h;return this.commonAjaxRequest(g,"POST",{url:e,data:JSON.stringify(f)})};this.saveInboxViewType=function(d){var e=this.RESOURCE_ENDPOINT+"/inbox/viewtype/save";return this.commonAjaxRequest(new b(),"POST",{url:e,data:d})};this.saveInboxListHeight=function(d){var e=this.RESOURCE_ENDPOINT+"/inbox/listheight/save";return this.commonAjaxRequest(new b(),"POST",{url:e,data:JSON.stringify(d)})};this.getGlobalNavMenu=function(){var d=this.RESOURCE_ENDPOINT+"/global/nav/menu";return this.commonAjaxRequest(new b(),"GET",{url:d})}})});
;
jive.namespace("ReadTracking");define("apps/read_tracking/models/read_tracking_source",["apps/shared/models/rest_service"],function(a){jive.ReadTracking.ReadTrackingSource=a.extend(function(b,c){b.resourceType="readtracking";b.pluralizedResourceType=b.resourceType;this.save=function(e,h,g){var f=new jive.conc.Promise(),d="read";if(!g){d="unread"}$j.ajax({type:"POST",dataType:"json",url:this.RESOURCE_ENDPOINT+"/"+e+"/"+h+"/"+d,success:function(i){f.emitSuccess()}});return f};this.markAllRead=function(e){var d=this.RESOURCE_ENDPOINT+"/markallread";var e=e==null?"":e;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:d,data:JSON.stringify(e)})}});return jive.ReadTracking.ReadTrackingSource});
;
goog.provide("jive.eae.actions.markedItemBadgeContainer");
jive.eae.actions.markedItemBadgeContainer=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<ul id="js-outcome-badge-container-',soy.$$escapeHtml(opt_data.objectType),"-",soy.$$escapeHtml(opt_data.objectId),'" class="js-outcome-badge-container js-ed-',soy.$$escapeHtml(opt_data.objectType),"-",soy.$$escapeHtml(opt_data.objectId),' j-badge-action" data-object-type="',soy.$$escapeHtml(opt_data.objectType),'" data-object-id="',soy.$$escapeHtml(opt_data.objectId),'" data-allowed-outcome-types="',
soy.$$escapeHtml(["pending","resolved"]),'" data-no-hydrate="true" aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2927"),[])),'" aria-live="polite"><li class="js-outcome-badge js-outcome-type-',soy.$$escapeHtml(opt_data.type),'" data-outcome="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_absolute_url,"/api/core/v3/outcomes/"+opt_data.item.outcomeId)),'" data-ed=\'{"type":',soy.$$escapeHtml(opt_data.objectType),', "id": ',soy.$$escapeHtml(opt_data.objectId),"}' data-outcome-type=\"",
soy.$$escapeHtml(opt_data.type),'"><a href="#" aria-haspopup="true">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("outcomes.badge.actionqueue."+opt_data.type)),[])),'<span class="jive-icon-med jive-icon-arrow-down"></span></a></li></ul>');return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.actions.markedContentItemInner");
jive.eae.actions.markedContentItemInner=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.item.jiveObjectViewBean.jiveObjectIconLink?soy.$$filterNoAutoescape(opt_data.item.jiveObjectViewBean.jiveObjectIconLink):'<span class="'+soy.$$escapeHtml(opt_data.item.jiveObjectViewBean.jiveObjectCSS)+'"></span>','<span class="j-item">',soy.$$filterNoAutoescape(opt_data.item.jiveObjectViewBean.subject),"</span>");return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.actions.markedContentItem");
jive.eae.actions.markedContentItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.renderLocation=="globalNav"){output.append('<div class="title font-color-link">');jive.eae.actions.markedContentItemInner(opt_data,output);output.append("</div>")}else{output.append('<a href="',soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,opt_data.item.jiveObjectViewBean.jiveObjectURL)),'" class="title">');jive.eae.actions.markedContentItemInner(opt_data,output);
output.append("</a>")}return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.displayutil.userDisplayName");jive.shared.displayutil.userDisplayName=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.displayName?!opt_data.anonymous?soy.$$escapeHtml(opt_data.displayName):'<em class="guest">'+soy.$$escapeHtml(opt_data.displayName)+"</em>":"");return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.actions.markedItemInnerText");
jive.eae.actions.markedItemInnerText=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.item.selfOwned){var commentStr__soy5=new soy.StringBuilder("eae.actionqueue.marked.",soy.$$escapeHtml(opt_data.type),".comment",soy.$$escapeHtml(opt_data.type=="active"?"."+opt_data.item.pendingType:""),".you");commentStr__soy5=commentStr__soy5.toString();var messageStr__soy11=new soy.StringBuilder("eae.actionqueue.marked.",soy.$$escapeHtml(opt_data.type),".reply",soy.$$escapeHtml(opt_data.type==
"active"?"."+opt_data.item.pendingType:""),".you");messageStr__soy11=messageStr__soy11.toString();var otherStr__soy17=new soy.StringBuilder("eae.actionqueue.marked.",soy.$$escapeHtml(opt_data.type),".tlo",soy.$$escapeHtml(opt_data.type=="active"?"."+opt_data.item.pendingType:""),".you");otherStr__soy17=otherStr__soy17.toString();var param31=new soy.StringBuilder;jive.eae.actions.markedContentItem(opt_data,param31);jive.shared.soy.i18nHelper({i18nKey:opt_data.item.jiveObjectViewBean.typeComment?soy.$$escapeHtml(jive.i18n.getMinKey(commentStr__soy5)):
opt_data.item.jiveObjectViewBean.typeMessage?soy.$$escapeHtml(jive.i18n.getMinKey(messageStr__soy11)):soy.$$escapeHtml(jive.i18n.getMinKey(otherStr__soy17)),arg0:param31.toString(),noAutoEscape:true},output)}else{var commentStr__soy38=new soy.StringBuilder("eae.actionqueue.marked.",soy.$$escapeHtml(opt_data.type),".comment",soy.$$escapeHtml(opt_data.type=="active"?"."+opt_data.item.pendingType:""));commentStr__soy38=commentStr__soy38.toString();var messageStr__soy43=new soy.StringBuilder("eae.actionqueue.marked.",
soy.$$escapeHtml(opt_data.type),".reply",soy.$$escapeHtml(opt_data.type=="active"?"."+opt_data.item.pendingType:""));messageStr__soy43=messageStr__soy43.toString();var otherStr__soy48=new soy.StringBuilder("eae.actionqueue.marked.",soy.$$escapeHtml(opt_data.type),".tlo",soy.$$escapeHtml(opt_data.type=="active"?"."+opt_data.item.pendingType:""));otherStr__soy48=otherStr__soy48.toString();var param61=new soy.StringBuilder;if(opt_data.renderLocation=="globalNav")jive.shared.displayutil.userDisplayName(opt_data.item.currentOutcomeOwner,
param61);else jive.shared.displayutil.userDisplayNameLink(opt_data.item.currentOutcomeOwner,param61);var param67=new soy.StringBuilder;jive.eae.actions.markedContentItem(opt_data,param67);jive.shared.soy.i18nHelper({i18nKey:opt_data.item.jiveObjectViewBean.typeComment?soy.$$escapeHtml(jive.i18n.getMinKey(commentStr__soy38)):opt_data.item.jiveObjectViewBean.typeMessage?soy.$$escapeHtml(jive.i18n.getMinKey(messageStr__soy43)):soy.$$escapeHtml(jive.i18n.getMinKey(otherStr__soy48)),arg0:param61.toString(),
arg1:param67.toString(),noAutoEscape:true},output)}return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.actions.markedItemInner");
jive.eae.actions.markedItemInner=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.renderLocation!="globalNav")jive.eae.actions.markedItemBadgeContainer({item:opt_data.item,objectType:opt_data.item.jiveObjectViewBean.typeThread?1:opt_data.item.jiveObjectViewBean.objectType,objectId:opt_data.item.jiveObjectViewBean.typeThread?opt_data.item.jiveObjectViewBean.threadID:opt_data.item.jiveObjectViewBean.id,type:opt_data.type=="active"?"pending":"resolved"},output);if(opt_data.renderLocation==
"globalNav")jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.item.currentOutcomeOwner,{size:opt_data.renderLocation=="globalNav"?32:46,currentUserPartner:opt_data.item.currentOutcomeOwner.partner,hideLink:true}),output);else{output.append('<div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.item.currentOutcomeOwner,{size:46,currentUserPartner:opt_data.item.currentOutcomeOwner.partner}),output);output.append("</div>")}if(opt_data.renderLocation=="globalNav"){output.append('<div class="font-color-meta">');
jive.eae.actions.markedItemInnerText(opt_data,output);output.append("</div>")}else{output.append('<p class="font-color-meta">');jive.eae.actions.markedItemInnerText(opt_data,output);output.append("</p>")}output.append('<div class="j-act-meta"><strong>',soy.$$escapeHtml(opt_data.item.outcomeModificationDate),"</strong></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.actions.markedItem");
jive.eae.actions.markedItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li class="js-marked-item j-aq-data j-aq-marked-item j-markedActionItem" data-id="',soy.$$escapeHtml(opt_data.item.jiveObjectViewBean.typeThread?opt_data.item.jiveObjectViewBean.threadID:opt_data.item.jiveObjectViewBean.id),'" data-type="',soy.$$escapeHtml(opt_data.item.jiveObjectViewBean.typeThread?1:opt_data.item.jiveObjectViewBean.objectType),'" data-modification-date="',soy.$$escapeHtml(opt_data.item.outcomeModificationTimestamp),
'">');if(opt_data.renderLocation=="globalNav"){output.append('<a href="',soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,opt_data.item.jiveObjectViewBean.jiveObjectURL)),'" class="j-aq-marked-entry font-color-normal clearfix">');jive.eae.actions.markedItemInner(opt_data,output);output.append("</a>")}else jive.eae.actions.markedItemInner(opt_data,output);output.append("</li>");return opt_sb?"":output.toString()};
;
goog.provide("jive.nav.menu.home.inbox");
jive.nav.menu.home.inbox=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append('<h4 class="j-badge-hd j-rc5 j-rc-none-bottom"><a href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,"/inbox")),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20a4"),[])),'"><span class="lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20a4"),[])),"</span>");if(opt_data.unreadCount>0){output.append('<strong class="j-menu-count font-color-notify">');
jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k26bd"),arg0:opt_data.unreadCount>50?"50+":soy.$$escapeHtml(opt_data.unreadCount),noAutoEscape:true},output);output.append("</strong>")}output.append("</a></h4>");return opt_sb?"":output.toString()};
;
goog.provide("jive.nav.menu.home.overdueTask");
jive.nav.menu.home.overdueTask=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,"/actions/tasks")),'" class="j-aq-entry font-color-normal clearfix"><span class="jive-icon-big jive-icon-task acticon"></span><div class="title font-color-link">',soy.$$escapeHtml(opt_data.task.subject),'</div><div class="j-task-duedate font-color-danger">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1de9"),[opt_data.task.dueDate])),
"</div></a>");return opt_sb?"":output.toString()};
;
goog.provide("jive.nav.menu.home.moderationItem");
jive.nav.menu.home.moderationItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,"/moderation")),'" class="j-aq-entry font-color-normal clearfix"><span class="acticon">');jive.shared.displayutil.icon({type:opt_data.moderationItem.code,size:"med"},output);output.append('</span><div class="title font-color-link">',opt_data.moderationItem.code=="userregistration"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2635"),
[]))+" "+soy.$$escapeHtml(opt_data.moderationItem.user.displayName):opt_data.moderationItem.code=="profileimage"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k262a"),[]))+' <span class="font-color-meta">by</span> '+soy.$$escapeHtml(opt_data.moderationItem.user.displayName):soy.$$escapeHtml(opt_data.moderationItem.displayName)+' <span class="font-color-meta">by</span> '+soy.$$escapeHtml(opt_data.moderationItem.user.displayName),'</div><div class="j-td-date font-color-meta">',soy.$$escapeHtml(opt_data.moderationItem.creationDate),
"</div></a>");return opt_sb?"":output.toString()};
;
goog.provide("jive.nav.menu.home.content");
jive.nav.menu.home.content=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-nav-menu-scrollable js-nav-menu-scrollable j-globalNav-notification">');if(opt_data.data.inboxItems.activityContainerList.length){jive.nav.menu.home.inbox({unreadCount:opt_data.counts["inbox"]},output);output.append('<ul id="j-home-nav-menu-inbox-list" class="j-badge-menu-list"></ul>')}if(opt_data.data.actionItems.outcomeList.length){output.append('<h4 class="j-badge-hd"><a href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,
"/actions/marked")),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1b90"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1b90"),[])),'</a><strong class="j-menu-count font-color-notify">');jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k26ba"),arg0:opt_data.counts["actions"]>50?"50+":soy.$$escapeHtml(opt_data.counts["actions"]),noAutoEscape:true},output);output.append('</strong></h4><ul id="j-home-nav-menu-tasks-list" class="j-badge-menu-list">');var itemList29=
opt_data.data.actionItems.outcomeList;var itemListLen29=itemList29.length;for(var itemIndex29=0;itemIndex29<itemListLen29;itemIndex29++){var itemData29=itemList29[itemIndex29];if(itemIndex29<5)jive.eae.actions.markedItem({item:itemData29,type:"active",renderLocation:"globalNav"},output)}output.append("</ul>")}if(opt_data.data.taskItems.taskList.length){output.append('<h4 class="j-badge-hd"><a href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,"/actions/tasks")),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1b96"),
[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1b96"),[])),'</a><strong class="j-menu-count font-color-notify">');jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k26bc"),arg0:opt_data.counts["tasks"]>50?"50+":soy.$$escapeHtml(opt_data.counts["tasks"]),noAutoEscape:true},output);output.append('</strong></h4><ul id="j-home-nav-menu-tasks-list" class="j-badge-menu-list">');var taskList58=opt_data.data.taskItems.taskList;var taskListLen58=taskList58.length;for(var taskIndex58=
0;taskIndex58<taskListLen58;taskIndex58++){var taskData58=taskList58[taskIndex58];if(taskIndex58<5){output.append("<li>");jive.nav.menu.home.overdueTask({task:taskData58},output);output.append("</li>")}}output.append("</ul>")}if(opt_data.data.moderationItems.moderationList.length){output.append('<h4 class="j-badge-hd"><a href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,"/moderation")),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1b94"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k26c7"),
[])),'</a><strong class="j-menu-count font-color-notify">');jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k26bb"),arg0:opt_data.counts["moderations"]>50?"50+":soy.$$escapeHtml(opt_data.counts["moderations"]),noAutoEscape:true},output);output.append('</strong></h4><ul id="j-home-nav-menu-moderation-list" class="j-badge-menu-list">');var moderationItemList87=opt_data.data.moderationItems.moderationList;var moderationItemListLen87=moderationItemList87.length;for(var moderationItemIndex87=0;moderationItemIndex87<
moderationItemListLen87;moderationItemIndex87++){var moderationItemData87=moderationItemList87[moderationItemIndex87];if(5>moderationItemIndex87){output.append("<li>");jive.nav.menu.home.moderationItem({moderationItem:moderationItemData87},output);output.append("</li>")}}output.append("<ul>")}output.append("</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.nav.menu.home.main");jive.nav.menu.home.main=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div id="j-home-global-nav-menu" class="j-quick-menu j-badge-menu j-act">');if(opt_data.data)jive.nav.menu.home.content(opt_data,output);output.append("</div>");return opt_sb?"":output.toString()};
;
goog.provide("home.nav.drop.down.containerStart");
home.nav.drop.down.containerStart=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<li><a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,"/inbox?objectType="+opt_data.activityContainer.jiveObject.objectType+"&objectID="+opt_data.activityContainer.jiveObject.id))),'" id="homeNavCommItem_',opt_data.activityContainer.jiveObject.objectType,"_",opt_data.activityContainer.jiveObject.id,'" class="j-comm-entry j-js-ibx-item j-act-unread font-color-normal clearfix">');
return opt_sb?"":output.toString()};
;
goog.provide("home.nav.drop.down.containerEnd");home.nav.drop.down.containerEnd=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("</a></li>");return opt_sb?"":output.toString()};
;
goog.provide("home.nav.drop.down.announcement");
home.nav.drop.down.announcement=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.activityContainer.activityList.length>0){home.nav.drop.down.containerStart(opt_data,output);output.append('<div class="j-badge-oneliner"><span title=\'',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k1fdc"),[])),'\' role=\'img\' class="jive-icon-big jive-icon-announcement acticon"></span><span class="jive-alert-announcement-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("kabb"),
[])),'</span> <span class="title">',soy.$$filterNoAutoescape(opt_data.activityContainer.jiveObject.subject),"</span></div>");home.nav.drop.down.containerEnd(null,output)}return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.displayutil.renderGuestDisplayName");jive.shared.displayutil.renderGuestDisplayName=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.message.displayName?soy.$$escapeHtml(opt_data.message.displayName):opt_data.message.username?soy.$$escapeHtml(opt_data.message.username):opt_data.message.userEmail?soy.$$escapeHtml(opt_data.message.userEmail):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2091"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.activitystream.item.activity_verb.defaults.deleted");
jive.eae.activitystream.item.activity_verb.defaults.deleted=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span class="font-color-meta j-act-deleted">',opt_data.object.deletedType&&opt_data.object.deletedType=="mentioned"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1dee"),[]))+" ":opt_data.type==2?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1def"),[]))+" ":opt_data.type==801?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1dec"),[]))+
" ":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1ded"),[]))+" ","</span>");return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.activitystream.item.activity_verb.discussion.main");
jive.eae.activitystream.item.activity_verb.discussion.main=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.type=="created"?opt_data.object.hasQuestion?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k261"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k29b"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type. + opt_data.type"),[true])));return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.soy.escapeHelper");jive.shared.soy.escapeHelper=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.escape?soy.$$escapeHtml(opt_data.stringToEscape):soy.$$filterNoAutoescape(opt_data.stringToEscape));return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.activitystream.item.activity_verb.comment.main");
jive.eae.activitystream.item.activity_verb.comment.main=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.object.typeWallEntryComment){var param7=new soy.StringBuilder;var param8=new soy.StringBuilder;if(opt_data.displayAuthorLink)jive.shared.displayutil.userDisplayNameLink(opt_data.object.parentAuthor,param8);else param8.append(soy.$$escapeHtml(opt_data.object.parentAuthor.displayName));jive.shared.soy.escapeHelper({stringToEscape:param8.toString()},param7);jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k2a8"),
arg0:param7.toString(),noAutoEscape:true},output)}else if(!opt_data.hideDetailedReplyTo){var param26=new soy.StringBuilder;var param27=new soy.StringBuilder;if(opt_data.displayAuthorLink)jive.shared.displayutil.userDisplayNameLink(opt_data.object.parentAuthor,param27);else param27.append(soy.$$escapeHtml(opt_data.object.parentAuthor.displayName));jive.shared.soy.escapeHelper({stringToEscape:param27.toString()},param26);jive.shared.soy.i18nHelper({i18nKey:opt_data.object.commentContentResource&&opt_data.object.commentContentResource.objectType==
129?soy.$$escapeHtml("k263"):opt_data.object.typeMessage?soy.$$escapeHtml("k296"):soy.$$escapeHtml("k26a"),arg0:param26.toString(),noAutoEscape:true},output);output.append(opt_data.againstObject?" "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2f1"),[]))+" ":"")}return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.activitystream.item.activity_verb.discussion.reply");
jive.eae.activitystream.item.activity_verb.discussion.reply=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.type=="correct_answer_set"){var param7=new soy.StringBuilder;var param8=new soy.StringBuilder;if(opt_data.displayAuthorLink)jive.shared.displayutil.userDisplayNameLink(opt_data.object.user,param8);else param8.append(soy.$$escapeHtml(opt_data.object.user.displayName));jive.shared.soy.escapeHelper({stringToEscape:param8.toString()},param7);jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k297"),
arg0:param7.toString(),noAutoEscape:true},output)}else if(!opt_data.againstObject)output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k294"),[]))," ");else output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k295"),[]))," ");return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.activitystream.item.activity_verb.outcome.comment");
jive.eae.activitystream.item.activity_verb.outcome.comment=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var outcomeStr__soy3=new soy.StringBuilder("activity.type.outcome.",soy.$$escapeHtml(opt_data.object.outcomeTypeName),soy.$$escapeHtml(opt_data.object.outcomeTypeName=="pending"?"."+opt_data.object.pendingType:""));outcomeStr__soy3=outcomeStr__soy3.toString();var param9=new soy.StringBuilder;var param10=new soy.StringBuilder;if(opt_data.displayAuthorLink)jive.shared.displayutil.userDisplayNameLink(opt_data.object.targetObject.user,
param10);else param10.append(soy.$$escapeHtml(opt_data.object.targetObject.user.displayName));jive.shared.soy.escapeHelper({stringToEscape:param10.toString()},param9);jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.getMinKey(outcomeStr__soy3)),arg0:param9.toString(),arg1:opt_data.object.targetObject.typeMessage?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1cd9"),[])):opt_data.object.targetObject.typeComment?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1cd3"),[])):
"",noAutoEscape:true},output);return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.activitystream.item.activity_verb.outcome.main");
jive.eae.activitystream.item.activity_verb.outcome.main=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var outcomeStr__soy3=new soy.StringBuilder("activity.type.outcome.",soy.$$escapeHtml(opt_data.object.outcomeTypeName),".tlo",soy.$$escapeHtml(opt_data.object.outcomeTypeName=="pending"?"."+opt_data.object.pendingType:""));outcomeStr__soy3=outcomeStr__soy3.toString();output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey(outcomeStr__soy3)),[])));
return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.activitystream.item.activity_verb.share.main");
jive.eae.activitystream.item.activity_verb.share.main=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.object.commentContentResource&&opt_data.object.commentContentResource.objectType==129?!opt_data.againstObject?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k262"),[]))+" ":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k264"),[]))+" ":!opt_data.againstObject?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k269"),[]))+" ":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k26b"),
[]))+" ");return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.activitystream.item.activity_verb.we.main");
jive.eae.activitystream.item.activity_verb.we.main=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.type=="liked")output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k276"),[])));else if(opt_data.type=="repost"){var param13=new soy.StringBuilder;var param14=new soy.StringBuilder;jive.shared.displayutil.userDisplayNameLink(opt_data.object.repostedUser,param14);jive.shared.soy.escapeHelper({stringToEscape:param14.toString()},param13);jive.shared.soy.i18nHelper({i18nKey:opt_data.user&&
opt_data.object.repostedUser.id==opt_data.user.id?soy.$$escapeHtml("k29f"):soy.$$escapeHtml("k29e"),arg0:param13.toString(),noAutoEscape:true},output)}else if(opt_data.object.wallCreationSrc!="")jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k2a0"),arg0:soy.$$filterNoAutoescape(opt_data.object.wallCreationSrc),noAutoEscape:true},output);else output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k29d"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.activitystream.item.activity_verb.project.main");jive.eae.activitystream.item.activity_verb.project.main=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2a4"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.activitystream.item.activity_verb.relationship.main");
jive.eae.activitystream.item.activity_verb.relationship.main=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var param5=new soy.StringBuilder;var param6=new soy.StringBuilder;jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.object.relatedUser,{size:32,currentUserPartner:opt_data.user.partner}),param6);jive.shared.displayutil.userDisplayNameLink(opt_data.object.relatedUser,param6);jive.shared.soy.escapeHelper({stringToEscape:param6.toString()},param5);jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.getMinKey("activity.type."+
opt_data.type)),arg0:param5.toString(),noAutoEscape:true},output);return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.activitystream.item.activity_verb.tile_activity.external");jive.eae.activitystream.item.activity_verb.tile_activity.external=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$filterNoAutoescape(opt_data.object.text)," ");return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.activitystream.item.activity_verb.tile_activity.tile");jive.eae.activitystream.item.activity_verb.tile_activity.tile=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2a2"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.activitystream.item.activity_verb.rtc.main");jive.eae.activitystream.item.activity_verb.rtc.main=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.user&&opt_data.object.user.id==opt_data.user.id?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k272"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k270"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.activitystream.item.activity_verb.bookmarked.main");jive.eae.activitystream.item.activity_verb.bookmarked.main=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k266"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.activitystream.item.activity_verb.defaults.main");jive.eae.activitystream.item.activity_verb.defaults.main=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("activity.type."+opt_data.type)),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.activitystream.include.activityVerbPhrase");
jive.eae.activitystream.include.activityVerbPhrase=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.object.deleted)jive.eae.activitystream.item.activity_verb.defaults.deleted(opt_data,output);else if(opt_data.object.typeThread)jive.eae.activitystream.item.activity_verb.discussion.main(opt_data,output);else if(opt_data.object.parentAuthor&&(!opt_data.hideDetailedReplyTo||opt_data.object.typeWallEntryComment))jive.eae.activitystream.item.activity_verb.comment.main(opt_data,output);
else if(opt_data.object.typeMessage||opt_data.type=="correct_answer_set")jive.eae.activitystream.item.activity_verb.discussion.reply(opt_data,output);else if(opt_data.object.typeOutcome)if(opt_data.object.targetObject.typeMessage||opt_data.object.targetObject.typeComment)jive.eae.activitystream.item.activity_verb.outcome.comment(opt_data,output);else jive.eae.activitystream.item.activity_verb.outcome.main(opt_data,output);else if(opt_data.object.typeComment||opt_data.type=="share")jive.eae.activitystream.item.activity_verb.share.main(opt_data,
output);else if(opt_data.object.typePoll&&opt_data.type=="created")output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k29c"),[])));else if(opt_data.object.typeBlogPost&&opt_data.type=="created")output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2a9"),[])));else if(opt_data.object.typeDocument&&opt_data.type=="created"&&opt_data.object.binary)output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2a5"),[])));else if(opt_data.object.typeDocument&&opt_data.type==
"created")output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2a9"),[])));else if(opt_data.object.typeWallEntry||opt_data.object.typeUserStatus)jive.eae.activitystream.item.activity_verb.we.main(opt_data,output);else if(opt_data.object.typeProjectStatus)jive.eae.activitystream.item.activity_verb.project.main(opt_data,output);else if(opt_data.object.typeUserRelationship&&opt_data.user)jive.eae.activitystream.item.activity_verb.relationship.main(opt_data,output);else if(opt_data.object.typeExternalActivity)jive.eae.activitystream.item.activity_verb.tile_activity.external(opt_data,
output);else if(opt_data.object.typeTileStreamEntry)jive.eae.activitystream.item.activity_verb.tile_activity.tile(opt_data,output);else if(opt_data.object.typeCollaboration)jive.eae.activitystream.item.activity_verb.rtc.main(opt_data,output);else if(opt_data.object.bookmarkedContent)jive.eae.activitystream.item.activity_verb.bookmarked.main(opt_data,output);else if(opt_data.type!="")jive.eae.activitystream.item.activity_verb.defaults.main(opt_data,output);return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.common.activityAuthor");
jive.eae.common.activityAuthor=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(!opt_data.activityUser.anonymous)if(opt_data.displayAuthorLink)jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.activityUser,{renderInvisible:opt_data.object.typeExternalActivity}),output);else if(opt_data.deleted);else output.append(soy.$$escapeHtml(opt_data.activityUser.displayName));else jive.shared.displayutil.renderGuestDisplayName({message:opt_data.activityUser},output);
if(!opt_data.object.typeShare){output.append(" ");jive.eae.activitystream.include.activityVerbPhrase(opt_data,output)}else output.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k299"),[]))," ");return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.displayutil.renderIconElementAttrs");
jive.shared.displayutil.renderIconElementAttrs=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var nameList3=opt_data.attributeNames;var nameListLen3=nameList3.length;for(var nameIndex3=0;nameIndex3<nameListLen3;nameIndex3++){var nameData3=nameList3[nameIndex3];output.append(soy.$$escapeHtml(nameData3),'="',soy.$$escapeHtml(opt_data.attributes[nameData3]),opt_data.extraAttributes?" "+soy.$$escapeHtml(opt_data.extraAttributes):"",'" ')}return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.displayutil.renderIconElement");
jive.shared.displayutil.renderIconElement=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;switch(opt_data.icon.tag){case "img":output.append("<img ");jive.shared.displayutil.renderIconElementAttrs(opt_data.icon,output);output.append("/>");break;case "span":output.append("<span ");jive.shared.displayutil.renderIconElementAttrs({attributeNames:opt_data.icon.attributeNames,attributes:opt_data.icon.attributes,extraAttributes:opt_data.extraAttributes},output);output.append("></span>");
break;case "div":output.append("<div ");jive.shared.displayutil.renderIconElementAttrs(opt_data.icon,output);output.append("></div>");break}return opt_sb?"":output.toString()};
;
goog.provide("home.nav.drop.down.app");
home.nav.drop.down.app=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.activityContainer.activityList.length>0){var activity__soy5=opt_data.activityContainer.activityList[opt_data.activityContainer.activityList.length-1];output.append('<li><a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,"/inbox?objectType="+opt_data.activityContainer.jiveObject.objectType+"&objectID="+opt_data.activityContainer.jiveObject.id))),'" ',
opt_data.activityContainer.jiveObject.extraData&&opt_data.activityContainer.jiveObject.extraData.appID?'id="homeNavCommItem_'+opt_data.activityContainer.jiveObject.objectType+"_"+opt_data.activityContainer.jiveObject.id+"_1400_"+soy.$$escapeHtmlAttribute(opt_data.activityContainer.jiveObject.extraData.appID)+'"':'id="homeNavCommItem_'+opt_data.activityContainer.jiveObject.objectType+"_"+opt_data.activityContainer.jiveObject.id+"_"+soy.$$escapeHtmlAttribute(opt_data.activityContainer.container.type)+
"_"+soy.$$escapeHtmlAttribute(opt_data.activityContainer.container.id)+'"',' class="j-comm-entry j-js-ibx-item j-act-unread',opt_data.activityContainer.lastMentionTime!="0"?" j-mentioned":"",' font-color-normal clearfix">');if(!activity__soy5.content.deleted)jive.shared.displayutil.avatar(soy.$$augmentMap(activity__soy5.activityUser,{size:32,hideLink:true,anonymous:activity__soy5.activityUser.anonymous,currentUserPartner:opt_data.user.partner}),output);if(activity__soy5.content&&activity__soy5.content.verb==
"uri:jiveName:app_install")output.append('<div class="font-color-meta">',soy.$$escapeHtml(activity__soy5.activityUser.displayName)," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k273"),[]))," ",soy.$$escapeHtml(opt_data.activityContainer.parentTime),"</div>");else{output.append('<div class="font-color-meta">');if(activity__soy5.content.verb=="post")output.append(soy.$$escapeHtml(activity__soy5.content.plainSubjectSnippet)," ",soy.$$escapeHtml(opt_data.activityContainer.parentTime));else{jive.eae.common.activityAuthor({object:activity__soy5.content,
type:activity__soy5.content.deleted?opt_data.activityContainer.jiveObject.objectType:activity__soy5.type,activityUser:activity__soy5.activityUser,displayAuthorLink:false,streamType:"communications",hideDetailedReplyTo:true,user:opt_data.user,againstObject:true,deleted:activity__soy5.content.deleted},output);output.append(" ",soy.$$escapeHtml(opt_data.activityContainer.parentTime))}output.append("</div>")}output.append('<div class="title font-color-link">');if(opt_data.activityContainer.jiveObject.activityIcon)jive.shared.displayutil.renderIconElement({icon:opt_data.activityContainer.jiveObject.activityIcon},
output);else output.append('<span class="',soy.$$escapeHtmlAttribute(opt_data.activityContainer.jiveObject.jiveObjectCSS),'"></span>');output.append(opt_data.activityContainer.jiveObject.subjectIsHtml?soy.$$filterNoAutoescape(opt_data.activityContainer.jiveObject.htmlSubject):soy.$$filterNoAutoescape(opt_data.activityContainer.jiveObject.subject),"</div></a></li>")}return opt_sb?"":output.toString()};
;
goog.provide("home.nav.drop.down.bookmark");
home.nav.drop.down.bookmark=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.activityContainer.activityList.length>0){home.nav.drop.down.containerStart(opt_data,output);var activity__soy6=opt_data.activityContainer.activityList[opt_data.activityContainer.activityList.length-1];if(!activity__soy6.content.deleted)jive.shared.displayutil.avatar(soy.$$augmentMap(activity__soy6.activityUser,{size:32,hideLink:true,anonymous:activity__soy6.activityUser.anonymous,currentUserPartner:opt_data.user.partner}),
output);output.append('<div class="font-color-meta">');jive.eae.common.activityAuthor({object:activity__soy6.content,type:activity__soy6.type,activityUser:activity__soy6.activityUser,displayAuthorLink:false,streamType:"communications",hideDetailedReplyTo:true,user:opt_data.user,againstObject:true,deleted:activity__soy6.content.deleted},output);output.append(" ",soy.$$escapeHtml(opt_data.activityContainer.parentTime),'</div><div class="title font-color-link"><span title=\'',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k1ff8"),
[])),"' role='img' class=\"",soy.$$escapeHtmlAttribute(opt_data.activityContainer.jiveObject.jiveObjectCSS),'"></span>',soy.$$filterNoAutoescape(opt_data.activityContainer.jiveObject.subject),"</div>");home.nav.drop.down.containerEnd(null,output)}return opt_sb?"":output.toString()};
;
goog.provide("home.nav.drop.down.collaboratorNotification");
home.nav.drop.down.collaboratorNotification=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.activityContainer.activityList.length>0){home.nav.drop.down.containerStart(opt_data,output);jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.activityContainer.activityList[0].activityUser,{size:32,hideLink:true,hideTooltip:true}),output);output.append('<div class="font-color-meta">');jive.shared.displayutil.userDisplayName(opt_data.activityContainer.activityList[0].activityUser,output);
output.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k267"),[])),'</div><div class="title font-color-link"><span class="',soy.$$escapeHtml(opt_data.activityContainer.activityList[0].content.templateData.objData.iconCSS),'"></span>',soy.$$escapeHtml(opt_data.activityContainer.activityList[0].content.templateData.objData.displayName),"</div>");home.nav.drop.down.containerEnd(null,output)}return opt_sb?"":output.toString()};
;
goog.provide("home.nav.drop.down.discussion");
home.nav.drop.down.discussion=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.activityContainer.activityList.length>0){home.nav.drop.down.containerStart(opt_data,output);var activity__soy6=opt_data.activityContainer.activityList[opt_data.activityContainer.activityList.length-1];if(!activity__soy6.content.deleted)jive.shared.displayutil.avatar(soy.$$augmentMap(activity__soy6.activityUser,{size:32,hideLink:true,anonymous:activity__soy6.activityUser.anonymous,currentUserPartner:opt_data.user.partner}),
output);output.append('<div class="font-color-meta">');jive.eae.common.activityAuthor({object:activity__soy6.content,type:activity__soy6.content.deleted?opt_data.activityContainer.jiveObject.objectType:activity__soy6.type,activityUser:activity__soy6.activityUser,displayAuthorLink:false,streamType:"communications",hideDetailedReplyTo:true,user:opt_data.user,againstObject:true,deleted:activity__soy6.content.deleted},output);output.append(" ",activity__soy6.type!="notification"?soy.$$escapeHtml(opt_data.activityContainer.parentTime):
"",'</div><div class="title font-color-link"><span title=\'',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k2047"),[])),"' role='img' class=\"",soy.$$escapeHtmlAttribute(opt_data.activityContainer.jiveObject.jiveObjectCSS),'"></span>',soy.$$filterNoAutoescape(opt_data.activityContainer.jiveObject.subject),"</div>");home.nav.drop.down.containerEnd(null,output)}return opt_sb?"":output.toString()};
;
goog.provide("home.nav.drop.down.document");
home.nav.drop.down.document=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.activityContainer.activityList.length>0){var activity__soy5=opt_data.activityContainer.activityList[opt_data.activityContainer.activityList.length-1];output.append("<li><a ",opt_data.activityContainer.activityList[0]&&opt_data.activityContainer.activityList[0].content.commentContentResource&&opt_data.activityContainer.activityList[0].content.commentContentResource.objectType==129?'href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,
"/inbox?objectType=129&objectID="+opt_data.activityContainer.jiveObject.id)))+'" ':'href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,"/inbox?objectType="+opt_data.activityContainer.jiveObject.objectType+"&objectID="+opt_data.activityContainer.jiveObject.id)))+'" ','id="homeNavCommItem_',opt_data.activityContainer.activityList[0]&&opt_data.activityContainer.activityList[0].content.commentContentResource&&opt_data.activityContainer.activityList[0].content.commentContentResource.objectType==
129?"129":opt_data.activityContainer.jiveObject.objectType,"_",opt_data.activityContainer.jiveObject.id,'" class="j-comm-entry j-js-ibx-item j-act-unread font-color-normal">');if(!activity__soy5.content.deleted)jive.shared.displayutil.avatar(soy.$$augmentMap(activity__soy5.activityUser,{size:32,hideLink:true,anonymous:activity__soy5.activityUser.anonymous,currentUserPartner:opt_data.user.partner}),output);output.append('<div class="font-color-meta">');jive.eae.common.activityAuthor({object:activity__soy5.content,
type:activity__soy5.content.deleted?opt_data.activityContainer.jiveObject.objectType:activity__soy5.type,activityUser:activity__soy5.activityUser,displayAuthorLink:false,streamType:"communications",hideDetailedReplyTo:true,user:opt_data.user,againstObject:true,deleted:activity__soy5.content.deleted},output);output.append(" ",activity__soy5.type!="notification"?soy.$$escapeHtml(opt_data.activityContainer.parentTime):"",'</div><div class="title font-color-link"><span title=\'',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k204a"),
[])),"' role='img' class=\"",soy.$$escapeHtmlAttribute(opt_data.activityContainer.jiveObject.jiveObjectCSS),'"></span>',soy.$$filterNoAutoescape(opt_data.activityContainer.jiveObject.subject),"</div></a></li>")}return opt_sb?"":output.toString()};
;
goog.provide("home.nav.drop.down.generic");
home.nav.drop.down.generic=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.objDescriptor)jive.shared.soy.render({templateName:"home.nav.drop.down."+opt_data.objDescriptor,data:function(){var map={};var pairs=[["activityContainer",opt_data.activityContainer],["user",opt_data.user]];for(var i=0;i<pairs.length;i+=1)map[pairs[i][0]]=pairs[i][1];return map}(),failGracefully:true},output);else if(opt_data.activityContainer.activityList.length>0){home.nav.drop.down.containerStart(opt_data,
output);var activity__soy13=opt_data.activityContainer.activityList[opt_data.activityContainer.activityList.length-1];if(!activity__soy13.content.deleted)jive.shared.displayutil.avatar(soy.$$augmentMap(activity__soy13.activityUser,{size:32,hideLink:true,anonymous:activity__soy13.activityUser.anonymous,currentUserPartner:opt_data.user.partner}),output);output.append('<div class="font-color-meta">');jive.eae.common.activityAuthor({object:activity__soy13.content,type:activity__soy13.content.deleted?
opt_data.activityContainer.jiveObject.objectType:activity__soy13.type,activityUser:activity__soy13.activityUser,displayAuthorLink:false,streamType:"communications",hideDetailedReplyTo:true,user:opt_data.user,againstObject:true,deleted:activity__soy13.content.deleted},output);output.append(" ",soy.$$escapeHtml(opt_data.activityContainer.parentTime),'</div><div class="title font-color-link">');if(opt_data.activityContainer.jiveObject.activityIcon)jive.shared.displayutil.renderIconElement({icon:opt_data.activityContainer.jiveObject.activityIcon},
output);else output.append('<span class="',soy.$$escapeHtmlAttribute(opt_data.activityContainer.jiveObject.jiveObjectCSS),'"></span>');output.append(opt_data.activityContainer.jiveObject.subjectIsHtml?soy.$$filterNoAutoescape(opt_data.activityContainer.jiveObject.htmlSubject):soy.$$filterNoAutoescape(opt_data.activityContainer.jiveObject.subject),"</div>");home.nav.drop.down.containerEnd(null,output)}return opt_sb?"":output.toString()};
;
goog.provide("home.nav.drop.down.latestAcclaim");
home.nav.drop.down.latestAcclaim=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.activityContainer.activityList.length>0){home.nav.drop.down.containerStart(opt_data,output);output.append('<div class="j-badge-oneliner title font-color-link"><span title=\'',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("global.access.content.type."+opt_data.activityContainer.jiveObject.objectType)),[])),"' role='img' class=\"jive-icon-big jive-icon-acclaim acticon\"></span><span>",
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1a2f"),[]))," </span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1a30"),[])),"</div>");home.nav.drop.down.containerEnd(null,output)}return opt_sb?"":output.toString()};
;
goog.provide("home.nav.drop.down.mention");
home.nav.drop.down.mention=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.activityContainer.activityList.length>0){home.nav.drop.down.containerStart(opt_data,output);var activity__soy6=opt_data.activityContainer.activityList[opt_data.activityContainer.activityList.length-1];var mentionActivity__soy7=new soy.StringBuilder('<div class="title font-color-link"><span title=\'',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20d4"),[])),"' role='img' class=\"",soy.$$escapeHtml(activity__soy6.content.context.jiveObjectCSS),
'"></span>',soy.$$filterNoAutoescape(activity__soy6.content.context.name),"</div>");mentionActivity__soy7=mentionActivity__soy7.toString();jive.shared.displayutil.avatar(soy.$$augmentMap(activity__soy6.activityUser,{size:32,hideLink:true,currentUserPartner:opt_data.user.partner}),output);if(activity__soy6.content.mentionedObject.objectType==3){output.append('<div class="font-color-meta">');var param25=new soy.StringBuilder;jive.shared.displayutil.userDisplayName(activity__soy6.activityUser,param25);
jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k1cff"),arg0:param25.toString(),arg1:mentionActivity__soy7,noAutoEscape:true},output);output.append("</div>")}else{output.append(opt_data.activityContainer.jiveObject.typeDirectMessage?'<span class="jive-icon-glyph icon-direct-message-label" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1b81"),[]))+'"></span>':opt_data.activityContainer.jiveObject.typeShare?'<span class="jive-icon-glyph icon-share-label" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aa0"),
[]))+'"></span>':"",'<div class="font-color-meta">');var mentionKey__soy42=new soy.StringBuilder(activity__soy6.content.mentionedObject.objectType==4||activity__soy6.content.mentionedObject.objectType==14?"eae.mention.at.item.in.place":"eae.mention.at.item.in.content");mentionKey__soy42=mentionKey__soy42.toString();var param50=new soy.StringBuilder;jive.shared.displayutil.userDisplayName(activity__soy6.activityUser,param50);jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.getMinKey(mentionKey__soy42)),
arg0:param50.toString(),arg1:soy.$$escapeHtml(activity__soy6.content.mentionedObject.name),arg2:mentionActivity__soy7,noAutoEscape:true},output);output.append("</div>")}home.nav.drop.down.containerEnd(null,output)}return opt_sb?"":output.toString()};
;
goog.provide("home.nav.drop.down.notifications");
home.nav.drop.down.notifications=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;home.nav.drop.down.containerStart(opt_data,output);output.append('<div class="j-badge-oneliner title font-color-link"><span title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.activityContainer.jiveObject.name),[])),'" role="img" class="jive-icon-big ',soy.$$escapeHtmlAttribute(opt_data.activityContainer.jiveObject.iconClass),' acticon"></span><span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.activityContainer.jiveObject.name),
[])),"</span></div>");home.nav.drop.down.containerEnd(null,output);return opt_sb?"":output.toString()};
;
goog.provide("jive.rtc.xPeopleLink");
jive.rtc.xPeopleLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href=\'#\' class="js-show-grouped-users j-act-showParticipants font-color-meta-light" title="',opt_data.users.length==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3313"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3314"),[opt_data.users.length])),'"><span class="jive-icon-glyph icon-users"></span> <span class="j-508-label">',opt_data.users.length==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3313"),
[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3314"),[opt_data.users.length])),"</span>",soy.$$escapeHtml(opt_data.users.length),'</a><div class="js-grouped-users-popover j-menu j-pop-main j-grouped-users-popover" style="display:none"><ul class="j-grouped-user-list">');var groupedUserList18=opt_data.users;var groupedUserListLen18=groupedUserList18.length;for(var groupedUserIndex18=0;groupedUserIndex18<groupedUserListLen18;groupedUserIndex18++){var groupedUserData18=groupedUserList18[groupedUserIndex18];
if((groupedUserData18.displayName.match(new RegExp("^__invited__",""))||[]).length)output.append(soy.$$escapeHtml(groupedUserData18.email));else if(!groupedUserData18.anonymous){output.append('<li class="j-grouped-user">');jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(groupedUserData18,{displayNameOverride:opt_data.viewingUser&&opt_data.viewingUser.id==groupedUserData18.id?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k21b2"),[])):"",extraCss:"lnk"}),output);output.append("</li>")}else{output.append('<li class="j-grouped-user">');
jive.shared.displayutil.renderGuestDisplayName({message:groupedUserData18},output);output.append("</li>")}}output.append("</ul></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.eae.common.groupedUsers");
jive.eae.common.groupedUsers=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var noOverflow__soy3=opt_data.groupedUserList.length<=opt_data.groupAfterNum;var singleUserOverflow__soy4=opt_data.groupedUserList.length==opt_data.groupAfterNum+1;var multiUserOverflow__soy5=opt_data.groupedUserList.length>opt_data.groupAfterNum+1;var singleUser__soy6=opt_data.groupedUserList.length==1;var multipleUsers__soy7=opt_data.groupedUserList.length!=1;var groupedUserList8=opt_data.groupedUserList;
var groupedUserListLen8=groupedUserList8.length;for(var groupedUserIndex8=0;groupedUserIndex8<groupedUserListLen8;groupedUserIndex8++){var groupedUserData8=groupedUserList8[groupedUserIndex8];var userIsNextToLastGrouped__soy9=groupedUserIndex8==opt_data.groupAfterNum-1;var userIsLastGrouped__soy10=groupedUserIndex8==opt_data.groupAfterNum;var userIsNotLastGrouped__soy11=groupedUserIndex8<opt_data.groupAfterNum;var userIsLastTotal__soy12=groupedUserIndex8==opt_data.groupedUserList.length-1;if(groupedUserData8&&
(userIsNotLastGrouped__soy11||userIsLastGrouped__soy10&&singleUserOverflow__soy4)){output.append(groupedUserIndex8==groupedUserListLen8-1&&opt_data.groupedUserList.length>1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1fdb"),[]))+" ":"");if((groupedUserData8.username.match(new RegExp("^__invited__",""))||[]).length)output.append(soy.$$escapeHtml(groupedUserData8.email));else if(!groupedUserData8.anonymous)if(!opt_data.hideLinks)jive.shared.displayutil.userDisplayNameLink(groupedUserData8,
output);else jive.shared.displayutil.userDisplayName(groupedUserData8,output);else jive.shared.displayutil.renderGuestDisplayName({message:groupedUserData8},output);output.append(multipleUsers__soy7&&(noOverflow__soy3&&!userIsLastTotal__soy12||singleUserOverflow__soy4&&!userIsLastGrouped__soy10||multiUserOverflow__soy5&&!userIsNextToLastGrouped__soy9)?(opt_data.groupedUserList.length>2?",":"")+" ":"")}}if(opt_data.groupedUserList.length>opt_data.groupAfterNum+1){output.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1fdb"),
[]))," ",!opt_data.hideLinks?"<a href='#' class=\"js-show-grouped-users jive-username-link\">":"",soy.$$escapeHtml(opt_data.groupedUserList.length-opt_data.groupAfterNum)," ",opt_data.groupedUserList.length>opt_data.groupAfterNum+1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1d8d"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1d8c"),[])));if(!opt_data.hideLinks){output.append('</a><div class="js-grouped-users-popover j-grouped-users-popover" style="display:none"><ul class="j-grouped-user-list j-simple-list">');
var groupedUserList56=opt_data.groupedUserList;var groupedUserListLen56=groupedUserList56.length;for(var groupedUserIndex56=0;groupedUserIndex56<groupedUserListLen56;groupedUserIndex56++){var groupedUserData56=groupedUserList56[groupedUserIndex56];if(groupedUserData56&&groupedUserIndex56>=opt_data.groupAfterNum)if((groupedUserData56.displayName.match(new RegExp("^__invited__",""))||[]).length)output.append(soy.$$escapeHtml(groupedUserData56.email));else if(!groupedUserData56.anonymous){output.append('<li class="j-grouped-user">');
jive.shared.displayutil.userDisplayNameLink(groupedUserData56,output);output.append("</li>")}else{output.append('<li class="j-grouped-user">');jive.shared.displayutil.renderGuestDisplayName({message:groupedUserData56},output);output.append("</li>")}}output.append("</ul></div>")}}return opt_sb?"":output.toString()};
;
goog.provide("jive.rtc.defaultSubject");
jive.rtc.defaultSubject=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var param16=new soy.StringBuilder;jive.eae.common.groupedUsers({groupedUserList:opt_data.users,groupAfterNum:2,user:opt_data.viewingUser,hideLinks:opt_data.plainText},param16);jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k3315"),arg0:!opt_data.plainText&&opt_data.collabID?'<a href="'+soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,"/collaborations/"+opt_data.collabID))+'" class="" role="heading">':
"",arg1:!opt_data.plainText&&opt_data.collabID?"</a>":"",arg2:param16.toString(),noAutoEscape:true},output);return opt_sb?"":output.toString()};
;
goog.provide("jive.rtc.subjectText");
jive.rtc.subjectText=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.collabType=="INDIVIDUAL")if(opt_data.plainText){if(opt_data.users[0]){jive.shared.displayutil.userDisplayName(opt_data.users[0],output);output.append(" ")}output.append(" : ",opt_data.users[1]?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k21b2"),[])):"")}else{output.append('<span class="title js-rtc-subject-text" role="heading">');if(opt_data.users[0]){jive.shared.displayutil.userDisplayNameLink(opt_data.users[0],output);
output.append(" ")}output.append(opt_data.collabID?'<a href="'+soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,"/collaborations/"+opt_data.collabID))+'">+</a>':"+");if(opt_data.users[1])jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.users[1],{displayNameOverride:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k21b2"),[]))}),output);output.append("</span>")}else if(opt_data.subject)if(opt_data.plainText)output.append(soy.$$filterNoAutoescape(opt_data.subject));
else{output.append(opt_data.collabID?'<a href="'+soy.$$filterNoAutoescape(jive.soy.func.buildUrl(window._jive_base_url,"/collaborations/"+opt_data.collabID))+'" class="title js-rtc-subject-text noParticipantShowing" role="heading">':'<span class="title js-rtc-subject-text noParticipantShowing" role="heading">','<span title="',soy.$$escapeHtml(opt_data.subject),'" class="j-rtc-subject-text">',soy.$$filterNoAutoescape(opt_data.subject),"</span>",opt_data.collabID?"</a>":"</span>");if(opt_data.users.length>
1){output.append('<span class="js-with-x-people j-with-x-people">');jive.rtc.xPeopleLink(opt_data,output);output.append("</span>")}}else{output.append(!opt_data.plainText?'<span class="title js-rtc-subject-text" role="heading">':"");jive.rtc.defaultSubject(opt_data,output);output.append(!opt_data.plainText?"</span>":"")}return opt_sb?"":output.toString()};
;
goog.provide("home.nav.drop.down.rtc");
home.nav.drop.down.rtc=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.activityContainer.activityList.length>0){home.nav.drop.down.containerStart(opt_data,output);var activity__soy6=opt_data.activityContainer.activityList[opt_data.activityContainer.activityList.length-1];var latestInteraction__soy7=opt_data.activityContainer.jiveObject.latestInteraction;var latestAuthor__soy8=latestInteraction__soy7?latestInteraction__soy7.author:opt_data.activityContainer.originalAuthor;
if(!activity__soy6.content.deleted)jive.shared.displayutil.avatar(soy.$$augmentMap(latestAuthor__soy8,{size:32,anonymous:latestAuthor__soy8.anonymous,currentUserPartner:opt_data.user.partner,hideLink:true,avatarID:latestAuthor__soy8.avatarID}),output);output.append('<div class="font-color-meta">');jive.eae.common.activityAuthor({object:opt_data.activityContainer.jiveObject,type:"",activityUser:latestAuthor__soy8,displayAuthorLink:false,hideDetailedReplyTo:true,user:opt_data.user,againstObject:true,
deleted:activity__soy6.content.deleted},output);output.append(" ",soy.$$escapeHtml(opt_data.activityContainer.parentTime),'</div><div class="title font-color-link">');if(opt_data.activityContainer.jiveObject.roomType=="INDIVIDUAL")output.append(soy.$$escapeHtml(latestAuthor__soy8.displayName),' <span class="jive-icon-direct-message-1-1-label jive-icon-med"></span>',latestAuthor__soy8.id==opt_data.user.id?soy.$$escapeHtml(opt_data.activityContainer.jiveObject.participants[0].displayName):soy.$$escapeHtml(opt_data.user.displayName));
else{output.append(' <span class="jive-icon-direct-message jive-icon-med" role="img"></span>');jive.rtc.subjectText({users:opt_data.activityContainer.jiveObject.participants,viewingUser:opt_data.user,subject:opt_data.activityContainer.jiveObject.subject,plainText:true,collabType:opt_data.activityContainer.jiveObject.roomType},output)}output.append("</div>");home.nav.drop.down.containerEnd(null,output)}return opt_sb?"":output.toString()};
;
goog.provide("home.nav.drop.down.share");
home.nav.drop.down.share=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.activityContainer.activityList.length>0){home.nav.drop.down.containerStart(opt_data,output);var activity__soy6=opt_data.activityContainer.activityList[opt_data.activityContainer.activityList.length-1];if(!activity__soy6.content.deleted)jive.shared.displayutil.avatar(soy.$$augmentMap(activity__soy6.activityUser,{size:32,hideLink:true,anonymous:activity__soy6.activityUser.anonymous,currentUserPartner:opt_data.user.partner}),
output);output.append('<div class="font-color-meta">');jive.eae.common.activityAuthor({object:activity__soy6.content,type:"share",activityUser:activity__soy6.activityUser,displayAuthorLink:false,streamType:"communications",hideDetailedReplyTo:true,user:opt_data.user,againstObject:true,deleted:activity__soy6.content.deleted},output);output.append(" ",soy.$$escapeHtml(opt_data.activityContainer.parentTime),'</div><div class="title font-color-link"><span class="jive-icon-glyph icon-share-label"></span>',
soy.$$filterNoAutoescape(opt_data.activityContainer.jiveObject.subject),"</div>");home.nav.drop.down.containerEnd(null,output)}return opt_sb?"":output.toString()};
;
goog.provide("home.nav.drop.down.statusUpdate");
home.nav.drop.down.statusUpdate=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.activityContainer.activityList.length>0){home.nav.drop.down.containerStart(opt_data,output);var activity__soy6=opt_data.activityContainer.activityList[opt_data.activityContainer.activityList.length-1];if(!activity__soy6.content.deleted)jive.shared.displayutil.avatar(soy.$$augmentMap(activity__soy6.activityUser,{size:32,hideLink:true,anonymous:activity__soy6.activityUser.anonymous,currentUserPartner:opt_data.user.partner}),
output);output.append('<div class="font-color-meta">');jive.eae.common.activityAuthor({object:activity__soy6.content,type:activity__soy6.content.deleted?opt_data.activityContainer.jiveObject.objectType:activity__soy6.type,activityUser:activity__soy6.activityUser,displayAuthorLink:false,streamType:"communications",hideDetailedReplyTo:true,user:opt_data.user,againstObject:true,deleted:activity__soy6.content.deleted},output);output.append(" ",soy.$$escapeHtml(opt_data.activityContainer.parentTime),'</div><div class="title font-color-link">');
if(opt_data.activityContainer.jiveObject.activityIcon)jive.shared.displayutil.renderIconElement({icon:opt_data.activityContainer.jiveObject.activityIcon},output);else output.append("<span title='",soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k215c"),[])),"' role='img' class=\"",soy.$$escapeHtmlAttribute(opt_data.activityContainer.jiveObject.jiveObjectCSS),'"></span>');output.append(opt_data.activityContainer.jiveObject.subjectIsHtml?soy.$$filterNoAutoescape(opt_data.activityContainer.jiveObject.htmlSubject):
soy.$$filterNoAutoescape(opt_data.activityContainer.jiveObject.subject),"</div>");home.nav.drop.down.containerEnd(null,output)}return opt_sb?"":output.toString()};
;
goog.provide("home.nav.drop.down.tileActivity");
home.nav.drop.down.tileActivity=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.activityContainer.activityList.length>0){var activity__soy5=opt_data.activityContainer.activityList[opt_data.activityContainer.activityList.length-1];home.nav.drop.down.containerStart(opt_data,output);if(!activity__soy5.content.deleted)if(!activity__soy5.content.typeTileStreamEntry)jive.shared.displayutil.avatar(soy.$$augmentMap(activity__soy5.activityUser,{size:32,hideLink:true,anonymous:activity__soy5.activityUser.anonymous,
currentUserPartner:opt_data.user.partner}),output);else output.append('<img class="jive-avatar" src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(activity__soy5.content.tile.icons.size48.url)),'" alt="" width="32" height="32"/>');output.append('<div class="font-color-meta">');jive.eae.common.activityAuthor({object:activity__soy5.content,type:activity__soy5.content.deleted?opt_data.activityContainer.jiveObject.objectType:activity__soy5.type,activityUser:activity__soy5.content.typeTileStreamEntry?
activity__soy5.content.tile:activity__soy5.activityUser,displayAuthorLink:false,streamType:"communications",hideDetailedReplyTo:true,user:opt_data.user,againstObject:true,deleted:activity__soy5.content.deleted},output);output.append(" ",soy.$$escapeHtml(opt_data.activityContainer.parentTime),'</div><div class="title font-color-link">',soy.$$filterNoAutoescape(opt_data.activityContainer.jiveObject.subject),"</div>");home.nav.drop.down.containerEnd(null,output)}return opt_sb?"":output.toString()};
;
goog.provide("home.nav.drop.down.video");
home.nav.drop.down.video=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.activityContainer.activityList.length>0){home.nav.drop.down.containerStart(opt_data,output);var activity__soy6=opt_data.activityContainer.activityList[opt_data.activityContainer.activityList.length-1];if(!activity__soy6.content.deleted)jive.shared.displayutil.avatar(soy.$$augmentMap(activity__soy6.activityUser,{size:32,hideLink:true,anonymous:activity__soy6.activityUser.anonymous,currentUserPartner:opt_data.user.partner}),
output);output.append('<div class="font-color-meta">');jive.eae.common.activityAuthor({object:activity__soy6.content,type:activity__soy6.content.deleted?opt_data.activityContainer.jiveObject.objectType:activity__soy6.type,activityUser:activity__soy6.activityUser,displayAuthorLink:false,streamType:"communications",hideDetailedReplyTo:true,user:opt_data.user,againstObject:true,deleted:activity__soy6.content.deleted},output);output.append(" ",soy.$$escapeHtml(opt_data.activityContainer.parentTime),'</div><div class="title font-color-link"><span class="',
soy.$$escapeHtmlAttribute(opt_data.activityContainer.jiveObject.jiveObjectCSS),'"></span>',soy.$$filterNoAutoescape(opt_data.activityContainer.jiveObject.subject),"</div>");home.nav.drop.down.containerEnd(null,output)}return opt_sb?"":output.toString()};
;
goog.provide("home.nav.drop.down.welcome");
home.nav.drop.down.welcome=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;home.nav.drop.down.containerStart(opt_data,output);output.append('<div class="j-badge-oneliner"><span title=\'',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.access.welcome.indicator"),[])),'\' role=\'img\' class="jive-icon-glyph icon-leaf acticon"></span><span class="title">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k42d2"),[])),"</span></div>");home.nav.drop.down.containerEnd(null,
output);return opt_sb?"":output.toString()};
;
define("apps/navbar/menu/home/navbar_menu_home_main",["jquery","apps/activity_stream/models/activity_stream_source","apps/read_tracking/models/read_tracking_source","apps/activity_stream/activity_notifier","soy!jive.nav.menu.home.main","soy!jive.nav.menu.home.content","soy!jive.welcome.updateIndicator","soy!home.nav.drop.down.generic","lib/jiverscripts/src/oo/class","apps/shared/controllers/localexchange"],function(g,b,c,f,e,d,a,h){jive.namespace("Navbar.Menu.Home");jive.Navbar.Menu.Home.Main=jive.oo.Class.extend(function(i){this.init=function(k){var j=this;j.$button=g(k);j.menuSource=new b();j.readTrackingSource=new c();j.counts={inbox:0,tasks:0,moderations:0};j.unreadItems={};j.pendingActionsCount=0;this.options={showCountInTitle:g("#jive-nav-link-communications").length>0};f.addListener("activityStream.poll",function(l){j.updateCount(l)});f.addListener("activityStream.push",function(l){j.pushCount(l)});jive.localexchange.addListener("inbox.read",function(m,l){j.removeUnreadItem({objectType:m,id:l});j.decrementNewCount("inbox",1)}).addListener("inbox.unread",function(m,l){j.addUnreadItem({objectType:m,id:l});j.decrementNewCount("inbox",-1)});jive.switchboard.addListener("inbox.read",function(m,l){j.removeUnreadItem({objectType:m,id:l});j.decrementNewCount("inbox",1)}).addListener("inbox.unread",function(m,l){j.addUnreadItem({objectType:m,id:l});j.decrementNewCount("inbox",-1)}).addListener("inbox.markAllRead",function(){j.unreadItems={};j.decrementNewCount("inbox",10000)}).addListener("tasks.taskComplete",function(){j.decrementNewCount("tasks",1)}).addListener("tasks.taskIncomplete",function(){j.decrementNewCount("tasks",-1)})};this.updateCount=function(l){var j=this;j.counts.inbox=l.fullCounts.communications.unreadCount;j.counts.actions=l.fullCounts.actions;j.counts.tasks=l.fullCounts.overdueTasks;j.counts.moderations=l.fullCounts.moderations;var k=l.fullCounts.communications.unreadItems;g.each(k,function(m,n){j.addUnreadItem(n)});j.renderCounts()};this.pushCount=function(p){var j=this;var k=j.$button.find(".j-js-update-indicator"),l=k.data("count"),o,n=p.parent;if(p.counts.tasks){o=l+1;var m=g(a({type:"count",count:o,extraCssClasses:"j-navbadge-count j-ui-elem"}));if(k.length){k.replaceWith(m)}else{j.$button.append(m)}if(j.options.showCountInTitle){j.updateTitleCount(o)}}else{if(p.counts.communications&&!j.isItemPreviouslyUnread(n)){jive.localexchange.emit("inbox.unread",n.objectType,n.id)}else{if(!p.counts.communications&&p.updateCommsData&&j.isItemPreviouslyUnread(n)){jive.localexchange.emit("inbox.read",n.objectType,n.id)}}}};this.addUnreadItem=function(j){var l=this.hashUnreadItem(j);var k=this.unreadItems[l];if(k===undefined){this.unreadItems[l]=j}};this.removeUnreadItem=function(j){var l=this.hashUnreadItem(j);var k=this.unreadItems[l];if(k!==undefined){delete this.unreadItems[l]}};this.getUnreadItems=function(){return this.unreadItems};this.isItemPreviouslyUnread=function(k){var l=this.hashUnreadItem(k);var j=this.unreadItems[l];if(j===undefined){return false}return true};this.hashUnreadItem=function(j){return j.objectType+"-"+j.id};this.decrementNewCount=function(k,l){var j=this;if(j.counts[k]<=50||l>1000){j.counts[k]=j.counts[k]-l;if(j.counts[k]<0){j.counts[k]=0}j.renderCounts()}};this.renderCounts=function(){var j=this,m=j.counts.inbox+j.counts.moderations,l=g(a({type:"count",count:m,showZero:true,extraCssClasses:"j-navbadge-count j-ui-elem"}));var k=j.$button.find(".j-js-update-indicator");if(k.length){k.replaceWith(l)}else{j.$button.append(l)}if(j.options.showCountInTitle){j.updateTitleCount(m)}};this.updateTitleCount=function(n){var p=m(document.title),l=k(document.title),o="...";if(n!==l&&p.trim()!==o){document.title=j(n)+" "+p}function m(r){var q=r.indexOf(")");if(q!=-1){return r.substring(r.indexOf(")")+2)}else{return r}}function k(r){var q=r.match(/\((\d+)\+?\)[\w\s]*/);if(q&&q.length){return parseInt(q[1],10)}else{return 0}}function j(q){if(q<=0){return""}else{if(q>0&&q<=50){return"("+q+")"}else{if(q>50){return"(50+)"}}}}};this.markRead=function(j,m){var k=this,l={objectType:j,id:m};k.readTrackingSource.save(j,m,true);if(k.isItemPreviouslyUnread(l)){jive.switchboard.emit("inbox.read",j,m)}}});return jive.Navbar.Menu.Home.Main});
;
goog.provide("jive.autosearch.overlay");jive.autosearch.overlay=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.type=="bookmark"?'<div class="j-tooltip j-pop" role="alert"><span class="jive-icon-med jive-icon-bookmark-ribbon"></span><span class="j-tooltip-content">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3435"),[]))+'</span><span class="belowArrow pointer" style="right: 30px;"></span></div>':"");return opt_sb?"":output.toString()};
;
goog.provide("jive.autosearch.spotlightPopup");jive.autosearch.spotlightPopup=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="jive-spotlight-search-result j-menu j-quick-menu" data-component="popup" style="display: none;"><div>');return opt_sb?"":output.toString()};
;
goog.provide("jive.autosearch.spotlightView");
jive.autosearch.spotlightView=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<div>",opt_data.view=="frequent"||opt_data.view=="recent"||opt_data.view=="bookmarks"?'<p class="j-pop-desc"><strong>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3504"),[opt_data.communityName]))+'</strong> <span class="j-ui-elem j-spotlight-arrow"></span></p><h5>'+(!opt_data.availableViews["bookmarks"]?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k350e"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3505"),
[])))+'</h5><nav class="j-spotlightnav font-color-meta" >'+(opt_data.availableViews["frequent"]?'<a data-component="button" data-view="frequent" class="'+(opt_data.view=="frequent"?"j-active":"")+" "+(!opt_data.availableViews["recent"]&&!opt_data.availableViews["bookmarks"]?" j-last":"")+'" href="javascript:void(0);">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3507"),[]))+"</a>":"")+(opt_data.availableViews["recent"]?'<a data-component="button" data-view="recent" class="'+(opt_data.view==
"recent"?"j-active":"")+"  "+(!opt_data.availableViews["bookmarks"]?" j-last":"")+'" href="javascript:void(0);">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k350f"),[]))+"</a>":"")+(opt_data.availableViews["bookmarks"]?'<a data-component="button" data-view="bookmarks" class="'+(opt_data.view=="bookmarks"?"j-active":"")+' j-last" href="javascript:void(0);">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3501"),[]))+"</a>":"")+"</nav>":(opt_data.availableViews["frequent"]||opt_data.availableViews["recent"]||
opt_data.availableViews["bookmarks"]?'<p class="j-pop-desc">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3518"),[]))+"</p>":"")+(opt_data.view=="all"||opt_data.view=="filtered"?"<h5>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k351a"),[]))+' <span class="spinner" data-component="progressmeter" data-mode="undetermined" data-active="false" data-size="small"></span></h5>':"")+(opt_data.availableViews["filtered"]&&opt_data.availableViews["all"]?'<nav class="j-spotlightnav font-color-meta trimmed"><a href="javascript:void(0);" data-component="button" data-view="all" class="'+
(opt_data.view=="all"?"j-active":"")+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3500"),[]))+'</a><a href="javascript:void(0);" data-component="button" data-view="filtered" class="'+(opt_data.view=="filtered"?"j-active":"")+' j-last">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3506"),[opt_data.filterDisplayName]))+"</a></nav>":""),'<div class="j-spotlight-find" data-component="list" data-wrap="true"><div data-component="loadingpanel" class="j-spotlight-working font-color-meta"><div>',
opt_data.view=="all"||opt_data.view=="filtered"?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3519"),[]))+"</p>":"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k350c"),[]))+"</p>",'</div><span data-component="progressmeter" data-mode="undetermined" data-active="false"></span></div></div></div>');return opt_sb?"":output.toString()};
;
goog.provide("jive.autosearch.results");
jive.autosearch.results=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.results.content&&opt_data.results.content.length){output.append('<div class="j-results" data-type="contents">',!(opt_data.view=="bookmarks")&&!(opt_data.view=="filtered")?'<h4 class="font-color-meta" id="header_content">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k347d"),[]))+"</h4>":"");jive.autosearch.resultSection(soy.$$augmentMap(opt_data,{list:opt_data.results.content,type:"content",
max:!(opt_data.view=="bookmarks")&&!(opt_data.view=="filtered")?"5":""}),output);output.append("</div>")}if(opt_data.results.people&&opt_data.results.people.length){output.append('<\!--  removal of people from search results - Jesse Franklin<div class="j-results" data-type="people"><h4 class="font-color-meta" id="header_people">',soy.$$escapeHtmlRcdata(jive.i18n.i18nText(jive.i18n.getMsg("k347e"),[])),"</h4>");jive.autosearch.resultSection(soy.$$augmentMap(opt_data,{list:opt_data.results.people,type:"people",
max:5}),output);output.append("</div> --\>")}if(opt_data.results.places&&opt_data.results.places.length){output.append('<div class="j-results" data-type="places"><h4 class="font-color-meta"  id="header_places">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k347f"),[])),"</h4>");jive.autosearch.resultSection(soy.$$augmentMap(opt_data,{list:opt_data.results.places,type:"places",max:5}),output);output.append("</div>")}output.append((!opt_data.results.content||!opt_data.results.content.length)&&
(!opt_data.results.people||!opt_data.results.people.length)&&(!opt_data.results.places||!opt_data.results.places.length)?'<div class="j-spotlight-empty font-color-meta">'+(opt_data.view=="frequent"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k350b"),[])):opt_data.view=="recent"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3513"),[])):opt_data.view=="bookmarks"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3502"),[])):opt_data.view=="all"||opt_data.view=="filtered"?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3517"),
[])):"")+"</div>":"");return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.searchViewDefaultTitle");jive.i18n.keys.searchViewDefaultTitle=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3505"),[])));return opt_sb?"":output.toString()};
;
goog.provide("jive.i18n.keys.searchViewSearchTitle");jive.i18n.keys.searchViewSearchTitle=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k351a"),[])));return opt_sb?"":output.toString()};
;
define("jive.component.PopupView",["jquery"],function($$$$){var $PopupView$$=jive.oo.Class.extend(function($protect$$){$protect$$.init=function $$protect$$$init$($element$$){this.$element=$$$$($element$$)};this.toString=function $this$toString$(){return"[object PopupView]"};this.show=function $this$show$($trigger$$,$anchor$$,$exclusive$$,$focus$$){this.trigger=$trigger$$;this.$element.popover({container:"#j-spotlight-search",context:$anchor$$?$anchor$$:$trigger$$,closeOnClick:!0,closeOtherPopovers:null!=
$exclusive$$?$exclusive$$:!0,destroyOnClose:!1,flip:!1,focusPopover:null!=$focus$$?$focus$$:!1,additionalContainerSelector:"#j-spotlight-search, .j-spotlight-search, .jive-spotlight-search-result"})};this.hide=function $this$hide$(){this.$element.trigger("close")};this.getTrigger=function $this$getTrigger$(){return this.trigger};this.getState=function $this$getState$(){return this.$element.is(":visible")?"visible":"hidden"};this.getTopMargin=function $this$getTopMargin$(){return this.$element.closest(".js-pop").offset().top-
$$$$(window).scrollTop()};this.getOuterHeight=function $this$getOuterHeight$(){return this.$element.closest(".js-pop").outerHeight()};this.scrollTo=function $this$scrollTo$($$selected$$){var $$viewport$$=this.$element.find(".j-spotlight-find");if(!(1>$$viewport$$.length)){var $viewHeight$$=$$viewport$$.height(),$vTop$$=$$viewport$$.offset().top,$offBottom_vBottom$$=$vTop$$+$viewHeight$$,$sHeight$$=$$selected$$.outerHeight(),$sTop$$=$$selected$$.offset().top,$sBottom$$=$sTop$$+$sHeight$$,$margin$$=
$$viewport$$.find("h4").outerHeight()||32,$offBottom_vBottom$$=$sBottom$$>$offBottom_vBottom$$-$margin$$;$sTop$$<$vTop$$+$margin$$?$$viewport$$.scrollTo($$selected$$,{offset:0-$margin$$}):$offBottom_vBottom$$&&$$viewport$$.scrollTo($$selected$$,{offset:0-($viewHeight$$-$sHeight$$-$margin$$)})}}});$PopupView$$.toString=function $$PopupView$$$toString$(){return"[wrapper PopupView]"};$PopupView$$.getBindName=function $$PopupView$$$getBindName$(){return"PopupView"};return $PopupView$$});
;
define("jive.component.ProgressMeterView",["jquery"],function(a){var b=jive.oo.Class.extend(function(c){c.init=function(d){this.$element=a(d)};this.toString=function(){return"[object ProgressMeterView]"};this.start=function(){if(!this.spinner){this.spinner=new jive.loader.LoaderView({inline:true,showLabel:false,size:this.$element.attr("data-size")});this.spinner.appendTo(this.$element);this.$element.attr("data-active",true)}};this.stop=function(){if(this.spinner){this.spinner.getContent().remove();this.spinner.destroy();this.$element.attr("data-active",false)}};this.getMode=function(){var d=this.$element.data("mode");return d?d:"undetermined"};this.isActive=function(){var d=this.$element.data("active");return d?d:false}});b.toString=function(){return"[wrapper ProgressMeterView]"};b.getBindName=function(){return"ProgressMeterView"};return b});
;
(function(a){a.fn.view=function(b,c){if(!jQuery.isFunction(b)){throw"IllegalViewParameterException"}if(!c&&b.getBindName){c=b.getBindName()}if(!c){throw"IllegalBindParameterException"}var e;if(this.length){var d=this.first();e=d.data(c);if(e==null){e=new b(d.get(0));d.data(c,e)}else{if(!(e instanceof b)){throw"PropertyAlreadyBoundException"}}}return e}})(jQuery);
;
define("jive.component.list",["jquery"],function(b){var a={};a.ListView=jive.oo.Class.extend(function(c){this.init=function(d){this.$element=b(d)};this.toString=function(){return"[object ListView]"};this.allowWrap=function(){return this.$element.data("wrap")==true};this.getListItemElements=function(){return this.$element.find("[data-component='listitem']:visible").get()};this.getListItems=function(){var d=[];b(this.getListItemElements()).each(function(e,f){d.push(b(f).view(a.ListItemView))});return d};this.getSelectedElement=function(){return b(this.getListItemElements()).filter(".j-selected").get(0)};this.getSelectedIndex=function(){var d=this.getSelectedElement();if(d){return b(this.getListItemElements()).index(d)}else{return -1}};this.select=function(e){var d=this.getListItemElements();if(b.isNumeric(e)){if(this.allowWrap()){e=this.wrapIndex(e)}e=d[e]}b(d).filter(".j-selected").removeClass("j-selected");b(e).addClass("j-selected")};this.incriment=function(e){if(e==0){return}var d=this.getSelectedIndex();if(e<0&&d==-1){e++}e=d+e;this.select(e)};c.wrapIndex=function(e){var d=this.getListItemElements().length;e=e%d;e=e<0?d+e:e;return e}});a.ListView.toString=function(){return"[wrapper ListView]"};a.ListView.getBindName=function(){return"ListView"};a.ListItemView=jive.oo.Class.extend(function(c){this.init=function(d){this.$element=b(d)};this.toString=function(){return"[object ListItemView]"};this.getListElement=function(){return this.$element.closest("[data-component='list']").get()};this.getList=function(){return b(this.getListElement()).view(item.ListView)};this.select=function(){this.getList().select(this.$element.get())}});a.ListItemView.toString=function(){return"[wrapper ListItemView]"};a.ListItemView.getBindName=function(){return"ListItemView"};return a});
;
define("apps/autosearch/search_service",["jquery","apps/shared/models/deferred_rest_service"],function(b,a){return a.extend(function(c){c.resourceType="search";this.init=function(d){this.RESOURCE_ENDPOINT=_jive_base_url+"/api/core/v3/search"};this.createParams=function(e,i,d,g,h,k){var j={};j.startIndex=k;j.sort=g;j.origin="spotlight";j.highlight=false;j.count=h;j.filter=[];if(d){j.fields=b.isArray(d)?d.join(","):d}if(i){for(var f in i){j.filter.push(f+"("+i[f]+")")}}if(e){j.filter.push("search("+e+")")}return j};this.query=function(k,f,e,i,h,j,l){var g=this.createParams(f,e,i,h,j,l);var d=this.RESOURCE_ENDPOINT+"/"+k;if(k==="contents"){g.collapse=true;g.directive=["include_rtc"];g.socialSearch=true}if(k==="places"){g.socialSearch=true;d=this.RESOURCE_ENDPOINT}return this.commonAjaxRequest(new b.Deferred(),"GET",{url:d,data:g})}})});
;
define("jive.component.autosearch.ActivitySource",["jquery","apps/shared/models/deferred_rest_service"],function(b,a){return a.extend(function(c){c.resourceType="search";this.init=function(d){this.RESOURCE_ENDPOINT=_jive_base_url+"/api/core/v3/activities/"};this.queryFrequent=function(f,d,h,g){var i={};i.count=h;if(g){i.filter=g}if(d){i.fields=b.isArray(d)?d.join(","):d}var e=this.RESOURCE_ENDPOINT+"frequent/"+f;return this.commonAjaxRequest(new b.Deferred(),"GET",{url:e,data:i})};this.queryRecent=function(f,d,h,g){var i={};i.count=h;if(g){i.filter=g}if(d){i.fields=b.isArray(d)?d.join(","):d}var e=this.RESOURCE_ENDPOINT+"recent/"+f;return this.commonAjaxRequest(new b.Deferred(),"GET",{url:e,data:i})}})});
;
define("apps/autosearch/content_source",["jquery","apps/shared/models/rest_service"],function(b,a){return a.extend(function(c){c.resourceType="search";this.init=function(d){this.suppressGenericErrorMessages();this.RESOURCE_ENDPOINT=_jive_base_url+"/api/core/v3/contents"};this.query=function(g,f){var h={};h.count=f;h.origin="spotlight";h.filter=[];h.socialSearch=true;if(g){for(var e in g){h.filter.push(e+"("+g[e]+")")}}var d=this.RESOURCE_ENDPOINT;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:d,data:h})}})});
;
define("apps/autosearch/people_source",["jquery","apps/shared/models/rest_service"],function(b,a){return a.extend(function(c){c.resourceType="search";this.init=function(d){this.suppressGenericErrorMessages();this.RESOURCE_ENDPOINT=_jive_base_url+"/api/core/v3/people"};this.query=function(g,f){var h={};h.count=f;h.origin="spotlight";h.filter=[];if(g){for(var e in g){h.filter.push(e+"("+g[e]+")")}}var d=this.RESOURCE_ENDPOINT;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:d,data:h})}})});
;
define("apps/autosearch/place_source",["jquery","apps/shared/models/rest_service"],function(b,a){return a.extend(function(c){c.resourceType="search";this.init=function(d){this.suppressGenericErrorMessages();this.RESOURCE_ENDPOINT=_jive_base_url+"/api/core/v3/places"};this.query=function(g,f){var h={};h.count=f;h.origin="spotlight";h.filter=[];h.socialSearch=true;if(g){for(var e in g){h.filter.push(e+"("+g[e]+")")}}var d=this.RESOURCE_ENDPOINT;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:d,data:h})}})});
;
define("apps/shared/models/bookmark_source",["apps/shared/models/rest_service"],function(a){jive.BookmarkSource=a.extend(function(b){b.resourceType="bookmark"});return jive.BookmarkSource});
;
jive.namespace("search");(function(d){var l=jive.search,k=jive.app.url({path:"/api/core/v3"}),h={content:{url:k+"/search/contents",validParams:["count","startIndex","sort","socialSearch"],validFilters:["search","type","tag","author","place","after","language"],defaults:{origin:"searchpage",collapse:"true",depth:"none",socialSearch:"true",returnScore:"true",fields:"rootType,type,subject,author,question,answer,helpful,parentPlace,parentContent,highlightSubject,highlightBody,highlightTags,outcomeCounts,published,updated,replyCount,likeCount,viewCount,visibleToExternalContributors,binaryURL,uuid,index,iconCss",directive:["include_rtc"]}},people:{url:k+"/search/people",validParams:["count","startIndex","sort"],validFilters:["search","nameonly","include-disabled"],defaults:{origin:"searchpage"}},places:{url:k+"/search/places",validParams:["count","startIndex","sort","socialSearch"],validFilters:["search","type","tag"],defaults:{origin:"searchpage",socialSearch:"true",returnScore:"true"}}};function e(){return k}function j(m){return h[m].url}function b(m,o){var n=d.getJSON(m,o).then(function(p){if(p.links&&p.links.next){p.next=b.bind(this,p.links.next,{})}p.returnedDate=new Date().getTime();return p});n.query=m+"?"+d.param(o);n.sentDate=new Date().getTime();return n}function i(r,q){if(!h.hasOwnProperty(r)){throw new Error("Invalid type, must be content, people, or places")}if(!q){throw new Error("Must provide params to query")}var p=d.extend({},h[r].defaults),m=h[r].validParams;var n=l.getUrl(r);m.forEach(function(s){if(q[s]){p[s]=q[s]}});var o=q.filter;if(o instanceof Array){o=o.map(function(s){if(s==="type(dm)"){return"type(dm,collaboration,interaction)"}else{return s.replace(/^after\((.*)\)$/,function(t,u){return"after("+g(u)+")"})}})}p.filter=o;return b(n,p)}function a(n,m){var o=JSON.stringify(n);return d.ajax({type:"POST",url:k+"/search/monitor",data:o,async:!m,contentType:"application/json",dataType:"json"})}function c(o,n,m){if(!o.hasOwnProperty("filter")){o.filter=[]}if(d.isArray(m)){m=m.join(",")}o.filter.push(n+"("+m+")")}var f={day:1,week:7,month:30,quarter:90,year:365};function g(r){var n=86400000;var o=new Date();var m=new Date(o.getFullYear(),o.getMonth(),o.getDate());var q=m.getTime();var s=f[r];if(!s){return false}var p=new Date(q-n*s).toISOString();return p.replace(/Z$/,"+0000")}if(!Date.prototype.toISOString){(function(){function m(o){var n=String(o);if(n.length===1){n="0"+n}return n}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+m(this.getUTCMonth()+1)+"-"+m(this.getUTCDate())+"T"+m(this.getUTCHours())+":"+m(this.getUTCMinutes())+":"+m(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)+"Z"}}())}l.query=i;l.logMonitoring=a;l.getBaseUrl=e;l.getUrl=j})(jQuery);
;
define("apps/autosearch/autosearch",["jquery","apps/autosearch/search_service","jive.component.autosearch.ActivitySource","apps/autosearch/content_source","apps/autosearch/people_source","apps/autosearch/place_source","jive.component.list","jive.component.PopupView","jive.component.ProgressMeterView"],function(c,b,h,k,a,d,e,f,g){var j={};j.init=function(){var m=c(document);var l=[];c("input[data-component='autosearch']").placeHeld();m.on("keypress.autosearchview, focus.autosearchview","input[data-component='autosearch']",function(){if(c.inArray(c(this).id(),l)==-1){l.push(c(this).id());c(this).view(i)}});jive.switchboard.addListener("bookmark.create",function(p){var o=c("#j-spotlight-search");o.addClass("j-bookmark-created");o.append(jive.autosearch.overlay({type:"bookmark"}));var n=o.find(".j-tooltip");n.fadeIn(250);setTimeout(function(){o.removeClass("j-bookmark-created");n.fadeOut(250,function(){c(this).remove()})},1500)})};var i=jive.oo.Class.extend(function(l){l.init=function(y,s){s=s||{};this.$element=c(y);var A=this.$element.data("origin")||"unknown";this.resultsView=this.$element.data("resultsView")||f;this.searchSource=new b({origin:A});this.activitySource=new h();this.contentSource=new k();this.peopleSource=new a();this.placeSource=new d();this.bookmarkSource=new jive.BookmarkSource();this.metrics=new jive.search.SearchMetrics("spotlight-search");this.$element.attr("maxlength",250);this.inputFilters=w(this.$element);this.resultFilterTypes=t(this.$element);if(this.$element.data("container")){var x=this.$element.data("container").split(":");this.containerType=parseInt(x[0]);this.containerId=parseInt(x[1]);this.containerBrowseId=parseInt(this.$element.data("container-browseid"));this.filterType="place";this.filter=["/places/"+this.containerBrowseId];this.additionalFilters={depth:"ALL"};this.displayName=this.$element.data("container-name");this.forceFiltered=true}else{this.containerType=jive.global.containerType;this.containerId=jive.global.containerID;this.containerBrowseId=jive.global.containerBrowseId}this.deferreds=[];if(this.containerType==3){this.peopleSource.get(this.containerId).addCallback(function(C){if(C){p("people",C);this.filterType="author";this.filter=new RegExp("/[^/]*/[^/]*$").exec(C.resources.self.ref);this.displayName=C.displayName}}.bind(this))}else{if(this.containerType!=2020&&this.containerBrowseId!=-1){this.placeSource.get(this.containerBrowseId).addCallback(function(C){if(C&&!(C.type=="space"&&C.parent==null)){this.filterType="place";this.filter=new RegExp("/[^/]*/[^/]*$").exec(C.resources.self.ref);this.additionalFilters={depth:"ALL"};this.displayName=C.name}}.bind(this))}}var B=this;var v=c("[data-type='clear'][data-field='"+this.$element.get(0).id+"']");v.on("click",function(C){B.$element.focus();B.$element.val("");B.setView(null);B.renderView();B.loadViewContent();c(this).removeClass("j-active")});function u(C){var D=C.find("[data-component='button'][data-command='remove']").data("id");B.deleteBookmark(D).addCallback(function(){C.fadeOut("fast",function(){C.remove()})})}function w(D){var C=D.data("filters");return C?C.split(","):[]}function t(C){var D=C.data("resultFilterTypes");return D?D.split(","):[]}this.$element.typeAhead({keystrokeWait:400,suppressBlurEvent:(/iPhone|iPod|iPad/).test(navigator.userAgent),itemSelector:"li.j-listitem:visible",tabSelector:"nav a[data-component='button'][data-view]:visible",deselectOnMouseOut:true}).on("keystroke",function z(D){var E=B.getSearchTerm();if(E){B.change()}else{B.clear(B)}var C=B.getPopup();if(C.getState()=="visible"){if(E.length){v.addClass("j-active")}else{v.removeClass("j-active")}}}).on("focusWaitFinished",function(C){c(this).closest("[role=search]").addClass("focused");var D=c(this).view(i);if(D.getPopup().getState()!="visible"){if((c(this).attr("data-hidetypes").indexOf("frequent")==-1)||c(C.currentTarget).val().length>1){D.renderView();D.loadViewContent()}}}).on("blurWaitFinished",function(C){c(this).closest("[role=search]").removeClass("focused").end().trigger("close")}).on("selectionChosen",function(I,G,D,J){var F=D.find("a:first"),E=F.attr("href");if(F.is("[data-component='button']")){if(F.is("[data-command='more']")){var C=F.closest("ul").find("li.j-inactive").removeClass("j-inactive").first();G.setSelected(C);F.closest("li").addClass("j-inactive")}B.activateItem(D)}else{if(c(J.target).is("[data-component='button']")){var H=c(J.target);if(H.is("[data-command='remove']")){u(D)}B.activateItem(D)}else{if(J.type=="click"){J.noPreventDefault();B.activateItem(D)}else{setTimeout(function(){if(!I.isDefaultPrevented()){window.location=E}},0)}}}}).on("otherClick",function(E,D,C){if(C.is("[data-component='button'][data-view]")){B.setView(C.data("view"));B.renderView();B.loadViewContent()}}).on("otherEnter",function(){B.navigateToSearchPage()}).on("close",function(){B.hidePopup()}).on("selectionChanged",function(E,F,D,G){var C=B.getPopup();if(G!=="mouse"&&C.scrollTo){C.scrollTo(D)}}).attr("aria-autocomplete","list").attr("role","combobox");c("[data-type='search'][data-field='"+this.$element.get(0).id+"']").on("click",function(C){B.navigateToSearchPage()})};this.toString=function(){return"[object AutoSearchView]"};l.getCurrentView=function(){var s=this.currentView;if(!s){s=this.getDefaultView()}return s};l.getDefaultView=function(){var s=this.getAvailableViews();if(s.frequent){return"frequent"}else{if(s.bookmarks){return"bookmarks"}else{if(s.filtered&&this.forceFiltered){return"filtered"}else{if(s.content){return"content"}else{return null}}}}};this.getPopupElement=function(){var u=this.$element.data("popupElement");if(!u){var s=this.$element.data("popup");var t;if(s){t=c("#"+s)}else{t=c(jive.autosearch.spotlightPopup());this.$element.after(t)}u=t.get(0);this.$element.data("popupElement",u)}return u};l.getSearchTerm=function(){var s=this.$element.placeHeldVal();if((s.match(/[^\s]/g)||[]).length>=2){s=c.trim(s).replace(/\s+/g," ");if(s.length>=2){return s}}return""};this.activateItem=function(v){var s=c(v);if(!s.children().addBack().hasClass("more")&&this.getCurrentView()=="all"||this.getCurrentView()=="filtered"){var t=s.closest("[data-component='listitem']").prevAll("[data-component='listitem']").length;var u=s.closest("div[data-type]").attr("data-type");this.metrics.setChoice(u,t,s.children("a").first().attr("href"))}};this.getPopup=function(){return c(this.getPopupElement()).view(this.resultsView)};this.hidePopup=function(){this.getPopup().hide()};this.showPopup=function(){var s=this.getPopup();if(!c(this.getPopupElement()).is(":visible")){var t=this.anchor?c(this.anchor):null;if(!t){t=this.$element.data("popup-anchor");t=t?c("#"+t):this.$element}this.getPopup().show(this.$element.get(0),t);this.$element.data("typeAhead").setSuggestElement(this.getPopupElement())}};this.setAnchor=function(s){this.anchor=s};l.getListElement=function(){var s=c(this.getPopupElement());return s.find("[data-component='list']").get(0)};l.specify=function(s,u,t){this.deferreds.push(u);return u.pipe(function(v){return{type:s,params:t,data:v,filters:this.inputFilters?this.inputFilters:""}})};l.fieldsFor=function(s){if(s=="content"){return["type","id","author","subject","visibleToExternalContributors","published","updated","question","answer","helpful","uuid","index","iconCss"]}else{if(s=="people"){return["type","id","name","displayName","thumbnailId","jive.username","jive.enabled","jive.external"]}else{if(s=="places"){return["type","id","name","displayName","parentPlace","visibleToExternalContributors","uuid","index"]}}}return[]};l.loadFrequentlyViewed=function(){var t=[],s=this.getAvailableViews();if(s.content){t.push(this.specify("content",this.activitySource.queryFrequent("content",this.fieldsFor("content"),10,this.inputFilters)))}if(s.people){t.push(this.specify("people",this.activitySource.queryFrequent("people",this.fieldsFor("people"),10,this.inputFilters)))}if(s.places){t.push(this.specify("places",this.activitySource.queryFrequent("places",this.fieldsFor("places"),10,this.inputFilters)))}return t};l.loadBookmarks=function(){var s=new c.Deferred();this.contentSource.query({type:"favorite",author:"/people/"+_jive_current_user.ID},10).then(function(t){s.resolve(t)});return[this.specify("content",s)]};l.loadHistory=function(){var t=[],s=this.getAvailableViews();if(s.content){t.push(this.specify("content",this.activitySource.queryRecent("content",this.fieldsFor("content"),10,this.inputFilters)))}if(s.people){t.push(this.specify("people",this.activitySource.queryRecent("people",this.fieldsFor("people"),10,this.inputFilters)))}if(s.places){t.push(this.specify("places",this.activitySource.queryRecent("places",this.fieldsFor("places"),10,this.inputFilters)))}return t};l.executeSearch=function(){var t=[],s=this.getAvailableViews();if(s.content){t.push(this.performSearchQuery("content",this.fieldsFor("content"),this.inputFilters))}if(this.getCurrentView()!="filtered"){if(s.people){t.push(this.performSearchQuery("people",this.fieldsFor("people"),this.inputFilters))}if(s.places){t.push(this.performSearchQuery("places",this.fieldsFor("places"),this.inputFilters))}}return t};l.performSearchQuery=function(z,x,t){var v=n(c.trim(this.getSearchTerm())),s={};if(this.getCurrentView()=="filtered"){s[this.filterType]=this.filter;if(this.filterType=="place"){c.extend(s,this.additionalFilters)}}_.extend(s,o(this.inputFilters));var u=z=="content"?"contents":z;var w=this.searchSource.createParams(v,s,x,"relevanceDesc",10);var y=new jive.search.SearchMetricsQuery("/api/core/v3/search/"+u+"?"+c.param(w));this.metrics.addQuery(y,u);var A=this.searchSource.query(u,v,s,x,"relevanceDesc",10);A.then(this.processSearchResult.bind(this,y));return this.specify(z,A,{searchTerm:v,filterType:this.filterType,filter:this.filter})};l.processSearchResult=function(t,s){t.setReturnedDate(new Date().getTime());t.addResults(s.list.map(q))};function o(s){var t={};_.each(s,function(u){if(/\w+\(\w+\)/.test(u)){var v=u.split("(");t[v[0]]=v[1].replace(")","")}});return t}function n(u){if(u.length<2){return u}var t=u.split(" ");var s=t[t.length-1];if(s.length>1){return u+"*"}else{if(s.length==1&&m(s)){return u}else{return n(c.trim(u.substring(0,u.length-2)))}}}function m(t){var s=/^\d$/;return s.test(t)}function q(s){return{id:s.id,type:s.type}}this.deleteBookmark=function(t){var s=new jive.conc.Promise();this.bookmarkSource.destroy(t).addCallback(function(){jive.switchboard.emit("bookmark.destroy",jQuery.extend({},{id:t}));s.emitSuccess()});return s};function p(t,s){if(s.type=="favorite"&&s.favoriteObject.type!="url"){s=s.favoriteObject;s.displayExternalAccess=(!_jive_current_user.partner)&&s.visibleToExternalContributors}if(t=="content"){if(s.published){s.publishedDate=r(s.published).getTime()}if(s.updated){s.updatedDate=r(s.updated).getTime()}if(s.author&&!s.author.displayName){s.author.displayName=s.author.name.formatted||s.author.jive.username}if(s.type=="file"&&s.binaryURL){s.extension=s.binaryURL.split(".").slice(-1).join(".").toLowerCase()}if(!s.subject&&s.highlightSubject){s.subject=s.highlightSubject}if(!s.subject&&s.parentContent){s.subject=s.parentContent.name}s.subject=c("<div>"+s.subject+"</div>").text();s.displayExternalAccess=(!_jive_current_user.partner)&&s.visibleToExternalContributors}else{if(t=="people"){if(s.jive&&s.jive.profile&&s.jive.profile instanceof Array){c(s.jive.profile).each(function(u,v){if(v.jive_label=="Title"){s.title=v.value}else{if(v.jive_label=="Department"){s.department=v.value}}})}if(!s.displayName){s.displayName=s.name.formatted||s.jive.username}s.displayExternalContributor=(!_jive_current_user.partner)&&s.jive&&s.jive.externalContributor}else{s.displayExternalAccess=(!_jive_current_user.partner)&&s.visibleToExternalContributors}}}function r(v){var s=v.replace(/\+\d+/,"Z");var u=new Date(s);if(isNaN(u.getTime())){var t=s.replace(/-/,"/").replace("T"," ").replace(/\.\d+Z/," GMT");u=new Date(t)}return u}l.getAvailableViews=function(){var s=this.$element.data("hidetypes");return{bookmarks:t("bookmarks"),frequent:t("frequent"),recent:t("recent"),all:t("all"),filtered:this.filterType?t("filtered"):false,content:t("content"),places:t("places"),people:t("people")};function t(u){return s.indexOf(u)<0}};this.renderView=function(){var t=this.getCurrentView();if(t){var s=c(this.getPopupElement());s.empty();s.append(jive.autosearch.spotlightView({view:t,availableViews:this.getAvailableViews(),filterDisplayName:this.displayName,communityName:this.$element.attr("data-community-name")}));this.showPopup();if(t=="bookmarks"||t=="frequent"||t=="recent"||t=="all"){jive.Accessibility.speak(jive.i18n.keys.searchViewDefaultTitle(),"status")}else{jive.Accessibility.speak(jive.i18n.keys.searchViewSearchTitle(),"status")}}else{this.hidePopup()}};l.startLoad=function(){var s=c(this.getPopupElement());s.attr("aria-busy","true");var t=s.find("[data-component='loadingpanel']");var u=s.find("[data-component='progressmeter']");if(t.length){u=t.find("[data-component='progressmeter']")}u.each(function(v,w){c(w).view(g).start()})};l.endLoad=function(){var s=c(this.getPopupElement());var t=s.find("[data-component='progressmeter']");t.each(function(u,v){c(v).view(g).stop()});s.attr("aria-busy","false")};this.loadViewContent=function(){var v=this.getCurrentView(),u;while(this.deferreds.length){this.deferreds[0].reject();this.deferreds.shift()}this.startLoad();switch(v){case"frequent":u=this.loadFrequentlyViewed();break;case"recent":u=this.loadHistory();break;case"bookmarks":u=this.loadBookmarks();break;case"all":case"filtered":if(this.getSearchTerm()){u=this.executeSearch()}break}if(u&&u.length){var t=this,s=c.trim(t.getSearchTerm())+"*";c.when.apply(c,u).done(function(){t.processResult(v,s,Array.prototype.slice.call(arguments))})}else{this.endLoad()}};l.processResult=function(s,t,v){if(s==this.getCurrentView()){this.endLoad();var z=this.getAvailableViews();var y=this.displayName;if(s=="all"){y=this.$element.attr("data-community-name")}var u={view:s,searchTerm:t,filterType:this.filterType,filter:this.filter,filterDisplayName:y,results:{}};var w=this.resultFilterTypes;if(v){v.forEach(function(B){if(B&&B.data&&B.data.list){B.data.list.forEach(function(C){p(B.type,C)});if(w&&w.length>0){B.data.list=_.filter(B.data.list,function(C){return w.indexOf(C.type)>=0})}if(z[B.type]){u.results[B.type]=B.data.list}}})}var A=c(jive.autosearch.results(u)),x=A.find("li[data-type][data-id]");(v||[]).forEach(function(B){(B.data&&B.data.list||[]).forEach(function(C){x.filter(function(){var D=c(this);return D.attr("data-type")==C.type&&D.attr("data-id")==C.id}).data("item",C)})});c(this.getListElement()).empty().append(A);this.calculateResultsMaxHeight()}};this.setView=function(s){this.currentView=s};l.change=function(){var s=this.getCurrentView();if(s!="all"&&s!="filtered"){if(this.forceFiltered){this.setView("filtered")}else{this.setView("all")}}this.renderView();this.loadViewContent()};l.clear=function(s){var t=this.getCurrentView();if(t=="all"||t=="filtered"){this.setView(null);if(this.getCurrentView()=="frequent"){this.renderView()}else{if(typeof(s)!="undefined"){s.hidePopup()}}}this.loadViewContent()};l.calculateResultsMaxHeight=function(){var w=this.getPopup().getOuterHeight(),t=this.getPopup().getTopMargin(),y=c(window).height(),u=c(this.getListElement());if(w+t<y){this.setResultsMaxHeight("auto")}else{var x=10,v=y-t-x,s=w-u.removeAttr("maxHeight").height();this.setResultsMaxHeight(v-s)}};l.setResultsMaxHeight=function(t){var u=40,s=c(this.getListElement());if(!isNaN(t)&&t>u){s.css("maxHeight",t)}else{s.removeAttr("maxHeight")}};this.navigateToSearchPage=function(){var s={};if(this.getSearchTerm().length>0){s.q=this.getSearchTerm()}if(this.getCurrentView()=="filtered"){s[this.filterType]=this.filter;if(this.filterType=="place"){c.extend(s,this.additionalFilters)}}window.location=_jive_base_url+"/search.jspa?"+c.param(s)}});i.toString=function(){return"[wrapper AutoSearchView]"};i.getBindName=function(){return"AutoSearchView"};c(document).ready(function(){j.init()});return i});
;
goog.provide("jive.onboarding.onboardingProgress");jive.onboarding.onboardingProgress=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div id="j-onboarding-progress" class="j-onb-progress j-rc5"><div class="j-complete font-face-deco">');jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("onboarding.percent.complete"),arg0:soy.$$escapeHtml(opt_data.percentComplete),noAutoEscape:true},output);output.append("</div></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.onboarding.postHideViewTip");jive.onboarding.postHideViewTip=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-tips j-pop-main"><h4 class="font-face-deco">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2794"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2793"),[])),"</p></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.trial.renderProgressTip");jive.trial.renderProgressTip=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.shared.soy.render({templateName:opt_data.template,data:function(){var map={};var pairs=[["nextQuestID",opt_data.nextQuestID]];for(var i=0;i<pairs.length;i+=1)map[pairs[i][0]]=pairs[i][1];return map}(),failGracefully:true},output);return opt_sb?"":output.toString()};
;
goog.provide("jive.onbStep.startStep.completedAriaLabel");jive.onbStep.startStep.completedAriaLabel=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<span class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k42dd"),[]))," </span>");return opt_sb?"":output.toString()};
;
jive.namespace("Onboarding");define("apps/onboarding/models/onboarding_source",["jquery","underscore","apps/shared/models/rest_service","apps/shared/models/core_deferred","apps/browse/container/model/container_source"],function(e,d,b,a,c){jive.Onboarding.Source=b.extend(function(f,g){f.resourceType="container";f.init=function(h){h=h||{};g.init.call(this,h);this.RESOURCE_ENDPOINT=jive.rest.url("/onboarding");this.placeSource=new c()};this.core=a;this.initializeView=function(i){var h=this.RESOURCE_ENDPOINT;if(!i){i=new jive.conc.Promise()}return this.commonAjaxRequest(i,"GET",{url:h})};this.getStepData=function(i){var h=this.RESOURCE_ENDPOINT+"/"+i;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:h})};this.markStepComplete=function(i){var h=this.RESOURCE_ENDPOINT+"/"+i+"/complete",j=new jive.conc.Promise();j.addCallback(function(k){jive.switchboard.emit("onboarding.state.update",k)});return this.commonAjaxRequest(j,"POST",{url:h})};this.setOnboardingVisible=function(i){var h=this.RESOURCE_ENDPOINT+"/"+i.toString();return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:h})};this.newUserExploreOnOwn=function(){var h=this.RESOURCE_ENDPOINT+"/exploreOnOwn";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:h})};this.saveLastViewedQuest=function(h){var i=this.RESOURCE_ENDPOINT+"/lastViewedQuest?q="+h;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:i,data:h})};this.getValueCases=function(i){var h=this.RESOURCE_ENDPOINT+"/valueGroup";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:h,data:i})};this.setValueCase=function(i){var h=this.RESOURCE_ENDPOINT+"/valueCase/"+i;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:h})};this.getSuggestedPlaces=function(m,j,r){var h=this,k,q,o,p=e.trim(j),l=false;if(j){j=j.replace(/[\'\"\?\@\*\n\.,-\/\\#!$%\^&\;:\+{}\[\]\|=\-_`~()<>]/g," ");j=e.trim(j);j=j.replace(/\s{2,}/g," ")}k=j.split(" ");q=d.flatten(d.map(m,function(s){return s.split(" ")}));o=d.without(q.concat(k),"");if(o.length>0){var n={type:["group","space"],limit:20};n.q=o.join(" OR ");var i=jive.app.url({path:"/api/core/v2"});i+="/search/places";i=e.param.querystring(i,n);h.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:i}).addCallback(function(u){var t=[];if(u&&u.data&&u.data.length){l=true;t=e.map(u.data,function(v){return{readableType:v.type,id:v.id}})}if(t.length>0){var s=h.RESOURCE_ENDPOINT+"/suggestedPlaces";h.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:s,data:JSON.stringify({profileData:{bio:p},entities:t})}).addCallback(function(v){var w={suggestedPlaces:v,suggestedPlacesExist:l};r.emitSuccess(w)})}else{r.emitSuccess({suggestedPlacesExist:false})}})}};this.updateUserProfile=function(n,o,k,q){var h=this,p=e.trim(k),j=h.RESOURCE_ENDPOINT+"/profile",m=new jive.conc.Promise(),l=d.map(o,function(r){return function(s){return s.jive.corev3.people.expertise.deleteExpertiseTag({personID:_jive_current_user.ID,tagName:r})}}),i=this.core.runAll([function(r){return r.jive.corev3.people.expertise.endorse(n,{personID:_jive_current_user.ID})}].concat(l));h.commonAjaxRequest(m,"POST",{url:j,data:JSON.stringify({profileData:{bio:p},entities:[]})});e.when(m,i).then(function(){q.emitSuccess()})}});return jive.Onboarding.Source});
;
goog.provide("jive.browse.grid.maxPageReached");jive.browse.grid.maxPageReached=function(opt_data,opt_sb){opt_data=opt_data||{};var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-browse-info j-empty font-color-meta">',opt_data.archetypeID?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse."+opt_data.archetypeID+".max.pages.message"),[])):"No archetype specified.","</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.user.flippable");jive.browse.user.flippable=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(!opt_data.flipperHidden&&(opt_data.connections&&opt_data.connections.followLinkShown||opt_data.directMessageActionLinkShown||opt_data.discussionActionInfo&&opt_data.discussionActionInfo.linkShown)?soy.$$filterNoAutoescape(opt_data.body):"");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.user.flippable");goog.provide("jive.browse.user.flipperControl");jive.browse.user.flippable=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(!opt_data.flipperHidden&&(opt_data.connections&&opt_data.connections.followLinkShown||opt_data.directMessageActionLinkShown||opt_data.discussionActionInfo&&opt_data.discussionActionInfo.linkShown)?soy.$$filterNoAutoescape(opt_data.body):"");return opt_sb?"":output.toString()};
jive.browse.user.flipperControl=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.browse.user.flippable(soy.$$augmentMap(opt_data,{body:'<a href="#" class="j-card-flipper j-ui-elem">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1fcd"),[]))+"</a>"}),output);return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.user.thumbnailUserItem");
jive.browse.user.thumbnailUserItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="card"><div class="j-thumb j-people-thumb j-rc4 face card-front js-browse-item ',!opt_data.enabled?"disabled":""," ");jive.browse.user.flippable(soy.$$augmentMap(opt_data.prop,{body:"flippable"}),output);output.append('" data-object-type="',soy.$$escapeHtmlAttribute(opt_data.type),'" data-object-id="',soy.$$escapeHtmlAttribute(opt_data.id),'"><header class="js-thumb-header"><h4><a href="',
soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,opt_data.link))),'" title="',soy.$$escapeHtmlAttribute(opt_data.subject),'">',soy.$$escapeHtml(opt_data.subject),"</a>");if(opt_data.prop&&opt_data.prop.roleBadgeInfo)jive.shared.displayutil.userRoleBadgeImage(opt_data.prop.roleBadgeInfo,output);output.append("</h4></header><section>");jive.browse.user.userProfileImage(opt_data,output);output.append('<div class="j-user-info clearfix">');if(opt_data.prop.connections){if(!opt_data.prop.connections.bidirectional&&
opt_data.prop.connections.followerCount>=0&&opt_data.enabled){output.append('<div><span class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1487"),[])),"</span><br/>");if(opt_data.prop.connections.linkFollowCounts){var param41=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:soy.$$escapeHtml(opt_data.prop.connections?opt_data.prop.connections.followerCount:0),type:"showfollowcount"},param41);jive.eae.acclaim.count({command:"showFollowers",count:opt_data.prop.connections.followerCount,
objectId:opt_data.id,objectType:opt_data.type,classes:"j-user-follow-info",accessibilityLinkLabel:param41.toString()},output)}output.append("</div>")}if(opt_data.prop.connections.followingCount>=0&&opt_data.enabled){output.append('<div><span class="font-color-meta-light">',opt_data.prop.connections.bidirectional?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14a5"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14a0"),[])),"</span><br/>");if(opt_data.prop.connections.linkFollowCounts){var param64=
new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:soy.$$escapeHtml(opt_data.prop.connections?opt_data.prop.connections.followingCount:0),type:"showconnectioncount"},param64);jive.eae.acclaim.count({command:"showConnections",count:opt_data.prop.connections.followingCount,objectId:opt_data.id,objectType:opt_data.type,classes:"j-user-follow-info",accessibilityLinkLabel:param64.toString()},output)}output.append("</div>")}}output.append(!opt_data.enabled?'<strong class="font-color-meta-light">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2193"),[]))+"</strong>":"",'<div><span class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2e02"),[])),"</span><br/>");if(opt_data.prop.connections&&opt_data.prop.connections.labelsShown)if(opt_data.prop.connections.labelCount>4){output.append("<a href='#' class=\"js-label-count\">",soy.$$escapeHtml(opt_data.prop.connections.labelCount),'</a><div class="js-label-details" style="display: none; padding:7px 15px;"><ul class="j-label-dot-list j-quick-menu">');
var listList86=opt_data.prop.connections.friendLists;var listListLen86=listList86.length;for(var listIndex86=0;listIndex86<listListLen86;listIndex86++){var listData86=listList86[listIndex86];if(listData86.targetUserAMember)jive.browse.user.labelDot(listData86,output)}output.append("</ul></div>")}else{output.append('<ul class="j-label-dot-list j-td-user-info">');var listList94=opt_data.prop.connections.friendLists;var listListLen94=listList94.length;for(var listIndex94=0;listIndex94<listListLen94;listIndex94++){var listData94=
listList94[listIndex94];if(listData94.targetUserAMember)jive.browse.user.labelDot(listData94,output)}output.append("</ul>")}else output.append("<a href='#' class=\"js-label-count\">0</a>");output.append("</div></div>",opt_data.prop.title?' <strong class="j-user-title font-color-meta-light" title="'+soy.$$escapeHtmlAttribute(opt_data.prop.title)+'">'+soy.$$escapeHtml(opt_data.prop.title)+"</strong>":"","</section><footer><div>");if(opt_data.columns.dateJoined||opt_data.columns.creationDate)if(opt_data.prop.membership||
opt_data.creationDate){output.append('<span class="font-color-meta">');jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k14de"),arg0:"<strong>",arg1:opt_data.prop.membership?soy.$$escapeHtml(opt_data.prop.membership.memberDate?_jive_moment(parseFloat(opt_data.prop.membership.memberDate)?parseFloat(opt_data.prop.membership.memberDate):opt_data.prop.membership.memberDate).add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("LL"):""):opt_data.creationDate?
soy.$$escapeHtml(opt_data.creationDate?_jive_moment(parseFloat(opt_data.creationDate)?parseFloat(opt_data.creationDate):opt_data.creationDate).add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("LL"):""):"",arg2:"</strong>",noAutoEscape:true},output);output.append("</span>")}if(opt_data.columns.statuslevel&&opt_data.prop.statuslevel&&opt_data.prop.statuslevel.enabled){output.append('<span class="font-color-meta">');jive.people.profile.statusLevel(soy.$$augmentMap(opt_data.prop.statuslevel,
{showPoints:true}),output);output.append("</span>")}output.append("</div></footer>");jive.browse.user.flipperControl(opt_data.prop,output);output.append("</div>");var param140=new soy.StringBuilder('<div class="j-thumb-back face card-back" aria-hidden="true"><h4 class="font-color-white">',soy.$$escapeHtml(opt_data.subject),'</h4><ul class="j-social-actions j-icon-list">');if(opt_data.prop.connections&&opt_data.prop.connections.followLinkShown){param140.append("<li>");jive.people.profile.followLink(soy.$$augmentMap(opt_data.prop.connections,
{targetUserID:opt_data.id,targetUserDisplayName:opt_data.subject,hideFollowingCount:true,darkButton:true,renderLocation:"browse",streamsAssociatedCount:opt_data.prop.connections.streamsAssociatedBean?opt_data.prop.connections.streamsAssociatedBean.streamIDs.length:0}),param140);param140.append("</li>")}param140.append(opt_data.prop.directMessageActionLinkShown?'<li><a href="#" class="js-create-direct-message j-social-action"><span><span class="jive-icon-med jive-icon-direct-message"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13b4"),
[]))+"</span></a></li>":"",opt_data.prop.discussionActionInfo&&opt_data.prop.discussionActionInfo.linkShown?'<li><a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,opt_data.prop.discussionActionInfo.link)))+'" class="j-social-action js-link-cur-loc-param" data-cur-loc-param-name="cancelURL"><span><span class="jive-icon-med jive-icon-discussion"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13b5"),[]))+"</span></a></li>":"",
'</ul><a href="#" class="j-back-btn"><span class="jive-icon-glyph icon-angle-left"></span> ',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1fee"),[])),"</a></div>");jive.browse.user.flippable(soy.$$augmentMap(opt_data.prop,{body:param140.toString()}),output);output.append("</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.container.flippable");jive.browse.container.flippable=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.followInfo&&opt_data.followInfo.showFollowControls||opt_data.shareInfo&&opt_data.shareInfo.shareable||opt_data.socialGroupInfo?soy.$$filterNoAutoescape(opt_data.body):"");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.container.cardBack");
jive.browse.container.cardBack=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var param3=new soy.StringBuilder('<div class="j-thumb-back face card-back" aria-hidden="true"><header><h6 class="font-color-white"><img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/9.0.2.8500fd4/","","/images/transparent.png")),'" alt="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("global.access.content.type."+opt_data.type)),[])),'" class="',
soy.$$escapeHtml(opt_data.iconCss),' jive-icon-med" /> ',soy.$$escapeHtml(opt_data.subject),"</h6>",opt_data.prop.parentInfo?'<p class="j-browse-content-location font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20a0"),[]))+' <a href="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.prop.parentInfo.link))+'" class="font-color-meta-light jivecontainerTT-hover-container" data-objectId="'+soy.$$escapeHtml(opt_data.prop.parentInfo.id)+'" data-objectType="'+
soy.$$escapeHtml(opt_data.prop.parentInfo.type)+'">'+soy.$$escapeHtml(opt_data.prop.parentInfo.subject)+"</a></p>":"","</header>",opt_data.prop.descSnippet?'<article class="font-color-meta-light j-browse-place-description"><span>'+soy.$$escapeHtml(opt_data.prop.descSnippet)+"</span></article>":"",'<ul class="j-social-actions j-icon-list">');if(opt_data.prop.followInfo&&opt_data.prop.followInfo.showFollowControls){param3.append('<li class="j-js-follow-controls" data-location="browse" data-streamsassoc="',
soy.$$escapeHtml(opt_data.prop.followInfo.streamsAssociatedBean.streamIDs.length),'" aria-live="polite" aria-atomic="true"><span class="start-follow"><a class="button j-follow-button j-social-action" href="#" data-objecttype="',soy.$$escapeHtml(opt_data.type),'" data-objectid="',soy.$$escapeHtml(opt_data.id),'" ',opt_data.prop.followInfo.followed?'style="display: none;"':"",'><span class="jive-icon-glyph icon-plus-circle2"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13ae"),[])),
'</a></span><span class="following"><a class="button j-follow-button j-social-action" href="#" data-objecttype="',soy.$$escapeHtml(opt_data.type),'" data-objectid="',soy.$$escapeHtml(opt_data.id),'" ',!opt_data.prop.followInfo.followed?'style="display: none;"':"",'><span class="jive-icon-glyph icon-plus-circle2"></span>');jive.people.profile.followingAssociatedStreamCount({count:opt_data.prop.followInfo.streamsAssociatedBean.streamIDs.length,renderLocation:"browse"},param3);param3.append("</a></span></li>")}if(opt_data.prop.shareInfo&&
opt_data.prop.shareInfo.shareable){param3.append("<li>");jive.soy.share.control({objectId:opt_data.id,objectType:opt_data.type,type:"largeButton",icon:true,classes:"button j-social-action"},param3);param3.append("<li>")}param3.append(opt_data.prop.socialGroupInfo&&!opt_data.prop.socialGroupInfo.owner?'<li><a href="#" class="button j-social-action sgroup-join" data-objectid="'+soy.$$escapeHtml(opt_data.id)+'" '+(opt_data.prop.socialGroupInfo.member||opt_data.prop.socialGroupInfo.pendingApproval?' style="display: none;" ':
"")+'><span><span class="jive-icon-glyph icon-plus-circle2"></span>'+(opt_data.prop.socialGroupInfo.requestToJoin?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13b3"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13af"),[])))+'</span></a><a href="#" class="button j-social-action sgroup-leave" data-objectid="'+soy.$$escapeHtml(opt_data.id)+'" '+(!(opt_data.prop.socialGroupInfo.member||opt_data.prop.socialGroupInfo.pendingApproval)?' style="display: none;" ':"")+'><span><span class="jive-icon-glyph icon-minus-circle2"></span>'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13b1"),[]))+"</span></a></li>":"",'</ul><a href="#" class="j-back-btn"><span class="jive-icon-glyph icon-angle-left"></span> ',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1fee"),[])),"</a></div>");jive.browse.container.flippable(soy.$$augmentMap(opt_data.prop,{body:param3.toString()}),output);return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.container.detailContainerHeader");
jive.browse.container.detailContainerHeader=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<thead><tr><th colspan="2"><strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1490"),[])),'</strong></th><th><strong class="font-color-meta-light">',opt_data.columns&&opt_data.columns.creationDate?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1485"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k148b"),[])),
'</strong></th><th class="number"><strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1487"),[])),'</strong></th><th class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1480"),[])),"</th></tr></thead>");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.container.projectStatusMessage");
jive.browse.container.projectStatusMessage=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.prop.projectInfo?'<span class="font-color-meta j-proj-status-text-details">'+(opt_data.prop.projectInfo.archived?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14f4"),[])):opt_data.prop.projectInfo.complete?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14f5"),[])):opt_data.prop.projectInfo.overdue?opt_data.prop.projectInfo.years>0?opt_data.prop.projectInfo.years==
1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1499"),[opt_data.prop.projectInfo.years])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1498"),[opt_data.prop.projectInfo.years])):opt_data.prop.projectInfo.months>0?opt_data.prop.projectInfo.months==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14ba"),[opt_data.prop.projectInfo.months])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14b9"),[opt_data.prop.projectInfo.months])):opt_data.prop.projectInfo.days==1||
opt_data.prop.projectInfo.days==0?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1499"),[1])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1498"),[opt_data.prop.projectInfo.days])):opt_data.prop.projectInfo.years?opt_data.prop.projectInfo.years==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14dd"),[opt_data.prop.projectInfo.years])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14dc"),[opt_data.prop.projectInfo.years])):opt_data.prop.projectInfo.months?opt_data.prop.projectInfo.months==
1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14bc"),[opt_data.prop.projectInfo.months])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14bb"),[opt_data.prop.projectInfo.months])):opt_data.prop.projectInfo.days==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k149b"),[opt_data.prop.projectInfo.days])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k149a"),[opt_data.prop.projectInfo.days])))+"</span>":"");return opt_sb?"":output.toString()};
;
goog.provide("jive.shared.displayutil.renderAttachmentLink");
jive.shared.displayutil.renderAttachmentLink=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.object.meta&&opt_data.object.meta.length>0&&opt_data.object.meta[0].fullImageUrl?'<a href="'+soy.$$escapeHtml(opt_data.object.meta[0].fullImageUrl)+'" class="jive-icon-med jive-icon-photo" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2f5a"),[]))+'" aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2f5a"),[]))+'"></a>':"");return opt_sb?
"":output.toString()};
;
goog.provide("jive.browse.container.detailContainerItem");
jive.browse.container.detailContainerItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<tr class="j-place-row js-browse-item" data-object-type="',soy.$$escapeHtml(opt_data.type),'" data-object-id="',soy.$$escapeHtml(opt_data.id),'"><td class="j-td-icon"><img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/9.0.2.8500fd4/","","/images/transparent.png")),'" alt="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("global.access.content.type."+opt_data.type)),
[])),'" class="',soy.$$escapeHtml(opt_data.iconCss),' jive-icon-big" /></td><td class="j-td-title"><a href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.link)),'" class="jivecontainerTT-hover-container j-browse-title" data-objectId="',soy.$$escapeHtml(opt_data.id),'" data-objectType="',soy.$$escapeHtml(opt_data.type),'">',soy.$$escapeHtml(opt_data.subject),"</a>",opt_data.prop.projectInfo&&!opt_data.prop.projectInfo.archived?'<span class="font-color-meta-light j-browse-proj-status"> - <strong class="j-proj-status font-color-status-'+
soy.$$escapeHtml(opt_data.prop.projectInfo.statusKey)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("project.status.type."+opt_data.prop.projectInfo.statusKey)),[]))+"</strong></span>":"");if(opt_data.prop.projectInfo&&opt_data.prop.projectInfo.archived){output.append("<span> - <strong>");jive.browse.container.projectStatusMessage(opt_data,output);output.append("</strong></span>")}output.append(opt_data.prop.socialGroupInfo&&opt_data.prop.socialGroupInfo.typeName?'<span class="font-color-meta-light j-browse-group-type"> - '+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("sgroup."+opt_data.prop.socialGroupInfo.typeName)),[]))+"</span>":"",opt_data.prop.isVisibleToPartner?'<span class="font-color-meta-light j-browse-external-access"> - <em>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2968"),[]))+"</em></span>":"",opt_data.prop.childInfo&&opt_data.prop.childInfo.hasChildren?'<span class="font-color-meta-light j-browse-subspaces"> - <a href="#" class="j-sub-spaces j-view-children font-color-meta-light" data-activity-type="children" data-objecttype="'+
soy.$$escapeHtml(opt_data.type)+'" data-objectid="'+soy.$$escapeHtml(opt_data.id)+'">'+(opt_data.prop.childInfo.numChildren==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14d6"),[1])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14d5"),[opt_data.prop.childInfo.numChildren])))+"</a></span>":"");if(opt_data.prop.socialGroupInfo&&opt_data.prop.socialGroupInfo.numMembers){output.append('<p class="j-browse-content-location font-color-meta-light">');var param70=new soy.StringBuilder;
jive.shared.soy.getCountTextByType({count:opt_data.prop.socialGroupInfo?soy.$$escapeHtml(opt_data.prop.socialGroupInfo.numMembers):"0",type:"showmembercount"},param70);jive.eae.acclaim.count({command:"showMembers",count:opt_data.prop.socialGroupInfo?soy.$$escapeHtml(opt_data.prop.socialGroupInfo.numMembers):"0",objectId:opt_data.id,objectType:opt_data.type,text:opt_data.prop.socialGroupInfo.numMembers==1?jive.i18n.i18nText(jive.i18n.getMsg("k14b4"),[new soydata.VERY_UNSAFE.ordainSanitizedHtml("<strong>1</strong>")]):
jive.i18n.i18nText(jive.i18n.getMsg("k14b3"),[new soydata.VERY_UNSAFE.ordainSanitizedHtml("<strong>"+opt_data.prop.socialGroupInfo.numMembers+"</strong>")]),accessibilityLinkLabel:param70.toString()},output);output.append(opt_data.prop.isVisibleToPartner?" ("+(opt_data.prop.socialGroupInfo.numPartners==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14b2"),[1])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14b1"),[opt_data.prop.socialGroupInfo.numPartners])))+")":"","</p>")}else output.append(opt_data.prop.parentInfo?
'<p class="j-browse-content-location font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20a0"),[]))+' <a href="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.prop.parentInfo.link))+'" class="font-color-meta-light jivecontainerTT-hover-container" data-objectId="'+soy.$$escapeHtml(opt_data.prop.parentInfo.id)+'" data-objectType="'+soy.$$escapeHtml(opt_data.prop.parentInfo.type)+'">'+soy.$$escapeHtml(opt_data.prop.parentInfo.subject)+"</a></p>":
"");output.append("</td>",opt_data.columns&&opt_data.columns.creationDate?'<td class="j-td-date font-color-meta">'+soy.$$escapeHtml(opt_data.creationDate?_jive_moment(parseFloat(opt_data.creationDate)?parseFloat(opt_data.creationDate):opt_data.creationDate).add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("LLL"):"")+"</td>":'<td class="j-td-activity font-color-meta j-act">'+(opt_data.prop.latestActivity?opt_data.prop.latestActivity.creationTime?' <span class="font-color-meta-light">'+
soy.$$escapeHtml(opt_data.prop.latestActivity.creationTime)+"</span> ":"":"")+"</td>",'<td class="j-td-followers number font-color-meta">');if(opt_data.prop.followInfo){var param132=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:opt_data.prop.followInfo&&opt_data.prop.followInfo.numFollowers?soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers):"0",type:"showfollowcount"},param132);jive.eae.acclaim.count({command:"showFollowers",count:opt_data.prop.followInfo.numFollowers?soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers):
"0",objectId:opt_data.id,objectType:opt_data.type,accessibilityLinkLabel:param132.toString()},output)}output.append('</td><td class="j-td-actions">');var param143=new soy.StringBuilder('<a href="#" class="j-browse-action-button" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1fcd"),[])),'"><span class="jive-icon-glyph icon-gear"></span><span class="jive-icon-glyph icon-arrow-down2"></span><span class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13aa"),[])),
'</span></a><div class="j-menu j-quick-menu j-js-browse-actions-container" style="display: none"><ul>');if(opt_data.prop.followInfo&&opt_data.prop.followInfo.showFollowControls){param143.append('<li class="j-js-follow-controls" data-location="browse" data-streamsassoc="',soy.$$escapeHtml(opt_data.prop.followInfo.streamsAssociatedBean.streamIDs.length),'" aria-live="polite" aria-atomic="true"><span class="start-follow"><a href="#" class="j-follow-button lnk" data-objecttype="',soy.$$escapeHtml(opt_data.type),
'" data-objectid="',soy.$$escapeHtml(opt_data.id),'"',opt_data.prop.followInfo.followed?' style="display:none" ':"",">",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13ae"),[])),'</a></span><span class="following"><a href="#" class="j-follow-button lnk" data-objecttype="',soy.$$escapeHtml(opt_data.type),'" data-objectid="',soy.$$escapeHtml(opt_data.id),'"',!opt_data.prop.followInfo.followed?' style="display:none" ':"",">");jive.people.profile.followingAssociatedStreamCount({count:opt_data.prop.followInfo.streamsAssociatedBean.streamIDs.length,
renderLocation:"browse"},param143);param143.append("</a></span></li>")}if(opt_data.prop.shareInfo&&opt_data.prop.shareInfo.shareable){param143.append("<li>");jive.soy.share.control({objectId:opt_data.id,objectType:opt_data.type,type:"text"},param143);param143.append("</li>")}param143.append(opt_data.prop.socialGroupInfo&&!opt_data.prop.socialGroupInfo.owner?'<li><a href="#" class="sgroup-join j-follow-button" data-objectid="'+soy.$$escapeHtml(opt_data.id)+'"'+(opt_data.prop.socialGroupInfo.member||
opt_data.prop.socialGroupInfo.pendingApproval?' style="display:none" ':"")+">"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13af"),[]))+'</a><a href="#" class="sgroup-leave j-follow-button" data-objectid="'+soy.$$escapeHtml(opt_data.id)+'"'+(!(opt_data.prop.socialGroupInfo.member||opt_data.prop.socialGroupInfo.pendingApproval)?' style="display:none" ':"")+">"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13b1"),[]))+"</a></li>":"","</ul></div>");jive.browse.container.flippable(soy.$$augmentMap(opt_data.prop,
{body:param143.toString()}),output);output.append("</td>");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.container.flippable");goog.provide("jive.browse.container.flipperControl");jive.browse.container.flippable=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.followInfo&&opt_data.followInfo.showFollowControls||opt_data.shareInfo&&opt_data.shareInfo.shareable||opt_data.socialGroupInfo?soy.$$filterNoAutoescape(opt_data.body):"");return opt_sb?"":output.toString()};
jive.browse.container.flipperControl=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.browse.container.flippable(soy.$$augmentMap(opt_data,{body:'<a href="#" class="j-card-flipper j-ui-elem">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1fcd"),[]))+"</a>"}),output);return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.container.hierarchyContainerItem");
jive.browse.container.hierarchyContainerItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.prop.beforeInfo?'<li class="j-hierarchy-more" data-index-end="'+soy.$$escapeHtml(opt_data.prop.beforeInfo)+'" data-parent-objectid="'+soy.$$escapeHtml(opt_data.prop.parentInfo.id)+'" data-direction="0"><a href="#" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14ac"),[]))+'" ><span class="j-more-label j-rc6">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14aa"),
[]))+"</span></a></li>":"",'<li class="j-hierarchy-item" data-object-type="',soy.$$escapeHtml(opt_data.type),'" data-object-id="',soy.$$escapeHtml(opt_data.id),'">',opt_data.prop.perms.allowedToView?'<a href="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.link))+'" class="j-anchor-icon jivecontainerTT-hover-container" data-objectid="'+soy.$$escapeHtml(opt_data.id)+'" data-objecttype="'+soy.$$escapeHtml(opt_data.type)+'">':"",!opt_data.omitIcon?'<span class="'+soy.$$escapeHtml(opt_data.iconCss)+
' jive-icon-med"></span>':"","<strong>",soy.$$escapeHtml(opt_data.subject),"</strong>",opt_data.prop.perms.allowedToView?"</a>":"",opt_data.prop.recursiveContentCount?' <span class="font-color-meta j-content-count">'+(opt_data.prop.recursiveContentCount.count==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14a7"),[opt_data.prop.recursiveContentCount.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14a6"),[opt_data.prop.recursiveContentCount.count])))+"</span>":"",opt_data.prop.childInfo&&
opt_data.prop.childInfo.hasTraversableChildren?'<div class="j-td-spaceactions"><a href="#" class="j-sub-spaces j-view-children" data-activity-type="children" data-objecttype="'+soy.$$escapeHtml(opt_data.type)+'" data-objectid="'+soy.$$escapeHtml(opt_data.id)+'" ><span class="j-show-children-msg"'+(opt_data.prop.childInfo.children?'style="display:none"':"")+">"+(opt_data.prop.childInfo.numTraversableChildren==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14ae"),[opt_data.prop.childInfo.numTraversableChildren])):
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14ad"),[opt_data.prop.childInfo.numTraversableChildren])))+'</span><span class="j-hide-children-msg"'+(!opt_data.prop.childInfo.children?'style="display:none"':"")+">"+(opt_data.prop.childInfo.numTraversableChildren==1?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14a9"),[opt_data.prop.childInfo.numTraversableChildren])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14a8"),[opt_data.prop.childInfo.numTraversableChildren])))+
"</span></a></div>":"",'<ul class="j-hierarchy-child-holder"',opt_data.prop.childInfo.children?'data-children-loaded="true" ':' style="display:none"','><div class="j-hierarchy-child-expanded j-ui-elem"> </div>');if(opt_data.prop.childInfo&&opt_data.prop.childInfo.children){var childList84=opt_data.prop.childInfo.children;var childListLen84=childList84.length;for(var childIndex84=0;childIndex84<childListLen84;childIndex84++){var childData84=childList84[childIndex84];jive.browse.container.hierarchyContainerItem(soy.$$augmentMap(childData84,
{omitIcon:opt_data.omitIcon}),output)}}output.append("</ul></li>",opt_data.prop.afterInfo?'<li class="j-hierarchy-more" data-index-start="'+soy.$$escapeHtml(opt_data.prop.afterInfo)+'" data-parent-objectid="'+soy.$$escapeHtml(opt_data.prop.parentInfo.id)+'" data-direction="1"><a href="#" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14ab"),[]))+'" ><span class="j-more-label j-rc6">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14aa"),[]))+"</span></a></li>":"");return opt_sb?
"":output.toString()};
;
goog.provide("jive.browse.container.thumbnailBlogItem");jive.browse.container.thumbnailBlogItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="card">Currently Blog containers do not have a visual representation and are not rendered in browse UI.</div>');return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.container.thumbnailProjectItem");
jive.browse.container.thumbnailProjectItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="card"><div class="j-thumb j-place-thumb j-project-thumb j-rc4 js-browse-item face card-front ');jive.browse.container.flippable(soy.$$augmentMap(opt_data.prop,{body:"flippable"}),output);output.append('" data-object-type="',soy.$$escapeHtml(opt_data.type),'" data-object-id="',soy.$$escapeHtml(opt_data.id),'"><header class="js-thumb-header"><h4><a class="j-place-name" href="',
soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.link)),'" title="',soy.$$escapeHtml(opt_data.subject),'">',opt_data.prop.projectInfo.statusKey?'<span class="jive-icon-project-status-'+soy.$$escapeHtml(opt_data.prop.projectInfo.statusKey)+' jive-icon-med" role="img" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("global.access.content.type."+opt_data.type)),[]))+'"></span>':"",'<span class="js-header-text">',soy.$$escapeHtml(opt_data.subject),
'</span></a></h4></header><section><a href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.link)),'" class="j-place-photo j-project-photo">',opt_data.prop.placeImage&&opt_data.prop.placeImage.urlMedium?'<img src="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.prop.placeImage.urlMedium))+'" alt="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3039"),[]))+'" width="200"/>':"",'<div class="j-status-bar"><span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14d4"),
[])),' </span><span class="j-proj-status-text"><strong class="j-proj-status font-color-status-',soy.$$escapeHtml(opt_data.prop.projectInfo.statusKey),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("project.status.type."+opt_data.prop.projectInfo.statusKey)),[])),'</strong></span></div></a><div class="j-place-info clearfix ',opt_data.prop.isVisibleToPartner?"j-external":"",'">');if(opt_data.prop.followInfo){output.append('<div><span class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1487"),
[])),"</span><br/>");var param59=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:opt_data.prop.followInfo&&opt_data.prop.followInfo.numFollowers?soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers):"0",type:"showfollowcount"},param59);jive.eae.acclaim.count({command:"showFollowers",count:opt_data.prop.followInfo.numFollowers?soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers):"0",objectId:opt_data.id,objectType:opt_data.type,accessibilityLinkLabel:param59.toString()},output);
output.append("</div>")}output.append('<div><span class="font-color-meta-light">',opt_data.prop.projectInfo.overdue?'<span class="font-color-normal">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14bd"),[]))+"</span>":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14d8"),[])),"</span><br/>");if(opt_data.prop.projectInfo){output.append("<span><strong>");jive.browse.container.projectStatusMessage(opt_data,output);output.append("</strong></span>")}output.append("</div>",opt_data.prop.isVisibleToPartner?
'<div class="j-browse-external-access"><span class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k296a"),[]))+'</span><br/><span class=""><span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2968"),[]))+'"></span></span></div>':"","</div>",opt_data.prop.descSnippet?'<article class="font-color-meta"><span>'+soy.$$escapeHtml(opt_data.prop.descSnippet)+"</span></article>":"","</section>");jive.browse.container.flipperControl(opt_data.prop,
output);output.append("</div>");jive.browse.container.cardBack(opt_data,output);output.append("</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.container.thumbnailSocialGroupItem");
jive.browse.container.thumbnailSocialGroupItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="card"><div class="j-thumb j-place-thumb j-group-thumb j-rc4 js-browse-item face card-front ');jive.browse.container.flippable(soy.$$augmentMap(opt_data.prop,{body:"flippable"}),output);output.append('" data-object-type="',soy.$$escapeHtml(opt_data.type),'" data-object-id="',soy.$$escapeHtml(opt_data.id),'"><header class="js-thumb-header"><h4><a class="j-place-name" href="',
soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.link)),'" title="',soy.$$escapeHtml(opt_data.subject),'"><span class="',soy.$$escapeHtml(opt_data.iconCss),' jive-icon-med" role="img" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("global.access.content.type."+opt_data.type)),[])),'"></span><span class="js-header-text">',soy.$$escapeHtml(opt_data.subject),'</span></a></h4></header><section><a href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,
opt_data.link)),'" class="j-place-photo j-space-photo">',opt_data.prop.placeImage&&opt_data.prop.placeImage.urlMedium?'<img src="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.prop.placeImage.urlMedium))+'" alt="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k395c"),[]))+'" width="200"/>':"",'</a><div class="j-place-info clearfix">');if(opt_data.prop.followInfo||opt_data.prop.socialGroupInfo||opt_data.prop.isVisibleToPartner){if(opt_data.prop.followInfo){output.append('<div><span class="font-color-meta-light">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1487"),[])),"</span><br/>");var param47=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:opt_data.prop.followInfo&&opt_data.prop.followInfo.numFollowers?soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers):"0",type:"showfollowcount"},param47);jive.eae.acclaim.count({command:"showFollowers",count:opt_data.prop.followInfo.numFollowers?soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers):"0",objectId:opt_data.id,objectType:opt_data.type,
accessibilityLinkLabel:param47.toString()},output);output.append("</div>")}if(opt_data.prop.socialGroupInfo){output.append('<div><span class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14b7"),[])),"</span><br/>");var param72=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:opt_data.prop.socialGroupInfo?soy.$$escapeHtml(opt_data.prop.socialGroupInfo.numMembers):"0",type:"showmembercount"},param72);jive.eae.acclaim.count({command:"showMembers",count:opt_data.prop.socialGroupInfo?
soy.$$escapeHtml(opt_data.prop.socialGroupInfo.numMembers):"0",objectId:opt_data.id,objectType:opt_data.type,accessibilityLinkLabel:param72.toString()},output);output.append("</div>")}if(opt_data.prop.isVisibleToPartner){output.append('<div><span class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14b6"),[])),"</span><br/>");jive.eae.acclaim.count({command:"showExternalContributorMembers",count:opt_data.prop.socialGroupInfo?soy.$$escapeHtml(opt_data.prop.socialGroupInfo.numPartners):
"0",objectId:opt_data.id,objectType:opt_data.type},output);output.append("</div>")}}output.append('</div></section><footer><div class="j-thumb-footer clearfix">',opt_data.prop.latestActivity&&opt_data.prop.latestActivity.creationTime?'<span class="j-latest-activity font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k148c"),[]))+" "+soy.$$escapeHtml(opt_data.prop.latestActivity.creationDate?_jive_moment(parseFloat(opt_data.prop.latestActivity.creationDate)?parseFloat(opt_data.prop.latestActivity.creationDate):
opt_data.prop.latestActivity.creationDate).add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("l"):"")+"</span>":"",'<ul class="j-type">',opt_data.prop.isVisibleToPartner?'<li><span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2968"),[]))+'"></span></li>':"",opt_data.prop.socialGroupInfo&&opt_data.prop.socialGroupInfo.typeName?'<li><span class="jive-icon-sml jive-icon-group-'+soy.$$escapeHtml(opt_data.prop.socialGroupInfo.typeName)+
'-glyph" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("browse.info.sgroup."+opt_data.prop.socialGroupInfo.typeName)),[]))+'"></span></li>':"","</ul></div></footer>");jive.browse.container.flipperControl(opt_data.prop,output);output.append("</div>");jive.browse.container.cardBack(opt_data,output);output.append("</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.container.thumbnailSpaceItem");
jive.browse.container.thumbnailSpaceItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="card"><div class="j-thumb j-place-thumb j-space-thumb j-rc4 js-browse-item face card-front ');jive.browse.container.flippable(soy.$$augmentMap(opt_data.prop,{body:"flippable"}),output);output.append('" data-object-type="',soy.$$escapeHtml(opt_data.type),'" data-object-id="',soy.$$escapeHtml(opt_data.id),'"><header class="js-thumb-header"><h4><a class="j-place-name" href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,
opt_data.link)),'" title="',soy.$$escapeHtml(opt_data.subject),'"><span class="',soy.$$escapeHtml(opt_data.iconCss),' jive-icon-med" role="img" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("global.access.content.type."+opt_data.type)),[])),'"></span><span class="js-header-text">',soy.$$escapeHtml(opt_data.subject),'</span></a></h4></header><section><a href="',soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.link)),'" class="j-place-photo j-space-photo">',
opt_data.prop.placeImage&&opt_data.prop.placeImage.urlMedium?'<img src="'+soy.$$escapeHtml(jive.soy.func.buildUrl(window._jive_base_url,opt_data.prop.placeImage.urlMedium))+'" alt="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k160d"),[]))+'" width="200"/>':"",'</a><div class="j-place-info clearfix"><div><span class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1487"),[])),"</span><br/>");var param42=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:opt_data.prop.followInfo&&
opt_data.prop.followInfo.numFollowers?soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers):"0",type:"showfollowcount"},param42);jive.eae.acclaim.count({command:"showFollowers",count:opt_data.prop.followInfo&&opt_data.prop.followInfo.numFollowers?soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers):"0",objectId:opt_data.id,objectType:opt_data.type,accessibilityLinkLabel:param42.toString()},output);output.append("</div>",opt_data.prop.childInfo&&opt_data.prop.childInfo.hasChildren?'<div><span class="font-color-meta-light">'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14d7"),[]))+'</span><br/><a href="#" class="j-sub-spaces j-view-children" data-activity-type="children" data-objecttype="'+soy.$$escapeHtml(opt_data.type)+'" data-objectid="'+soy.$$escapeHtml(opt_data.id)+'">'+soy.$$escapeHtml(opt_data.prop.childInfo.numChildren)+"</a></div>":"","</div>",opt_data.prop.descSnippet?'<article class="font-color-meta"><span>'+soy.$$escapeHtml(opt_data.prop.descSnippet)+"</span></article>":"","</section>");jive.browse.container.flipperControl(opt_data.prop,
output);output.append("</div>");jive.browse.container.cardBack(opt_data,output);output.append("</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.soy.share.removeContentPlaceLinkControl");jive.soy.share.removeContentPlaceLinkControl=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href="#" class="js-delete-content-place-rel button lnk" data-command="deleteContentPlaceRel" data-relationship-id="',soy.$$escapeHtmlAttribute(opt_data.contentPlaceRelationship.relationshipID),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3aba"),[])),"</a>");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.content.detailActionPanel");
jive.browse.content.detailActionPanel=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<a href="#" class="j-browse-action-button" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k1fcd"),[])),'"><span class="jive-icon-glyph icon-gear"></span><span class="jive-icon-glyph icon-arrow-down2"></span><span class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13aa"),[])),'</span></a><div class="j-menu j-quick-menu j-js-browse-actions-container" style="display: none"><ul>');
if(opt_data.prop.followInfo&&opt_data.prop.followInfo.showFollowControls){output.append('<li class="j-js-follow-controls" data-location="browse" data-streamsassoc="',soy.$$escapeHtmlAttribute(opt_data.prop.followInfo.streamsAssociatedBean.streamIDs.length),'"><span class="start-follow"><a class="button j-follow-button lnk" href="#" data-objecttype="',soy.$$escapeHtmlAttribute(opt_data.type),'" data-objectid="',soy.$$escapeHtmlAttribute(opt_data.id),'" ',opt_data.prop.followInfo.followed?'style="display: none;"':
"",">",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13ae"),[])),'</a></span><span class="following"><a class="button j-follow-button lnk" href="#" data-objecttype="',soy.$$escapeHtmlAttribute(opt_data.type),'" data-objectid="',soy.$$escapeHtmlAttribute(opt_data.id),'" ',!opt_data.prop.followInfo.followed?'style="display: none;"':"",">");jive.people.profile.followingAssociatedStreamCount({count:opt_data.prop.followInfo.streamsAssociatedBean.streamIDs.length,renderLocation:"browse"},output);
output.append("</a></span></li>")}if(opt_data.prop.shareInfo&&opt_data.prop.shareInfo.shareable){output.append("<li>");jive.soy.share.control({objectId:opt_data.id,objectType:opt_data.type,type:"text",contentPlaceRelInfo:opt_data.contentPlaceRelInfo},output);output.append("</li>")}output.append(opt_data.prop.bookmarkInfo&&opt_data.prop.bookmarkInfo.showBookmarkControls?'<li class="js-bookmark" '+(opt_data.prop.bookmarkInfo.bookmarked?'style="display: none;"':"")+'><a class="bookmark-content lnk" data-objecttype="'+
soy.$$escapeHtmlAttribute(opt_data.type)+'" data-objectid="'+soy.$$escapeHtmlAttribute(opt_data.id)+'" href="#"><span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13a9"),[]))+'</span></a></li><li class="js-bookmark" '+(!opt_data.prop.bookmarkInfo.bookmarked?'style="display: none;"':"")+'><a href="#" class="edit-bookmark bookmarked-content lnk" data-objecttype="'+soy.$$escapeHtmlAttribute(opt_data.type)+'" data-objectid="'+soy.$$escapeHtmlAttribute(opt_data.id)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13ad"),
[]))+'</a></li><li class="js-bookmark" '+(!opt_data.prop.bookmarkInfo.bookmarked?'style="display: none;"':"")+'><a href="#" class="unbookmark-content bookmarked-content lnk" data-objecttype="'+soy.$$escapeHtmlAttribute(opt_data.type)+'" data-objectid="'+soy.$$escapeHtmlAttribute(opt_data.id)+'" data-bookmarkid="'+soy.$$escapeHtmlAttribute(opt_data.prop.bookmarkInfo.bookmarkID)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13b2"),[]))+"</a></li>":"");if(opt_data.contentPlaceRelInfo&&
opt_data.contentPlaceRelInfo.removable){output.append('<li class="js-content-place-rel">');jive.soy.share.removeContentPlaceLinkControl({contentPlaceRelationship:opt_data.contentPlaceRelInfo},output);output.append("</li>")}output.append("</ul></ul></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.bookmark.detailBookmarkedItem");
jive.browse.bookmark.detailBookmarkedItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append("<tr data-object-id=",soy.$$escapeHtmlAttributeNospace(opt_data.markedObjectId),' data-object-type="',soy.$$escapeHtmlAttribute(opt_data.markedObjectType),'"><td class="j-td-icon"><img src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,"/9.0.2.8500fd4/","","/images/transparent.png"))),'" alt="" class="',soy.$$escapeHtmlAttribute(opt_data.iconCss),
' jive-icon-big" /></td><td class="j-td-title"><a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,opt_data.link))),'" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k2088"),[])),'">',soy.$$filterNoAutoescape(opt_data.subject),opt_data.prop.privacyInfo&&opt_data.prop.privacyInfo["private"]?'<span src="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,"/images/transparent.png")))+
'" class="jive-icon-sml jive-icon-content-private'+(opt_data.prop.privacyInfo.shared?"-shared":"")+'" title="'+(opt_data.prop.privacyInfo.shared?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k19dc"),[])):soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k19da"),[])))+'" ></span>':"","</a>",opt_data.prop.isVisibleToPartner?'<span class="font-color-meta-light j-browse-external-access"> - '+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2968"),[]))+"</span>":"",
"<div>",opt_data.prop.place?'<p class="j-browse-content-location font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20a0"),[]))+' <a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,opt_data.prop.place.link)))+'" class="font-color-meta-light jivecontainerTT-hover-container" data-objectId="'+soy.$$escapeHtmlAttribute(opt_data.prop.place.id)+'" data-objectType="'+soy.$$escapeHtmlAttribute(opt_data.prop.place.type)+'">'+
soy.$$escapeHtml(opt_data.prop.place.subject)+"</a></p>":"",opt_data.externalURL?'<p class="j-browse-content-location font-color-meta-light"><a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.externalURL))+'" class="font-color-meta-light" title="'+soy.$$escapeHtmlAttribute(opt_data.externalURL)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1224"),[]))+"</a></p>":"",'</div></td><td class="j-td-author font-color-meta">');jive.shared.displayutil.userDisplayNameLink(opt_data.prop.author,
output);output.append("</td>",opt_data.prop.lastActivityDate?'<td class="j-td-date font-color-meta">'+soy.$$escapeHtml(opt_data.prop.lastActivityDate?_jive_moment(parseFloat(opt_data.prop.lastActivityDate)?parseFloat(opt_data.prop.lastActivityDate):opt_data.prop.lastActivityDate).add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("LLL"):"")+"</td>":'<td class="j-td-date font-color-meta">&nbsp;</td>','<td class="j-td-views center font-color-meta number"><span title="',
soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k1493"),[])),'">',opt_data.prop.viewCount>-1?soy.$$escapeHtml(opt_data.prop.viewCount):"&nbsp;",'</span></td><td class="j-td-likes number font-color-meta"><span title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k148d"),[])),'"><span class="jive-icon-sml jive-icon-meta-like"></span>');var param90=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:soy.$$escapeHtml(opt_data.prop.activityInfo?opt_data.prop.activityInfo.likeCount:
0),type:"showlikescount"},param90);jive.eae.acclaim.count({command:"showAcclaim",count:soy.$$escapeHtml(opt_data.prop.activityInfo?opt_data.prop.activityInfo.likeCount:0),acclaimType:"like",objectId:opt_data.markedObjectId,objectType:opt_data.markedObjectType,classes:"j-meta-number",accessibilityLinkLabel:param90.toString()},output);output.append('</span></td><td class="j-td-bookmarks number font-color-meta"><span title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k1482"),[])),
'"><span class="jive-icon-sml jive-icon-meta-bookmark"></span>');var param105=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:soy.$$escapeHtml(opt_data.prop.activityInfo?opt_data.prop.activityInfo.bookmarkCount:0),type:"showbookmarkscount"},param105);jive.eae.acclaim.count({command:"showBookmarks",count:soy.$$escapeHtml(opt_data.prop.activityInfo?opt_data.prop.activityInfo.bookmarkCount:0),objectId:opt_data.markedObjectId,objectType:opt_data.markedObjectType,classes:"j-meta-number",
accessibilityLinkLabel:param105.toString()},output);output.append('</span></td><td class="j-td-replies center font-color-meta number"><span title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k1491"),[])),'"><img src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,"/9.0.2.8500fd4/","","/images/transparent.png"))),'" alt="" class="jive-icon-sml jive-glyph-comment"/>',opt_data.prop.activityInfo?soy.$$escapeHtml(opt_data.prop.activityInfo.replyCount):
"0",'</span></td><td class="j-td-actions">');jive.browse.content.detailActionPanel({id:opt_data.markedObjectId,type:opt_data.markedObjectType,prop:opt_data.prop},output);output.append("</td></tr>");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.bookmark.detailBookmarksHeader");
jive.browse.bookmark.detailBookmarksHeader=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<thead><tr><th colspan="2"><strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1484"),[])),'</strong></th><th><strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1481"),[])),"</strong></th>",opt_data.yourBookmarks?"":"",'  <th><strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1483"),
[])),'</strong></th><th class="number"><strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1493"),[])),'</strong></th><th class="number"><label class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k148d"),[])),'"</label><span role="img" class="jive-icon-glyph icon-thumbs-up font-color-meta-light"></span></th><th class="number"><label class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1482"),[])),'"</label><span role="img" class="jive-icon-glyph icon-bookmark2 font-color-meta-light"></span></th><th class="number"><label class="j-508-label">',
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1491"),[])),'"</label><span role="img" class="jive-icon-glyph icon-reply font-color-meta-light"></span></th><th class="number"><label class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1fcd"),[])),'"</label></th></tr></thead>');return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.bookmark.popularBookmarkText");jive.browse.bookmark.popularBookmarkText=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-sort-meta font-color-meta js-bookmark-popular-text">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey(opt_data.popularRangeKey)),[opt_data.popularCount])),"</div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.content.flippable");jive.browse.content.flippable=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.followInfo&&opt_data.followInfo.showFollowControls||opt_data.shareInfo&&opt_data.shareInfo.shareable||opt_data.bookmarkInfo&&opt_data.bookmarkInfo.showBookmarkControls?soy.$$filterNoAutoescape(opt_data.body):"");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.content.activityInfoBlock");
jive.browse.content.activityInfoBlock=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<ul class="j-stats"><li><span class="jive-icon-sml jive-icon-meta-like"></span>');var param15=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:opt_data.activityInfo?soy.$$escapeHtml(opt_data.activityInfo.likeCount):"0",type:"showlikescount"},param15);jive.eae.acclaim.count({command:"showAcclaim",acclaimType:"like",count:opt_data.activityInfo?soy.$$escapeHtml(opt_data.activityInfo.likeCount):
"0",objectId:opt_data.objectId,objectType:opt_data.objectType,classes:"j-meta-number",accessibilityLinkLabel:param15.toString()},output);output.append('</li><li><span class="jive-icon-sml jive-icon-meta-bookmark"></span>');var param36=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:opt_data.activityInfo?soy.$$escapeHtml(opt_data.activityInfo.bookmarkCount):"0",type:"showbookmarkscount"},param36);jive.eae.acclaim.count({command:"showBookmarks",count:opt_data.activityInfo?soy.$$escapeHtml(opt_data.activityInfo.bookmarkCount):
"0",objectId:opt_data.objectId,objectType:opt_data.objectType,classes:"j-meta-number",accessibilityLinkLabel:param36.toString()},output);output.append("</li><li>");var accessibilityLinkLabel__soy47=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:soy.$$escapeHtml(opt_data.activityInfo?opt_data.activityInfo.replyCount:0),type:"reply"},accessibilityLinkLabel__soy47);accessibilityLinkLabel__soy47=accessibilityLinkLabel__soy47.toString();output.append(accessibilityLinkLabel__soy47?'<label class="j-508-label" id="replies-'+
soy.$$escapeHtmlAttribute(opt_data.objectId)+"-"+soy.$$escapeHtmlAttribute(opt_data.objectType)+'-count-label">'+soy.$$escapeHtml(accessibilityLinkLabel__soy47)+"</label>":"",'<span class="jive-icon-sml jive-icon-meta-comment"></span><a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,opt_data.activityInfo.objectUrl+"#comments"))),'"',accessibilityLinkLabel__soy47?'aria-labelledby="replies-'+soy.$$escapeHtmlAttribute(opt_data.objectId)+"-"+soy.$$escapeHtmlAttribute(opt_data.objectType)+
'-count-label" title="'+soy.$$escapeHtmlAttribute(accessibilityLinkLabel__soy47)+'"':"",">",opt_data.activityInfo?soy.$$escapeHtml(opt_data.activityInfo.replyCount):"0","</a></li></ul>");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.content.flippable");goog.provide("jive.browse.content.flipperControl");jive.browse.content.flippable=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.followInfo&&opt_data.followInfo.showFollowControls||opt_data.shareInfo&&opt_data.shareInfo.shareable||opt_data.bookmarkInfo&&opt_data.bookmarkInfo.showBookmarkControls?soy.$$filterNoAutoescape(opt_data.body):"");return opt_sb?"":output.toString()};
jive.browse.content.flipperControl=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;jive.browse.content.flippable(soy.$$augmentMap(opt_data,{body:'<a href="#" class="j-card-flipper j-ui-elem">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1fcd"),[]))+"</a>"}),output);return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.content.thumbnailActionPanel");
jive.browse.content.thumbnailActionPanel=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<ul class="j-social-actions j-icon-list" role="toolbar" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k13b0"),[])),'">');if(opt_data.prop.followInfo&&opt_data.prop.followInfo.showFollowControls){output.append('<li class="j-js-follow-controls" data-location="browse" data-streamsassoc="',soy.$$escapeHtmlAttribute(opt_data.prop.followInfo.streamsAssociatedBean.streamIDs.length),'" aria-live="polite" aria-atomic="true"><span class="start-follow"><a class="button j-follow-button j-social-action" href="#" data-objecttype="',
soy.$$escapeHtmlAttribute(opt_data.prop.followInfo.objectType),'" data-objectid="',soy.$$escapeHtmlAttribute(opt_data.prop.followInfo.objectID),'" ',opt_data.prop.followInfo.followed?'style="display: none;"':"",'><span class="jive-icon-med jive-icon-follow"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13ae"),[])),'</a></span><span class="following"><a class="button j-follow-button j-social-action" href="#" data-objecttype="',soy.$$escapeHtmlAttribute(opt_data.prop.followInfo.objectType),
'" data-objectid="',soy.$$escapeHtmlAttribute(opt_data.prop.followInfo.objectID),'" ',!opt_data.prop.followInfo.followed?'style="display: none;"':"",'><span class="jive-icon-med jive-icon-follow"></span>');jive.people.profile.followingAssociatedStreamCount({count:opt_data.prop.followInfo.streamsAssociatedBean.streamIDs.length,renderLocation:"browse"},output);output.append("</a></span></li>")}if(opt_data.prop.shareInfo&&opt_data.prop.shareInfo.shareable){output.append("<li>");jive.soy.share.control({objectId:opt_data.id,
objectType:opt_data.type,type:"text",icon:true,classes:"j-social-action"},output);output.append("</li>")}output.append(opt_data.prop.bookmarkInfo&&opt_data.prop.bookmarkInfo.showBookmarkControls?'<li class="js-bookmark"><a class="bookmark-content j-social-action" data-objecttype="'+soy.$$escapeHtmlAttribute(opt_data.type)+'" data-objectid="'+soy.$$escapeHtmlAttribute(opt_data.id)+'" href="#" '+(opt_data.prop.bookmarkInfo.bookmarked?'style="display: none;"':"")+'><span><span class="jive-icon-med jive-icon-bookmark-ribbonaction-grey"></span>'+
soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13a9"),[]))+'</span></a><a class="bookmarked-content j-social-action" data-objecttype="'+soy.$$escapeHtmlAttribute(opt_data.type)+'" data-objectid="'+soy.$$escapeHtmlAttribute(opt_data.id)+'" href="#" '+(!opt_data.prop.bookmarkInfo.bookmarked?'style="display: none;"':"")+'><span><span class="jive-icon-med jive-icon-bookmark-ribbonaction"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13b8"),[]))+'</span></a><div class="js-bookmark-actions j-menu j-quick-menu" style="display: none;"><ul><li><a href="#" class="edit-bookmark lnk" data-objecttype="'+
soy.$$escapeHtmlAttribute(opt_data.type)+'" data-objectid="'+soy.$$escapeHtmlAttribute(opt_data.id)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2054"),[]))+'</a></li><li><a href="#" class="unbookmark-content lnk" data-objecttype="'+soy.$$escapeHtmlAttribute(opt_data.type)+'" data-objectid="'+soy.$$escapeHtmlAttribute(opt_data.id)+'" data-bookmarkid="'+soy.$$escapeHtmlAttribute(opt_data.prop.bookmarkInfo.bookmarkID)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2136"),
[]))+"</a></li></ul></div></li>":"","</ul>");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.bookmark.thumbnailBookmarkedItem");
jive.browse.bookmark.thumbnailBookmarkedItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="card j-small-card" role="article" aria-labelledby="bookmark-subject-',soy.$$escapeHtmlAttribute(opt_data.id),'" ',opt_data.prop.bodysnippet?'aria-describedby="bookmark-notes-'+soy.$$escapeHtmlAttribute(opt_data.id)+'"':"",'><div class="j-content-thumb j-bookmarked-thumb ',opt_data.yourBookmarks?"j-your-bookmark-thumb":""," j-thumb js-browse-item face card-front ");
jive.browse.content.flippable(soy.$$augmentMap(opt_data.prop,{body:"flippable"}),output);output.append('" data-object-type="',soy.$$escapeHtmlAttribute(opt_data.type),'" data-object-id="',soy.$$escapeHtmlAttribute(opt_data.id),'"><header class="js-thumb-header"><h4><label class="j-508-label" id="bookmar-item-',soy.$$escapeHtmlAttribute(opt_data.id),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("global.access.content.type."+opt_data.markedObjectType)),[]))," ",soy.$$filterNoAutoescape(opt_data.subject),
'</label><a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,opt_data.link))),'" title="',soy.$$filterNoAutoescape(opt_data.subject),'" aria-labelledby="bookmar-item-',soy.$$escapeHtmlAttribute(opt_data.id),'"><span title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("global.access.content.type."+opt_data.markedObjectType)),[])),'" class="jive-icon-med ',soy.$$escapeHtmlAttribute(opt_data.iconCss),'" role="img"></span><span class="js-header-text j-header-text" id="bookmark-subject-',
soy.$$escapeHtmlAttribute(opt_data.id),'">',soy.$$filterNoAutoescape(opt_data.subject),"</span></a></h4></header><section>",opt_data.externalURL?'<p class="j-bookmarked-link"><span class="jive-icon-sml jive-icon-link2"></span><a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.externalURL))+'" title="'+soy.$$escapeHtmlAttribute(opt_data.externalURL)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1224"),[]))+"</a></p>":"",opt_data.yourBookmarks?'<p id="bookmark-notes-'+
soy.$$escapeHtmlAttribute(opt_data.id)+'"><span class="jive-icon-sml jive-glyph-notes" role="img" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k127d"),[]))+'"></span>'+(opt_data.prop.bodysnippet?soy.$$filterNoAutoescape(opt_data.prop.bodysnippet):'<em class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13bf"),[]))+"</em>")+"</p>":'<article id="bookmark-notes-'+soy.$$escapeHtmlAttribute(opt_data.id)+'">'+(opt_data.prop.bodysnippet?soy.$$filterNoAutoescape(opt_data.prop.bodysnippet):
"")+"</article>");if(opt_data.prop.bookmarkTags&&opt_data.prop.bookmarkTags.tags&&opt_data.prop.bookmarkTags.tags.length>0){output.append('<p><span class="jive-icon-sml jive-icon-tag"></span>');var tagEntryList83=opt_data.prop.bookmarkTags.tags;var tagEntryListLen83=tagEntryList83.length;for(var tagEntryIndex83=0;tagEntryIndex83<tagEntryListLen83;tagEntryIndex83++){var tagEntryData83=tagEntryList83[tagEntryIndex83];output.append('<a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,
"/tags#/?tags="+tagEntryData83.tag))),'" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k3c11"),[tagEntryData83.tag])),'">',tagEntryData83.abbreviatedTag?soy.$$escapeHtml(tagEntryData83.abbreviatedTag):soy.$$escapeHtml(tagEntryData83.tag),"</a>",!(tagEntryIndex83==tagEntryListLen83-1)?", ":"")}output.append(opt_data.prop.bookmarkTags.tagsRemaining>0?opt_data.yourBookmarks&&opt_data.canEdit?' (<a href="#" class="edit-bookmark" data-objecttype="'+soy.$$escapeHtmlAttribute(opt_data.markedObjectType)+
'" data-objectid="'+soy.$$escapeHtmlAttribute(opt_data.markedObjectId)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13be"),[opt_data.prop.bookmarkTags.tagsRemaining]))+"</a>)":"":"","</p>")}output.append(opt_data.yourBookmarks&&opt_data.canEdit?'<p><span class="jive-icon-sml jive-glyph-edit"></span><a href="#" role="button" class="edit-bookmark" data-objecttype="'+soy.$$escapeHtmlAttribute(opt_data.markedObjectType)+'" data-objectid="'+soy.$$escapeHtmlAttribute(opt_data.markedObjectId)+
'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13bc"),[]))+"</a></p>":"","</section><footer>");if(!opt_data.popularBookmarks&&!opt_data.yourBookmarks){output.append('<div class="j-sort-meta font-color-meta j-author-block" ><span class="j-avatar-container">');jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.prop.author,{size:24}),output);output.append('</span><div class="j-author-info font-color-meta">');var param131=new soy.StringBuilder('<span class="j-line2">');jive.shared.displayutil.userDisplayNameLink(opt_data.prop.author,
param131);param131.append("</span>");jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k13bb"),arg0:soy.$$escapeHtml(new soydata.VERY_UNSAFE.ordainSanitizedHtml("<strong>"+opt_data.creationTime+"</strong>")),arg1:param131.toString(),noAutoEscape:"true"},output);output.append("</div></div>")}if(opt_data.popularBookmarks)jive.browse.bookmark.popularBookmarkText(opt_data,output);output.append(opt_data.yourBookmarks?"":"",'<div class="j-thumb-footer" data-object-id="',soy.$$escapeHtmlAttribute(opt_data.markedObjectId),
'" data-object-type="',soy.$$escapeHtmlAttribute(opt_data.markedObjectType),'">');jive.browse.content.activityInfoBlock(soy.$$augmentMap(opt_data.prop,{objectId:opt_data.markedObjectId,objectType:opt_data.markedObjectType,displaySharedContentCue:opt_data.prop.isVisibleToPartner}),output);output.append('<span class="j-thumb-title-meta">',opt_data.prop.privacyInfo&&opt_data.prop.privacyInfo["private"]?'<span src="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,
"/images/transparent.png")))+'" class="jive-icon-sml jive-icon-content-private'+(opt_data.prop.privacyInfo.shared?"-shared":"")+'" title="'+(opt_data.prop.privacyInfo.shared?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k19dc"),[])):soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k19da"),[])))+'" ></span>':"",opt_data.prop.attachmentInfo&&opt_data.prop.attachmentInfo.hasAttachments?'<span class="jive-icon-sml jive-icon-content-attachment"></span>':"","</span></div></footer>");
jive.browse.content.flipperControl(opt_data.prop,output);output.append('</div><div class="j-thumb-back face card-back j-thumb-back-small" aria-hidden="true"><header><h6 class="font-color-white"><label class="j-508-label" aria-hidden="true">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.access.content.type."+opt_data.type),[]))," ",soy.$$filterNoAutoescape(opt_data.subject),'</label><span class="jive-icon-med ',soy.$$escapeHtmlAttribute(opt_data.iconCss),'"></span>',soy.$$filterNoAutoescape(opt_data.subject),
"</h6></header>");jive.browse.content.thumbnailActionPanel({id:opt_data.markedObjectId,type:opt_data.markedObjectType,prop:opt_data.prop},output);output.append('<a href="#" class="j-back-btn j-ui-elem"><span class="j-ui-elem">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k1fee"),[])),"</span></a></div></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.grid.thumbGrid");
jive.browse.grid.thumbGrid=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<ul class="temp j-browse-thumbnails j-thumb-view">');var itemList4=opt_data.items;var itemListLen4=itemList4.length;if(itemListLen4>0)for(var itemIndex4=0;itemIndex4<itemListLen4;itemIndex4++){var itemData4=itemList4[itemIndex4];output.append('<li class="js-browse-thumbnail" data-object-type="',soy.$$escapeHtml(itemData4.type),'" data-object-id="',soy.$$escapeHtml(itemData4.id),'">');if(opt_data.browseViewID)jive.shared.soy.render({templateName:itemData4.thumbnailTemplate,
data:jQuery.extend({},itemData4,function(){var map={};var pairs=[["browseViewID",opt_data.browseViewID],["columns",opt_data.itemGridDetailsColumns]];for(var i=0;i<pairs.length;i+=1)map[pairs[i][0]]=pairs[i][1];return map}()),failGracefully:false},output);else jive.shared.soy.render({templateName:itemData4.thumbnailTemplate,data:itemData4,failGracefully:false},output);output.append("</li>")}else output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14e0"),[])));output.append("</ul>");
return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.grid.hierarchyItems");
jive.browse.grid.hierarchyItems=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;var itemList3=opt_data.items;var itemListLen3=itemList3.length;if(itemListLen3>0)for(var itemIndex3=0;itemIndex3<itemListLen3;itemIndex3++){var itemData3=itemList3[itemIndex3];jive.browse.container.hierarchyContainerItem(soy.$$augmentMap(itemData3,{omitIcon:opt_data.omitIcons}),output)}else output.append("<li>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14e0"),[])),"</li>");return opt_sb?
"":output.toString()};
;
goog.provide("jive.browse.grid.hierarchyView");jive.browse.grid.hierarchyView=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-browse-details"><ul class="j-browse-hierarchy">');jive.browse.grid.hierarchyItems(opt_data,output);output.append("</ul></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.user.detailUserItem");
jive.browse.user.detailUserItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<tr class="js-browse-row j-people-row ',!opt_data.enabled?"disabled":"",'" data-object-id="',soy.$$escapeHtmlAttribute(opt_data.id),'"  data-object-type="',soy.$$escapeHtmlAttribute(opt_data.type),'"><td class="j-td-avatar ',opt_data.currentUserPartner?"SPECIAL":"",'">');jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data,{size:32,currentUserPartner:opt_data.currentUserPartner,hidePartnerBadge:true}),
output);output.append('</td><td class="j-td-user-info">');jive.shared.displayutil.userDisplayNameLink(opt_data,output);output.append(" ",!opt_data.enabled?' <span class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2194"),[]))+"</span>":"");if(opt_data.prop.isVisibleToPartner)output.append('<p class="font-color-meta-light j-browse-external-access"><em>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k296b"),[])),"</em></p>");else if(opt_data.prop.roleBadgeInfo)jive.shared.displayutil.userRoleBadgeImage(opt_data.prop.roleBadgeInfo,
output);if(opt_data.prop.connections&&opt_data.prop.connections.labelsShown){output.append('<ul class="j-label-dot-list">');var listList38=opt_data.prop.connections.friendLists;var listListLen38=listList38.length;for(var listIndex38=0;listIndex38<listListLen38;listIndex38++){var listData38=listList38[listIndex38];if(listData38.targetUserAMember)jive.browse.user.labelDot(listData38,output)}output.append("</ul>")}output.append('</td><td class="j-td-statuslevel font-color-meta">');if(opt_data.prop.statuslevel&&
opt_data.prop.statuslevel.enabled)jive.people.profile.statusLevel(soy.$$augmentMap(opt_data.prop.statuslevel,{showPoints:true}),output);else output.append("&nbsp;");output.append("</td>",opt_data.columns.dateJoined?'<td class="j-td-date font-color-meta">'+(opt_data.prop.membership?soy.$$escapeHtml(opt_data.prop.membership.memberDate?_jive_moment(parseFloat(opt_data.prop.membership.memberDate)?parseFloat(opt_data.prop.membership.memberDate):opt_data.prop.membership.memberDate).add(_jive_timezoneoffset*
60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("LLL"):""):opt_data.creationDate?soy.$$escapeHtml(opt_data.creationDate?_jive_moment(parseFloat(opt_data.creationDate)?parseFloat(opt_data.creationDate):opt_data.creationDate).add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("LLL"):""):"")+"</td>":"");if(opt_data.prop.connections){if(!opt_data.prop.connections.bidirectional){output.append('<td class="j-td-followers number font-color-meta">');
if(!opt_data.prop.connections.bidirectional&&opt_data.prop.connections.followerCount>=0&&opt_data.enabled&&opt_data.prop.connections.linkFollowCounts){var param74=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:soy.$$escapeHtml(opt_data.prop.connections?opt_data.prop.connections.followerCount:0),type:"showfollowcount"},param74);jive.eae.acclaim.count({command:"showFollowers",count:soy.$$escapeHtml(opt_data.prop.connections?opt_data.prop.connections.followerCount:0),objectId:opt_data.id,
objectType:opt_data.type,classes:"j-user-follow-info",accessibilityLinkLabel:param74.toString()},output)}else output.append("&nbsp;");output.append("</td>")}output.append('<td class="j-td-following number font-color-meta">');if(opt_data.prop.connections.followingCount>=0&&opt_data.enabled&&opt_data.prop.connections.linkFollowCounts){var param92=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:soy.$$escapeHtml(opt_data.prop.connections?opt_data.prop.connections.followingCount:0),type:"showconnectioncount"},
param92);jive.eae.acclaim.count({command:"showConnections",count:soy.$$escapeHtml(opt_data.prop.connections?opt_data.prop.connections.followingCount:0),objectId:opt_data.id,objectType:opt_data.type,classes:"j-user-follow-info",accessibilityLinkLabel:param92.toString()},output)}else output.append("&nbsp;");output.append("</td>")}output.append('<td class="j-td-actions">');if(opt_data.prop.connections&&opt_data.prop.connections.followLinkShown)jive.people.profile.followLink(soy.$$augmentMap(opt_data.prop.connections,
{targetUserID:opt_data.id,targetUserDisplayName:opt_data.subject,hideFollowingCount:true,renderLocation:"browse",streamsAssociatedCount:opt_data.prop.connections.streamsAssociatedBean?opt_data.prop.connections.streamsAssociatedBean.streamIDs.length:0}),output);output.append(opt_data.prop.directMessageActionLinkShown||opt_data.prop.discussionActionInfo&&opt_data.prop.discussionActionInfo.linkShown?'<a href="#" class="j-browse-action-button j-btn-global j-btn-small" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k1fcd"),
[]))+'"><span class="jive-icon-glyph icon-gear"></span><span class="jive-icon-glyph icon-arrow-down2"></span><span class="j-508-label">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13aa"),[]))+"</span></a>":"",'<div class="j-menu j-action-popover j-js-browse-actions-container" style="display: none"><ul>',opt_data.prop.directMessageActionLinkShown?'<li><a href="#" class="j-js-create-direct-message lnk" onclick="require([\'apps/direct_messaging/factory\'], function(DirectMessaging) {DirectMessaging.sendMessageToUserIds(['+
soy.$$escapeHtmlAttribute(soy.$$escapeJsValue(opt_data.id))+']);});return false;"><span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13b4"),[]))+"</span></a></li>":"",opt_data.prop.discussionActionInfo&&opt_data.prop.discussionActionInfo.linkShown?'<li><a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,opt_data.prop.discussionActionInfo.link)))+'" class="js-link-cur-loc-param lnk" data-cur-loc-param-name="cancelURL"><span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k13b5"),
[]))+"</span></a></li>":"","</ul></div></td>",opt_data.columns.latestActivity?'<td class="j-td-activity font-color-meta j-act">'+(opt_data.prop.latestActivity?(opt_data.prop.latestActivity.creationTime?' <span class="font-color-meta-light">'+soy.$$escapeHtml(opt_data.prop.latestActivity.creationTime)+"</span> ":"")+"</div>":"&nbsp;")+"</td>":"","</tr>");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.contentplacerel.detailContentItem");
jive.browse.contentplacerel.detailContentItem=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.prop.contentPlaceRelationship.referencedObject){output.append('<tr class="js-browse-item" data-object-id=',soy.$$escapeHtmlAttributeNospace(opt_data.id),' data-object-type="',soy.$$escapeHtmlAttribute(opt_data.type),'"><td class="j-td-icon"><img src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,"/9.0.2.8500fd4/","","/images/transparent.png"))),
'" alt="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg(jive.i18n.getMinKey("global.access.content.type."+opt_data.prop.contentPlaceRelationship.referencedObject.type)),[])),'" class="',soy.$$escapeHtmlAttribute(opt_data.prop.contentPlaceRelationship.referencedObject.iconCss),' jive-icon-big" /></td><td class="j-td-title"><div><a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,opt_data.prop.contentPlaceRelationship.referencedObject.link))),
'" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k2088"),[])),'">',opt_data.prop.contentPlaceRelationship.referencedObject.hasUnreadReplies?"<strong>":"",soy.$$filterNoAutoescape(opt_data.prop.contentPlaceRelationship.referencedObject.subject),opt_data.prop.contentPlaceRelationship.referencedObject.hasUnreadReplies?"</strong>":"",opt_data.prop.contentPlaceRelationship.referencedObject.privacyInfo&&opt_data.prop.contentPlaceRelationship.referencedObject.privacyInfo["private"]?
'<span src="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,"/images/transparent.png")))+'" class="jive-icon-sml jive-icon-content-private'+(opt_data.prop.contentPlaceRelationship.referencedObject.privacyInfo.shared?"-shared":"")+'" title="'+(opt_data.prop.contentPlaceRelationship.referencedObject.privacyInfo.shared?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k19dc"),[])):soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k19da"),
[])))+'" ></span>':"","</a>",opt_data.prop.isVisibleToPartner?'<span class="font-color-meta-light j-browse-external-access"> - <em>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k2968"),[]))+"</em></span>":"",'<p class="j-browse-content-location font-color-meta-light">');var param52=new soy.StringBuilder;jive.shared.displayutil.userDisplayNameLink(opt_data.prop.author,param52);jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k3ab4"),arg0:param52.toString(),noAutoEscape:true},output);
output.append('</p><p class="j-browse-content-location font-color-meta-light">');if(opt_data.prop.contentPlaceRelationship.referencedObject.prop.place)if(!(opt_data.prop.contentPlaceRelationship.referencedObject.prop.place.type==2020||opt_data.prop.contentPlaceRelationship.referencedObject.prop.place.type==37&&opt_data.prop.contentPlaceRelationship.referencedObject.prop.author))jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k3ab8"),arg0:'<a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,
opt_data.prop.contentPlaceRelationship.referencedObject.prop.place.link)))+'" class="font-color-meta-light jivecontainerTT-hover-container" data-objectId="'+soy.$$escapeHtmlAttribute(opt_data.prop.contentPlaceRelationship.referencedObject.prop.place.id)+'" data-objectType="'+soy.$$escapeHtmlAttribute(opt_data.prop.contentPlaceRelationship.referencedObject.prop.place.type)+'">'+soy.$$escapeHtml(opt_data.prop.contentPlaceRelationship.referencedObject.prop.place.subject)+"</a>",noAutoEscape:true},output);
else{if(opt_data.prop.contentPlaceRelationship.referencedObject.prop.place.type==2020&&!opt_data.prop.contentPlaceRelationship.canViewReferencedObject)output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ab9"),[])))}else output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k3ab9"),[])));output.append('</p></div></td><td class="j-td-author">');if(opt_data.prop.contentPlaceRelationship.referencedObject.prop.author)if(!opt_data.prop.contentPlaceRelationship.referencedObject.prop.isOriginalAuthor){var param86=
new soy.StringBuilder;jive.shared.displayutil.userDisplayNameLink(opt_data.prop.contentPlaceRelationship.referencedObject.prop.author,param86);jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k148a"),arg0:param86.toString(),noAutoEscape:"true"},output)}else jive.shared.displayutil.userDisplayNameLink(opt_data.prop.contentPlaceRelationship.referencedObject.prop.author,output);output.append("</td>");if(opt_data.columns&&opt_data.columns.creationDate)output.append('<td class="j-td-date font-color-meta">',
soy.$$escapeHtml(opt_data.prop.contentPlaceRelationship.referencedObject.creationDate?_jive_moment(parseFloat(opt_data.prop.contentPlaceRelationship.referencedObject.creationDate)?parseFloat(opt_data.prop.contentPlaceRelationship.referencedObject.creationDate):opt_data.prop.contentPlaceRelationship.referencedObject.creationDate).add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("LLL"):""),"</td>");else if(opt_data.prop.lastActivityDate){output.append('<td class="j-td-date font-color-meta">',
soy.$$escapeHtml(opt_data.prop.contentPlaceRelationship.referencedObject.prop.lastActivityDate?_jive_moment(parseFloat(opt_data.prop.contentPlaceRelationship.referencedObject.prop.lastActivityDate)?parseFloat(opt_data.prop.contentPlaceRelationship.referencedObject.prop.lastActivityDate):opt_data.prop.contentPlaceRelationship.referencedObject.prop.lastActivityDate).add(_jive_timezoneoffset*60*60*1E3).lang(_jive_locale.toLowerCase().replace("_","-")).format("LLL"):"")," ");if(opt_data.prop.contentPlaceRelationship.referencedObject.prop.author){output.append('<span class="font-color-meta-light" style="display: none">');
var param108=new soy.StringBuilder;jive.shared.displayutil.userDisplayNameLink(opt_data.prop.contentPlaceRelationship.referencedObject.prop.author,param108);jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml("k2000"),arg0:param108.toString(),noAutoEscape:"true"},output);output.append("</span>")}output.append("</td>")}else output.append("<td></td>");output.append('<td class="j-td-views number font-color-meta"><span title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k1493"),[])),
'">',opt_data.prop.contentPlaceRelationship.referencedObject.prop.viewCount&&opt_data.prop.contentPlaceRelationship.referencedObject.prop.viewCount>-1?soy.$$escapeHtml(opt_data.prop.contentPlaceRelationship.referencedObject.prop.viewCount):"&nbsp;",'</span></td><td class="j-td-likes number font-color-meta"><span title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k148d"),[])),'"><span class="jive-icon-sml jive-icon-meta-like"></span>');if(!opt_data.prop.contentPlaceRelationship.referencedObject.prop.activityInfo.canView)output.append(soy.$$escapeHtml(opt_data.prop.contentPlaceRelationship.referencedObject.prop.activityInfo.likeCount));
else{var param139=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:soy.$$escapeHtml(opt_data.prop.contentPlaceRelationship.referencedObject.prop.activityInfo?opt_data.prop.contentPlaceRelationship.referencedObject.prop.activityInfo.likeCount:0),type:"showlikescount"},param139);jive.eae.acclaim.count({command:"showAcclaim",acclaimType:"like",count:soy.$$escapeHtml(opt_data.prop.contentPlaceRelationship.referencedObject.prop.activityInfo?opt_data.prop.contentPlaceRelationship.referencedObject.prop.activityInfo.likeCount:
0),objectId:opt_data.prop.contentPlaceRelationship.referencedObject.id,objectType:opt_data.prop.contentPlaceRelationship.referencedObject.type,classes:"j-meta-number",accessibilityLinkLabel:param139.toString()},output)}output.append('</span></td><td class="j-td-bookmarks number font-color-meta"><span title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k1482"),[])),'"><span class="jive-icon-sml jive-icon-meta-bookmark"></span>');if(!opt_data.prop.contentPlaceRelationship.referencedObject.prop.activityInfo.canView)output.append(soy.$$escapeHtml(opt_data.prop.contentPlaceRelationship.referencedObject.prop.activityInfo.bookmarkCount));
else{var param158=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:soy.$$escapeHtml(opt_data.prop.contentPlaceRelationship.referencedObject.prop.activityInfo?opt_data.prop.contentPlaceRelationship.referencedObject.prop.activityInfo.bookmarkCount:0),type:"showbookmarkscount"},param158);jive.eae.acclaim.count({command:"showBookmarks",count:soy.$$escapeHtml(opt_data.prop.contentPlaceRelationship.referencedObject.prop.activityInfo?opt_data.prop.contentPlaceRelationship.referencedObject.prop.activityInfo.bookmarkCount:
0),objectId:opt_data.prop.contentPlaceRelationship.referencedObject.id,objectType:opt_data.prop.contentPlaceRelationship.referencedObject.type,classes:"j-meta-number",accessibilityLinkLabel:param158.toString()},output)}output.append('</span></td><td class="j-td-replies number font-color-meta">');var accessibilityLinkLabel__soy165=new soy.StringBuilder;jive.shared.soy.getCountTextByType({count:soy.$$escapeHtml(opt_data.prop.contentPlaceRelationship.referencedObject.prop.activityInfo?opt_data.prop.contentPlaceRelationship.referencedObject.prop.activityInfo.replyCount:
0),type:"reply"},accessibilityLinkLabel__soy165);accessibilityLinkLabel__soy165=accessibilityLinkLabel__soy165.toString();output.append(accessibilityLinkLabel__soy165?'<label class="j-508-label" id="replies-'+soy.$$escapeHtmlAttribute(opt_data.prop.contentPlaceRelationship.referencedObject.id)+"-"+soy.$$escapeHtmlAttribute(opt_data.prop.contentPlaceRelationship.referencedObject.type)+'-count-label">'+soy.$$escapeHtml(accessibilityLinkLabel__soy165)+"</label>":"",'<span title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("k1491"),
[])),'"><img src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,"/9.0.2.8500fd4/","","/images/transparent.png"))),'" alt="" class="jive-icon-sml jive-icon-meta-comment"/><a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(window._jive_base_url,opt_data.prop.activityInfo.objectUrl+"#comments"))),'"',accessibilityLinkLabel__soy165?'aria-labelledby="replies-'+soy.$$escapeHtmlAttribute(opt_data.prop.contentPlaceRelationship.referencedObject.id)+
"-"+soy.$$escapeHtmlAttribute(opt_data.prop.contentPlaceRelationship.referencedObject.type)+'-count-label" title="'+soy.$$escapeHtmlAttribute(accessibilityLinkLabel__soy165)+'"':"",">",opt_data.prop.contentPlaceRelationship.referencedObject.prop.activityInfo?soy.$$escapeHtml(opt_data.prop.contentPlaceRelationship.referencedObject.prop.activityInfo.replyCount):"0",'</a></span></td><td class="j-td-actions">');if(opt_data.prop.contentPlaceRelationship.canViewReferencedObject){var param204=new soy.StringBuilder;
jive.browse.content.detailActionPanel(soy.$$augmentMap(opt_data.prop.contentPlaceRelationship.referencedObject,{contentPlaceRelInfo:opt_data.prop.contentPlaceRelationship}),param204);jive.browse.content.flippable(soy.$$augmentMap(opt_data.prop,{body:param204.toString()}),output)}output.append("</td></tr>")}return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.grid.listGrid");
jive.browse.grid.listGrid=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append('<div class="j-browse-details"><table class="j-browse-list" cellspacing="0" cellpadding="0">');if(opt_data.itemGridDetailsHeaderTemplate)jive.shared.soy.render({templateName:opt_data.itemGridDetailsHeaderTemplate,data:function(){var map={};var pairs=[["columns",opt_data.itemGridDetailsColumns]];for(var i=0;i<pairs.length;i+=1)map[pairs[i][0]]=pairs[i][1];return map}(),failGracefully:false},output);
output.append('<tbody class="j-browse-details-tbody">');var itemList11=opt_data.items;var itemListLen11=itemList11.length;if(itemListLen11>0)for(var itemIndex11=0;itemIndex11<itemListLen11;itemIndex11++){var itemData11=itemList11[itemIndex11];if(opt_data.browseViewID)jive.shared.soy.render({templateName:itemData11.detailTemplate,data:jQuery.extend({},itemData11,function(){var map={};var pairs=[["browseViewID",opt_data.browseViewID],["columns",opt_data.itemGridDetailsColumns],["currentUserPartner",
opt_data.currentUserPartner]];for(var i=0;i<pairs.length;i+=1)map[pairs[i][0]]=pairs[i][1];return map}()),failGracefully:false},output);else jive.shared.soy.render({templateName:itemData11.detailTemplate,data:jQuery.extend({},itemData11,function(){var map={};var pairs=[["currentUserPartner",opt_data.currentUserPartner]];for(var i=0;i<pairs.length;i+=1)map[pairs[i][0]]=pairs[i][1];return map}()),failGracefully:false},output)}else output.append('<tr><td colspan="10">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k14e0"),
[])),"</td></tr>");output.append("</tbody></table></div>");return opt_sb?"":output.toString()};
;
goog.provide("jive.browse.grid.itemGrid");
jive.browse.grid.itemGrid=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;if(opt_data.maxPageReached)jive.browse.grid.maxPageReached(opt_data,output);else if(opt_data.items.length<1&&opt_data.noResultTemplateConfig)jive.shared.soy.render(soy.$$augmentMap(opt_data.noResultTemplateConfig,{failGracefully:false}),output);else if(opt_data.itemViewID==null||opt_data.itemViewID=="thumbnail")jive.browse.grid.thumbGrid(opt_data,output);else if(opt_data.itemViewID=="hierarchy"&&opt_data.hierarchyViewSupported)jive.browse.grid.hierarchyView(opt_data,
output);else jive.browse.grid.listGrid(opt_data,output);return opt_sb?"":output.toString()};
;
goog.provide("jive.onboarding.msgFormatHelper");
jive.onboarding.msgFormatHelper=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.noAutoEscape?soy.$$escapeHtml(jive.i18n.i18nText(opt_data.i18nKey,[new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg0),new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg1),new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg2),new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg3),new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg4),new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg5),
new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg6),new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg7),new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg8),new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg9)])):soy.$$escapeHtml(jive.i18n.i18nText(opt_data.i18nKey,[opt_data.arg0,opt_data.arg1,opt_data.arg2,opt_data.arg3,opt_data.arg4,opt_data.arg5,opt_data.arg6,opt_data.arg7,opt_data.arg8,opt_data.arg9])));return opt_sb?"":output.toString()};
;
goog.provide("jive.onbStep.create_group.pageTips");
jive.onbStep.create_group.pageTips=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder;output.append(opt_data.renderLocation=="group-template"?'<div class="j-tips inline js-onboarding-tip" style="top: -30px;"><div class="d-'+soy.$$escapeHtml(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_group_template_label,[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_group_template_text,
[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 30px"></span></div>':opt_data.renderLocation=="group-name"?'<div class="j-tips inline js-onboarding-tip" style="top: 0;"><div class="d-'+soy.$$escapeHtml(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_groupname_label,[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_groupname_text,
[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 30px"></span></div>':opt_data.renderLocation=="group-img"?'<div class="j-tips inline js-onboarding-tip" style="top: 40px;"><div class="d-'+soy.$$escapeHtml(opt_data.renderLocation)+'-tip"><h4 class="font-color-meta font-face-deco optional">'+soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_flair_label,[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_flair_text2,
[]))+'</p><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_flair_text1,[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 20px"></span><span class="j-tiparrow-e j-tarrow" style="top: 20px; right: -350px;"></span></div>':opt_data.renderLocation=="group-type"?'<div class="j-tips inline p-bar js-onboarding-tip" style="top: -30px; visibility: visible; z-index: 100;"><div class="d-'+soy.$$escapeHtml(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+
soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_type_label,[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_type_text,[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 50px"></span></div>':opt_data.renderLocation=="submit"?'<div class="j-tips inline p-bar js-onboarding-tip" style="top: -10px;"><div class="d-'+soy.$$escapeHtml(opt_data.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_alldone_label,
[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_alldone_text,[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 20px"></span></div>':opt_data.renderLocation=="view-group"?'<div class="j-pop js-pop popover js-onboarding-tip" style="position: absolute; top: 50px; left: 50%; margin-left: -175px; visibility: visible; z-index: 100;"><div class="j-tips wide j-banner-tip d-'+soy.$$escapeHtml(opt_data.renderLocation)+'-tip j-pop-main"><h4 class="j-qtip-header font-face-deco">'+
soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_done_label,[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_done_text,[]))+'</p><p><button class="js-back-to-onb j-btn-callout close">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("k20fc"),[]))+"</button></p></div></div>":"");return opt_sb?"":output.toString()};
;
jive.namespace("Onboarding");define("apps/onboarding/views/create_group",["jquery","apps/onboarding/models/onboarding_source"],function(c,a){var b={};b.onboardingSource=new a();b.setupPage=function(g,e,f){b.stepID=g;b.viewData=e;if(c("#jive-socialgroup-desc").length){c("body").addClass("j-quest-active");var h;if(!f||f==="private"){if(!f){h=c("#jive-socialgroup-type-OPEN")}else{h=c("#jive-socialgroup-type-PRIVATE")}h.click();if(c.browser.msie&&+c.browser.version<=8){h.change()}setTimeout(function(){var j=c(jive.onbStep.create_group.pageTips({renderLocation:"group-type",viewData:b.viewData})),i=h.offset();c("body").prepend(j);j.css({position:"fixed",top:i.top-(j.outerHeight()/2)+"px",left:i.left-j.width()-60+"px","z-index":1002});j.addClass("j-pop");j.children("div").addClass("j-pop-main");j.children("span").css("top",((j.outerHeight()/2)-(j.children("span:first").outerHeight()/2))+"px");c(".js-about-form .j-aboutClose button").one("click",function(){b.closeTip()})},700)}else{if(f=="shared"){var d=c("#shared_checkbox");d.click();h=c("#jive-socialgroup-type-PRIVATE");h.click();if(c.browser.msie&&+c.browser.version<=8){h.change()}setTimeout(function(){var j=c(jive.onbStep.create_group.pageTips({renderLocation:"group-type",viewData:b.viewData}));var i=d.offset();c("body").prepend(j);j.css({position:"fixed",top:i.top-(j.outerHeight()/2)+"px",left:i.left-j.width()-60+"px","z-index":1002});j.addClass("j-pop");j.children("div").addClass("j-pop-main");j.children("span").css("top",((j.outerHeight()/2)-(j.children("span:first").outerHeight()/2))+"px");c(".js-about-form .j-aboutClose button").one("click",function(){b.closeTip()})},700)}}c("#jive-socialgroup-template").prepend(c(jive.onbStep.create_group.pageTips({renderLocation:"group-template",viewData:b.viewData})));c("#jive-socialgroup-name").prepend(c(jive.onbStep.create_group.pageTips({renderLocation:"group-name",viewData:b.viewData})));c("#jive-socialgroup-img").prepend(c(jive.onbStep.create_group.pageTips({renderLocation:"group-img",viewData:b.viewData})));c("input.j-btn-callout").before(c(jive.onbStep.create_group.pageTips({renderLocation:"submit",viewData:b.viewData})))}else{if(window.location.href.indexOf("/groups/")!=-1){require(["apps/shared/models/core_deferred"],function(i){i.getObject(containerType,containerID).pipe(function(k){if((!f&&(k.groupType==="OPEN"||k.groupType==="MEMBER_ONLY"))||(f==="private"&&(k.groupType==="PRIVATE"||k.groupType==="SECRET"))||(f==="shared"&&k.visibleToExternalContributors===true)){var l=c(jive.onbStep.create_group.pageTips({renderLocation:"view-group",viewData:b.viewData}));c("#jive-body").prepend(l);var j=c("body");j.on("click.postConfirmationTip",function(o){var m=c(o.target);if(!m.closest(".js-onboarding-tip").length||m.hasClass("js-back-to-onb")){j.off("click.postConfirmationTip");b.closeTip();if(m.hasClass("js-back-to-onb")){var n=jive.app.url({path:"/get-started"});window.location=n}}})}})})}}};b.closeTip=function(d){var e="div.js-onboarding-tip";if(d){e+="[data-location="+d+"]"}var f=c(e);if(f.length){f.each(function(){var h=c(this);var g=h.closest("div.js-pop").length;if(g.length){g.trigger("close");g.remove()}else{h.remove()}})}};return b});
;
var __slice=Array.prototype.slice,__bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp=Object.prototype.hasOwnProperty,__extends=function(d,b){for(var a in b){if(__hasProp.call(b,a)){d[a]=b[a]}}function c(){this.constructor=d}c.prototype=b.prototype;d.prototype=new c;d.__super__=b.prototype;return d};(function(a){var b;b=a.Wistia;if(!((a.Wistia!=null)&&(a.Wistia.wistia!=null))){a.Wistia={wistia:"1.0",extend:function(){var g,e,f,d,c;g=arguments[0],f=2<=arguments.length?__slice.call(arguments,1):[];if(!f.length){f=[g];g=this}for(d=0,c=f.length;d<c;d++){e=f[d];this.obj.eachDeep(e,__bind(function(i,j){var h;h=this.obj.get(g,j);if(this.obj.isArray(i)){if(this.obj.isEmpty(h)){return this.obj.set(g,j,[])}}else{if(this.obj.isObject(i)){if(this.obj.isEmpty(h)){return this.obj.set(g,j,{})}}else{return this.obj.set(g,j,i)}}},this))}return g},mixin:function(c,e){var d,f;for(d in e){f=e[d];if(e.hasOwnProperty(d)){c[d]=f}}},obj:{get:function(f,e,c){var d;if(typeof e==="string"){e=e.split(".")}else{e=e.slice(0,e.length)}while((f!=null)&&e.length){d=e.shift();if((f[d]===void 0||!this.isObject(f[d]))&&c){f[d]={}}f=f[d]}return f},set:function(e,d,c){var f;if(typeof d==="string"){d=d.split(".")}else{d=d.slice(0,d.length)}f=d.pop();e=this.get(e,d,true);if((e!=null)&&(this.isObject(e)||this.isArray(e))&&(f!=null)){if(c!=null){return e[f]=c}else{return delete e[f]}}else{}},unset:function(d,c){return this.set(d,c)},exists:function(d,c){return this.get(d,c)!==void 0},cast:function(c){if(c==null){return c}c=""+c;if(/^\d+?$/.test(c)){return parseInt(c,10)}else{if(/^\d*\.\d+/.test(c)){return parseFloat(c)}else{if(/^true$/i.test(c)){return true}else{if(/^false$/i.test(c)){return false}else{return c}}}}},castDeep:function(c){this.eachLeaf(c,__bind(function(d,e){if(typeof d==="string"){return this.set(c,e,this.cast(d))}},this));return c},isArray:function(c){return(c!=null)&&/^\s*function Array()/.test(c.constructor)},isObject:function(c){return(c!=null)&&/^\s*function Object()/.test(c.constructor)},isRegExp:function(c){return(c!=null)&&/^\s*function RegExp()/.test(c.constructor)},isBasicType:function(c){return(c!=null)&&(this.isRegExp(c)||/^string|number|boolean|function$/i.test(typeof c))},isEmpty:function(e){var c,d,f;if(!(e!=null)){return true}else{if(this.isArray(e)&&!e.length){return true}else{if(this.isObject(e)){c=true;for(d in e){f=e[d];c=false}return c}else{return false}}}},isEmptyDeep:function(d){var c;if(this.isEmpty(d)){return true}c=true;this.eachLeaf(d,__bind(function(){return c=false},this));return c},isSubsetDeep:function(e,d){var c;if(e===d){return true}if(((e!=null)&&!(d!=null))||(!(e!=null)&&(d!=null))){return false}c=true;this.eachLeaf(e,__bind(function(g,h){var f;f=this.get(d,h);if(g!==f){return c=false}},this));return c},equalsDeep:function(d,c){return this.isSubsetDeep(d,c)&&this.isSubsetDeep(c,d)},eachDeep:function(g,d,f){var c,e,h;if(f==null){f=[]}if(this.isBasicType(g)){d(g,f)}else{if(this.isObject(g)||this.isArray(g)){d(g,f);for(c in g){h=g[c];e=f.slice(0,f.length);e.push(c);this.eachDeep(h,d,e)}}else{d(g,f)}}},eachLeaf:function(d,c){return this.eachDeep(d,__bind(function(f,e){if(!this.isArray(f)&&!this.isObject(f)){return c(f,e)}},this))}},data:function(c,d){if(!this.obj.isArray(c)){c=c.split(".")}if(d!=null){this.obj.set(this,["_data"].concat(c),d)}return this.obj.get(this,["_data"].concat(c))},timeout:function(c,d,e){var f;if(e==null){e=1}this.clearTimeouts(c);if(!this.obj.isArray(c)){c=c.split(".")}c=["timeouts"].concat(c);if(d){f=setTimeout(__bind(function(){this.removeData(c);return d()},this),e);return this.data(c,f)}else{return this.data(c)}},clearTimeouts:function(c){var d;if(!this.obj.isArray(c)){c=c.split(".")}c=["timeouts"].concat(c);d=this.data(c);this.obj.eachLeaf(d,function(e){return clearTimeout(e)});return this.removeData(c)},removeData:function(c){return this.obj.unset(this,["_data"].concat(c))},seqId:function(e,f){var d,c,g;if(e==null){e="wistia_"}if(f==null){f=""}g=["sequence","val"];d=this.data(g)||1;c=e+d+f;this.data(g,d+1);return c},noConflict:function(){a.Wistia=b;return this},util:{elemHeight:function(d){var c;c=Wistia.detect.browser.quirks?parseInt(d.offsetHeight,10):a.getComputedStyle?parseInt(getComputedStyle(d,null).height,10):d.currentStyle?d.offsetHeight:-1;return c},elemWidth:function(c){if(Wistia.detect.browser.quirks){return parseInt(c.offsetWidth,10)}else{if(a.getComputedStyle){return parseInt(getComputedStyle(c,null).width,10)}else{if(c.currentStyle){return c.offsetWidth}else{return -1}}}},winHeight:function(){var c;return c=a.innerHeight?a.innerHeight:document.documentElement?document.documentElement.offsetHeight:document.body.offsetHeight},winWidth:function(){var c;return c=a.innerWidth?a.innerWidth:document.documentElement?document.documentElement.offsetWidth:document.body.offsetWidth}},bindable:{bind:function(c,d){if(!this._bindings){this._bindings={}}if(!this._bindings[c]){this._bindings[c]=[]}this._bindings[c].push(d);return this},unbind:function(e,h){var d,c,g,f;d=this._bindings[e];if(d){if(h){g=[];for(c=0,f=d.length;0<=f?c<f:c>f;0<=f?c++:c--){if(h!==d[c]){g.push(d[c])}}this._bindings[e]=g}else{this._bindings[e]=[]}}if(this._bindings[e]&&!this._bindings[e].length){this._bindings[e]=null;delete this._bindings[e]}return this},hasBindings:function(){var d,c,f,e;c=false;e=this._bindings;for(d in e){f=e[d];if(this._bindings.hasOwnProperty(d)){c=true}}return c},trigger:function(){var d,h,g,e,f,c;e=arguments[0],d=2<=arguments.length?__slice.call(arguments,1):[];if((h=this._bindings[e])){for(f=0,c=h.length;f<c;f++){g=h[f];if(g){g.apply(this,d)}}}return this}}}}if((b!=null)&&!(b.wistia!=null)){return Wistia.extend(b)}})(window);(function(a){a.extend({_detect:{na:navigator.userAgent,rwebkit:/(webkit)[ \/]([\w.]+)/i,ropera:/(opera)(?:.*version)?[ \/]([\w.]+)/i,rmsie:/(msie) ([\w.]+)/i,rmozilla:/(mozilla)(?:.*? rv:([\w.]+))?/i,randroid:/(android) ([^;])/i,riphone:/(iphone)/i,ripad:/(ipad)/i,browser:function(){return this.browserMatch()[1].toLowerCase()},browserVersion:function(){return this.browserMatch()[2]},browserMatch:function(){return this.na.match(this.rwebkit)||this.na.match(this.ropera)||this.na.match(this.rmsie)||this.na.match(this.rmozilla)},android:function(){var b;b=this.na.match(this.randroid);if(b==null){return false}return{version:b[2]}},iphone:function(){return this.riphone.test(this.na)},ipad:function(){return this.ripad.test(this.na)},flash:function(){var b;b=this.flashFullVersion();return{version:parseFloat(b[0]+"."+b[1]),major:parseInt(b[0],10),minor:parseInt(b[1],10),rev:parseInt(b[2],10)}},flashFullVersion:function(){var b;try{try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{b.AllowScriptAccess="always"}catch(c){return[6,0,0]}}catch(c){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1].split(",")}catch(c){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1].split(",")}}catch(c){}}return[0,0,0]},html5Video:function(){var d,c,b;d=document.createElement("video");b=false;try{if(!!d.canPlayType){b={};c='video/mp4; codecs="avc1.42E01E';b.h264=!!d.canPlayType(c+'"')||!!d.canPlayType(c+', mp4a.40.2"')}}catch(f){b={h264:false}}return b}}});a.extend({detect:{browser:{version:a._detect.browserVersion(),quirks:a._detect.browser()==="msie"&&document.compatMode==="BackCompat",old:a._detect.browser()==="msie"&&(document.compatMode==="BackCompat"||a._detect.browserVersion()<7)},android:a._detect.android(),iphone:a._detect.iphone(),ipad:a._detect.ipad(),flash:a._detect.flash(),video:a._detect.html5Video()}});a.detect.browser[a._detect.browser()]=true})(Wistia);(function(a){var c,e,d,b;e=function(f){return f.mp4hq||f.flv||f.iphone};d=function(f){return f.mp4hq||f.iphone};c=function(f){return f.iphone};b=function(f){if(f.mp4hq&&f.mp4hq.width<=1280&&f.mp4hq.height<=720){return f.mp4hq}else{return f.iphone}};a.extend({judy:{judge:function(k,g){var h,j,i,f;if(!g){g={}}i=g.plea;j=g.force;f={media:k,plea:j||i,uuid:g.uuid||a.seqId("wistia_"),asset:null,embedType:null};h=k.assets;if(j==="html5"){f.embedType="html5";f.asset=d(h)}else{if(j==="flash"){f.embedType="flash";f.asset=e(h)}else{if(j==="external"){f.embedType="external";f.asset=c(h)}else{if(a.detect.iphone){f.embedType="html5";f.asset=c(h)}else{if(a.detect.ipad){f.embedType="html5";f.asset=b(h)}else{if(a.detect.android){f.embedType="external";f.asset=c(h)}else{if(i==="html5"&&a.detect.video.h264){f.embedType="html5";f.asset=d(h)}else{if(i==="flash"&&a.detect.flash.version>=7){f.embedType="flash";f.asset=e(h)}else{if(i==="external"){f.embedType="external";f.asset=c(h)}else{if(a.detect.flash.version>=7){f.embedType="flash";f.asset=e(h)}else{if(a.detect.video.h264){f.embedType="html5";f.asset=d(h)}else{if((a.detect.browser.msie&&(a.detect.browser.version<9||a.detect.browser.quirks))||a.detect.browser.mozilla){f.embedType="flash";f.asset=e(h)}else{f.embedType="external";f.asset=e(h)}}}}}}}}}}}}return f}}})})(Wistia);(function(a){a.extend({embed:function(f,e){var d,c,b;if(!e){e={}}b=new a._embed.Video({},e);a.data(["video",b.uuid],b);d=a._embed.getContainer(f,e);if(a.detect.browser.old){d.style.width=""+(a.util.elemWidth(d))+"px";d.style.height=""+(a.util.elemHeight(d))+"px"}if(a.gridify&&!b.params.noGrid){b.grid=a.gridify(b,d)}else{if(e.wmode!=="transparent"){d.style.backgroundColor="#000000"}}c=function(k){var i,j,l,g,h;if(k.error){if(typeof console!=="undefined"&&console!==null){console.log(k.error)}return}j=a.judy.judge(k,b.params);h=a._embed.classFor(j.embedType);g=new h(j,b.options);for(i in g){l=g[i];if(i!=="uuid"){b[i]=l}}b.embed()};setTimeout(function(){var g;if(typeof f==="string"){g=f;return a.remote.media(g,function(h){return c(h)})}else{return c(f)}},100);return b},_embed:{getContainer:function(c,b){if(typeof b.container==="string"){return document.getElementById(b.container)}else{if(typeof c==="string"){return document.getElementById("wistia_"+c)}else{if(c&&c.media){return document.getElementById("wistia_"+c.media.hashedId)}else{if(c&&c.hashedId){return document.getElementById("wistia_"+c.hashedId)}else{return null}}}}},classFor:function(b){switch(b){case"html5":return a._embed.Html5Video;case"flash":return a._embed.FlashVideo;case"external":return a._embed.ExternalVideo;default:return a._embed.Video}}}})})(Wistia);(function(a){var d,g,f,b,c,e;a.extend({util:{addInlineCss:function(k,h){var j,i;j=document.createElement("style");j.id=a.seqId("wistia_","_style");j.setAttribute("type","text/css");i=document.getElementsByTagName("style");k.appendChild(j,k.nextSibling);if(j.styleSheet){j.styleSheet.cssText=h}else{j.appendChild(document.createTextNode(h))}},objToHtml:function(n){var o,m,s,q,r,t,j,i,l,k,p,h;if(/string|number|boolean/.test(typeof n)){return n.toString()}if(n instanceof Array){t="";for(l=0,p=n.length;l<p;l++){q=n[l];t+=a.util.objToHtml(q)}return t}if(typeof n!=="object"){return n.toString()}m=[];for(r in n){i=n[r];if(r==="tagName"){j=i}else{if(r==="childNodes"){s=i}else{m.push({key:r,val:i})}}}j||(j="div");t="<"+j;for(k=0,h=m.length;k<h;k++){o=m[k];t+=" "+o.key+'="'+o.val+'"'}if(/^(br|hr|img|link|meta|input)$/i.test(j)){t+=" />"}else{t+=">";if(s){if(typeof s==="string"){t+=s}else{if(typeof s==="object"){t+=a.util.objToHtml(s)}}}t+="</"+j+">"}return t}}});b=function(j){var i,h,k;h=[];for(i in j){k=j[i];h.push(""+i+"="+(encodeURIComponent(k)))}return h.join("&")};c=function(i,h){return"display:inline-block;*display:inline;height:"+h+";margin:0;padding:0;position:relative;vertical-align:top;width:"+i+";zoom:1;"};g=function(o,q){var l,j,k,p,h,n,m,i;l=o.asset;h=o.media;q=a.extend({flashPlayerUrl:null,pageUrl:null,chromeless:false,doNotTrack:false,endVideoCallback:"",controlsVisibleOnLoad:false,autoLoad:false,autoPlay:false,endVideoBehavior:"default",playButton:true,wmode:"opaque",playerColor:"",smallPlayButton:true,volumeControl:false,playbar:true,fullscreenButton:true,stillUrl:h.assets.still?h.assets.still.url:""},q);q.unbufferedSeek=l.type==="flv";q.shouldTrack=!q.doNotTrack;k={videoUrl:l.url,hdUrl:h.assets.hdflv?h.assets.hdflv.url:"",stillUrl:q.stillUrl,unbufferedSeek:l.type==="flv",controlsVisibleOnLoad:q.controlsVisibleOnLoad,autoLoad:q.autoLoad,autoPlay:q.autoPlay&&!q.suppressAutoplay,endVideoBehavior:q.endVideoBehavior,playButtonVisible:q.playButton,mediaDuration:h.duration,customColor:q.playerColor,wemail:q.trackEmail,referrer:q.pageUrl,quality:q.videoQuality,chromeless:q.chromeless?true:null,endVideoCallback:q.endVideoCallback?q.endVideoCallback:null,showVolume:q.volumeControl?true:null,showPlaybar:q.playbar===false?false:null,showPlayButton:q.smallPlayButton===false?false:null,fullscreenDisabled:q.fullscreenButton===false?true:null,trackingTransmitInterval:q.trackingTransmitInterval?q.trackingTransmitInterval:null};if(q.shouldTrack){k.embedServiceURL=h.distilleryUrl;k.accountKey=h.accountKey;k.mediaID=h.mediaKey}for(p in k){i=k[p];if(i==null){delete k[p]}}n={tagName:"object",id:o.uuid,classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",style:c("100%","100%")};if(q.wmode!=="transparent"){n.bgcolor="#000000"}m=[{tagName:"param",name:"movie",value:q.flashPlayerUrl||h.flashPlayerUrl},{tagName:"param",name:"allowfullscreen",value:"true"},{tagName:"param",name:"allowscriptaccess",value:"always"},{tagName:"param",name:"wmode",value:q.wmode},{tagName:"param",name:"flashvars",value:b(k)}];j={tagName:"embed",src:q.flashPlayerUrl||h.flashPlayerUrl,name:o.uuid,type:"application/x-shockwave-flash",allowfullscreen:"true",allowscriptaccess:"always",wmode:q.wmode,flashvars:b(k),style:c("100%","100%")};if(q.wmode!=="transparent"){j.bgcolor="#000000"}n.childNodes=m.concat(j);if(a.detect.browser.msie&&(a.detect.browser.version<9||a.detect.browser.quirks)){if(a.detect.flash.version<7){n.childNodes=[{style:"background:#666;color:#fff;height:100%;width:100%;","class":"noflash",childNodes:['Whoops! It looks like Flash isn\'t installed. Please \n<a href="http://get.adobe.com/flashplayer/" style="color:white;text-decoration:underline;" target="_blank">\ndownload and install Adobe\'s Flash Player plugin\n</a>\nto watch this video.']}]}}return a.util.objToHtml(n)};f=function(l,h){var j,m,i,k;j=l.asset;m=l.media;h=a.extend({autoLoad:true,autoPlay:false,doNotTrack:false,stillUrl:m.assets.still?m.assets.still.url:""},h);h.shouldTrack=!h.doNotTrack;k=document.createElement("video");k.style.width="100%";k.style.height="100%";k.style.position="relative";k.style.display="block";k.controls="controls";k.id=l.uuid;k.poster=h.stillUrl;k.preload="none";if(h.autoPlay&&!h.suppressAutoplay){k.autoplay="autoplay"}i=document.createElement("source");i.src=j.url.replace(/\.bin$/,"")+"/file.mp4";i.type="video/mp4";k.appendChild(i);return k};d=function(k,i){var h,j,l,m;j=k.asset;m=k.media;i=a.extend({playButton:true,stillUrl:m.assets.still?m.assets.still.url.replace(/\.bin$/,".jpg?image_play_button=1"):""},i);h={tagName:"a",href:j.url,id:k.uuid,target:"_parent",style:c("100%","100%")};l={tagName:"img",src:e(k,i),border:0,alt:"Play video",style:"height:100%;vertical-align:top;width:100%;"};h.childNodes=[l];return a.util.objToHtml(h)};e=function(i,h){var j;j=i.media;if(h.videoWidth&&h.videoHeight){if(h.playButton){return j.assets.still.url.replace(/\.bin$/,".jpg?image_play_button=1&image_crop_resized="+h.videoWidth+"x"+h.videoHeight)}else{return j.assets.still.url.replace(/\.bin$/,".jpg?image_crop_resized="+h.videoWidth+"x"+h.videoHeight)}}else{if(h.playButton){return j.assets.still.url.replace(/\.bin$/,".jpg?image_play_button=1")}else{return j.assets.still.url.replace(/\.bin$/,".jpg")}}};return a.extend({generate:{video:function(j,i,h){if(j==="flash"){return g(i,h)}else{if(j==="html5"){return f(i,h)}else{if(j==="external"){return d(i,h)}else{if(j==="stillUrl"){return e(i,h)}}}}}}})})(Wistia);(function(a){a._embed.Video=(function(){function b(e,d){var c;this.data=e;this.options=d;this.params=a.extend(this.params||{},this.options);this.params.container=a._embed.getContainer(this.data,this.options);if(this.options.platformPreference){this.params.plea=this.options.platformPreference}this.params.shouldTrack=!this.options.doNotTrack;if(this.options.playButtonVisible!=null){this.params.playButton=this.options.playButtonVisible}this.params.rawEmbed=top===self;if(this.params.videoWidth){this.params.videoWidth=parseInt(this.params.videoWidth,10)}if(this.params.videoHeight){this.params.videoHeight=parseInt(this.params.videoHeight,10)}this.params.aspectRatio=this.params.videoWidth/this.params.videoHeight;if(!this.params.playerColor){this.params.playerColor="636155"}if(!this.params.trackEmail){if((c=location.href.match(/wemail\=([^\&]+)/))!=null){this.params.trackEmail=c[1]}}if(!this.params.stillUrl){this.params.stillUrl=a.obj.exists(this.data,"media.assets.still.url")?this.data.media.assets.still.url:""}if(!this.params.uuid){this.params.uuid=a.seqId()}this.uuid=this.params.uuid}b.prototype.embed=function(){this.embedAs(this.embedType);return this.ready(__bind(function(){return this.monitorSize()},this))};b.prototype.monitorSize=function(){var d,g,f,e,c;f=__bind(function(){if(this.params.rawEmbed&&a.detect.browser.old){return this.width()}else{if(this.params.rawEmbed){return a.util.elemWidth(this.container)}else{return a.util.winWidth()}}},this);g=__bind(function(){if(this.params.rawEmbed&&a.detect.browser.old){return this.height()}else{if(this.params.rawEmbed){return a.util.elemHeight(this.container)}else{return a.util.winHeight()}}},this);c=f();e=g();d=__bind(function(){var i,h;h=f();i=g();if(c!==h){this.width(h);c=h}if(e!==i){this.height(i);e=i}a.timeout(""+this.uuid+".auto_resize",d,1000)},this);d()};b.prototype.embedAs=function(c){this.container=this.params.container;this.embedCode=a.generate.video(c,this.data,this.params);this.placeEmbed(this.embedCode);return this};b.prototype.placeEmbed=function(c){var d;d=(this.grid&&this.grid.center)||this.container;if(typeof c==="string"){d.innerHTML=c}else{d.innerHTML="";d.appendChild(c)}return this.ieSizeHack()};b.prototype.rebuildAs=function(i){var e,f,g,h,c,d;g=this.uuid;f=a.judy.judge(this.data.media,{force:i});d=a._embed.classFor(f.embedType);c=new d(f,this.options);for(e in c){h=c[e];this[e]=h}this.uuid=g;a.clearTimeouts(this.uuid);this._isReady=false;this.embed(this.params.container);return this};b.prototype.remove=function(){a.clearTimeouts(this.uuid);a._data.video[this.uuid]=null;delete a._data.video[this.uuid];this.container.innerHTML=""};b.prototype.bind=function(c,d){if(!this._bindings){this._bindings={}}if(!this._bindings[c]){this._bindings[c]=[]}this._bindings[c].push(d);return this};b.prototype.unbind=function(e,h){var d,c,g,f;d=this._bindings[e];if(d){if(h){g=[];for(c=0,f=d.length;0<=f?c<f:c>f;0<=f?c++:c--){if(h!==d[c]){g.push(d[c])}}this._bindings[e]=g}else{this._bindings[e]=[]}}if(this._bindings[e]&&!this._bindings[e].length){this._bindings[e]=null;delete this._bindings[e]}return this};b.prototype.hasBindings=function(){var d,c,f,e;c=false;e=this._bindings;for(d in e){f=e[d];if(this._bindings.hasOwnProperty(d)){c=true}}return c};b.prototype.trigger=function(){var d,h,g,e,f,c;e=arguments[0],d=2<=arguments.length?__slice.call(arguments,1):[];if((h=this._bindings[e])){for(f=0,c=h.length;f<c;f++){g=h[f];if(g){g.apply(this,d)}}}return this};b.prototype._eventLoopDuration=300;b.prototype.play=function(){return this.ready("play")};b.prototype.pause=function(){return this.ready("pause")};b.prototype.time=function(c){if(c!=null){this.ready("time",c);return this}else{}};b.prototype.state=function(){return"unknown"};b.prototype.duration=function(){return 0};b.prototype.getEventKey=function(){return null};b.prototype.volume=function(c){if(c!=null){return this.ready("volume",c)}else{return 0}};b.prototype.setPlayerColor=function(c){this.ready("setPlayerColor",c);return this};b.prototype.ready=function(){var d,h,e,g,c,f;h=arguments[0],d=2<=arguments.length?__slice.call(arguments,1):[];if(!this._readyQueue){this._readyQueue=[]}if(this._isReady){if(h){this._readyQueue.push({callback:h,args:d})}f=this._readyQueue;for(g=0,c=f.length;g<c;g++){e=f[g];if(typeof e.callback==="string"){this[e.callback].apply(this,e.args)}else{e.callback.apply(this,e.args)}}this._readyQueue=[]}else{if(h){this._readyQueue.push({callback:h,args:d})}}return this};b.prototype.width=function(d){var c;if(d!=null){d=parseInt(d,10);if(this.grid){this.container.style.width=this.grid.wrapper.style.width=""+d+"px";this.grid.center.style.width="100%";this.elem().style.width="100%";a.grid.fitHorizontal(this);a.grid.fitVertical(this)}else{this.container.style.width=""+d+"px";this.elem().style.width="100%"}return this}else{if(a.detect.browser.old){this.elem().style.position="absolute"}if(this.grid){c=a.util.elemWidth(this.grid.left)+a.util.elemWidth(this.grid.center)+a.util.elemWidth(this.grid.right)}else{c=a.util.elemWidth(this.container)}if(a.detect.browser.old){this.elem().style.position="static"}return c}};b.prototype.height=function(d){var c;if(d!=null){d=parseInt(d,10);if(this.grid){this.container.style.height=this.grid.wrapper.style.height=""+d+"px";this.grid.center.style.height="100%";this.elem().style.height="100%";a.grid.fitHorizontal(this);a.grid.fitVertical(this)}else{this.container.style.height=""+d+"px";this.elem().style.height="100%"}return this}else{if(a.detect.browser.old){this.elem().style.position="absolute"}if(this.grid){c=a.util.elemHeight(this.grid.center)+Math.max(a.util.elemHeight(this.grid.above),a.util.elemHeight(this.grid.top))+Math.max(a.util.elemHeight(this.grid.below),a.util.elemHeight(this.grid.bottom))}else{c=a.util.elemHeight(this.container)}if(a.detect.browser.old){this.elem().style.position="static"}return c}};b.prototype.videoWidth=function(d){var e,c;if(d!=null){d=parseInt(d,10);if(this.grid){this.grid.center.style.width="100%";this.grid.main.style.width=""+d+"px";this.grid.main.style.width=""+d+"px";e=a.util.elemWidth(this.grid.left)+a.util.elemWidth(this.grid.right);this.container.style.width=this.grid.wrapper.style.width=""+(d+e)+"px";a.grid.fitHorizontal(this);a.grid.fitVertical(this)}else{this.container.style.width=""+d+"px";this.elem().style.width="100%"}return this}else{if(a.detect.browser.old){this.elem().style.position="absolute"}if(this.grid){c=a.util.elemWidth(this.grid.center)}else{c=a.util.elemWidth(this.container)}if(a.detect.browser.old){this.elem().style.position="static"}return c}};b.prototype.videoHeight=function(f){var e,d,c,g;if(f!=null){f=parseInt(f,10);if(this.grid){this.grid.main.style.height=""+f+"px";this.grid.center.style.height="100%";this.grid.main.style.height=""+f+"px";g=Math.max(a.util.elemHeight(this.grid.above),a.util.elemHeight(this.grid.top));e=Math.max(a.util.elemHeight(this.grid.below),a.util.elemHeight(this.grid.bottom));d=g+e;this.container.style.height=this.grid.wrapper.style.height=""+(f+d)+"px";a.grid.fitHorizontal(this);a.grid.fitVertical(this)}else{this.container.style.height=""+f+"px";this.elem().style.height="100%"}return this}else{if(a.detect.browser.old){this.elem().style.position="absolute"}if(this.grid){c=a.util.elemHeight(this.grid.center)}else{c=a.util.elemHeight(this.container)}if(a.detect.browser.old){this.elem().style.position="static"}return c}};b.prototype.ieSizeHack=function(){if(a.detect.browser.msie&&this.elem&&this.elem()){if(this.elem().offsetLeft%2===0){this.elem().style.width=""+(this.videoWidth()+1)+"px"}else{this.elem().style.width="100%"}}};b.prototype.setEmail=function(c){return this.params.trackEmail=c};b.prototype.getVisitorKey=function(){if(this.tracker){return this.tracker.visitorKey()}else{return""}};b.prototype.getEventKey=function(){if(this.tracker){return this.tracker.eventKey()}else{return""}};return b})()})(Wistia);(function(a){a._embed.FlashVideo=(function(){__extends(b,a._embed.Video);function b(){b.__super__.constructor.apply(this,arguments)}b.prototype.embedType="flash";b.prototype.elem=function(){return document[this.data.uuid]};b.prototype.embed=function(){var c;b.__super__.embed.apply(this,arguments);this._lastTimePosition=0;a.timeout(""+this.uuid+".quick_repair",__bind(function(){if(this.isBroken()){a.clearTimeouts(this.uuid);this.repair()}},this),50);c=__bind(function(d){if(d>=50){return}if(this.elem()&&this.elem().getCurrentTime){if(!this.isBroken()){a.timeout(""+this.uuid+".ready_delay",__bind(function(){this._isReady=true;this.ready();this.listenForEvents();if(!this.tracker){return this.tracker=a.tracker(this)}},this),200)}}else{a.timeout(""+this.uuid+".ready_check",(__bind(function(){return c.call(this,d+1)},this)),200)}},this);c();return this};b.prototype.remove=function(){a.clearTimeouts(this.uuid);return b.__super__.remove.call(this)};b.prototype.listenForEvents=function(){this._fireIfChanged=__bind(function(){var d,c;if(!this.hasBindings()){return}a.timeout(""+this.uuid+".fire_if_changed",(__bind(function(){return this._fireIfChanged.call(this)},this)),this._eventLoopDuration);d=this.state();c=this.time();if(d!==this._lastState){if(d==="playing"){this.trigger("play")}else{if(d==="paused"){this.trigger("pause")}else{if(d==="ended"){this.trigger("end")}}}}if(c!==this._lastTimePosition){this.trigger("timechange",c);this._lastTimePosition=c}this._lastState=d},this);this._fireIfChanged.call(this)};b.prototype.bind=function(){var c;c=1<=arguments.length?__slice.call(arguments,0):[];b.__super__.bind.apply(this,c);if(a.timeout(""+this.uuid+".fire_if_changed")==null){if(!this._isReady){return this.ready("listenForEvents")}this.listenForEvents()}return this};b.prototype.play=function(){if(!this._isReady){return this.ready("play")}this.elem().videoPlay();return this};b.prototype.pause=function(){if(!this._isReady){return this.ready("pause")}this.elem().videoPause();return this};b.prototype.time=function(d){var g,c,f;if((d!=null)&&!this._isReady){return this.ready("time",d)}if(d!=null){f=this.state();if(f==="unknown"){this.elem().videoPlay();c=this;g=function(){c.unbind("timechange",g);return c.elem().videoSeek(d)};this.bind("timechange",g)}else{this.elem().videoSeek(d);if(f==="paused"||f==="ended"){this.pause()}}return this}else{try{return this.elem().getCurrentTime()}catch(h){return -1}}};b.prototype.state=function(){try{switch(this.elem().getCurrentState()){case 0:return"ended";case 1:return"playing";case 2:return"paused";default:return"unknown"}}catch(c){return"unknown"}};b.prototype.volume=function(d){var c;if(d&&!this._isReady){return this.ready("volume",d)}if(d!=null){this.elem().setVolume(Math.min(Math.round(d*100),100));return this}else{c=this.elem().getVolume();if(c>0){c/=100}return c}};b.prototype.duration=function(){return this.data.media.duration};b.prototype.outsideContainer=function(){var c;c=this.elem();while(c.nodeType===1){c=c.parentNode;if(c===this.container){return false}}return true};b.prototype.ctfBlocked=function(){return document.getElementById("CTFstack")&&this.outsideContainer()};b.prototype.chromeFlashBlocked=function(){var d,c;if(a.detect.browser.webkit&&this.elem()){d=this.elem().parentNode.previousSibling;if(d){c=d.childNodes[0]}return c&&c.getAttribute("style")&&c.getAttribute("style").indexOf("gofhjkjmkpinhpoiabjplobcaignabnl")!==-1}};b.prototype.ffFlashBlocked=function(){var c;c=this.container.childNodes[0];return c&&c.getAttribute("bgactive")&&c.getAttribute("bgactive").indexOf("flashblock")!==-1};b.prototype.isBlocked=function(){return a.detect.flash.version>=7&&(this.ctfBlocked()||this.chromeFlashBlocked())};b.prototype.isBroken=function(){return a.detect.flash.version<7||this.isBlocked()};b.prototype.repair=function(){if(this.isBlocked()&&a.detect.video.h264){a.clearTimeouts(this.uuid);this.rebuildAs("html5")}};b.prototype.getEventKey=function(){try{return this.elem().getEventKey()}catch(c){return""}};b.prototype.setPlayerColor=function(c){this.params.playerColor=c;if(this._isReady){this.elem().changeColor(c)}else{this.ready("setPlayerColor",c)}};b.prototype.setEmail=function(c){b.__super__.setEmail.call(this,c);return this.elem().setEmail(c)};return b})()})(Wistia);(function(a){var b;b=function(d,c,f){var e;e=__bind(function(){d.removeEventListener(c,e);return f()},this);d.addEventListener(c,e)};a._embed.Html5Video=(function(){__extends(c,a._embed.Video);function c(){c.__super__.constructor.apply(this,arguments)}c.prototype.embedType="html5";c.prototype.elem=function(){return document.getElementById(this.data.uuid)};c.prototype.embed=function(){c.__super__.embed.apply(this,arguments);if(this.hasPreRoll){this.embedExternal()}else{this.embedHtml5()}if(this.hasPostRoll){this.preloadStill();this.bind("end",__bind(function(){return this.embedExternal()},this))}return this};c.prototype.preloadStill=function(){var d;d=new Image();if(this.options.playButton){return d.src=a.generate.video("stillUrl",this.data,this.params)}else{return d.src=a.generate.video("stillUrl",this.data,this.params)}};c.prototype.embedExternal=function(){var d;if(this.tracker){this.tracker.stopMonitoring()}d=this.params.playButton;this.params.playButton=this.options.playButton;this.embedAs("external");this.params.playButton=d;a.timeout(""+this.uuid+".vid_ready",__bind(function(){this._isReady=true;return this.ready()},this));return this.elem().addEventListener("click",__bind(function(e){e.preventDefault();this.embedHtml5();return this.play()},this))};c.prototype.embedHtml5=function(){this._isReady=false;this.embedAs("external");this.embedAs("html5");if(!this.tracker){this.tracker=a.tracker(this)}if(this.params.shouldTrack){this.ready(__bind(function(){return this.tracker.monitor()},this))}this.elem().addEventListener("playing",(__bind(function(){return this.trigger("play")},this)));this.elem().addEventListener("pause",(__bind(function(){return this.trigger("pause")},this)));this.elem().addEventListener("ended",(__bind(function(){return this.trigger("end")},this)));a.timeout(""+this.uuid+".vid_ready",__bind(function(){this._isReady=true;return this.ready()},this));return this.listenForEvents()};c.prototype.remove=function(){a.clearTimeouts(this.uuid);return c.__super__.remove.call(this)};c.prototype.listenForEvents=function(){if(!this._bindings){this._bindings={}}this._fireIfChanged=__bind(function(){var d;if(!this.hasBindings()){return}a.timeout(""+this.uuid+".fire_if_changed",(__bind(function(){return this._fireIfChanged.call(this)},this)),this._eventLoopDuration);if((d=this.time())!==this._lastTimePosition){this.trigger("timechange",d);this._lastTimePosition=d}},this);this._fireIfChanged()};c.prototype.bind=function(){var d;d=1<=arguments.length?__slice.call(arguments,0):[];c.__super__.bind.apply(this,d);if(!a.timeout(""+this.uuid+".fire_if_changed")){this.listenForEvents()}return this};c.prototype.play=function(d){if(/video/i.test(this.elem().tagName)){if(!this._isReady){return this.ready("play")}this.elem().play()}else{this.embedHtml5();this.play()}return this};c.prototype.pause=function(){if(!this._isReady){return this.ready("pause")}this.elem().pause();return this};c.prototype.time=function(d){if(d&&!this._isReady){return this.ready("time",d)}if(d!=null){if(this.state()==="unknown"){b("playing",__bind(function(){b(this.elem(),"seeked",__bind(function(){return this.pause()},this));this.elem().currentTime=d},this));this.play()}else{this.elem().currentTime=d}return this}return this.elem().currentTime};c.prototype.state=function(){try{if(this.elem().ended){return"ended"}else{if(this.elem().played.length===0){return"paused"}else{if(this.elem().paused){return"paused"}else{return"playing"}}}}catch(d){return"unknown"}};c.prototype.volume=function(d){if(d&&!this._isReady){return this.ready("volume",d)}if(d!=null){this.elem().volume=d;return this}else{return this.elem().volume}};c.prototype.duration=function(){return this.data.media.duration};c.prototype.setPlayerColor=function(){};return c})()})(Wistia);(function(a){a._embed.ExternalVideo=(function(){__extends(b,a._embed.Video);function b(){b.__super__.constructor.apply(this,arguments)}b.prototype.embedType="external";b.prototype.elem=function(){return document.getElementById(this.data.uuid)};b.prototype.embed=function(c){b.__super__.embed.call(this,c);this.params.stillUrl=this.elem().childNodes[0].src;this.elem().addEventListener("click",__bind(function(){this.trigger("play");a.timeout(""+this.uuid+".fake_video_end",__bind(function(){return this.trigger("end")},this),500);return false},this));this._isReady=true;this.ready();return this};b.prototype.duration=function(){return this.data.media.duration};return b})()})(Wistia);(function(a){a.extend({tracker:function(c,b){return new a.VideoTracker(c,b||{})}});return a.VideoTracker=(function(){var i,f,h,k,d,b,g,c,e;c=g=b=e=function(){};d=false;f="";h="";i=0;k=[];function j(m,l){this.video=m;this.options=l;this.params=a.extend({transmitInterval:10000},this.options);k=[];i=new Date().getTime();this._eventKey=this.newEventKey();this._visitorKey=this.visitorKeyFromCookie()||this.newVisitorKey();this.log("initialized");if(this.video.embedType==="html5"){this.transmit()}this}j.prototype._dataPrefix=function(){var l;l='{\n"account_key":"'+this.video.data.media.accountKey+'",\n"session_id":"'+this._visitorKey+'",\n"media_id":"'+this.video.data.media.mediaKey+'",\n"event_key":"'+this._eventKey+'",\n"media_duration":'+(parseFloat(this.video.data.media.duration))+',\n"referrer":"'+(this.video.params.pageUrl||window.location.href)+'",';if(this.video.params.trackEmail){l+='"email":"'+this.video.params.trackEmail+'",'}l+='"event_details":[';return l};j.prototype._dataSuffix=function(){return"]}"};j.prototype.visitorKeyFromCookie=function(){var l,m,n;l=document.cookie.split("; ");m=0;while(m<l.length){n=l[m].split("=");if(n[0]==="__distillery"){return n[1]}m++}};j.prototype.newVisitorKey=function(){var l,m;m=(new Date().getTime()).toString()+"-"+Math.random();l=new Date();l.setTime(l.getTime()+(365*24*60*60*1000));document.cookie="__distillery="+m+"; expires="+(l.toGMTString())+"; path=/";return m};j.prototype.newEventKey=function(){if(this.video.embedType==="flash"){return this.video.getEventKey()}else{return(new Date().getTime()).toString()+"e"+Math.random()}};j.prototype.monitor=function(){c=__bind(function(){this.log("play")},this);g=__bind(function(){if(Math.abs(this.video.duration()-this.video.time())>0.3){this.log("pause")}},this);b=__bind(function(){this.log("end");this.transmit()},this);e=__bind(function(l){if(Math.abs(this.video._lastTimePosition-l)>=5){this.log("seek")}},this);d=true;this.video.bind("play",c);this.video.bind("pause",g);this.video.bind("end",b);this.video.bind("timechange",e);a.timeout(""+this.uuid+".start_tracking_timeout",__bind(function(){var l;l=__bind(function(){if(this.video.state()==="playing"){this.log("update")}this.transmit();return a.timeout(""+this.uuid+".tracking_loop",l,this.params.transmitInterval)},this);a.timeout(""+this.uuid+".tracking_loop",l,this.params.transmitInterval);this.transmit()},this),Math.random()*this.params.transmitInterval+1000);if(this.video.state()==="playing"){c()}};j.prototype.stopMonitoring=function(){d=false;this.video.unbind("play",c);this.video.unbind("pause",g);this.video.unbind("end",b);this.video.unbind("timechange",e)};j.prototype.postToDistillery=function(l){a.remote.post(""+this.video.data.media.distilleryUrl+"?data="+(encodeURIComponent(l)))};j.prototype.transmit=function(){var l;if(this.video.params.doNotTrack){return}if(k.length!==0){l=this._dataPrefix()+k.join(",")+this._dataSuffix();this.postToDistillery(a.base64.encode(l));k=[]}};j.prototype.log=function(l){var n,m;if(this.video.params.doNotTrack){return}m=this.video.time();if(m==null){if(this.video.state()==="unknown"){m=0}else{m=this.video.duration()}}m=m.toFixed(1);n=(new Date().getTime())-i;k.push('{\n"key":"'+l+'",\n"value":'+m+',\n"timeDelta":'+n+"\n}")};j.prototype.visitorKey=function(){return this._visitorKey};j.prototype.eventKey=function(){return this._eventKey};return j})()})(Wistia);Wistia.extend({base64:{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){var k,h,f,j,g,e,d,b,a;b=0;a="";while(b<c.length){k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64}else{if(isNaN(f)){d=64}}a=a+this._keyStr.charAt(j)+this._keyStr.charAt(g)+this._keyStr.charAt(e)+this._keyStr.charAt(d)}return a}}});(function(a){return a.extend({constant:{embedHost:"fast.wistia.com"},remote:{post:function(c){var b;b=window.XDomainRequest?new window.XDomainRequest():new window.XMLHttpRequest();b.open("POST",c,true);b.send()},media:function(b,d){var c;if(a.data(["remote-media",b])){a.timeout("remote-media."+b+"."+(a.seqId()),function(){return d(a.data(["remote-media",b]))})}else{c=""+window.location.protocol+"//"+a.constant.embedHost+"/embed/medias/"+b+".json";this.fetch(c,{},function(e){if(e.error){a.data(["remote-media",b],e);d(e)}else{a.data(["remote-media",b],e.media);d(e.media)}},{onerror:function(){if(window.console){console.log("Timed out fetching "+c)}},timeout:10000})}},playlist:function(c,d){var b;if(a.data(["remote-playlist",c])){a.timeout("remote-playlist."+c+"."+(a.seqId()),function(){return d(a.data(["remote-playlist",c]))})}else{b=""+window.location.protocol+"//"+a.constant.embedHost+"/embed/playlists/"+c+".json";this.fetch(b,{},function(e){a.data(["remote-playlist",c],e);d(e)},{onerror:function(){if(window.console){console.log("Timed out fetching "+b)}},timeout:10000})}},fetch:function(c,e,f,b){var d;if(!b.timeout){b.timeout=5000}if(!b.onerror){b.onerror=(function(){})}d=setTimeout(b.onerror,b.timeout);a.jsonp.get(c,e,function(g){clearTimeout(d);if(f){f(g)}})}}})})(Wistia);if(!Wistia.jsonp){Wistia.jsonp=(function(){var a=0,c,f,b,d=this;function e(j){var i=document.createElement("script"),h=false;i.src=j;i.async=true;i.onload=i.onreadystatechange=function(){if(!h&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){h=true;i.onload=i.onreadystatechange=null;if(i&&i.parentNode){i.parentNode.removeChild(i)}}};if(!c){c=document.getElementsByTagName("head")[0]}c.appendChild(i)}function g(h,j,k){f="?";j=j||{};for(b in j){if(j.hasOwnProperty(b)){f+=encodeURIComponent(b)+"="+encodeURIComponent(j[b])+"&"}}var i="json"+(++a);d[i]=function(l){k(l);try{delete d[i]}catch(m){}d[i]=null};e(h+f+"callback="+i);return i}return{get:g}}())}(function(a){if(!a.Plugin){a.Plugin={}}a.Plugin.Base=(function(){function b(){this.pluginName="plugin";this}b.prototype.instances=function(){return a.data(["plugins",this.pluginName,this.video.uuid])};b.prototype.register=function(c){this.video.plugins[this.uuid]=c;return a.data(["plugins",this.pluginName,this.video.uuid,this.uuid],c)};b.prototype.remove=function(){this.video.plugins[this.uuid]=null;a.removeData(["plugins",this.pluginName,this.video.uuid,this.uuid]);delete this.video.plugins[this.uuid];if(this.video.grid){a.grid.fitHorizontal(this.video);return a.grid.fitVertical(this.video)}};b.prototype.fit=function(){};b.prototype.init=function(c,d){if(c.plugins==null){c.plugins={}}this.video=c;this.options=d||{};this.params=a.extend({},d||{});return this.uuid=this.params.uuid||a.seqId("wistia_","_plugin")};return b})();return a.extend({plugin:{init:function(g,f,e){var c,b,d;d=g.charAt(0).toUpperCase()+g.substr(1);b=a.Plugin[d];c=new b();c.init(f,e);return c},instance:function(c,b,d){return a.data(["plugins",c,b.uuid,d])},remove:function(d,b,e){var c;if((c=this.instance(d,b,e))!=null){c.remove()}},isActive:function(c,b,d){return !!this.instance(c,b,d)}}})})(Wistia);
;
jive.namespace("Onboarding");define("apps/onboarding/onboarding_main",["jquery","jive/dispatcher"],function(b,a){return jive.oo.Class.extend(function(c){this.init=function(e){var d=this;d.trialVideos=[];d.resourcesInitialized=false;d.trialBean=e.trialBean;d.instanceInfoView=e.instanceInfoView;d.trialAdminData=e.trialAdminData;d.instanceURL=e.instanceURL;d.daysRemaining=e.daysRemaining;d.trialProgress=e.trialProgress;d.communityName=e.communityName;var f=b.deparam.querystring();this.initActiveQuestID();if(f.fromQ){if(f.fromQ=="WorkBetterAsATeamQuest"||f.fromQ=="HaveFewerMeetingsQuest"||f.fromQ=="LessEmailQuest"||f.fromQ=="StayInTouchQuest"||f.fromQ=="CommunityFeedbackQuest"){d.initTrialResources(false,f)}else{require(["apps/onboarding/models/onboarding_source"],function(g){d.onboardingSource=new g();d.onboardingSource.getStepData(f.fromQ).addCallback(function(h){if(h.type){require(["apps/onboarding/views/"+h.type],function(i){if(i&&i.setupPage){i.setupPage(f.fromQ,h)}})}})})}}if(d.trialBean.trialProgress.questCompletionTips.userTips.length){d.showProgressTips(d.trialBean.trialProgress.questCompletionTips)}};this.initTrialResources=function(f,e){var d=this;require(["apps/trial/views/trial_view","apps/trial/views/trial_tip_helper","apps/trial/models/trial_panel_source","apps/onboarding/models/onboarding_source","apps/shared/controllers/switchboard","apps/metric/models/metric_source"],function(l,k,j,h,g,i){d.onboardingSource=new h();d.metricSource=new i();d.trialSource=new j();d.trialView=new l();d.trialView.addListener("saveLastViewedQuest",function(m){d.trialSource.saveLastViewedQuest(m)}).addListener("saveProgress",function(m){d.trialSource.saveProgress(m)}).addListener("clearUserTipQueue",function(){d.trialSource.clearUserTipQueue()}).addListener("metric",function(n,m){d.metricSource.metric({metricName:n,metricValues:m})});d.trialTipHelper=new k({communityName:d.instanceInfoView.rootCommunityName});d.trialTipHelper.addListener("shouldSetupPage",function(m,n,o){d.trialSource.getShouldShowTips(m,n).addCallback(function(p){if(p){d.activeQuestID=m;d.activeQuestStep=n}else{d.initActiveQuestID()}o.emitSuccess(p)})}).addListener("clearActiveQuest",function(){d.initActiveQuestID()}).addListener("getAllQuestProgressData",function(m){d.trialSource.get("panel").addCallback(function(n){m.emitSuccess(n)})});a.listen("trial.updatePercentComplete",function(){d.onboardingSource.initializeView().addCallback(function(m){g.emit("onboarding.state.update",m)});d.trialSource.get("percentComplete").addCallback(function(m){if(m.questCompletionTips.userTips.length){d.showProgressTips(m.questCompletionTips)}})});if(f){d.trialView.postRender()}d.resourcesInitialized=true})};this.postPageRender=function(f){var e=this,d=f.valueCaseName,h=f.videoID,g=function(n){var l=b(jive.onboarding.onboardingProgress({percentComplete:n.percentComplete}));b("#j-onboarding-progress").replaceWith(l);if(n.percentComplete==100){b("#j-onboarding .j-onb-quest-header .js-hide-onb").show()}for(var p=0,q=n.quests.length;p<q;p++){for(var o=0,m=n.quests[p].steps.length;o<m;o++){if(n.quests[p].steps[o].state==="completed"){var k=b('#j-onboarding .js-quest-step a[data-id="'+n.quests[p].steps[o].name+'"]');if(!k.hasClass("completed")){k.addClass("completed");k.prepend(jive.onbStep.startStep.completedAriaLabel())}}}}};if(d=="trial"){if(!e.resourcesInitialized){e.initTrialResources(true,{},false)}else{e.trialView.postRender()}e.$questBodies=b("div.collaboration");e.$questHeaders=b("a.js-quest-group-header");b(".js-quest-group-header").click(function(i){i.preventDefault();var j=b(this);if(!j.hasClass("j-active")){e.$questHeaders.removeClass("j-active font-color-normal");j.addClass("j-active font-color-normal");e.$questBodies.hide();e.$questBodies.filter("[data-id="+j.data("id")+"]").show();e.onboardingSource.saveLastViewedQuest(""+j.data("id"))}})}else{if(h!="video"){e.video=Wistia.embed(h,{videoWidth:"570",videoHeight:"365",controlsVisibleOnLoad:true})}}b("div.js-trial-tip, div.js-onboarding-tip").remove();jive.switchboard.removeListener("onboarding.state.update",g).addListener("onboarding.state.update",g);b("#j-onboarding").off().on("click",".js-do-step",function(l){l.preventDefault();var j=b(this),i=j.data("type"),k=j.data("id");require(["apps/onboarding/views/"+i],function(m){m.startStep(k,e.instanceInfoView,j)})}).on("click",".js-hide-onb",function(i){i.preventDefault();require(["apps/onboarding/models/onboarding_source"],function(j){e.onboardingSource=new j();e.onboardingSource.setOnboardingVisible(false).addCallback(function(){jive.HomeNav.GlobalController.hideView("onboarding");var k=b(jive.onboarding.postHideViewTip());k.popover({context:b("#j-satNav"),container:b(".js-satellite-nav-container")});$j("body").one("click",function(){k.trigger("close")})})})}).on("click",".js-onb-show-welcome-modal",function(i){i.preventDefault();jive.HomeNav.GlobalController.showOnboardingIntroModal(false)})};this.showProgressTips=function(h){var d=this,e=null;if(h.userTips.length){$j("div.js-trial-tip").remove();for(var g=0,f=h.questCompletionData.length;g<f;g++){if(!h.questCompletionData[g].completed){e=h.questCompletionData[g].questName;break}}}for(g=0,tipsLength=h.userTips.length;g<tipsLength;g++){if(h.userTips[g]!="jive.trial.quests.fewerMeetings.questReadyToComplete"||tipsLength==1){var j=$j(jive.trial.renderProgressTip({template:h.userTips[g],nextQuestID:e}));j.delegate("#quest-complete-close","click",function(i){i.preventDefault();$j("div.js-trial-tip").remove()});$j("body").prepend(j);require(["apps/trial/models/trial_panel_source"],function(i){d.trialSource=new i();d.trialSource.clearUserTipQueue()})}}$j("html, body").animate({scrollTop:0},"fast")};c.initActiveQuestID=function(){this.activeQuestID="";this.activeQuestStep=null};this.getActiveQuestAndStep=function(){return{activeQuestID:this.activeQuestID,activeQuestStep:this.activeQuestStep}};this.tearDownView=function(){if(this.trialView){this.trialView.tearDown()}if(this.video&&this.video._isReady){this.video.remove()}}})});
;
