window.mc4wpAjaxForms=function(){function a(){return void 0===k.fn.ajaxForm?void l.log("MailChimp for WP: jquery-forms.js is not loaded properly. Not activating AJAX."):(j=k(".mc4wp-ajax form"),j.ajaxForm({data:{action:"mc4wp_submit_form"},dataType:"json",url:mc4wp_vars.ajaxurl,delegation:!0,success:e,error:f,beforeSubmit:c}),void(mc4wp_vars.ajaxloader.enabled&&j.find("input").bind("focus.mc4wp",b)))}function b(){k(".mc4wp-ajax-loader").css({"vertical-align":"middle",height:"16px",width:"16px",border:0,background:'url("'+mc4wp_vars.ajaxloader.imgurl+'") no-repeat center center'}),j.find("input").unbind("focus.mc4wp")}function c(a,b){var c,e;i=b.parent(".mc4wp-form"),i.removeClass("mc4wp-form-success"),i.removeClass("mc4wp-form-error"),i.find(".mc4wp-alert").remove(),e=b.find('input[type="submit"], button[type="submit"]').first(),e.attr("disabled","disabled"),$loadingText=e.data("loading-text"),$loadingText?(e.data("original-text",d(e)),d(e,$loadingText)):(c=i.find(".mc4wp-ajax-loader"),c.insertAfter(e),c.show().css("display","inline-block"),parseInt(c.css("margin-left"))<5&&c.css("margin-left","5px"));var f=k.Event("mc4wp.ajax.before");f.form=i,k(document).trigger(f)}function d(a,b){if(a.is("button")){var c=a.text();void 0!==b&&a.text(b)}else{var c=a.val();void 0!==b&&a.val(b)}return c}function e(a){var b=k.Event("mc4wp.ajax.after");b.form=i,b.response=a,k(document).trigger(b),i.find(".mc4wp-ajax-loader").hide(),i.find(".mc4wp-response").html(a.data.html),$submitButton=i.find('input[type="submit"], button[type="submit"]').first();var c=$submitButton.data("original-text");c&&d($submitButton,c),$submitButton.removeAttr("disabled"),a.success?g(a.data.redirect,a.data.hide_form,a.data.data):h(a.data.error,a.data.data)}function f(a){l.log(a)}function g(a,b,c){var d=i.find("form");i.addClass("mc4wp-form-success"),d.trigger("reset"),a&&""!=a.url&&window.setTimeout(function(){window.location.replace(a.url)},a.delay),b&&d.hide();var e=k.Event("mc4wp.success");e.form=i,e.formData=c,k(document).trigger(e)}function h(a,b){i.addClass("mc4wp-form-error");var c=k.Event("mc4wp.error");c.form=i,c.formData=b,c.error=a,k(document).trigger(c)}var i,j,k=window.jQuery,l=window.console||{log:function(){}};return{init:function(){a()}}}(),jQuery(document).ready(function(){mc4wpAjaxForms.init()});