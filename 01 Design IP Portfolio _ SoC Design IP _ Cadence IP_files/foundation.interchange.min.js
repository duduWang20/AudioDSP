(function(c,b,a,d){Foundation.libs.interchange={name:"interchange",version:"5.1.1",cache:{},images_loaded:false,nodes_loaded:false,settings:{load_attr:"interchange",named_queries:{"default":"only screen",small:Foundation.media_queries.small,medium:Foundation.media_queries.medium,large:Foundation.media_queries.large,xlarge:Foundation.media_queries.xlarge,xxlarge:Foundation.media_queries.xxlarge,landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx)"},directives:{replace:function(g,i,e){if(/IMG/.test(g[0].nodeName)){var f=g[0].src;if(new RegExp(i,"i").test(f)){return}g[0].src=i;return e(g[0].src)}var h=g.data(this.data_attr+"-last-path");if(h==i){return}return c.get(i,function(j){g.html(j);g.data(this.data_attr+"-last-path",i);e()})}}},init:function(f,g,e){Foundation.inherit(this,"throttle random_str");this.data_attr=this.set_data_attr();c.extend(true,this.settings,g,e);this.bindings(g,e);this.load("images");this.load("nodes")},events:function(){var e=this;c(b).off(".interchange").on("resize.fndtn.interchange",e.throttle(function(){e.resize()},50));return this},resize:function(){var e=this.cache;if(!this.images_loaded||!this.nodes_loaded){setTimeout(c.proxy(this.resize,this),50);return}for(var f in e){if(e.hasOwnProperty(f)){var g=this.results(f,e[f]);if(g){this.settings.directives[g.scenario[1]].call(this,g.el,g.scenario[0],function(){if(arguments[0] instanceof Array){var h=arguments[0]}else{var h=Array.prototype.slice.call(arguments,0)}g.el.trigger(g.scenario[1],h)})}}}},results:function(g,j){var h=j.length;if(h>0){var f=this.S("["+this.add_namespace("data-uuid")+'="'+g+'"]');while(h--){var e,i=j[h][2];if(this.settings.named_queries.hasOwnProperty(i)){e=matchMedia(this.settings.named_queries[i])}else{e=matchMedia(i)}if(e.matches){return{el:f,scenario:j[h]}}}}return false},load:function(f,e){if(typeof this["cached_"+f]==="undefined"||e){this["update_"+f]()}return this["cached_"+f]},update_images:function(){var e=this.S("img["+this.data_attr+"]"),j=e.length,h=j,g=0,f=this.data_attr;this.cache={};this.cached_images=[];this.images_loaded=(j===0);while(h--){g++;if(e[h]){var k=e[h].getAttribute(f)||"";if(k.length>0){this.cached_images.push(e[h])}}if(g===j){this.images_loaded=true;this.enhance("images")}}return this},update_nodes:function(){var e=this.S("["+this.data_attr+"]").not("img"),j=e.length,h=j,g=0,f=this.data_attr;this.cached_nodes=[];this.nodes_loaded=(j===0);while(h--){g++;var k=e[h].getAttribute(f)||"";if(k.length>0){this.cached_nodes.push(e[h])}if(g===j){this.nodes_loaded=true;this.enhance("nodes")}}return this},enhance:function(f){var e=this["cached_"+f].length;while(e--){this.object(c(this["cached_"+f][e]))}return c(b).trigger("resize")},parse_params:function(f,g,e){return[this.trim(f),this.convert_directive(g),this.trim(e)]},convert_directive:function(f){var e=this.trim(f);if(e.length>0){return e}return"replace"},object:function(h){var j=this.parse_data_attr(h),l=[],g=j.length;if(g>0){while(g--){var f=j[g].split(/\((.*?)(\))$/);if(f.length>1){var e=f[0].split(","),k=this.parse_params(e[0],e[1],f[1]);l.push(k)}}}return this.store(h,l)},uuid:function(g){var h=g||"-",e=this;function f(){return e.random_str(6)}return(f()+f()+h+f()+h+f()+h+f()+h+f()+f()+f())},store:function(f,h){var e=this.uuid(),g=f.data(this.add_namespace("uuid",true));if(this.cache[g]){return this.cache[g]}f.attr(this.add_namespace("data-uuid"),e);return this.cache[e]=h},trim:function(e){if(typeof e==="string"){return c.trim(e)}return e},set_data_attr:function(e){if(e){if(this.namespace.length>0){return this.namespace+"-"+this.settings.load_attr}return this.settings.load_attr}if(this.namespace.length>0){return"data-"+this.namespace+"-"+this.settings.load_attr}return"data-"+this.settings.load_attr},parse_data_attr:function(h){var f=h.attr(this.attr_name()).split(/\[(.*?)\]/),g=f.length,e=[];while(g--){if(f[g].replace(/[\W\d]+/,"").length>4){e.push(f[g])}}return e},reflow:function(){this.load("images",true);this.load("nodes",true)}}}(jQuery,this,this.document));